var Q0=Object.defineProperty;var d=(t,e)=>Q0(t,"name",{value:e,configurable:!0});import{t as eg,W as Yu,i as tg,d as ur,e as ng,f as Ni,h as Xu,j as sg,k as ag,s as ig,l as og,m as rg,n as lg,o as Ju,p as Pa,g as cr,c as ht,r as pe,q as b,T as ln,F as Fi,H as dr,I as Zu,u as Qu,v as pr,w as ug,R as at,x as cg,y as ec,z as dg,M as pg,A as hg,B as fg,C as mg,D as gg,E as bg,G as vg,J as qt,K as un,L as is,N as yg,O as Gn,P as At,Q as mt,S as tc,U as os,V as Ws,X as hr,Y as fr,Z as Ps,_ as rs,$ as $i,a0 as Ri,a1 as qi,a2 as Bi,a3 as Tn,a4 as xg,a5 as nc,a6 as wg,a7 as Sg,a8 as Ks,a9 as Da,aa as Cg,ab as mr,ac as Eg,ad as Ag,ae as _g,af as kg,ag as Pg,ah as Dg,ai as Zt,aj as sc,ak as Ig,al as Lg,am as Ui,an as ac,ao as Tg,ap as zi,aq as Mg,ar as Ia,as as Og,at as gr,au as Bt,av as br,aw as jg,ax as ic,ay as Ys,az as oc,aA as Ut,aB as La,aC as rc,aD as Xe,aE as Mn,aF as ls,aG as Vn,aH as vr,aI as Ta,aJ as _n,aK as yr,aL as Ng,aM as xr,aN as Fg,aO as lc,aP as uc,aQ as cc,aR as $g,aS as dc,aT as Rg,aU as qg,aV as pc,aW as Bg,aX as Ug,aY as zg,aZ as Hg,a_ as Gg,a$ as Vg,b0 as Wg,b1 as Kg,b2 as Yg,b3 as Xg,b4 as Jg,b5 as hc,b6 as Zg,b7 as Qg,b8 as eb,b9 as tb,ba as nb,bb as sb,bc as ab,bd as us,be as ib,bf as On,bg as Ma,bh as fc,bi as ob,bj as mc,bk as rb,bl as lb,bm as ub,bn as cb,bo as db,bp as pb,bq as hb,br as fb,bs as mb,bt as Oa,bu as je,bv as gb,bw as bb,bx as _t,by as lt,bz as ja,bA as Na,bB as Wn,bC as Ds,bD as Xs,bE as Is,bF as Ls,bG as Fa,bH as vb,bI as Nt,bJ as yb,bK as Yt,bL as wr,bM as xb,bN as gc,bO as wb,bP as bc,bQ as vc,bR as kn,bS as cs,bT as Sb,bU as Ts,bV as jn,bW as Hi,bX as Sr,bY as Cr,bZ as Er,b_ as Cb,b$ as Ar,c0 as Eb,c1 as Ab,c2 as _r,c3 as Gi,c4 as Vi,c5 as yc,c6 as _b,c7 as xc,c8 as kb,c9 as Wi,ca as Pb,cb as wc,cc as Db,cd as Ib,ce as Lb,cf as $a,cg as Tb,ch as Ms,ci as kr,cj as Os,ck as Js,cl as Mb,cm as Ob,cn as jb,co as Ki,cp as Sc,cq as Nb,cr as Yi,cs as Fb,ct as $b,cu as Xi,cv as Cc,cw as Rb,cx as qb,cy as Ec,cz as Bb,cA as Ub,cB as zb,cC as Hb,cD as Gb,cE as Vb,cF as Wb,cG as Kb,cH as Yb}from"./app.bundle.dev.js";function Ac(t){var e=eg(t),n=e%1;return e===e?n?e-n:e:0}d(Ac,"toInteger");var Ji=Yu&&new Yu,_c=Ji?function(t,e){return Ji.set(t,e),t}:tg;function Ra(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=ur(t.prototype),s=t.apply(n,e);return ng(s)?s:n}}d(Ra,"createCtor");var Xb=1;function Jb(t,e,n){var s=e&Xb,a=Ra(t);function i(){var r=this&&this!==Ni&&this instanceof i?a:t;return r.apply(s?n:this,arguments)}return d(i,"wrapper"),i}d(Jb,"createBind");var Zb=Math.max;function kc(t,e,n,s){for(var a=-1,i=t.length,r=n.length,o=-1,c=e.length,l=Zb(i-r,0),u=Array(c+l),p=!s;++o<c;)u[o]=e[o];for(;++a<r;)(p||a<i)&&(u[n[a]]=t[a]);for(;l--;)u[o++]=t[a++];return u}d(kc,"composeArgs");var Qb=Math.max;function Pc(t,e,n,s){for(var a=-1,i=t.length,r=-1,o=n.length,c=-1,l=e.length,u=Qb(i-o,0),p=Array(u+l),g=!s;++a<u;)p[a]=t[a];for(var y=a;++c<l;)p[y+c]=e[c];for(;++r<o;)(g||a<i)&&(p[y+n[r]]=t[a++]);return p}d(Pc,"composeArgsRight");function ev(t,e){for(var n=t.length,s=0;n--;)t[n]===e&&++s;return s}d(ev,"countHolders");function Pr(){}d(Pr,"baseLodash");var tv=4294967295;function Zs(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=tv,this.__views__=[]}d(Zs,"LazyWrapper"),Zs.prototype=ur(Pr.prototype),Zs.prototype.constructor=Zs;function nv(){}d(nv,"noop");var Dc=Ji?function(t){return Ji.get(t)}:nv,Ic={},sv=Object.prototype,av=sv.hasOwnProperty;function iv(t){for(var e=t.name+"",n=Ic[e],s=av.call(Ic,e)?n.length:0;s--;){var a=n[s],i=a.func;if(i==null||i==t)return a.name}return e}d(iv,"getFuncName");function Qs(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}d(Qs,"LodashWrapper"),Qs.prototype=ur(Pr.prototype),Qs.prototype.constructor=Qs;function ov(t){if(t instanceof Zs)return t.clone();var e=new Qs(t.__wrapped__,t.__chain__);return e.__actions__=Xu(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}d(ov,"wrapperClone");var rv=Object.prototype,lv=rv.hasOwnProperty;function Zi(t){if(sg(t)&&!ag(t)&&!(t instanceof Zs)){if(t instanceof Qs)return t;if(lv.call(t,"__wrapped__"))return ov(t)}return new Qs(t)}d(Zi,"lodash"),Zi.prototype=Pr.prototype,Zi.prototype.constructor=Zi;function uv(t){var e=iv(t),n=Zi[e];if(typeof n!="function"||!(e in Zs.prototype))return!1;if(t===n)return!0;var s=Dc(n);return!!s&&t===s[0]}d(uv,"isLaziable");var Lc=ig(_c),cv=/\{\n\/\* \[wrapped with (.+)\] \*/,dv=/,? & /;function pv(t){var e=t.match(cv);return e?e[1].split(dv):[]}d(pv,"getWrapDetails");var hv=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function fv(t,e){var n=e.length;if(!n)return t;var s=n-1;return e[s]=(n>1?"& ":"")+e[s],e=e.join(n>2?", ":" "),t.replace(hv,`{
/* [wrapped with `+e+`] */
`)}d(fv,"insertWrapDetails");function mv(t,e,n,s){for(var a=t.length,i=n+(s?1:-1);s?i--:++i<a;)if(e(t[i],i,t))return i;return-1}d(mv,"baseFindIndex");function gv(t){return t!==t}d(gv,"baseIsNaN");function bv(t,e,n){for(var s=n-1,a=t.length;++s<a;)if(t[s]===e)return s;return-1}d(bv,"strictIndexOf");function vv(t,e,n){return e===e?bv(t,e,n):mv(t,gv,n)}d(vv,"baseIndexOf");function yv(t,e){var n=t==null?0:t.length;return!!n&&vv(t,e,0)>-1}d(yv,"arrayIncludes");var xv=1,wv=2,Sv=8,Cv=16,Ev=32,Av=64,_v=128,kv=256,Pv=512,Dv=[["ary",_v],["bind",xv],["bindKey",wv],["curry",Sv],["curryRight",Cv],["flip",Pv],["partial",Ev],["partialRight",Av],["rearg",kv]];function Iv(t,e){return og(Dv,function(n){var s="_."+n[0];e&n[1]&&!yv(t,s)&&t.push(s)}),t.sort()}d(Iv,"updateWrapDetails");function Tc(t,e,n){var s=e+"";return rg(t,fv(s,Iv(pv(s),n)))}d(Tc,"setWrapToString");var Lv=1,Tv=2,Mv=4,Ov=8,Mc=32,Oc=64;function jc(t,e,n,s,a,i,r,o,c,l){var u=e&Ov,p=u?r:void 0,g=u?void 0:r,y=u?i:void 0,w=u?void 0:i;e|=u?Mc:Oc,e&=~(u?Oc:Mc),e&Mv||(e&=~(Lv|Tv));var S=[t,e,a,y,p,w,g,o,c,l],m=n.apply(void 0,S);return uv(t)&&Lc(m,S),m.placeholder=s,Tc(m,t,e)}d(jc,"createRecurry");function Nc(t){var e=t;return e.placeholder}d(Nc,"getHolder");var jv=Math.min;function Nv(t,e){for(var n=t.length,s=jv(e.length,n),a=Xu(t);s--;){var i=e[s];t[s]=lg(i,n)?a[i]:void 0}return t}d(Nv,"reorder");var Fc="__lodash_placeholder__";function Qi(t,e){for(var n=-1,s=t.length,a=0,i=[];++n<s;){var r=t[n];(r===e||r===Fc)&&(t[n]=Fc,i[a++]=n)}return i}d(Qi,"replaceHolders");var Fv=1,$v=2,Rv=8,qv=16,Bv=128,Uv=512;function Dr(t,e,n,s,a,i,r,o,c,l){var u=e&Bv,p=e&Fv,g=e&$v,y=e&(Rv|qv),w=e&Uv,S=g?void 0:Ra(t);function m(){for(var D=arguments.length,A=Array(D),j=D;j--;)A[j]=arguments[j];if(y)var L=Nc(m),k=ev(A,L);if(s&&(A=kc(A,s,a,y)),i&&(A=Pc(A,i,r,y)),D-=k,y&&D<l){var I=Qi(A,L);return jc(t,e,Dr,m.placeholder,n,A,I,o,c,l-D)}var v=p?n:this,T=g?v[t]:t;return D=A.length,o?A=Nv(A,o):w&&D>1&&A.reverse(),u&&c<D&&(A.length=c),this&&this!==Ni&&this instanceof m&&(T=S||Ra(T)),T.apply(v,A)}return d(m,"wrapper"),m}d(Dr,"createHybrid");function zv(t,e,n){var s=Ra(t);function a(){for(var i=arguments.length,r=Array(i),o=i,c=Nc(a);o--;)r[o]=arguments[o];var l=i<3&&r[0]!==c&&r[i-1]!==c?[]:Qi(r,c);if(i-=l.length,i<n)return jc(t,e,Dr,a.placeholder,void 0,r,l,void 0,void 0,n-i);var u=this&&this!==Ni&&this instanceof a?s:t;return Ju(u,this,r)}return d(a,"wrapper"),a}d(zv,"createCurry");var Hv=1;function Gv(t,e,n,s){var a=e&Hv,i=Ra(t);function r(){for(var o=-1,c=arguments.length,l=-1,u=s.length,p=Array(u+c),g=this&&this!==Ni&&this instanceof r?i:t;++l<u;)p[l]=s[l];for(;c--;)p[l++]=arguments[++o];return Ju(g,a?n:this,p)}return d(r,"wrapper"),r}d(Gv,"createPartial");var $c="__lodash_placeholder__",Ir=1,Vv=2,Wv=4,Rc=8,qa=128,qc=256,Kv=Math.min;function Yv(t,e){var n=t[1],s=e[1],a=n|s,i=a<(Ir|Vv|qa),r=s==qa&&n==Rc||s==qa&&n==qc&&t[7].length<=e[8]||s==(qa|qc)&&e[7].length<=e[8]&&n==Rc;if(!(i||r))return t;s&Ir&&(t[2]=e[2],a|=n&Ir?0:Wv);var o=e[3];if(o){var c=t[3];t[3]=c?kc(c,o,e[4]):o,t[4]=c?Qi(t[3],$c):e[4]}return o=e[5],o&&(c=t[5],t[5]=c?Pc(c,o,e[6]):o,t[6]=c?Qi(t[5],$c):e[6]),o=e[7],o&&(t[7]=o),s&qa&&(t[8]=t[8]==null?e[8]:Kv(t[8],e[8])),t[9]==null&&(t[9]=e[9]),t[0]=e[0],t[1]=a,t}d(Yv,"mergeData");var Xv="Expected a function",Bc=1,Jv=2,Lr=8,Tr=16,Mr=32,Uc=64,zc=Math.max;function Zv(t,e,n,s,a,i,r,o){var c=e&Jv;if(!c&&typeof t!="function")throw new TypeError(Xv);var l=s?s.length:0;if(l||(e&=~(Mr|Uc),s=a=void 0),r=r===void 0?r:zc(Ac(r),0),o=o===void 0?o:Ac(o),l-=a?a.length:0,e&Uc){var u=s,p=a;s=a=void 0}var g=c?void 0:Dc(t),y=[t,e,n,s,a,u,p,i,r,o];if(g&&Yv(y,g),t=y[0],e=y[1],n=y[2],s=y[3],a=y[4],o=y[9]=y[9]===void 0?c?0:t.length:zc(y[9]-l,0),!o&&e&(Lr|Tr)&&(e&=~(Lr|Tr)),!e||e==Bc)var w=Jb(t,e,n);else e==Lr||e==Tr?w=zv(t,e,o):(e==Mr||e==(Bc|Mr))&&!a.length?w=Gv(t,e,n,s):w=Dr.apply(void 0,y);var S=g?_c:Lc;return Tc(S(w,y),t,e)}d(Zv,"createWrap");var Qv=8;function eo(t,e,n){e=n?void 0:e;var s=Zv(t,Qv,void 0,void 0,void 0,void 0,void 0,e);return s.placeholder=eo.placeholder,s}d(eo,"curry"),eo.placeholder={};/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ey=Pa("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ty=Pa("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hc=Pa("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ny=Pa("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sy=Pa("Tablet",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["line",{x1:"12",x2:"12.01",y1:"18",y2:"18",key:"1dp563"}]]);var ay=Object.defineProperty,iy=d((t,e)=>ay(t,"name",{value:e,configurable:!0}),"a$w");const Gc=class{static{d(this,"s")}static send(e,n){let s=typeof e=="string"?e:JSON.stringify(e);const a=n.includes("all");(a||n.includes("chatbot"))&&this.sendChatbotMsg(s),(a||n.includes("swagger"))&&this.sendSwaggerMsg(s)}static sendChatbotMsg(e){const n=document.querySelector("#chatbot-iframe");n&&n.contentWindow.postMessage(e,"*")}static sendSwaggerMsg(e){const n=document.querySelector("#swagger-iframe");n&&n.contentWindow.postMessage(e,"*")}};iy(Gc,"EmbodimentRPCManager");let Ba=Gc;var to={exports:{}};to.exports,function(t,e){(function(n,s){t.exports=s()})(ht,function(){function n(f,h){var x=Object.keys(f);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(f);h&&(_=_.filter(function(N){return Object.getOwnPropertyDescriptor(f,N).enumerable})),x.push.apply(x,_)}return x}d(n,"t");function s(f){for(var h=1;h<arguments.length;h++){var x=arguments[h]!=null?arguments[h]:{};h%2?n(Object(x),!0).forEach(function(_){c(f,_,x[_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(f,Object.getOwnPropertyDescriptors(x)):n(Object(x)).forEach(function(_){Object.defineProperty(f,_,Object.getOwnPropertyDescriptor(x,_))})}return f}d(s,"e");function a(f){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},a(f)}d(a,"n");function i(f,h){if(!(f instanceof h))throw new TypeError("Cannot call a class as a function")}d(i,"r");function r(f,h){for(var x=0;x<h.length;x++){var _=h[x];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(f,S(_.key),_)}}d(r,"i");function o(f,h,x){return h&&r(f.prototype,h),x&&r(f,x),Object.defineProperty(f,"prototype",{writable:!1}),f}d(o,"o");function c(f,h,x){return(h=S(h))in f?Object.defineProperty(f,h,{value:x,enumerable:!0,configurable:!0,writable:!0}):f[h]=x,f}d(c,"a");function l(f,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(h&&h.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),Object.defineProperty(f,"prototype",{writable:!1}),h&&p(f,h)}d(l,"s");function u(f){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(h){return h.__proto__||Object.getPrototypeOf(h)},u(f)}d(u,"c");function p(f,h){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(x,_){return x.__proto__=_,x},p(f,h)}d(p,"l");function g(f){if(f===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f}d(g,"u");function y(f){var h=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var x,_=u(f);if(h){var N=u(this).constructor;x=Reflect.construct(_,arguments,N)}else x=_.apply(this,arguments);return function(H,Z){if(Z&&(typeof Z=="object"||typeof Z=="function"))return Z;if(Z!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return g(H)}(this,x)}}d(y,"p");function w(){return w=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(f,h,x){var _=function(H,Z){for(;!Object.prototype.hasOwnProperty.call(H,Z)&&(H=u(H))!==null;);return H}(f,h);if(_){var N=Object.getOwnPropertyDescriptor(_,h);return N.get?N.get.call(arguments.length<3?f:x):N.value}},w.apply(this,arguments)}d(w,"f");function S(f){var h=function(x,_){if(typeof x!="object"||x===null)return x;var N=x[Symbol.toPrimitive];if(N!==void 0){var H=N.call(x,_||"default");if(typeof H!="object")return H;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(x)}(f,"string");return typeof h=="symbol"?h:h+""}d(S,"d");var m=d(function(f){return!(!f||!f.Window)&&f instanceof f.Window},"h"),D=void 0,A=void 0;function j(f){D=f;var h=f.document.createTextNode("");h.ownerDocument!==f.document&&typeof f.wrap=="function"&&f.wrap(h)===h&&(f=f.wrap(f)),A=f}d(j,"m");function L(f){return m(f)?f:(f.ownerDocument||f).defaultView||A.window}d(L,"y"),typeof window<"u"&&window&&j(window);var k=d(function(f){return!!f&&a(f)==="object"},"b"),I=d(function(f){return typeof f=="function"},"x"),v={window:function(f){return f===A||m(f)},docFrag:function(f){return k(f)&&f.nodeType===11},object:k,func:I,number:function(f){return typeof f=="number"},bool:function(f){return typeof f=="boolean"},string:function(f){return typeof f=="string"},element:function(f){if(!f||a(f)!=="object")return!1;var h=L(f)||A;return/object|function/.test(typeof Element>"u"?"undefined":a(Element))?f instanceof Element||f instanceof h.Element:f.nodeType===1&&typeof f.nodeName=="string"},plainObject:function(f){return k(f)&&!!f.constructor&&/function Object\b/.test(f.constructor.toString())},array:function(f){return k(f)&&f.length!==void 0&&I(f.splice)}};function T(f){var h=f.interaction;if(h.prepared.name==="drag"){var x=h.prepared.axis;x==="x"?(h.coords.cur.page.y=h.coords.start.page.y,h.coords.cur.client.y=h.coords.start.client.y,h.coords.velocity.client.y=0,h.coords.velocity.page.y=0):x==="y"&&(h.coords.cur.page.x=h.coords.start.page.x,h.coords.cur.client.x=h.coords.start.client.x,h.coords.velocity.client.x=0,h.coords.velocity.page.x=0)}}d(T,"E");function P(f){var h=f.iEvent,x=f.interaction;if(x.prepared.name==="drag"){var _=x.prepared.axis;if(_==="x"||_==="y"){var N=_==="x"?"y":"x";h.page[N]=x.coords.start.page[N],h.client[N]=x.coords.start.client[N],h.delta[N]=0}}}d(P,"T");var F={id:"actions/drag",install:function(f){var h=f.actions,x=f.Interactable,_=f.defaults;x.prototype.draggable=F.draggable,h.map.drag=F,h.methodDict.drag="draggable",_.actions.drag=F.defaults},listeners:{"interactions:before-action-move":T,"interactions:action-resume":T,"interactions:action-move":P,"auto-start:check":function(f){var h=f.interaction,x=f.interactable,_=f.buttons,N=x.options.drag;if(N&&N.enabled&&(!h.pointerIsDown||!/mouse|pointer/.test(h.pointerType)||_&x.options.drag.mouseButtons))return f.action={name:"drag",axis:N.lockAxis==="start"?N.startAxis:N.lockAxis},!1}},draggable:function(f){return v.object(f)?(this.options.drag.enabled=f.enabled!==!1,this.setPerAction("drag",f),this.setOnEvents("drag",f),/^(xy|x|y|start)$/.test(f.lockAxis)&&(this.options.drag.lockAxis=f.lockAxis),/^(xy|x|y)$/.test(f.startAxis)&&(this.options.drag.startAxis=f.startAxis),this):v.bool(f)?(this.options.drag.enabled=f,this):this.options.drag},beforeMove:T,move:P,defaults:{startAxis:"xy",lockAxis:"xy"},getCursor:function(){return"move"},filterEventType:function(f){return f.search("drag")===0}},U=F,M={init:function(f){var h=f;M.document=h.document,M.DocumentFragment=h.DocumentFragment||V,M.SVGElement=h.SVGElement||V,M.SVGSVGElement=h.SVGSVGElement||V,M.SVGElementInstance=h.SVGElementInstance||V,M.Element=h.Element||V,M.HTMLElement=h.HTMLElement||M.Element,M.Event=h.Event,M.Touch=h.Touch||V,M.PointerEvent=h.PointerEvent||h.MSPointerEvent},document:null,DocumentFragment:null,SVGElement:null,SVGSVGElement:null,SVGElementInstance:null,Element:null,HTMLElement:null,Event:null,Touch:null,PointerEvent:null};function V(){}d(V,"O");var W=M,K={init:function(f){var h=W.Element,x=f.navigator||{};K.supportsTouch="ontouchstart"in f||v.func(f.DocumentTouch)&&W.document instanceof f.DocumentTouch,K.supportsPointerEvent=x.pointerEnabled!==!1&&!!W.PointerEvent,K.isIOS=/iP(hone|od|ad)/.test(x.platform),K.isIOS7=/iP(hone|od|ad)/.test(x.platform)&&/OS 7[^\d]/.test(x.appVersion),K.isIe9=/MSIE 9/.test(x.userAgent),K.isOperaMobile=x.appName==="Opera"&&K.supportsTouch&&/Presto/.test(x.userAgent),K.prefixedMatchesSelector="matches"in h.prototype?"matches":"webkitMatchesSelector"in h.prototype?"webkitMatchesSelector":"mozMatchesSelector"in h.prototype?"mozMatchesSelector":"oMatchesSelector"in h.prototype?"oMatchesSelector":"msMatchesSelector",K.pEventTypes=K.supportsPointerEvent?W.PointerEvent===f.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"}:null,K.wheelEvent=W.document&&"onmousewheel"in W.document?"mousewheel":"wheel"},supportsTouch:null,supportsPointerEvent:null,isIOS7:null,isIOS:null,isIe9:null,isOperaMobile:null,prefixedMatchesSelector:null,pEventTypes:null,wheelEvent:null},R=K;function X(f,h){if(f.contains)return f.contains(h);for(;h;){if(h===f)return!0;h=h.parentNode}return!1}d(X,"M");function Q(f,h){for(;v.element(f);){if(J(f,h))return f;f=G(f)}return null}d(Q,"z");function G(f){var h=f.parentNode;if(v.docFrag(h)){for(;(h=h.host)&&v.docFrag(h););return h}return h}d(G,"A");function J(f,h){return A!==D&&(h=h.replace(/\/deep\//g," ")),f[R.prefixedMatchesSelector](h)}d(J,"R");var E=d(function(f){return f.parentNode||f.host},"C");function O(f,h){for(var x,_=[],N=f;(x=E(N))&&N!==h&&x!==N.ownerDocument;)_.unshift(N),N=x;return _}d(O,"j");function C(f,h,x){for(;v.element(f);){if(J(f,h))return!0;if((f=G(f))===x)return J(f,h)}return!1}d(C,"F");function B(f){return f.correspondingUseElement||f}d(B,"X");function z(f){var h=f instanceof W.SVGElement?f.getBoundingClientRect():f.getClientRects()[0];return h&&{left:h.left,right:h.right,top:h.top,bottom:h.bottom,width:h.width||h.right-h.left,height:h.height||h.bottom-h.top}}d(z,"Y");function Y(f){var h,x=z(f);if(!R.isIOS7&&x){var _={x:(h=(h=L(f))||A).scrollX||h.document.documentElement.scrollLeft,y:h.scrollY||h.document.documentElement.scrollTop};x.left+=_.x,x.right+=_.x,x.top+=_.y,x.bottom+=_.y}return x}d(Y,"L");function se(f){for(var h=[];f;)h.push(f),f=G(f);return h}d(se,"q");function le(f){return!!v.string(f)&&(W.document.querySelector(f),!0)}d(le,"B");function te(f,h){for(var x in h)f[x]=h[x];return f}d(te,"V");function he(f,h,x){return f==="parent"?G(x):f==="self"?h.getRect(x):Q(x,f)}d(he,"W");function fe(f,h,x,_){var N=f;return v.string(N)?N=he(N,h,x):v.func(N)&&(N=N.apply(void 0,_)),v.element(N)&&(N=Y(N)),N}d(fe,"G");function be(f){return f&&{x:"x"in f?f.x:f.left,y:"y"in f?f.y:f.top}}d(be,"N");function ge(f){return!f||"x"in f&&"y"in f||((f=te({},f)).x=f.left||0,f.y=f.top||0,f.width=f.width||(f.right||0)-f.x,f.height=f.height||(f.bottom||0)-f.y),f}d(ge,"U");function ye(f,h,x){f.left&&(h.left+=x.x),f.right&&(h.right+=x.x),f.top&&(h.top+=x.y),f.bottom&&(h.bottom+=x.y),h.width=h.right-h.left,h.height=h.bottom-h.top}d(ye,"H");function ke(f,h,x){var _=x&&f.options[x];return be(fe(_&&_.origin||f.options.origin,f,h,[f&&h]))||{x:0,y:0}}d(ke,"K");function Ie(f,h){var x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(oe){return!0},_=arguments.length>3?arguments[3]:void 0;if(_=_||{},v.string(f)&&f.search(" ")!==-1&&(f=_e(f)),v.array(f))return f.forEach(function(oe){return Ie(oe,h,x,_)}),_;if(v.object(f)&&(h=f,f=""),v.func(h)&&x(f))_[f]=_[f]||[],_[f].push(h);else if(v.array(h))for(var N=0,H=h;N<H.length;N++){var Z=H[N];Ie(f,Z,x,_)}else if(v.object(h))for(var ne in h)Ie(_e(ne).map(function(oe){return"".concat(f).concat(oe)}),h[ne],x,_);return _}d(Ie,"$");function _e(f){return f.trim().split(/ +/)}d(_e,"J");var Ue=d(function(f,h){return Math.sqrt(f*f+h*h)},"Q"),Fe=["webkit","moz"];function xe(f,h){f.__set||(f.__set={});var x=d(function(N){if(Fe.some(function(H){return N.indexOf(H)===0}))return 1;typeof f[N]!="function"&&N!=="__set"&&Object.defineProperty(f,N,{get:function(){return N in f.__set?f.__set[N]:f.__set[N]=h[N]},set:function(H){f.__set[N]=H},configurable:!0})},"n");for(var _ in h)x(_);return f}d(xe,"tt");function de(f,h){f.page=f.page||{},f.page.x=h.page.x,f.page.y=h.page.y,f.client=f.client||{},f.client.x=h.client.x,f.client.y=h.client.y,f.timeStamp=h.timeStamp}d(de,"et");function we(f){f.page.x=0,f.page.y=0,f.client.x=0,f.client.y=0}d(we,"nt");function Pe(f){return f instanceof W.Event||f instanceof W.Touch}d(Pe,"rt");function Ne(f,h,x){return f=f||"page",(x=x||{}).x=h[f+"X"],x.y=h[f+"Y"],x}d(Ne,"it");function Ze(f,h){return h=h||{x:0,y:0},R.isOperaMobile&&Pe(f)?(Ne("screen",f,h),h.x+=window.scrollX,h.y+=window.scrollY):Ne("page",f,h),h}d(Ze,"ot");function ft(f){return v.number(f.pointerId)?f.pointerId:f.identifier}d(ft,"at");function Rt(f,h,x){var _=h.length>1?tn(h):h[0];Ze(_,f.page),function(N,H){H=H||{},R.isOperaMobile&&Pe(N)?Ne("screen",N,H):Ne("client",N,H)}(_,f.client),f.timeStamp=x}d(Rt,"st");function Gt(f){var h=[];return v.array(f)?(h[0]=f[0],h[1]=f[1]):f.type==="touchend"?f.touches.length===1?(h[0]=f.touches[0],h[1]=f.changedTouches[0]):f.touches.length===0&&(h[0]=f.changedTouches[0],h[1]=f.changedTouches[1]):(h[0]=f.touches[0],h[1]=f.touches[1]),h}d(Gt,"ct");function tn(f){for(var h={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0},x=0;x<f.length;x++){var _=f[x];for(var N in h)h[N]+=_[N]}for(var H in h)h[H]/=f.length;return h}d(tn,"lt");function Jt(f){if(!f.length)return null;var h=Gt(f),x=Math.min(h[0].pageX,h[1].pageX),_=Math.min(h[0].pageY,h[1].pageY),N=Math.max(h[0].pageX,h[1].pageX),H=Math.max(h[0].pageY,h[1].pageY);return{x,y:_,left:x,top:_,right:N,bottom:H,width:N-x,height:H-_}}d(Jt,"ut");function Qn(f,h){var x=h+"X",_=h+"Y",N=Gt(f),H=N[0][x]-N[1][x],Z=N[0][_]-N[1][_];return Ue(H,Z)}d(Qn,"pt");function es(f,h){var x=h+"X",_=h+"Y",N=Gt(f),H=N[1][x]-N[0][x],Z=N[1][_]-N[0][_];return 180*Math.atan2(Z,H)/Math.PI}d(es,"ft");function Cs(f){return v.string(f.pointerType)?f.pointerType:v.number(f.pointerType)?[void 0,void 0,"touch","pen","mouse"][f.pointerType]:/touch/.test(f.type||"")||f instanceof W.Touch?"touch":"mouse"}d(Cs,"dt");function nn(f){var h=v.func(f.composedPath)?f.composedPath():f.path;return[B(h?h[0]:f.target),B(f.currentTarget)]}d(nn,"ht");var wn=function(){function f(h){i(this,f),this.immediatePropagationStopped=!1,this.propagationStopped=!1,this._interaction=h}return d(f,"t"),o(f,[{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}]),f}();Object.defineProperty(wn.prototype,"interaction",{get:function(){return this._interaction._proxy},set:function(){}});var sn=d(function(f,h){for(var x=0;x<h.length;x++){var _=h[x];f.push(_)}return f},"gt"),Un=d(function(f){return sn([],f)},"mt"),Sn=d(function(f,h){for(var x=0;x<f.length;x++)if(h(f[x],x,f))return x;return-1},"yt"),Cn=d(function(f,h){return f[Sn(f,h)]},"bt"),dt=function(f){l(x,f);var h=y(x);function x(_,N,H){var Z;i(this,x),(Z=h.call(this,N._interaction)).dropzone=void 0,Z.dragEvent=void 0,Z.relatedTarget=void 0,Z.draggable=void 0,Z.propagationStopped=!1,Z.immediatePropagationStopped=!1;var ne=H==="dragleave"?_.prev:_.cur,oe=ne.element,ce=ne.dropzone;return Z.type=H,Z.target=oe,Z.currentTarget=oe,Z.dropzone=ce,Z.dragEvent=N,Z.relatedTarget=N.target,Z.draggable=N.interactable,Z.timeStamp=N.timeStamp,Z}return d(x,"n"),o(x,[{key:"reject",value:function(){var _=this,N=this._interaction.dropState;if(this.type==="dropactivate"||this.dropzone&&N.cur.dropzone===this.dropzone&&N.cur.element===this.target)if(N.prev.dropzone=this.dropzone,N.prev.element=this.target,N.rejected=!0,N.events.enter=null,this.stopImmediatePropagation(),this.type==="dropactivate"){var H=N.activeDrops,Z=Sn(H,function(oe){var ce=oe.dropzone,re=oe.element;return ce===_.dropzone&&re===_.target});N.activeDrops.splice(Z,1);var ne=new x(N,this.dragEvent,"dropdeactivate");ne.dropzone=this.dropzone,ne.target=this.target,this.dropzone.fire(ne)}else this.dropzone.fire(new x(N,this.dragEvent,"dragleave"))}},{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}]),x}(wn);function an(f,h){for(var x=0,_=f.slice();x<_.length;x++){var N=_[x],H=N.dropzone,Z=N.element;h.dropzone=H,h.target=Z,H.fire(h),h.propagationStopped=h.immediatePropagationStopped=!1}}d(an,"wt");function Ct(f,h){for(var x=function(H,Z){for(var ne=[],oe=0,ce=H.interactables.list;oe<ce.length;oe++){var re=ce[oe];if(re.options.drop.enabled){var me=re.options.drop.accept;if(!(v.element(me)&&me!==Z||v.string(me)&&!J(Z,me)||v.func(me)&&!me({dropzone:re,draggableElement:Z})))for(var Se=0,Te=re.getAllElements();Se<Te.length;Se++){var De=Te[Se];De!==Z&&ne.push({dropzone:re,element:De,rect:re.getRect(De)})}}}return ne}(f,h),_=0;_<x.length;_++){var N=x[_];N.rect=N.dropzone.getRect(N.element)}return x}d(Ct,"Et");function on(f,h,x){for(var _=f.dropState,N=f.interactable,H=f.element,Z=[],ne=0,oe=_.activeDrops;ne<oe.length;ne++){var ce=oe[ne],re=ce.dropzone,me=ce.element,Se=ce.rect,Te=re.dropCheck(h,x,N,H,me,Se);Z.push(Te?me:null)}var De=function(Me){for(var ze,qe,We,nt=[],rt=0;rt<Me.length;rt++){var Je=Me[rt],st=Me[ze];if(Je&&rt!==ze)if(st){var Kt=E(Je),xt=E(st);if(Kt!==Je.ownerDocument)if(xt!==Je.ownerDocument)if(Kt!==xt){nt=nt.length?nt:O(st);var rn=void 0;if(st instanceof W.HTMLElement&&Je instanceof W.SVGElement&&!(Je instanceof W.SVGSVGElement)){if(Je===xt)continue;rn=Je.ownerSVGElement}else rn=Je;for(var An=O(rn,st.ownerDocument),Hn=0;An[Hn]&&An[Hn]===nt[Hn];)Hn++;var ji=[An[Hn-1],An[Hn],nt[Hn]];if(ji[0])for(var ka=ji[0].lastChild;ka;){if(ka===ji[1]){ze=rt,nt=An;break}if(ka===ji[2])break;ka=ka.previousSibling}}else We=st,(parseInt(L(qe=Je).getComputedStyle(qe).zIndex,10)||0)>=(parseInt(L(We).getComputedStyle(We).zIndex,10)||0)&&(ze=rt);else ze=rt}else ze=rt}return ze}(Z);return _.activeDrops[De]||null}d(on,"Tt");function gn(f,h,x){var _=f.dropState,N={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};return x.type==="dragstart"&&(N.activate=new dt(_,x,"dropactivate"),N.activate.target=null,N.activate.dropzone=null),x.type==="dragend"&&(N.deactivate=new dt(_,x,"dropdeactivate"),N.deactivate.target=null,N.deactivate.dropzone=null),_.rejected||(_.cur.element!==_.prev.element&&(_.prev.dropzone&&(N.leave=new dt(_,x,"dragleave"),x.dragLeave=N.leave.target=_.prev.element,x.prevDropzone=N.leave.dropzone=_.prev.dropzone),_.cur.dropzone&&(N.enter=new dt(_,x,"dragenter"),x.dragEnter=_.cur.element,x.dropzone=_.cur.dropzone)),x.type==="dragend"&&_.cur.dropzone&&(N.drop=new dt(_,x,"drop"),x.dropzone=_.cur.dropzone,x.relatedTarget=_.cur.element),x.type==="dragmove"&&_.cur.dropzone&&(N.move=new dt(_,x,"dropmove"),x.dropzone=_.cur.dropzone)),N}d(gn,"St");function Ee(f,h){var x=f.dropState,_=x.activeDrops,N=x.cur,H=x.prev;h.leave&&H.dropzone.fire(h.leave),h.enter&&N.dropzone.fire(h.enter),h.move&&N.dropzone.fire(h.move),h.drop&&N.dropzone.fire(h.drop),h.deactivate&&an(_,h.deactivate),x.prev.dropzone=N.dropzone,x.prev.element=N.element}d(Ee,"_t");function Ke(f,h){var x=f.interaction,_=f.iEvent,N=f.event;if(_.type==="dragmove"||_.type==="dragend"){var H=x.dropState;h.dynamicDrop&&(H.activeDrops=Ct(h,x.element));var Z=_,ne=on(x,Z,N);H.rejected=H.rejected&&!!ne&&ne.dropzone===H.cur.dropzone&&ne.element===H.cur.element,H.cur.dropzone=ne&&ne.dropzone,H.cur.element=ne&&ne.element,H.events=gn(x,0,Z)}}d(Ke,"Pt");var Qe={id:"actions/drop",install:function(f){var h=f.actions,x=f.interactStatic,_=f.Interactable,N=f.defaults;f.usePlugin(U),_.prototype.dropzone=function(H){return function(Z,ne){if(v.object(ne)){if(Z.options.drop.enabled=ne.enabled!==!1,ne.listeners){var oe=Ie(ne.listeners),ce=Object.keys(oe).reduce(function(me,Se){return me[/^(enter|leave)/.test(Se)?"drag".concat(Se):/^(activate|deactivate|move)/.test(Se)?"drop".concat(Se):Se]=oe[Se],me},{}),re=Z.options.drop.listeners;re&&Z.off(re),Z.on(ce),Z.options.drop.listeners=ce}return v.func(ne.ondrop)&&Z.on("drop",ne.ondrop),v.func(ne.ondropactivate)&&Z.on("dropactivate",ne.ondropactivate),v.func(ne.ondropdeactivate)&&Z.on("dropdeactivate",ne.ondropdeactivate),v.func(ne.ondragenter)&&Z.on("dragenter",ne.ondragenter),v.func(ne.ondragleave)&&Z.on("dragleave",ne.ondragleave),v.func(ne.ondropmove)&&Z.on("dropmove",ne.ondropmove),/^(pointer|center)$/.test(ne.overlap)?Z.options.drop.overlap=ne.overlap:v.number(ne.overlap)&&(Z.options.drop.overlap=Math.max(Math.min(1,ne.overlap),0)),"accept"in ne&&(Z.options.drop.accept=ne.accept),"checker"in ne&&(Z.options.drop.checker=ne.checker),Z}return v.bool(ne)?(Z.options.drop.enabled=ne,Z):Z.options.drop}(this,H)},_.prototype.dropCheck=function(H,Z,ne,oe,ce,re){return function(me,Se,Te,De,Me,ze,qe){var We=!1;if(!(qe=qe||me.getRect(ze)))return!!me.options.drop.checker&&me.options.drop.checker(Se,Te,We,me,ze,De,Me);var nt=me.options.drop.overlap;if(nt==="pointer"){var rt=ke(De,Me,"drag"),Je=Ze(Se);Je.x+=rt.x,Je.y+=rt.y;var st=Je.x>qe.left&&Je.x<qe.right,Kt=Je.y>qe.top&&Je.y<qe.bottom;We=st&&Kt}var xt=De.getRect(Me);if(xt&&nt==="center"){var rn=xt.left+xt.width/2,An=xt.top+xt.height/2;We=rn>=qe.left&&rn<=qe.right&&An>=qe.top&&An<=qe.bottom}return xt&&v.number(nt)&&(We=Math.max(0,Math.min(qe.right,xt.right)-Math.max(qe.left,xt.left))*Math.max(0,Math.min(qe.bottom,xt.bottom)-Math.max(qe.top,xt.top))/(xt.width*xt.height)>=nt),me.options.drop.checker&&(We=me.options.drop.checker(Se,Te,We,me,ze,De,Me)),We}(this,H,Z,ne,oe,ce,re)},x.dynamicDrop=function(H){return v.bool(H)?(f.dynamicDrop=H,x):f.dynamicDrop},te(h.phaselessTypes,{dragenter:!0,dragleave:!0,dropactivate:!0,dropdeactivate:!0,dropmove:!0,drop:!0}),h.methodDict.drop="dropzone",f.dynamicDrop=!1,N.actions.drop=Qe.defaults},listeners:{"interactions:before-action-start":function(f){var h=f.interaction;h.prepared.name==="drag"&&(h.dropState={cur:{dropzone:null,element:null},prev:{dropzone:null,element:null},rejected:null,events:null,activeDrops:[]})},"interactions:after-action-start":function(f,h){var x=f.interaction,_=(f.event,f.iEvent);if(x.prepared.name==="drag"){var N=x.dropState;N.activeDrops=[],N.events={},N.activeDrops=Ct(h,x.element),N.events=gn(x,0,_),N.events.activate&&(an(N.activeDrops,N.events.activate),h.fire("actions/drop:start",{interaction:x,dragEvent:_}))}},"interactions:action-move":Ke,"interactions:after-action-move":function(f,h){var x=f.interaction,_=f.iEvent;if(x.prepared.name==="drag"){var N=x.dropState;Ee(x,N.events),h.fire("actions/drop:move",{interaction:x,dragEvent:_}),N.events={}}},"interactions:action-end":function(f,h){if(f.interaction.prepared.name==="drag"){var x=f.interaction,_=f.iEvent;Ke(f,h),Ee(x,x.dropState.events),h.fire("actions/drop:end",{interaction:x,dragEvent:_})}},"interactions:stop":function(f){var h=f.interaction;if(h.prepared.name==="drag"){var x=h.dropState;x&&(x.activeDrops=null,x.events=null,x.cur.dropzone=null,x.cur.element=null,x.prev.dropzone=null,x.prev.element=null,x.rejected=!1)}}},getActiveDrops:Ct,getDrop:on,getDropEvents:gn,fireDropEvents:Ee,filterEventType:function(f){return f.search("drag")===0||f.search("drop")===0},defaults:{enabled:!1,accept:null,overlap:"pointer"}},Ye=Qe;function tt(f){var h=f.interaction,x=f.iEvent,_=f.phase;if(h.prepared.name==="gesture"){var N=h.pointers.map(function(ce){return ce.pointer}),H=_==="start",Z=_==="end",ne=h.interactable.options.deltaSource;if(x.touches=[N[0],N[1]],H)x.distance=Qn(N,ne),x.box=Jt(N),x.scale=1,x.ds=0,x.angle=es(N,ne),x.da=0,h.gesture.startDistance=x.distance,h.gesture.startAngle=x.angle;else if(Z||h.pointers.length<2){var oe=h.prevEvent;x.distance=oe.distance,x.box=oe.box,x.scale=oe.scale,x.ds=0,x.angle=oe.angle,x.da=0}else x.distance=Qn(N,ne),x.box=Jt(N),x.scale=x.distance/h.gesture.startDistance,x.angle=es(N,ne),x.ds=x.scale-h.gesture.scale,x.da=x.angle-h.gesture.angle;h.gesture.distance=x.distance,h.gesture.angle=x.angle,v.number(x.scale)&&x.scale!==1/0&&!isNaN(x.scale)&&(h.gesture.scale=x.scale)}}d(tt,"Dt");var ut={id:"actions/gesture",before:["actions/drag","actions/resize"],install:function(f){var h=f.actions,x=f.Interactable,_=f.defaults;x.prototype.gesturable=function(N){return v.object(N)?(this.options.gesture.enabled=N.enabled!==!1,this.setPerAction("gesture",N),this.setOnEvents("gesture",N),this):v.bool(N)?(this.options.gesture.enabled=N,this):this.options.gesture},h.map.gesture=ut,h.methodDict.gesture="gesturable",_.actions.gesture=ut.defaults},listeners:{"interactions:action-start":tt,"interactions:action-move":tt,"interactions:action-end":tt,"interactions:new":function(f){f.interaction.gesture={angle:0,distance:0,scale:1,startAngle:0,startDistance:0}},"auto-start:check":function(f){if(!(f.interaction.pointers.length<2)){var h=f.interactable.options.gesture;if(h&&h.enabled)return f.action={name:"gesture"},!1}}},defaults:{},getCursor:function(){return""},filterEventType:function(f){return f.search("gesture")===0}},q=ut;function ae(f,h,x,_,N,H,Z){if(!h)return!1;if(h===!0){var ne=v.number(H.width)?H.width:H.right-H.left,oe=v.number(H.height)?H.height:H.bottom-H.top;if(Z=Math.min(Z,Math.abs((f==="left"||f==="right"?ne:oe)/2)),ne<0&&(f==="left"?f="right":f==="right"&&(f="left")),oe<0&&(f==="top"?f="bottom":f==="bottom"&&(f="top")),f==="left"){var ce=ne>=0?H.left:H.right;return x.x<ce+Z}if(f==="top"){var re=oe>=0?H.top:H.bottom;return x.y<re+Z}if(f==="right")return x.x>(ne>=0?H.right:H.left)-Z;if(f==="bottom")return x.y>(oe>=0?H.bottom:H.top)-Z}return!!v.element(_)&&(v.element(h)?h===_:C(_,h,N))}d(ae,"zt");function ee(f){var h=f.iEvent,x=f.interaction;if(x.prepared.name==="resize"&&x.resizeAxes){var _=h;x.interactable.options.resize.square?(x.resizeAxes==="y"?_.delta.x=_.delta.y:_.delta.y=_.delta.x,_.axes="xy"):(_.axes=x.resizeAxes,x.resizeAxes==="x"?_.delta.y=0:x.resizeAxes==="y"&&(_.delta.x=0))}}d(ee,"At");var ie,ue,ve={id:"actions/resize",before:["actions/drag"],install:function(f){var h=f.actions,x=f.browser,_=f.Interactable,N=f.defaults;ve.cursors=function(H){return H.isIe9?{x:"e-resize",y:"s-resize",xy:"se-resize",top:"n-resize",left:"w-resize",bottom:"s-resize",right:"e-resize",topleft:"se-resize",bottomright:"se-resize",topright:"ne-resize",bottomleft:"ne-resize"}:{x:"ew-resize",y:"ns-resize",xy:"nwse-resize",top:"ns-resize",left:"ew-resize",bottom:"ns-resize",right:"ew-resize",topleft:"nwse-resize",bottomright:"nwse-resize",topright:"nesw-resize",bottomleft:"nesw-resize"}}(x),ve.defaultMargin=x.supportsTouch||x.supportsPointerEvent?20:10,_.prototype.resizable=function(H){return function(Z,ne,oe){return v.object(ne)?(Z.options.resize.enabled=ne.enabled!==!1,Z.setPerAction("resize",ne),Z.setOnEvents("resize",ne),v.string(ne.axis)&&/^x$|^y$|^xy$/.test(ne.axis)?Z.options.resize.axis=ne.axis:ne.axis===null&&(Z.options.resize.axis=oe.defaults.actions.resize.axis),v.bool(ne.preserveAspectRatio)?Z.options.resize.preserveAspectRatio=ne.preserveAspectRatio:v.bool(ne.square)&&(Z.options.resize.square=ne.square),Z):v.bool(ne)?(Z.options.resize.enabled=ne,Z):Z.options.resize}(this,H,f)},h.map.resize=ve,h.methodDict.resize="resizable",N.actions.resize=ve.defaults},listeners:{"interactions:new":function(f){f.interaction.resizeAxes="xy"},"interactions:action-start":function(f){(function(h){var x=h.iEvent,_=h.interaction;if(_.prepared.name==="resize"&&_.prepared.edges){var N=x,H=_.rect;_._rects={start:te({},H),corrected:te({},H),previous:te({},H),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}},N.edges=_.prepared.edges,N.rect=_._rects.corrected,N.deltaRect=_._rects.delta}})(f),ee(f)},"interactions:action-move":function(f){(function(h){var x=h.iEvent,_=h.interaction;if(_.prepared.name==="resize"&&_.prepared.edges){var N=x,H=_.interactable.options.resize.invert,Z=H==="reposition"||H==="negate",ne=_.rect,oe=_._rects,ce=oe.start,re=oe.corrected,me=oe.delta,Se=oe.previous;if(te(Se,re),Z){if(te(re,ne),H==="reposition"){if(re.top>re.bottom){var Te=re.top;re.top=re.bottom,re.bottom=Te}if(re.left>re.right){var De=re.left;re.left=re.right,re.right=De}}}else re.top=Math.min(ne.top,ce.bottom),re.bottom=Math.max(ne.bottom,ce.top),re.left=Math.min(ne.left,ce.right),re.right=Math.max(ne.right,ce.left);for(var Me in re.width=re.right-re.left,re.height=re.bottom-re.top,re)me[Me]=re[Me]-Se[Me];N.edges=_.prepared.edges,N.rect=re,N.deltaRect=me}})(f),ee(f)},"interactions:action-end":function(f){var h=f.iEvent,x=f.interaction;if(x.prepared.name==="resize"&&x.prepared.edges){var _=h;_.edges=x.prepared.edges,_.rect=x._rects.corrected,_.deltaRect=x._rects.delta}},"auto-start:check":function(f){var h=f.interaction,x=f.interactable,_=f.element,N=f.rect,H=f.buttons;if(N){var Z=te({},h.coords.cur.page),ne=x.options.resize;if(ne&&ne.enabled&&(!h.pointerIsDown||!/mouse|pointer/.test(h.pointerType)||H&ne.mouseButtons)){if(v.object(ne.edges)){var oe={left:!1,right:!1,top:!1,bottom:!1};for(var ce in oe)oe[ce]=ae(ce,ne.edges[ce],Z,h._latestPointer.eventTarget,_,N,ne.margin||ve.defaultMargin);oe.left=oe.left&&!oe.right,oe.top=oe.top&&!oe.bottom,(oe.left||oe.right||oe.top||oe.bottom)&&(f.action={name:"resize",edges:oe})}else{var re=ne.axis!=="y"&&Z.x>N.right-ve.defaultMargin,me=ne.axis!=="x"&&Z.y>N.bottom-ve.defaultMargin;(re||me)&&(f.action={name:"resize",axes:(re?"x":"")+(me?"y":"")})}return!f.action&&void 0}}}},defaults:{square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},cursors:null,getCursor:function(f){var h=f.edges,x=f.axis,_=f.name,N=ve.cursors,H=null;if(x)H=N[_+x];else if(h){for(var Z="",ne=0,oe=["top","bottom","left","right"];ne<oe.length;ne++){var ce=oe[ne];h[ce]&&(Z+=ce)}H=N[Z]}return H},filterEventType:function(f){return f.search("resize")===0},defaultMargin:null},Ae=ve,$e={id:"actions",install:function(f){f.usePlugin(q),f.usePlugin(Ae),f.usePlugin(U),f.usePlugin(Ye)}},Le=0,Oe={request:function(f){return ie(f)},cancel:function(f){return ue(f)},init:function(f){if(ie=f.requestAnimationFrame,ue=f.cancelAnimationFrame,!ie)for(var h=["ms","moz","webkit","o"],x=0;x<h.length;x++){var _=h[x];ie=f["".concat(_,"RequestAnimationFrame")],ue=f["".concat(_,"CancelAnimationFrame")]||f["".concat(_,"CancelRequestAnimationFrame")]}ie=ie&&ie.bind(f),ue=ue&&ue.bind(f),ie||(ie=d(function(N){var H=Date.now(),Z=Math.max(0,16-(H-Le)),ne=f.setTimeout(function(){N(H+Z)},Z);return Le=H+Z,ne},"Rt"),ue=d(function(N){return clearTimeout(N)},"Ct"))}},Ce={defaults:{enabled:!1,margin:60,container:null,speed:300},now:Date.now,interaction:null,i:0,x:0,y:0,isScrolling:!1,prevTime:0,margin:0,speed:0,start:function(f){Ce.isScrolling=!0,Oe.cancel(Ce.i),f.autoScroll=Ce,Ce.interaction=f,Ce.prevTime=Ce.now(),Ce.i=Oe.request(Ce.scroll)},stop:function(){Ce.isScrolling=!1,Ce.interaction&&(Ce.interaction.autoScroll=null),Oe.cancel(Ce.i)},scroll:function(){var f=Ce.interaction,h=f.interactable,x=f.element,_=f.prepared.name,N=h.options[_].autoScroll,H=et(N.container,h,x),Z=Ce.now(),ne=(Z-Ce.prevTime)/1e3,oe=N.speed*ne;if(oe>=1){var ce={x:Ce.x*oe,y:Ce.y*oe};if(ce.x||ce.y){var re=Ve(H);v.window(H)?H.scrollBy(ce.x,ce.y):H&&(H.scrollLeft+=ce.x,H.scrollTop+=ce.y);var me=Ve(H),Se={x:me.x-re.x,y:me.y-re.y};(Se.x||Se.y)&&h.fire({type:"autoscroll",target:x,interactable:h,delta:Se,interaction:f,container:H})}Ce.prevTime=Z}Ce.isScrolling&&(Oe.cancel(Ce.i),Ce.i=Oe.request(Ce.scroll))},check:function(f,h){var x;return(x=f.options[h].autoScroll)==null?void 0:x.enabled},onInteractionMove:function(f){var h=f.interaction,x=f.pointer;if(h.interacting()&&Ce.check(h.interactable,h.prepared.name))if(h.simulation)Ce.x=Ce.y=0;else{var _,N,H,Z,ne=h.interactable,oe=h.element,ce=h.prepared.name,re=ne.options[ce].autoScroll,me=et(re.container,ne,oe);if(v.window(me))Z=x.clientX<Ce.margin,_=x.clientY<Ce.margin,N=x.clientX>me.innerWidth-Ce.margin,H=x.clientY>me.innerHeight-Ce.margin;else{var Se=z(me);Z=x.clientX<Se.left+Ce.margin,_=x.clientY<Se.top+Ce.margin,N=x.clientX>Se.right-Ce.margin,H=x.clientY>Se.bottom-Ce.margin}Ce.x=N?1:Z?-1:0,Ce.y=H?1:_?-1:0,Ce.isScrolling||(Ce.margin=re.margin,Ce.speed=re.speed,Ce.start(h))}}};function et(f,h,x){return(v.string(f)?he(f,h,x):f)||L(x)}d(et,"Bt");function Ve(f){return v.window(f)&&(f=window.document.body),{x:f.scrollLeft,y:f.scrollTop}}d(Ve,"Vt");var it={id:"auto-scroll",install:function(f){var h=f.defaults,x=f.actions;f.autoScroll=Ce,Ce.now=function(){return f.now()},x.phaselessTypes.autoscroll=!0,h.perAction.autoScroll=Ce.defaults},listeners:{"interactions:new":function(f){f.interaction.autoScroll=null},"interactions:destroy":function(f){f.interaction.autoScroll=null,Ce.stop(),Ce.interaction&&(Ce.interaction=null)},"interactions:stop":Ce.stop,"interactions:action-move":function(f){return Ce.onInteractionMove(f)}}},pt=it;function vt(f,h){var x=!1;return function(){return x||(A.console.warn(h),x=!0),f.apply(this,arguments)}}d(vt,"Nt");function ts(f,h){return f.name=h.name,f.axis=h.axis,f.edges=h.edges,f}d(ts,"Ut");function zs(f){return v.bool(f)?(this.options.styleCursor=f,this):f===null?(delete this.options.styleCursor,this):this.options.styleCursor}d(zs,"Ht");function En(f){return v.func(f)?(this.options.actionChecker=f,this):f===null?(delete this.options.actionChecker,this):this.options.actionChecker}d(En,"Kt");var _i={id:"auto-start/interactableMethods",install:function(f){var h=f.Interactable;h.prototype.getAction=function(x,_,N,H){var Z=function(ne,oe,ce,re,me){var Se=ne.getRect(re),Te=oe.buttons||{0:1,1:4,3:8,4:16}[oe.button],De={action:null,interactable:ne,interaction:ce,element:re,rect:Se,buttons:Te};return me.fire("auto-start:check",De),De.action}(this,_,N,H,f);return this.options.actionChecker?this.options.actionChecker(x,_,Z,this,H,N):Z},h.prototype.ignoreFrom=vt(function(x){return this._backCompatOption("ignoreFrom",x)},"Interactable.ignoreFrom() has been deprecated. Use Interactble.draggable({ignoreFrom: newValue})."),h.prototype.allowFrom=vt(function(x){return this._backCompatOption("allowFrom",x)},"Interactable.allowFrom() has been deprecated. Use Interactble.draggable({allowFrom: newValue})."),h.prototype.actionChecker=En,h.prototype.styleCursor=zs}};function wa(f,h,x,_,N){return h.testIgnoreAllow(h.options[f.name],x,_)&&h.options[f.name].enabled&&Hs(h,x,f,N)?f:null}d(wa,"Jt");function Tt(f,h,x,_,N,H,Z){for(var ne=0,oe=_.length;ne<oe;ne++){var ce=_[ne],re=N[ne],me=ce.getAction(h,x,f,re);if(me){var Se=wa(me,ce,re,H,Z);if(Se)return{action:Se,interactable:ce,element:re}}}return{action:null,interactable:null,element:null}}d(Tt,"Qt");function Es(f,h,x,_,N){var H=[],Z=[],ne=_;function oe(re){H.push(re),Z.push(ne)}for(d(oe,"c");v.element(ne);){H=[],Z=[],N.interactables.forEachMatch(ne,oe);var ce=Tt(f,h,x,H,Z,_,N);if(ce.action&&!ce.interactable.options[ce.action.name].manualStart)return ce;ne=G(ne)}return{action:null,interactable:null,element:null}}d(Es,"Zt");function Sa(f,h,x){var _=h.action,N=h.interactable,H=h.element;_=_||{name:null},f.interactable=N,f.element=H,ts(f.prepared,_),f.rect=N&&_.name?N.getRect(H):null,As(f,x),x.fire("autoStart:prepared",{interaction:f})}d(Sa,"te");function Hs(f,h,x,_){var N=f.options,H=N[x.name].max,Z=N[x.name].maxPerElement,ne=_.autoStart.maxInteractions,oe=0,ce=0,re=0;if(!(H&&Z&&ne))return!1;for(var me=0,Se=_.interactions.list;me<Se.length;me++){var Te=Se[me],De=Te.prepared.name;if(Te.interacting()&&(++oe>=ne||Te.interactable===f&&((ce+=De===x.name?1:0)>=H||Te.element===h&&(re++,De===x.name&&re>=Z))))return!1}return ne>0}d(Hs,"ee");function Vt(f,h){return v.number(f)?(h.autoStart.maxInteractions=f,this):h.autoStart.maxInteractions}d(Vt,"ne");function kt(f,h,x){var _=x.autoStart.cursorElement;_&&_!==f&&(_.style.cursor=""),f.ownerDocument.documentElement.style.cursor=h,f.style.cursor=h,x.autoStart.cursorElement=h?f:null}d(kt,"re");function As(f,h){var x=f.interactable,_=f.element,N=f.prepared;if(f.pointerType==="mouse"&&x&&x.options.styleCursor){var H="";if(N.name){var Z=x.options[N.name].cursorChecker;H=v.func(Z)?Z(N,x,_,f._interacting):h.actions.map[N.name].getCursor(N)}kt(f.element,H||"",h)}else h.autoStart.cursorElement&&kt(h.autoStart.cursorElement,"",h)}d(As,"ie");var Ln={id:"auto-start/base",before:["actions"],install:function(f){var h=f.interactStatic,x=f.defaults;f.usePlugin(_i),x.base.actionChecker=null,x.base.styleCursor=!0,te(x.perAction,{manualStart:!1,max:1/0,maxPerElement:1,allowFrom:null,ignoreFrom:null,mouseButtons:1}),h.maxInteractions=function(_){return Vt(_,f)},f.autoStart={maxInteractions:1/0,withinInteractionLimit:Hs,cursorElement:null}},listeners:{"interactions:down":function(f,h){var x=f.interaction,_=f.pointer,N=f.event,H=f.eventTarget;x.interacting()||Sa(x,Es(x,_,N,H,h),h)},"interactions:move":function(f,h){(function(x,_){var N=x.interaction,H=x.pointer,Z=x.event,ne=x.eventTarget;N.pointerType!=="mouse"||N.pointerIsDown||N.interacting()||Sa(N,Es(N,H,Z,ne,_),_)})(f,h),function(x,_){var N=x.interaction;if(N.pointerIsDown&&!N.interacting()&&N.pointerWasMoved&&N.prepared.name){_.fire("autoStart:before-start",x);var H=N.interactable,Z=N.prepared.name;Z&&H&&(H.options[Z].manualStart||!Hs(H,N.element,N.prepared,_)?N.stop():(N.start(N.prepared,H,N.element),As(N,_)))}}(f,h)},"interactions:stop":function(f,h){var x=f.interaction,_=x.interactable;_&&_.options.styleCursor&&kt(x.element,"",h)}},maxInteractions:Vt,withinInteractionLimit:Hs,validateAction:wa},zn=Ln,bn={id:"auto-start/dragAxis",listeners:{"autoStart:before-start":function(f,h){var x=f.interaction,_=f.eventTarget,N=f.dx,H=f.dy;if(x.prepared.name==="drag"){var Z=Math.abs(N),ne=Math.abs(H),oe=x.interactable.options.drag,ce=oe.startAxis,re=Z>ne?"x":Z<ne?"y":"xy";if(x.prepared.axis=oe.lockAxis==="start"?re[0]:oe.lockAxis,re!=="xy"&&ce!=="xy"&&ce!==re){x.prepared.name=null;for(var me=_,Se=function(De){if(De!==x.interactable){var Me=x.interactable.options.drag;if(!Me.manualStart&&De.testIgnoreAllow(Me,me,_)){var ze=De.getAction(x.downPointer,x.downEvent,x,me);if(ze&&ze.name==="drag"&&function(qe,We){if(!We)return!1;var nt=We.options.drag.startAxis;return qe==="xy"||nt==="xy"||nt===qe}(re,De)&&zn.validateAction(ze,De,me,_,h))return De}}};v.element(me);){var Te=h.interactables.forEachMatch(me,Se);if(Te){x.prepared.name="drag",x.interactable=Te,x.element=me;break}me=G(me)}}}}}};function vn(f){var h=f.prepared&&f.prepared.name;if(!h)return null;var x=f.interactable.options;return x[h].hold||x[h].delay}d(vn,"ce");var Gs={id:"auto-start/hold",install:function(f){var h=f.defaults;f.usePlugin(zn),h.perAction.hold=0,h.perAction.delay=0},listeners:{"interactions:new":function(f){f.interaction.autoStartHoldTimer=null},"autoStart:prepared":function(f){var h=f.interaction,x=vn(h);x>0&&(h.autoStartHoldTimer=setTimeout(function(){h.start(h.prepared,h.interactable,h.element)},x))},"interactions:move":function(f){var h=f.interaction,x=f.duplicate;h.autoStartHoldTimer&&h.pointerWasMoved&&!x&&(clearTimeout(h.autoStartHoldTimer),h.autoStartHoldTimer=null)},"autoStart:before-start":function(f){var h=f.interaction;vn(h)>0&&(h.prepared.name=null)}},getHoldDuration:vn},_s=Gs,ki={id:"auto-start",install:function(f){f.usePlugin(zn),f.usePlugin(_s),f.usePlugin(bn)}},a0=d(function(f){return/^(always|never|auto)$/.test(f)?(this.options.preventDefault=f,this):v.bool(f)?(this.options.preventDefault=f?"always":"never",this):this.options.preventDefault},"fe");function i0(f){var h=f.interaction,x=f.event;h.interactable&&h.interactable.checkAndPreventDefault(x)}d(i0,"de");var ku={id:"core/interactablePreventDefault",install:function(f){var h=f.Interactable;h.prototype.preventDefault=a0,h.prototype.checkAndPreventDefault=function(x){return function(_,N,H){var Z=_.options.preventDefault;if(Z!=="never")if(Z!=="always"){if(N.events.supportsPassive&&/^touch(start|move)$/.test(H.type)){var ne=L(H.target).document,oe=N.getDocOptions(ne);if(!oe||!oe.events||oe.events.passive!==!1)return}/^(mouse|pointer|touch)*(down|start)/i.test(H.type)||v.element(H.target)&&J(H.target,"input,select,textarea,[contenteditable=true],[contenteditable=true] *")||H.preventDefault()}else H.preventDefault()}(this,f,x)},f.interactions.docEvents.push({type:"dragstart",listener:function(x){for(var _=0,N=f.interactions.list;_<N.length;_++){var H=N[_];if(H.element&&(H.element===x.target||X(H.element,x.target)))return void H.interactable.checkAndPreventDefault(x)}}})},listeners:["down","move","up","cancel"].reduce(function(f,h){return f["interactions:".concat(h)]=i0,f},{})};function Pi(f,h){if(h.phaselessTypes[f])return!0;for(var x in h.map)if(f.indexOf(x)===0&&f.substr(x.length)in h.phases)return!0;return!1}d(Pi,"ve");function Vs(f){var h={};for(var x in f){var _=f[x];v.plainObject(_)?h[x]=Vs(_):v.array(_)?h[x]=Un(_):h[x]=_}return h}d(Vs,"ge");var er=function(){function f(h){i(this,f),this.states=[],this.startOffset={left:0,right:0,top:0,bottom:0},this.startDelta=void 0,this.result=void 0,this.endResult=void 0,this.startEdges=void 0,this.edges=void 0,this.interaction=void 0,this.interaction=h,this.result=Di(),this.edges={left:!1,right:!1,top:!1,bottom:!1}}return d(f,"t"),o(f,[{key:"start",value:function(h,x){var _,N,H=h.phase,Z=this.interaction,ne=function(ce){var re=ce.interactable.options[ce.prepared.name],me=re.modifiers;return me&&me.length?me:["snap","snapSize","snapEdges","restrict","restrictEdges","restrictSize"].map(function(Se){var Te=re[Se];return Te&&Te.enabled&&{options:Te,methods:Te._methods}}).filter(function(Se){return!!Se})}(Z);this.prepareStates(ne),this.startEdges=te({},Z.edges),this.edges=te({},this.startEdges),this.startOffset=(_=Z.rect,N=x,_?{left:N.x-_.left,top:N.y-_.top,right:_.right-N.x,bottom:_.bottom-N.y}:{left:0,top:0,right:0,bottom:0}),this.startDelta={x:0,y:0};var oe=this.fillArg({phase:H,pageCoords:x,preEnd:!1});return this.result=Di(),this.startAll(oe),this.result=this.setAll(oe)}},{key:"fillArg",value:function(h){var x=this.interaction;return h.interaction=x,h.interactable=x.interactable,h.element=x.element,h.rect||(h.rect=x.rect),h.edges||(h.edges=this.startEdges),h.startOffset=this.startOffset,h}},{key:"startAll",value:function(h){for(var x=0,_=this.states;x<_.length;x++){var N=_[x];N.methods.start&&(h.state=N,N.methods.start(h))}}},{key:"setAll",value:function(h){var x=h.phase,_=h.preEnd,N=h.skipModifiers,H=h.rect,Z=h.edges;h.coords=te({},h.pageCoords),h.rect=te({},H),h.edges=te({},Z);for(var ne=N?this.states.slice(N):this.states,oe=Di(h.coords,h.rect),ce=0;ce<ne.length;ce++){var re,me=ne[ce],Se=me.options,Te=te({},h.coords),De=null;(re=me.methods)!=null&&re.set&&this.shouldDo(Se,_,x)&&(h.state=me,De=me.methods.set(h),ye(h.edges,h.rect,{x:h.coords.x-Te.x,y:h.coords.y-Te.y})),oe.eventProps.push(De)}te(this.edges,h.edges),oe.delta.x=h.coords.x-h.pageCoords.x,oe.delta.y=h.coords.y-h.pageCoords.y,oe.rectDelta.left=h.rect.left-H.left,oe.rectDelta.right=h.rect.right-H.right,oe.rectDelta.top=h.rect.top-H.top,oe.rectDelta.bottom=h.rect.bottom-H.bottom;var Me=this.result.coords,ze=this.result.rect;if(Me&&ze){var qe=oe.rect.left!==ze.left||oe.rect.right!==ze.right||oe.rect.top!==ze.top||oe.rect.bottom!==ze.bottom;oe.changed=qe||Me.x!==oe.coords.x||Me.y!==oe.coords.y}return oe}},{key:"applyToInteraction",value:function(h){var x=this.interaction,_=h.phase,N=x.coords.cur,H=x.coords.start,Z=this.result,ne=this.startDelta,oe=Z.delta;_==="start"&&te(this.startDelta,Z.delta);for(var ce=0,re=[[H,ne],[N,oe]];ce<re.length;ce++){var me=re[ce],Se=me[0],Te=me[1];Se.page.x+=Te.x,Se.page.y+=Te.y,Se.client.x+=Te.x,Se.client.y+=Te.y}var De=this.result.rectDelta,Me=h.rect||x.rect;Me.left+=De.left,Me.right+=De.right,Me.top+=De.top,Me.bottom+=De.bottom,Me.width=Me.right-Me.left,Me.height=Me.bottom-Me.top}},{key:"setAndApply",value:function(h){var x=this.interaction,_=h.phase,N=h.preEnd,H=h.skipModifiers,Z=this.setAll(this.fillArg({preEnd:N,phase:_,pageCoords:h.modifiedCoords||x.coords.cur.page}));if(this.result=Z,!Z.changed&&(!H||H<this.states.length)&&x.interacting())return!1;if(h.modifiedCoords){var ne=x.coords.cur.page,oe={x:h.modifiedCoords.x-ne.x,y:h.modifiedCoords.y-ne.y};Z.coords.x+=oe.x,Z.coords.y+=oe.y,Z.delta.x+=oe.x,Z.delta.y+=oe.y}this.applyToInteraction(h)}},{key:"beforeEnd",value:function(h){var x=h.interaction,_=h.event,N=this.states;if(N&&N.length){for(var H=!1,Z=0;Z<N.length;Z++){var ne=N[Z];h.state=ne;var oe=ne.options,ce=ne.methods,re=ce.beforeEnd&&ce.beforeEnd(h);if(re)return this.endResult=re,!1;H=H||!H&&this.shouldDo(oe,!0,h.phase,!0)}H&&x.move({event:_,preEnd:!0})}}},{key:"stop",value:function(h){var x=h.interaction;if(this.states&&this.states.length){var _=te({states:this.states,interactable:x.interactable,element:x.element,rect:null},h);this.fillArg(_);for(var N=0,H=this.states;N<H.length;N++){var Z=H[N];_.state=Z,Z.methods.stop&&Z.methods.stop(_)}this.states=null,this.endResult=null}}},{key:"prepareStates",value:function(h){this.states=[];for(var x=0;x<h.length;x++){var _=h[x],N=_.options,H=_.methods,Z=_.name;this.states.push({options:N,methods:H,index:x,name:Z})}return this.states}},{key:"restoreInteractionCoords",value:function(h){var x=h.interaction,_=x.coords,N=x.rect,H=x.modification;if(H.result){for(var Z=H.startDelta,ne=H.result,oe=ne.delta,ce=ne.rectDelta,re=0,me=[[_.start,Z],[_.cur,oe]];re<me.length;re++){var Se=me[re],Te=Se[0],De=Se[1];Te.page.x-=De.x,Te.page.y-=De.y,Te.client.x-=De.x,Te.client.y-=De.y}N.left-=ce.left,N.right-=ce.right,N.top-=ce.top,N.bottom-=ce.bottom}}},{key:"shouldDo",value:function(h,x,_,N){return!(!h||h.enabled===!1||N&&!h.endOnly||h.endOnly&&!x||_==="start"&&!h.setStart)}},{key:"copyFrom",value:function(h){this.startOffset=h.startOffset,this.startDelta=h.startDelta,this.startEdges=h.startEdges,this.edges=h.edges,this.states=h.states.map(function(x){return Vs(x)}),this.result=Di(te({},h.result.coords),te({},h.result.rect))}},{key:"destroy",value:function(){for(var h in this)this[h]=null}}]),f}();function Di(f,h){return{rect:h,coords:f,delta:{x:0,y:0},rectDelta:{left:0,right:0,top:0,bottom:0},eventProps:[],changed:!0}}d(Di,"ye");function ns(f,h){var x=f.defaults,_={start:f.start,set:f.set,beforeEnd:f.beforeEnd,stop:f.stop},N=d(function(H){var Z=H||{};for(var ne in Z.enabled=Z.enabled!==!1,x)ne in Z||(Z[ne]=x[ne]);var oe={options:Z,methods:_,name:h,enable:function(){return Z.enabled=!0,oe},disable:function(){return Z.enabled=!1,oe}};return oe},"i");return h&&typeof h=="string"&&(N._defaults=x,N._methods=_),N}d(ns,"be");function Ca(f){var h=f.iEvent,x=f.interaction.modification.result;x&&(h.modifiers=x.eventProps)}d(Ca,"xe");var o0={id:"modifiers/base",before:["actions"],install:function(f){f.defaults.perAction.modifiers=[]},listeners:{"interactions:new":function(f){var h=f.interaction;h.modification=new er(h)},"interactions:before-action-start":function(f){var h=f.interaction,x=f.interaction.modification;x.start(f,h.coords.start.page),h.edges=x.edges,x.applyToInteraction(f)},"interactions:before-action-move":function(f){var h=f.interaction,x=h.modification,_=x.setAndApply(f);return h.edges=x.edges,_},"interactions:before-action-end":function(f){var h=f.interaction,x=h.modification,_=x.beforeEnd(f);return h.edges=x.startEdges,_},"interactions:action-start":Ca,"interactions:action-move":Ca,"interactions:action-end":Ca,"interactions:after-action-start":function(f){return f.interaction.modification.restoreInteractionCoords(f)},"interactions:after-action-move":function(f){return f.interaction.modification.restoreInteractionCoords(f)},"interactions:stop":function(f){return f.interaction.modification.stop(f)}}},Pu=o0,Du={base:{preventDefault:"auto",deltaSource:"page"},perAction:{enabled:!1,origin:{x:0,y:0}},actions:{}},tr=function(f){l(x,f);var h=y(x);function x(_,N,H,Z,ne,oe,ce){var re;i(this,x),(re=h.call(this,_)).relatedTarget=null,re.screenX=void 0,re.screenY=void 0,re.button=void 0,re.buttons=void 0,re.ctrlKey=void 0,re.shiftKey=void 0,re.altKey=void 0,re.metaKey=void 0,re.page=void 0,re.client=void 0,re.delta=void 0,re.rect=void 0,re.x0=void 0,re.y0=void 0,re.t0=void 0,re.dt=void 0,re.duration=void 0,re.clientX0=void 0,re.clientY0=void 0,re.velocity=void 0,re.speed=void 0,re.swipe=void 0,re.axes=void 0,re.preEnd=void 0,ne=ne||_.element;var me=_.interactable,Se=(me&&me.options||Du).deltaSource,Te=ke(me,ne,H),De=Z==="start",Me=Z==="end",ze=De?g(re):_.prevEvent,qe=De?_.coords.start:Me?{page:ze.page,client:ze.client,timeStamp:_.coords.cur.timeStamp}:_.coords.cur;return re.page=te({},qe.page),re.client=te({},qe.client),re.rect=te({},_.rect),re.timeStamp=qe.timeStamp,Me||(re.page.x-=Te.x,re.page.y-=Te.y,re.client.x-=Te.x,re.client.y-=Te.y),re.ctrlKey=N.ctrlKey,re.altKey=N.altKey,re.shiftKey=N.shiftKey,re.metaKey=N.metaKey,re.button=N.button,re.buttons=N.buttons,re.target=ne,re.currentTarget=ne,re.preEnd=oe,re.type=ce||H+(Z||""),re.interactable=me,re.t0=De?_.pointers[_.pointers.length-1].downTime:ze.t0,re.x0=_.coords.start.page.x-Te.x,re.y0=_.coords.start.page.y-Te.y,re.clientX0=_.coords.start.client.x-Te.x,re.clientY0=_.coords.start.client.y-Te.y,re.delta=De||Me?{x:0,y:0}:{x:re[Se].x-ze[Se].x,y:re[Se].y-ze[Se].y},re.dt=_.coords.delta.timeStamp,re.duration=re.timeStamp-re.t0,re.velocity=te({},_.coords.velocity[Se]),re.speed=Ue(re.velocity.x,re.velocity.y),re.swipe=Me||Z==="inertiastart"?re.getSwipe():null,re}return d(x,"n"),o(x,[{key:"getSwipe",value:function(){var _=this._interaction;if(_.prevEvent.speed<600||this.timeStamp-_.prevEvent.timeStamp>150)return null;var N=180*Math.atan2(_.prevEvent.velocityY,_.prevEvent.velocityX)/Math.PI;N<0&&(N+=360);var H=112.5<=N&&N<247.5,Z=202.5<=N&&N<337.5;return{up:Z,down:!Z&&22.5<=N&&N<157.5,left:H,right:!H&&(292.5<=N||N<67.5),angle:N,speed:_.prevEvent.speed,velocity:{x:_.prevEvent.velocityX,y:_.prevEvent.velocityY}}}},{key:"preventDefault",value:function(){}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}]),x}(wn);Object.defineProperties(tr.prototype,{pageX:{get:function(){return this.page.x},set:function(f){this.page.x=f}},pageY:{get:function(){return this.page.y},set:function(f){this.page.y=f}},clientX:{get:function(){return this.client.x},set:function(f){this.client.x=f}},clientY:{get:function(){return this.client.y},set:function(f){this.client.y=f}},dx:{get:function(){return this.delta.x},set:function(f){this.delta.x=f}},dy:{get:function(){return this.delta.y},set:function(f){this.delta.y=f}},velocityX:{get:function(){return this.velocity.x},set:function(f){this.velocity.x=f}},velocityY:{get:function(){return this.velocity.y},set:function(f){this.velocity.y=f}}});var r0=o(d(function f(h,x,_,N,H){i(this,f),this.id=void 0,this.pointer=void 0,this.event=void 0,this.downTime=void 0,this.downTarget=void 0,this.id=h,this.pointer=x,this.event=_,this.downTime=N,this.downTarget=H},"t")),l0=function(f){return f.interactable="",f.element="",f.prepared="",f.pointerIsDown="",f.pointerWasMoved="",f._proxy="",f}({}),Iu=function(f){return f.start="",f.move="",f.end="",f.stop="",f.interacting="",f}({}),u0=0,c0=function(){function f(h){var x=this,_=h.pointerType,N=h.scopeFire;i(this,f),this.interactable=null,this.element=null,this.rect=null,this._rects=void 0,this.edges=null,this._scopeFire=void 0,this.prepared={name:null,axis:null,edges:null},this.pointerType=void 0,this.pointers=[],this.downEvent=null,this.downPointer={},this._latestPointer={pointer:null,event:null,eventTarget:null},this.prevEvent=null,this.pointerIsDown=!1,this.pointerWasMoved=!1,this._interacting=!1,this._ending=!1,this._stopped=!0,this._proxy=void 0,this.simulation=null,this.doMove=vt(function(re){this.move(re)},"The interaction.doMove() method has been renamed to interaction.move()"),this.coords={start:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},prev:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},cur:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},delta:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},velocity:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0}},this._id=u0++,this._scopeFire=N,this.pointerType=_;var H=this;this._proxy={};var Z=d(function(re){Object.defineProperty(x._proxy,re,{get:function(){return H[re]}})},"s");for(var ne in l0)Z(ne);var oe=d(function(re){Object.defineProperty(x._proxy,re,{value:function(){return H[re].apply(H,arguments)}})},"l");for(var ce in Iu)oe(ce);this._scopeFire("interactions:new",{interaction:this})}return d(f,"t"),o(f,[{key:"pointerMoveTolerance",get:function(){return 1}},{key:"pointerDown",value:function(h,x,_){var N=this.updatePointer(h,x,_,!0),H=this.pointers[N];this._scopeFire("interactions:down",{pointer:h,event:x,eventTarget:_,pointerIndex:N,pointerInfo:H,type:"down",interaction:this})}},{key:"start",value:function(h,x,_){return!(this.interacting()||!this.pointerIsDown||this.pointers.length<(h.name==="gesture"?2:1)||!x.options[h.name].enabled)&&(ts(this.prepared,h),this.interactable=x,this.element=_,this.rect=x.getRect(_),this.edges=this.prepared.edges?te({},this.prepared.edges):{left:!0,right:!0,top:!0,bottom:!0},this._stopped=!1,this._interacting=this._doPhase({interaction:this,event:this.downEvent,phase:"start"})&&!this._stopped,this._interacting)}},{key:"pointerMove",value:function(h,x,_){this.simulation||this.modification&&this.modification.endResult||this.updatePointer(h,x,_,!1);var N,H,Z=this.coords.cur.page.x===this.coords.prev.page.x&&this.coords.cur.page.y===this.coords.prev.page.y&&this.coords.cur.client.x===this.coords.prev.client.x&&this.coords.cur.client.y===this.coords.prev.client.y;this.pointerIsDown&&!this.pointerWasMoved&&(N=this.coords.cur.client.x-this.coords.start.client.x,H=this.coords.cur.client.y-this.coords.start.client.y,this.pointerWasMoved=Ue(N,H)>this.pointerMoveTolerance);var ne,oe,ce,re=this.getPointerIndex(h),me={pointer:h,pointerIndex:re,pointerInfo:this.pointers[re],event:x,type:"move",eventTarget:_,dx:N,dy:H,duplicate:Z,interaction:this};Z||(ne=this.coords.velocity,oe=this.coords.delta,ce=Math.max(oe.timeStamp/1e3,.001),ne.page.x=oe.page.x/ce,ne.page.y=oe.page.y/ce,ne.client.x=oe.client.x/ce,ne.client.y=oe.client.y/ce,ne.timeStamp=ce),this._scopeFire("interactions:move",me),Z||this.simulation||(this.interacting()&&(me.type=null,this.move(me)),this.pointerWasMoved&&de(this.coords.prev,this.coords.cur))}},{key:"move",value:function(h){h&&h.event||we(this.coords.delta),(h=te({pointer:this._latestPointer.pointer,event:this._latestPointer.event,eventTarget:this._latestPointer.eventTarget,interaction:this},h||{})).phase="move",this._doPhase(h)}},{key:"pointerUp",value:function(h,x,_,N){var H=this.getPointerIndex(h);H===-1&&(H=this.updatePointer(h,x,_,!1));var Z=/cancel$/i.test(x.type)?"cancel":"up";this._scopeFire("interactions:".concat(Z),{pointer:h,pointerIndex:H,pointerInfo:this.pointers[H],event:x,eventTarget:_,type:Z,curEventTarget:N,interaction:this}),this.simulation||this.end(x),this.removePointer(h,x)}},{key:"documentBlur",value:function(h){this.end(h),this._scopeFire("interactions:blur",{event:h,type:"blur",interaction:this})}},{key:"end",value:function(h){var x;this._ending=!0,h=h||this._latestPointer.event,this.interacting()&&(x=this._doPhase({event:h,interaction:this,phase:"end"})),this._ending=!1,x===!0&&this.stop()}},{key:"currentAction",value:function(){return this._interacting?this.prepared.name:null}},{key:"interacting",value:function(){return this._interacting}},{key:"stop",value:function(){this._scopeFire("interactions:stop",{interaction:this}),this.interactable=this.element=null,this._interacting=!1,this._stopped=!0,this.prepared.name=this.prevEvent=null}},{key:"getPointerIndex",value:function(h){var x=ft(h);return this.pointerType==="mouse"||this.pointerType==="pen"?this.pointers.length-1:Sn(this.pointers,function(_){return _.id===x})}},{key:"getPointerInfo",value:function(h){return this.pointers[this.getPointerIndex(h)]}},{key:"updatePointer",value:function(h,x,_,N){var H,Z,ne,oe=ft(h),ce=this.getPointerIndex(h),re=this.pointers[ce];return N=N!==!1&&(N||/(down|start)$/i.test(x.type)),re?re.pointer=h:(re=new r0(oe,h,x,null,null),ce=this.pointers.length,this.pointers.push(re)),Rt(this.coords.cur,this.pointers.map(function(me){return me.pointer}),this._now()),H=this.coords.delta,Z=this.coords.prev,ne=this.coords.cur,H.page.x=ne.page.x-Z.page.x,H.page.y=ne.page.y-Z.page.y,H.client.x=ne.client.x-Z.client.x,H.client.y=ne.client.y-Z.client.y,H.timeStamp=ne.timeStamp-Z.timeStamp,N&&(this.pointerIsDown=!0,re.downTime=this.coords.cur.timeStamp,re.downTarget=_,xe(this.downPointer,h),this.interacting()||(de(this.coords.start,this.coords.cur),de(this.coords.prev,this.coords.cur),this.downEvent=x,this.pointerWasMoved=!1)),this._updateLatestPointer(h,x,_),this._scopeFire("interactions:update-pointer",{pointer:h,event:x,eventTarget:_,down:N,pointerInfo:re,pointerIndex:ce,interaction:this}),ce}},{key:"removePointer",value:function(h,x){var _=this.getPointerIndex(h);if(_!==-1){var N=this.pointers[_];this._scopeFire("interactions:remove-pointer",{pointer:h,event:x,eventTarget:null,pointerIndex:_,pointerInfo:N,interaction:this}),this.pointers.splice(_,1),this.pointerIsDown=!1}}},{key:"_updateLatestPointer",value:function(h,x,_){this._latestPointer.pointer=h,this._latestPointer.event=x,this._latestPointer.eventTarget=_}},{key:"destroy",value:function(){this._latestPointer.pointer=null,this._latestPointer.event=null,this._latestPointer.eventTarget=null}},{key:"_createPreparedEvent",value:function(h,x,_,N){return new tr(this,h,this.prepared.name,x,this.element,_,N)}},{key:"_fireEvent",value:function(h){var x;(x=this.interactable)==null||x.fire(h),(!this.prevEvent||h.timeStamp>=this.prevEvent.timeStamp)&&(this.prevEvent=h)}},{key:"_doPhase",value:function(h){var x=h.event,_=h.phase,N=h.preEnd,H=h.type,Z=this.rect;if(Z&&_==="move"&&(ye(this.edges,Z,this.coords.delta[this.interactable.options.deltaSource]),Z.width=Z.right-Z.left,Z.height=Z.bottom-Z.top),this._scopeFire("interactions:before-action-".concat(_),h)===!1)return!1;var ne=h.iEvent=this._createPreparedEvent(x,_,N,H);return this._scopeFire("interactions:action-".concat(_),h),_==="start"&&(this.prevEvent=ne),this._fireEvent(ne),this._scopeFire("interactions:after-action-".concat(_),h),!0}},{key:"_now",value:function(){return Date.now()}}]),f}();function Lu(f){Tu(f.interaction)}d(Lu,"Ie");function Tu(f){if(!function(x){return!(!x.offset.pending.x&&!x.offset.pending.y)}(f))return!1;var h=f.offset.pending;return nr(f.coords.cur,h),nr(f.coords.delta,h),ye(f.edges,f.rect,h),h.x=0,h.y=0,!0}d(Tu,"Me");function d0(f){var h=f.x,x=f.y;this.offset.pending.x+=h,this.offset.pending.y+=x,this.offset.total.x+=h,this.offset.total.y+=x}d(d0,"ze");function nr(f,h){var x=f.page,_=f.client,N=h.x,H=h.y;x.x+=N,x.y+=H,_.x+=N,_.y+=H}d(nr,"Ae"),Iu.offsetBy="";var p0={id:"offset",before:["modifiers","pointer-events","actions","inertia"],install:function(f){f.Interaction.prototype.offsetBy=d0},listeners:{"interactions:new":function(f){f.interaction.offset={total:{x:0,y:0},pending:{x:0,y:0}}},"interactions:update-pointer":function(f){return function(h){h.pointerIsDown&&(nr(h.coords.cur,h.offset.total),h.offset.pending.x=0,h.offset.pending.y=0)}(f.interaction)},"interactions:before-action-start":Lu,"interactions:before-action-move":Lu,"interactions:before-action-end":function(f){var h=f.interaction;if(Tu(h))return h.move({offset:!0}),h.end(),!1},"interactions:stop":function(f){var h=f.interaction;h.offset.total.x=0,h.offset.total.y=0,h.offset.pending.x=0,h.offset.pending.y=0}}},Mu=p0,h0=function(){function f(h){i(this,f),this.active=!1,this.isModified=!1,this.smoothEnd=!1,this.allowResume=!1,this.modification=void 0,this.modifierCount=0,this.modifierArg=void 0,this.startCoords=void 0,this.t0=0,this.v0=0,this.te=0,this.targetOffset=void 0,this.modifiedOffset=void 0,this.currentOffset=void 0,this.lambda_v0=0,this.one_ve_v0=0,this.timeout=void 0,this.interaction=void 0,this.interaction=h}return d(f,"t"),o(f,[{key:"start",value:function(h){var x=this.interaction,_=Ii(x);if(!_||!_.enabled)return!1;var N=x.coords.velocity.client,H=Ue(N.x,N.y),Z=this.modification||(this.modification=new er(x));if(Z.copyFrom(x.modification),this.t0=x._now(),this.allowResume=_.allowResume,this.v0=H,this.currentOffset={x:0,y:0},this.startCoords=x.coords.cur.page,this.modifierArg=Z.fillArg({pageCoords:this.startCoords,preEnd:!0,phase:"inertiastart"}),this.t0-x.coords.cur.timeStamp<50&&H>_.minSpeed&&H>_.endSpeed)this.startInertia();else{if(Z.result=Z.setAll(this.modifierArg),!Z.result.changed)return!1;this.startSmoothEnd()}return x.modification.result.rect=null,x.offsetBy(this.targetOffset),x._doPhase({interaction:x,event:h,phase:"inertiastart"}),x.offsetBy({x:-this.targetOffset.x,y:-this.targetOffset.y}),x.modification.result.rect=null,this.active=!0,x.simulation=this,!0}},{key:"startInertia",value:function(){var h=this,x=this.interaction.coords.velocity.client,_=Ii(this.interaction),N=_.resistance,H=-Math.log(_.endSpeed/this.v0)/N;this.targetOffset={x:(x.x-H)/N,y:(x.y-H)/N},this.te=H,this.lambda_v0=N/this.v0,this.one_ve_v0=1-_.endSpeed/this.v0;var Z=this.modification,ne=this.modifierArg;ne.pageCoords={x:this.startCoords.x+this.targetOffset.x,y:this.startCoords.y+this.targetOffset.y},Z.result=Z.setAll(ne),Z.result.changed&&(this.isModified=!0,this.modifiedOffset={x:this.targetOffset.x+Z.result.delta.x,y:this.targetOffset.y+Z.result.delta.y}),this.onNextFrame(function(){return h.inertiaTick()})}},{key:"startSmoothEnd",value:function(){var h=this;this.smoothEnd=!0,this.isModified=!0,this.targetOffset={x:this.modification.result.delta.x,y:this.modification.result.delta.y},this.onNextFrame(function(){return h.smoothEndTick()})}},{key:"onNextFrame",value:function(h){var x=this;this.timeout=Oe.request(function(){x.active&&h()})}},{key:"inertiaTick",value:function(){var h,x,_,N,H,Z,ne,oe=this,ce=this.interaction,re=Ii(ce).resistance,me=(ce._now()-this.t0)/1e3;if(me<this.te){var Se,Te=1-(Math.exp(-re*me)-this.lambda_v0)/this.one_ve_v0;this.isModified?(h=0,x=0,_=this.targetOffset.x,N=this.targetOffset.y,H=this.modifiedOffset.x,Z=this.modifiedOffset.y,Se={x:Ou(ne=Te,h,_,H),y:Ou(ne,x,N,Z)}):Se={x:this.targetOffset.x*Te,y:this.targetOffset.y*Te};var De={x:Se.x-this.currentOffset.x,y:Se.y-this.currentOffset.y};this.currentOffset.x+=De.x,this.currentOffset.y+=De.y,ce.offsetBy(De),ce.move(),this.onNextFrame(function(){return oe.inertiaTick()})}else ce.offsetBy({x:this.modifiedOffset.x-this.currentOffset.x,y:this.modifiedOffset.y-this.currentOffset.y}),this.end()}},{key:"smoothEndTick",value:function(){var h=this,x=this.interaction,_=x._now()-this.t0,N=Ii(x).smoothEndDuration;if(_<N){var H={x:ju(_,0,this.targetOffset.x,N),y:ju(_,0,this.targetOffset.y,N)},Z={x:H.x-this.currentOffset.x,y:H.y-this.currentOffset.y};this.currentOffset.x+=Z.x,this.currentOffset.y+=Z.y,x.offsetBy(Z),x.move({skipModifiers:this.modifierCount}),this.onNextFrame(function(){return h.smoothEndTick()})}else x.offsetBy({x:this.targetOffset.x-this.currentOffset.x,y:this.targetOffset.y-this.currentOffset.y}),this.end()}},{key:"resume",value:function(h){var x=h.pointer,_=h.event,N=h.eventTarget,H=this.interaction;H.offsetBy({x:-this.currentOffset.x,y:-this.currentOffset.y}),H.updatePointer(x,_,N,!0),H._doPhase({interaction:H,event:_,phase:"resume"}),de(H.coords.prev,H.coords.cur),this.stop()}},{key:"end",value:function(){this.interaction.move(),this.interaction.end(),this.stop()}},{key:"stop",value:function(){this.active=this.smoothEnd=!1,this.interaction.simulation=null,Oe.cancel(this.timeout)}}]),f}();function Ii(f){var h=f.interactable,x=f.prepared;return h&&h.options&&x.name&&h.options[x.name].inertia}d(Ii,"Fe");var f0={id:"inertia",before:["modifiers","actions"],install:function(f){var h=f.defaults;f.usePlugin(Mu),f.usePlugin(Pu),f.actions.phases.inertiastart=!0,f.actions.phases.resume=!0,h.perAction.inertia={enabled:!1,resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,smoothEndDuration:300}},listeners:{"interactions:new":function(f){var h=f.interaction;h.inertia=new h0(h)},"interactions:before-action-end":function(f){var h=f.interaction,x=f.event;return(!h._interacting||h.simulation||!h.inertia.start(x))&&null},"interactions:down":function(f){var h=f.interaction,x=f.eventTarget,_=h.inertia;if(_.active)for(var N=x;v.element(N);){if(N===h.element){_.resume(f);break}N=G(N)}},"interactions:stop":function(f){var h=f.interaction.inertia;h.active&&h.stop()},"interactions:before-action-resume":function(f){var h=f.interaction.modification;h.stop(f),h.start(f,f.interaction.coords.cur.page),h.applyToInteraction(f)},"interactions:before-action-inertiastart":function(f){return f.interaction.modification.setAndApply(f)},"interactions:action-resume":Ca,"interactions:action-inertiastart":Ca,"interactions:after-action-inertiastart":function(f){return f.interaction.modification.restoreInteractionCoords(f)},"interactions:after-action-resume":function(f){return f.interaction.modification.restoreInteractionCoords(f)}}};function Ou(f,h,x,_){var N=1-f;return N*N*h+2*N*f*x+f*f*_}d(Ou,"Ye");function ju(f,h,x,_){return-x*(f/=_)*(f-2)+h}d(ju,"Le");var m0=f0;function Nu(f,h){for(var x=0;x<h.length;x++){var _=h[x];if(f.immediatePropagationStopped)break;_(f)}}d(Nu,"Be");var Fu=function(){function f(h){i(this,f),this.options=void 0,this.types={},this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.global=void 0,this.options=te({},h||{})}return d(f,"t"),o(f,[{key:"fire",value:function(h){var x,_=this.global;(x=this.types[h.type])&&Nu(h,x),!h.propagationStopped&&_&&(x=_[h.type])&&Nu(h,x)}},{key:"on",value:function(h,x){var _=Ie(h,x);for(h in _)this.types[h]=sn(this.types[h]||[],_[h])}},{key:"off",value:function(h,x){var _=Ie(h,x);for(h in _){var N=this.types[h];if(N&&N.length)for(var H=0,Z=_[h];H<Z.length;H++){var ne=Z[H],oe=N.indexOf(ne);oe!==-1&&N.splice(oe,1)}}}},{key:"getRect",value:function(h){return null}}]),f}(),g0=function(){function f(h){i(this,f),this.currentTarget=void 0,this.originalEvent=void 0,this.type=void 0,this.originalEvent=h,xe(this,h)}return d(f,"t"),o(f,[{key:"preventOriginalDefault",value:function(){this.originalEvent.preventDefault()}},{key:"stopPropagation",value:function(){this.originalEvent.stopPropagation()}},{key:"stopImmediatePropagation",value:function(){this.originalEvent.stopImmediatePropagation()}}]),f}();function Ea(f){return v.object(f)?{capture:!!f.capture,passive:!!f.passive}:{capture:!!f,passive:!1}}d(Ea,"Ge");function Li(f,h){return f===h||(typeof f=="boolean"?!!h.capture===f&&!h.passive:!!f.capture==!!h.capture&&!!f.passive==!!h.passive)}d(Li,"Ne");var b0={id:"events",install:function(f){var h,x=[],_={},N=[],H={add:Z,remove:ne,addDelegate:function(re,me,Se,Te,De){var Me=Ea(De);if(!_[Se]){_[Se]=[];for(var ze=0;ze<N.length;ze++){var qe=N[ze];Z(qe,Se,oe),Z(qe,Se,ce,!0)}}var We=_[Se],nt=Cn(We,function(rt){return rt.selector===re&&rt.context===me});nt||(nt={selector:re,context:me,listeners:[]},We.push(nt)),nt.listeners.push({func:Te,options:Me})},removeDelegate:function(re,me,Se,Te,De){var Me,ze=Ea(De),qe=_[Se],We=!1;if(qe)for(Me=qe.length-1;Me>=0;Me--){var nt=qe[Me];if(nt.selector===re&&nt.context===me){for(var rt=nt.listeners,Je=rt.length-1;Je>=0;Je--){var st=rt[Je];if(st.func===Te&&Li(st.options,ze)){rt.splice(Je,1),rt.length||(qe.splice(Me,1),ne(me,Se,oe),ne(me,Se,ce,!0)),We=!0;break}}if(We)break}}},delegateListener:oe,delegateUseCapture:ce,delegatedEvents:_,documents:N,targets:x,supportsOptions:!1,supportsPassive:!1};function Z(re,me,Se,Te){if(re.addEventListener){var De=Ea(Te),Me=Cn(x,function(ze){return ze.eventTarget===re});Me||(Me={eventTarget:re,events:{}},x.push(Me)),Me.events[me]||(Me.events[me]=[]),Cn(Me.events[me],function(ze){return ze.func===Se&&Li(ze.options,De)})||(re.addEventListener(me,Se,H.supportsOptions?De:De.capture),Me.events[me].push({func:Se,options:De}))}}d(Z,"a");function ne(re,me,Se,Te){if(re.addEventListener&&re.removeEventListener){var De=Sn(x,function(Kt){return Kt.eventTarget===re}),Me=x[De];if(Me&&Me.events)if(me!=="all"){var ze=!1,qe=Me.events[me];if(qe){if(Se==="all"){for(var We=qe.length-1;We>=0;We--){var nt=qe[We];ne(re,me,nt.func,nt.options)}return}for(var rt=Ea(Te),Je=0;Je<qe.length;Je++){var st=qe[Je];if(st.func===Se&&Li(st.options,rt)){re.removeEventListener(me,Se,H.supportsOptions?rt:rt.capture),qe.splice(Je,1),qe.length===0&&(delete Me.events[me],ze=!0);break}}}ze&&!Object.keys(Me.events).length&&x.splice(De,1)}else for(me in Me.events)Me.events.hasOwnProperty(me)&&ne(re,me,"all")}}d(ne,"s");function oe(re,me){for(var Se=Ea(me),Te=new g0(re),De=_[re.type],Me=nn(re)[0],ze=Me;v.element(ze);){for(var qe=0;qe<De.length;qe++){var We=De[qe],nt=We.selector,rt=We.context;if(J(ze,nt)&&X(rt,Me)&&X(rt,ze)){var Je=We.listeners;Te.currentTarget=ze;for(var st=0;st<Je.length;st++){var Kt=Je[st];Li(Kt.options,Se)&&Kt.func(Te)}}}ze=G(ze)}}d(oe,"c");function ce(re){return oe(re,!0)}return d(ce,"l"),(h=f.document)==null||h.createElement("div").addEventListener("test",null,{get capture(){return H.supportsOptions=!0},get passive(){return H.supportsPassive=!0}}),f.events=H,H}},sr={methodOrder:["simulationResume","mouseOrPen","hasPointer","idle"],search:function(f){for(var h=0,x=sr.methodOrder;h<x.length;h++){var _=x[h],N=sr[_](f);if(N)return N}return null},simulationResume:function(f){var h=f.pointerType,x=f.eventType,_=f.eventTarget,N=f.scope;if(!/down|start/i.test(x))return null;for(var H=0,Z=N.interactions.list;H<Z.length;H++){var ne=Z[H],oe=_;if(ne.simulation&&ne.simulation.allowResume&&ne.pointerType===h)for(;oe;){if(oe===ne.element)return ne;oe=G(oe)}}return null},mouseOrPen:function(f){var h,x=f.pointerId,_=f.pointerType,N=f.eventType,H=f.scope;if(_!=="mouse"&&_!=="pen")return null;for(var Z=0,ne=H.interactions.list;Z<ne.length;Z++){var oe=ne[Z];if(oe.pointerType===_){if(oe.simulation&&!$u(oe,x))continue;if(oe.interacting())return oe;h||(h=oe)}}if(h)return h;for(var ce=0,re=H.interactions.list;ce<re.length;ce++){var me=re[ce];if(!(me.pointerType!==_||/down/i.test(N)&&me.simulation))return me}return null},hasPointer:function(f){for(var h=f.pointerId,x=0,_=f.scope.interactions.list;x<_.length;x++){var N=_[x];if($u(N,h))return N}return null},idle:function(f){for(var h=f.pointerType,x=0,_=f.scope.interactions.list;x<_.length;x++){var N=_[x];if(N.pointers.length===1){var H=N.interactable;if(H&&(!H.options.gesture||!H.options.gesture.enabled))continue}else if(N.pointers.length>=2)continue;if(!N.interacting()&&h===N.pointerType)return N}return null}};function $u(f,h){return f.pointers.some(function(x){return x.id===h})}d($u,"Ke");var v0=sr,ar=["pointerDown","pointerMove","pointerUp","updatePointer","removePointer","windowBlur"];function Ru(f,h){return function(x){var _=h.interactions.list,N=Cs(x),H=nn(x),Z=H[0],ne=H[1],oe=[];if(/^touch/.test(x.type)){h.prevTouchTime=h.now();for(var ce=0,re=x.changedTouches;ce<re.length;ce++){var me=re[ce],Se={pointer:me,pointerId:ft(me),pointerType:N,eventType:x.type,eventTarget:Z,curEventTarget:ne,scope:h},Te=qu(Se);oe.push([Se.pointer,Se.eventTarget,Se.curEventTarget,Te])}}else{var De=!1;if(!R.supportsPointerEvent&&/mouse/.test(x.type)){for(var Me=0;Me<_.length&&!De;Me++)De=_[Me].pointerType!=="mouse"&&_[Me].pointerIsDown;De=De||h.now()-h.prevTouchTime<500||x.timeStamp===0}if(!De){var ze={pointer:x,pointerId:ft(x),pointerType:N,eventType:x.type,curEventTarget:ne,eventTarget:Z,scope:h},qe=qu(ze);oe.push([ze.pointer,ze.eventTarget,ze.curEventTarget,qe])}}for(var We=0;We<oe.length;We++){var nt=oe[We],rt=nt[0],Je=nt[1],st=nt[2];nt[3][f](rt,x,Je,st)}}}d(Ru,"Qe");function qu(f){var h=f.pointerType,x=f.scope,_={interaction:v0.search(f),searchDetails:f};return x.fire("interactions:find",_),_.interaction||x.interactions.new({pointerType:h})}d(qu,"Ze");function ir(f,h){var x=f.doc,_=f.scope,N=f.options,H=_.interactions.docEvents,Z=_.events,ne=Z[h];for(var oe in _.browser.isIOS&&!N.events&&(N.events={passive:!1}),Z.delegatedEvents)ne(x,oe,Z.delegateListener),ne(x,oe,Z.delegateUseCapture,!0);for(var ce=N&&N.events,re=0;re<H.length;re++){var me=H[re];ne(x,me.type,me.listener,ce)}}d(ir,"tn");var y0={id:"core/interactions",install:function(f){for(var h={},x=0;x<ar.length;x++){var _=ar[x];h[_]=Ru(_,f)}var N,H=R.pEventTypes;function Z(){for(var ne=0,oe=f.interactions.list;ne<oe.length;ne++){var ce=oe[ne];if(ce.pointerIsDown&&ce.pointerType==="touch"&&!ce._interacting)for(var re=function(){var Te=Se[me];f.documents.some(function(De){return X(De.doc,Te.downTarget)})||ce.removePointer(Te.pointer,Te.event)},me=0,Se=ce.pointers;me<Se.length;me++)re()}}d(Z,"l"),(N=W.PointerEvent?[{type:H.down,listener:Z},{type:H.down,listener:h.pointerDown},{type:H.move,listener:h.pointerMove},{type:H.up,listener:h.pointerUp},{type:H.cancel,listener:h.pointerUp}]:[{type:"mousedown",listener:h.pointerDown},{type:"mousemove",listener:h.pointerMove},{type:"mouseup",listener:h.pointerUp},{type:"touchstart",listener:Z},{type:"touchstart",listener:h.pointerDown},{type:"touchmove",listener:h.pointerMove},{type:"touchend",listener:h.pointerUp},{type:"touchcancel",listener:h.pointerUp}]).push({type:"blur",listener:function(ne){for(var oe=0,ce=f.interactions.list;oe<ce.length;oe++)ce[oe].documentBlur(ne)}}),f.prevTouchTime=0,f.Interaction=function(ne){l(ce,ne);var oe=y(ce);function ce(){return i(this,ce),oe.apply(this,arguments)}return d(ce,"i"),o(ce,[{key:"pointerMoveTolerance",get:function(){return f.interactions.pointerMoveTolerance},set:function(re){f.interactions.pointerMoveTolerance=re}},{key:"_now",value:function(){return f.now()}}]),ce}(c0),f.interactions={list:[],new:function(ne){ne.scopeFire=function(ce,re){return f.fire(ce,re)};var oe=new f.Interaction(ne);return f.interactions.list.push(oe),oe},listeners:h,docEvents:N,pointerMoveTolerance:1},f.usePlugin(ku)},listeners:{"scope:add-document":function(f){return ir(f,"add")},"scope:remove-document":function(f){return ir(f,"remove")},"interactable:unset":function(f,h){for(var x=f.interactable,_=h.interactions.list.length-1;_>=0;_--){var N=h.interactions.list[_];N.interactable===x&&(N.stop(),h.fire("interactions:destroy",{interaction:N}),N.destroy(),h.interactions.list.length>2&&h.interactions.list.splice(_,1))}}},onDocSignal:ir,doOnInteractions:Ru,methodNames:ar},x0=y0,ss=function(f){return f[f.On=0]="On",f[f.Off=1]="Off",f}(ss||{}),w0=function(){function f(h,x,_,N){i(this,f),this.target=void 0,this.options=void 0,this._actions=void 0,this.events=new Fu,this._context=void 0,this._win=void 0,this._doc=void 0,this._scopeEvents=void 0,this._actions=x.actions,this.target=h,this._context=x.context||_,this._win=L(le(h)?this._context:h),this._doc=this._win.document,this._scopeEvents=N,this.set(x)}return d(f,"t"),o(f,[{key:"_defaults",get:function(){return{base:{},perAction:{},actions:{}}}},{key:"setOnEvents",value:function(h,x){return v.func(x.onstart)&&this.on("".concat(h,"start"),x.onstart),v.func(x.onmove)&&this.on("".concat(h,"move"),x.onmove),v.func(x.onend)&&this.on("".concat(h,"end"),x.onend),v.func(x.oninertiastart)&&this.on("".concat(h,"inertiastart"),x.oninertiastart),this}},{key:"updatePerActionListeners",value:function(h,x,_){var N,H=this,Z=(N=this._actions.map[h])==null?void 0:N.filterEventType,ne=d(function(oe){return(Z==null||Z(oe))&&Pi(oe,H._actions)},"a");(v.array(x)||v.object(x))&&this._onOff(ss.Off,h,x,void 0,ne),(v.array(_)||v.object(_))&&this._onOff(ss.On,h,_,void 0,ne)}},{key:"setPerAction",value:function(h,x){var _=this._defaults;for(var N in x){var H=N,Z=this.options[h],ne=x[H];H==="listeners"&&this.updatePerActionListeners(h,Z.listeners,ne),v.array(ne)?Z[H]=Un(ne):v.plainObject(ne)?(Z[H]=te(Z[H]||{},Vs(ne)),v.object(_.perAction[H])&&"enabled"in _.perAction[H]&&(Z[H].enabled=ne.enabled!==!1)):v.bool(ne)&&v.object(_.perAction[H])?Z[H].enabled=ne:Z[H]=ne}}},{key:"getRect",value:function(h){return h=h||(v.element(this.target)?this.target:null),v.string(this.target)&&(h=h||this._context.querySelector(this.target)),Y(h)}},{key:"rectChecker",value:function(h){var x=this;return v.func(h)?(this.getRect=function(_){var N=te({},h.apply(x,_));return"width"in N||(N.width=N.right-N.left,N.height=N.bottom-N.top),N},this):h===null?(delete this.getRect,this):this.getRect}},{key:"_backCompatOption",value:function(h,x){if(le(x)||v.object(x)){for(var _ in this.options[h]=x,this._actions.map)this.options[_][h]=x;return this}return this.options[h]}},{key:"origin",value:function(h){return this._backCompatOption("origin",h)}},{key:"deltaSource",value:function(h){return h==="page"||h==="client"?(this.options.deltaSource=h,this):this.options.deltaSource}},{key:"getAllElements",value:function(){var h=this.target;return v.string(h)?Array.from(this._context.querySelectorAll(h)):v.func(h)&&h.getAllElements?h.getAllElements():v.element(h)?[h]:[]}},{key:"context",value:function(){return this._context}},{key:"inContext",value:function(h){return this._context===h.ownerDocument||X(this._context,h)}},{key:"testIgnoreAllow",value:function(h,x,_){return!this.testIgnore(h.ignoreFrom,x,_)&&this.testAllow(h.allowFrom,x,_)}},{key:"testAllow",value:function(h,x,_){return!h||!!v.element(_)&&(v.string(h)?C(_,h,x):!!v.element(h)&&X(h,_))}},{key:"testIgnore",value:function(h,x,_){return!(!h||!v.element(_))&&(v.string(h)?C(_,h,x):!!v.element(h)&&X(h,_))}},{key:"fire",value:function(h){return this.events.fire(h),this}},{key:"_onOff",value:function(h,x,_,N,H){v.object(x)&&!v.array(x)&&(N=_,_=null);var Z=Ie(x,_,H);for(var ne in Z){ne==="wheel"&&(ne=R.wheelEvent);for(var oe=0,ce=Z[ne];oe<ce.length;oe++){var re=ce[oe];Pi(ne,this._actions)?this.events[h===ss.On?"on":"off"](ne,re):v.string(this.target)?this._scopeEvents[h===ss.On?"addDelegate":"removeDelegate"](this.target,this._context,ne,re,N):this._scopeEvents[h===ss.On?"add":"remove"](this.target,ne,re,N)}}return this}},{key:"on",value:function(h,x,_){return this._onOff(ss.On,h,x,_)}},{key:"off",value:function(h,x,_){return this._onOff(ss.Off,h,x,_)}},{key:"set",value:function(h){var x=this._defaults;for(var _ in v.object(h)||(h={}),this.options=Vs(x.base),this._actions.methodDict){var N=_,H=this._actions.methodDict[N];this.options[N]={},this.setPerAction(N,te(te({},x.perAction),x.actions[N])),this[H](h[N])}for(var Z in h)Z!=="getRect"?v.func(this[Z])&&this[Z](h[Z]):this.rectChecker(h.getRect);return this}},{key:"unset",value:function(){if(v.string(this.target))for(var h in this._scopeEvents.delegatedEvents)for(var x=this._scopeEvents.delegatedEvents[h],_=x.length-1;_>=0;_--){var N=x[_],H=N.selector,Z=N.context,ne=N.listeners;H===this.target&&Z===this._context&&x.splice(_,1);for(var oe=ne.length-1;oe>=0;oe--)this._scopeEvents.removeDelegate(this.target,this._context,h,ne[oe][0],ne[oe][1])}else this._scopeEvents.remove(this.target,"all")}}]),f}(),S0=function(){function f(h){var x=this;i(this,f),this.list=[],this.selectorMap={},this.scope=void 0,this.scope=h,h.addListeners({"interactable:unset":function(_){var N=_.interactable,H=N.target,Z=v.string(H)?x.selectorMap[H]:H[x.scope.id],ne=Sn(Z,function(oe){return oe===N});Z.splice(ne,1)}})}return d(f,"t"),o(f,[{key:"new",value:function(h,x){x=te(x||{},{actions:this.scope.actions});var _=new this.scope.Interactable(h,x,this.scope.document,this.scope.events);return this.scope.addDocument(_._doc),this.list.push(_),v.string(h)?(this.selectorMap[h]||(this.selectorMap[h]=[]),this.selectorMap[h].push(_)):(_.target[this.scope.id]||Object.defineProperty(h,this.scope.id,{value:[],configurable:!0}),h[this.scope.id].push(_)),this.scope.fire("interactable:new",{target:h,options:x,interactable:_,win:this.scope._win}),_}},{key:"getExisting",value:function(h,x){var _=x&&x.context||this.scope.document,N=v.string(h),H=N?this.selectorMap[h]:h[this.scope.id];if(H)return Cn(H,function(Z){return Z._context===_&&(N||Z.inContext(h))})}},{key:"forEachMatch",value:function(h,x){for(var _=0,N=this.list;_<N.length;_++){var H=N[_],Z=void 0;if((v.string(H.target)?v.element(h)&&J(h,H.target):h===H.target)&&H.inContext(h)&&(Z=x(H)),Z!==void 0)return Z}}}]),f}(),C0=function(){function f(){var h=this;i(this,f),this.id="__interact_scope_".concat(Math.floor(100*Math.random())),this.isInitialized=!1,this.listenerMaps=[],this.browser=R,this.defaults=Vs(Du),this.Eventable=Fu,this.actions={map:{},phases:{start:!0,move:!0,end:!0},methodDict:{},phaselessTypes:{}},this.interactStatic=function(_){var N=d(function H(Z,ne){var oe=_.interactables.getExisting(Z,ne);return oe||((oe=_.interactables.new(Z,ne)).events.global=H.globalEvents),oe},"e");return N.getPointerAverage=tn,N.getTouchBBox=Jt,N.getTouchDistance=Qn,N.getTouchAngle=es,N.getElementRect=Y,N.getElementClientRect=z,N.matchesSelector=J,N.closest=Q,N.globalEvents={},N.version="1.10.27",N.scope=_,N.use=function(H,Z){return this.scope.usePlugin(H,Z),this},N.isSet=function(H,Z){return!!this.scope.interactables.get(H,Z&&Z.context)},N.on=vt(function(H,Z,ne){if(v.string(H)&&H.search(" ")!==-1&&(H=H.trim().split(/ +/)),v.array(H)){for(var oe=0,ce=H;oe<ce.length;oe++){var re=ce[oe];this.on(re,Z,ne)}return this}if(v.object(H)){for(var me in H)this.on(me,H[me],Z);return this}return Pi(H,this.scope.actions)?this.globalEvents[H]?this.globalEvents[H].push(Z):this.globalEvents[H]=[Z]:this.scope.events.add(this.scope.document,H,Z,{options:ne}),this},"The interact.on() method is being deprecated"),N.off=vt(function(H,Z,ne){if(v.string(H)&&H.search(" ")!==-1&&(H=H.trim().split(/ +/)),v.array(H)){for(var oe=0,ce=H;oe<ce.length;oe++){var re=ce[oe];this.off(re,Z,ne)}return this}if(v.object(H)){for(var me in H)this.off(me,H[me],Z);return this}var Se;return Pi(H,this.scope.actions)?H in this.globalEvents&&(Se=this.globalEvents[H].indexOf(Z))!==-1&&this.globalEvents[H].splice(Se,1):this.scope.events.remove(this.scope.document,H,Z,ne),this},"The interact.off() method is being deprecated"),N.debug=function(){return this.scope},N.supportsTouch=function(){return R.supportsTouch},N.supportsPointerEvent=function(){return R.supportsPointerEvent},N.stop=function(){for(var H=0,Z=this.scope.interactions.list;H<Z.length;H++)Z[H].stop();return this},N.pointerMoveTolerance=function(H){return v.number(H)?(this.scope.interactions.pointerMoveTolerance=H,this):this.scope.interactions.pointerMoveTolerance},N.addDocument=function(H,Z){this.scope.addDocument(H,Z)},N.removeDocument=function(H){this.scope.removeDocument(H)},N}(this),this.InteractEvent=tr,this.Interactable=void 0,this.interactables=new S0(this),this._win=void 0,this.document=void 0,this.window=void 0,this.documents=[],this._plugins={list:[],map:{}},this.onWindowUnload=function(_){return h.removeDocument(_.target)};var x=this;this.Interactable=function(_){l(H,_);var N=y(H);function H(){return i(this,H),N.apply(this,arguments)}return d(H,"i"),o(H,[{key:"_defaults",get:function(){return x.defaults}},{key:"set",value:function(Z){return w(u(H.prototype),"set",this).call(this,Z),x.fire("interactable:set",{options:Z,interactable:this}),this}},{key:"unset",value:function(){w(u(H.prototype),"unset",this).call(this);var Z=x.interactables.list.indexOf(this);Z<0||(x.interactables.list.splice(Z,1),x.fire("interactable:unset",{interactable:this}))}}]),H}(w0)}return d(f,"t"),o(f,[{key:"addListeners",value:function(h,x){this.listenerMaps.push({id:x,map:h})}},{key:"fire",value:function(h,x){for(var _=0,N=this.listenerMaps;_<N.length;_++){var H=N[_].map[h];if(H&&H(x,this,h)===!1)return!1}}},{key:"init",value:function(h){return this.isInitialized?this:function(x,_){return x.isInitialized=!0,v.window(_)&&j(_),W.init(_),R.init(_),Oe.init(_),x.window=_,x.document=_.document,x.usePlugin(x0),x.usePlugin(b0),x}(this,h)}},{key:"pluginIsInstalled",value:function(h){var x=h.id;return x?!!this._plugins.map[x]:this._plugins.list.indexOf(h)!==-1}},{key:"usePlugin",value:function(h,x){if(!this.isInitialized)return this;if(this.pluginIsInstalled(h))return this;if(h.id&&(this._plugins.map[h.id]=h),this._plugins.list.push(h),h.install&&h.install(this,x),h.listeners&&h.before){for(var _=0,N=this.listenerMaps.length,H=h.before.reduce(function(ne,oe){return ne[oe]=!0,ne[Bu(oe)]=!0,ne},{});_<N;_++){var Z=this.listenerMaps[_].id;if(Z&&(H[Z]||H[Bu(Z)]))break}this.listenerMaps.splice(_,0,{id:h.id,map:h.listeners})}else h.listeners&&this.listenerMaps.push({id:h.id,map:h.listeners});return this}},{key:"addDocument",value:function(h,x){if(this.getDocIndex(h)!==-1)return!1;var _=L(h);x=x?te({},x):{},this.documents.push({doc:h,options:x}),this.events.documents.push(h),h!==this.document&&this.events.add(_,"unload",this.onWindowUnload),this.fire("scope:add-document",{doc:h,window:_,scope:this,options:x})}},{key:"removeDocument",value:function(h){var x=this.getDocIndex(h),_=L(h),N=this.documents[x].options;this.events.remove(_,"unload",this.onWindowUnload),this.documents.splice(x,1),this.events.documents.splice(x,1),this.fire("scope:remove-document",{doc:h,window:_,scope:this,options:N})}},{key:"getDocIndex",value:function(h){for(var x=0;x<this.documents.length;x++)if(this.documents[x].doc===h)return x;return-1}},{key:"getDocOptions",value:function(h){var x=this.getDocIndex(h);return x===-1?null:this.documents[x].options}},{key:"now",value:function(){return(this.window.Date||Date).now()}}]),f}();function Bu(f){return f&&f.replace(/\/.*$/,"")}d(Bu,"cn");var Uu=new C0,Wt=Uu.interactStatic,E0=typeof globalThis<"u"?globalThis:window;Uu.init(E0);var A0=Object.freeze({__proto__:null,edgeTarget:function(){},elements:function(){},grid:function(f){var h=[["x","y"],["left","top"],["right","bottom"],["width","height"]].filter(function(_){var N=_[0],H=_[1];return N in f||H in f}),x=d(function(_,N){for(var H=f.range,Z=f.limits,ne=Z===void 0?{left:-1/0,right:1/0,top:-1/0,bottom:1/0}:Z,oe=f.offset,ce=oe===void 0?{x:0,y:0}:oe,re={range:H,grid:f,x:null,y:null},me=0;me<h.length;me++){var Se=h[me],Te=Se[0],De=Se[1],Me=Math.round((_-ce.x)/f[Te]),ze=Math.round((N-ce.y)/f[De]);re[Te]=Math.max(ne.left,Math.min(ne.right,Me*f[Te]+ce.x)),re[De]=Math.max(ne.top,Math.min(ne.bottom,ze*f[De]+ce.y))}return re},"n");return x.grid=f,x.coordFields=h,x}}),_0={id:"snappers",install:function(f){var h=f.interactStatic;h.snappers=te(h.snappers||{},A0),h.createSnapGrid=h.snappers.grid}},k0=_0,P0={start:function(f){var h=f.state,x=f.rect,_=f.edges,N=f.pageCoords,H=h.options,Z=H.ratio,ne=H.enabled,oe=h.options,ce=oe.equalDelta,re=oe.modifiers;Z==="preserve"&&(Z=x.width/x.height),h.startCoords=te({},N),h.startRect=te({},x),h.ratio=Z,h.equalDelta=ce;var me=h.linkedEdges={top:_.top||_.left&&!_.bottom,left:_.left||_.top&&!_.right,bottom:_.bottom||_.right&&!_.top,right:_.right||_.bottom&&!_.left};if(h.xIsPrimaryAxis=!(!_.left&&!_.right),h.equalDelta){var Se=(me.left?1:-1)*(me.top?1:-1);h.edgeSign={x:Se,y:Se}}else h.edgeSign={x:me.left?-1:1,y:me.top?-1:1};if(ne!==!1&&te(_,me),re!=null&&re.length){var Te=new er(f.interaction);Te.copyFrom(f.interaction.modification),Te.prepareStates(re),h.subModification=Te,Te.startAll(s({},f))}},set:function(f){var h=f.state,x=f.rect,_=f.coords,N=h.linkedEdges,H=te({},_),Z=h.equalDelta?D0:I0;if(te(f.edges,N),Z(h,h.xIsPrimaryAxis,_,x),!h.subModification)return null;var ne=te({},x);ye(N,ne,{x:_.x-H.x,y:_.y-H.y});var oe=h.subModification.setAll(s(s({},f),{},{rect:ne,edges:N,pageCoords:_,prevCoords:_,prevRect:ne})),ce=oe.delta;return oe.changed&&(Z(h,Math.abs(ce.x)>Math.abs(ce.y),oe.coords,oe.rect),te(_,oe.coords)),oe.eventProps},defaults:{ratio:"preserve",equalDelta:!1,modifiers:[],enabled:!1}};function D0(f,h,x){var _=f.startCoords,N=f.edgeSign;h?x.y=_.y+(x.x-_.x)*N.y:x.x=_.x+(x.y-_.y)*N.x}d(D0,"gn");function I0(f,h,x,_){var N=f.startRect,H=f.startCoords,Z=f.ratio,ne=f.edgeSign;if(h){var oe=_.width/Z;x.y=H.y+(oe-N.height)*ne.y}else{var ce=_.height*Z;x.x=H.x+(ce-N.width)*ne.x}}d(I0,"mn");var L0=ns(P0,"aspectRatio"),zu=d(function(){},"bn");zu._defaults={};var Ti=zu;function ks(f,h,x){return v.func(f)?fe(f,h.interactable,h.element,[x.x,x.y,h]):fe(f,h.interactable,h.element)}d(ks,"wn");var Mi={start:function(f){var h=f.rect,x=f.startOffset,_=f.state,N=f.interaction,H=f.pageCoords,Z=_.options,ne=Z.elementRect,oe=te({left:0,top:0,right:0,bottom:0},Z.offset||{});if(h&&ne){var ce=ks(Z.restriction,N,H);if(ce){var re=ce.right-ce.left-h.width,me=ce.bottom-ce.top-h.height;re<0&&(oe.left+=re,oe.right+=re),me<0&&(oe.top+=me,oe.bottom+=me)}oe.left+=x.left-h.width*ne.left,oe.top+=x.top-h.height*ne.top,oe.right+=x.right-h.width*(1-ne.right),oe.bottom+=x.bottom-h.height*(1-ne.bottom)}_.offset=oe},set:function(f){var h=f.coords,x=f.interaction,_=f.state,N=_.options,H=_.offset,Z=ks(N.restriction,x,h);if(Z){var ne=function(oe){return!oe||"left"in oe&&"top"in oe||((oe=te({},oe)).left=oe.x||0,oe.top=oe.y||0,oe.right=oe.right||oe.left+oe.width,oe.bottom=oe.bottom||oe.top+oe.height),oe}(Z);h.x=Math.max(Math.min(ne.right-H.right,h.x),ne.left+H.left),h.y=Math.max(Math.min(ne.bottom-H.bottom,h.y),ne.top+H.top)}},defaults:{restriction:null,elementRect:null,offset:null,endOnly:!1,enabled:!1}},T0=ns(Mi,"restrict"),Hu={top:1/0,left:1/0,bottom:-1/0,right:-1/0},Gu={top:-1/0,left:-1/0,bottom:1/0,right:1/0};function Vu(f,h){for(var x=0,_=["top","left","bottom","right"];x<_.length;x++){var N=_[x];N in f||(f[N]=h[N])}return f}d(Vu,"Pn");var Aa={noInner:Hu,noOuter:Gu,start:function(f){var h,x=f.interaction,_=f.startOffset,N=f.state,H=N.options;H&&(h=be(ks(H.offset,x,x.coords.start.page))),h=h||{x:0,y:0},N.offset={top:h.y+_.top,left:h.x+_.left,bottom:h.y-_.bottom,right:h.x-_.right}},set:function(f){var h=f.coords,x=f.edges,_=f.interaction,N=f.state,H=N.offset,Z=N.options;if(x){var ne=te({},h),oe=ks(Z.inner,_,ne)||{},ce=ks(Z.outer,_,ne)||{};Vu(oe,Hu),Vu(ce,Gu),x.top?h.y=Math.min(Math.max(ce.top+H.top,ne.y),oe.top+H.top):x.bottom&&(h.y=Math.max(Math.min(ce.bottom+H.bottom,ne.y),oe.bottom+H.bottom)),x.left?h.x=Math.min(Math.max(ce.left+H.left,ne.x),oe.left+H.left):x.right&&(h.x=Math.max(Math.min(ce.right+H.right,ne.x),oe.right+H.right))}},defaults:{inner:null,outer:null,offset:null,endOnly:!1,enabled:!1}},M0=ns(Aa,"restrictEdges"),O0=te({get elementRect(){return{top:0,left:0,bottom:1,right:1}},set elementRect(f){}},Mi.defaults),j0=ns({start:Mi.start,set:Mi.set,defaults:O0},"restrictRect"),N0={width:-1/0,height:-1/0},F0={width:1/0,height:1/0},$0=ns({start:function(f){return Aa.start(f)},set:function(f){var h=f.interaction,x=f.state,_=f.rect,N=f.edges,H=x.options;if(N){var Z=ge(ks(H.min,h,f.coords))||N0,ne=ge(ks(H.max,h,f.coords))||F0;x.options={endOnly:H.endOnly,inner:te({},Aa.noInner),outer:te({},Aa.noOuter)},N.top?(x.options.inner.top=_.bottom-Z.height,x.options.outer.top=_.bottom-ne.height):N.bottom&&(x.options.inner.bottom=_.top+Z.height,x.options.outer.bottom=_.top+ne.height),N.left?(x.options.inner.left=_.right-Z.width,x.options.outer.left=_.right-ne.width):N.right&&(x.options.inner.right=_.left+Z.width,x.options.outer.right=_.left+ne.width),Aa.set(f),x.options=H}},defaults:{min:null,max:null,endOnly:!1,enabled:!1}},"restrictSize"),or={start:function(f){var h,x=f.interaction,_=f.interactable,N=f.element,H=f.rect,Z=f.state,ne=f.startOffset,oe=Z.options,ce=oe.offsetWithOrigin?function(Se){var Te=Se.interaction.element,De=be(fe(Se.state.options.origin,null,null,[Te])),Me=De||ke(Se.interactable,Te,Se.interaction.prepared.name);return Me}(f):{x:0,y:0};if(oe.offset==="startCoords")h={x:x.coords.start.page.x,y:x.coords.start.page.y};else{var re=fe(oe.offset,_,N,[x]);(h=be(re)||{x:0,y:0}).x+=ce.x,h.y+=ce.y}var me=oe.relativePoints;Z.offsets=H&&me&&me.length?me.map(function(Se,Te){return{index:Te,relativePoint:Se,x:ne.left-H.width*Se.x+h.x,y:ne.top-H.height*Se.y+h.y}}):[{index:0,relativePoint:null,x:h.x,y:h.y}]},set:function(f){var h=f.interaction,x=f.coords,_=f.state,N=_.options,H=_.offsets,Z=ke(h.interactable,h.element,h.prepared.name),ne=te({},x),oe=[];N.offsetWithOrigin||(ne.x-=Z.x,ne.y-=Z.y);for(var ce=0,re=H;ce<re.length;ce++)for(var me=re[ce],Se=ne.x-me.x,Te=ne.y-me.y,De=0,Me=N.targets.length;De<Me;De++){var ze=N.targets[De],qe=void 0;(qe=v.func(ze)?ze(Se,Te,h._proxy,me,De):ze)&&oe.push({x:(v.number(qe.x)?qe.x:Se)+me.x,y:(v.number(qe.y)?qe.y:Te)+me.y,range:v.number(qe.range)?qe.range:N.range,source:ze,index:De,offset:me})}for(var We={target:null,inRange:!1,distance:0,range:0,delta:{x:0,y:0}},nt=0;nt<oe.length;nt++){var rt=oe[nt],Je=rt.range,st=rt.x-ne.x,Kt=rt.y-ne.y,xt=Ue(st,Kt),rn=xt<=Je;Je===1/0&&We.inRange&&We.range!==1/0&&(rn=!1),We.target&&!(rn?We.inRange&&Je!==1/0?xt/Je<We.distance/We.range:Je===1/0&&We.range!==1/0||xt<We.distance:!We.inRange&&xt<We.distance)||(We.target=rt,We.distance=xt,We.range=Je,We.inRange=rn,We.delta.x=st,We.delta.y=Kt)}return We.inRange&&(x.x=We.target.x,x.y=We.target.y),_.closest=We,We},defaults:{range:1/0,targets:null,offset:null,offsetWithOrigin:!0,origin:null,relativePoints:null,endOnly:!1,enabled:!1}},R0=ns(or,"snap"),Oi={start:function(f){var h=f.state,x=f.edges,_=h.options;if(!x)return null;f.state={options:{targets:null,relativePoints:[{x:x.left?0:1,y:x.top?0:1}],offset:_.offset||"self",origin:{x:0,y:0},range:_.range}},h.targetFields=h.targetFields||[["width","height"],["x","y"]],or.start(f),h.offsets=f.state.offsets,f.state=h},set:function(f){var h=f.interaction,x=f.state,_=f.coords,N=x.options,H=x.offsets,Z={x:_.x-H[0].x,y:_.y-H[0].y};x.options=te({},N),x.options.targets=[];for(var ne=0,oe=N.targets||[];ne<oe.length;ne++){var ce=oe[ne],re=void 0;if(re=v.func(ce)?ce(Z.x,Z.y,h):ce){for(var me=0,Se=x.targetFields;me<Se.length;me++){var Te=Se[me],De=Te[0],Me=Te[1];if(De in re||Me in re){re.x=re[De],re.y=re[Me];break}}x.options.targets.push(re)}}var ze=or.set(f);return x.options=N,ze},defaults:{range:1/0,targets:null,offset:null,endOnly:!1,enabled:!1}},q0=ns(Oi,"snapSize"),rr={aspectRatio:L0,restrictEdges:M0,restrict:T0,restrictRect:j0,restrictSize:$0,snapEdges:ns({start:function(f){var h=f.edges;return h?(f.state.targetFields=f.state.targetFields||[[h.left?"left":"right",h.top?"top":"bottom"]],Oi.start(f)):null},set:Oi.set,defaults:te(Vs(Oi.defaults),{targets:void 0,range:void 0,offset:{x:0,y:0}})},"snapEdges"),snap:R0,snapSize:q0,spring:Ti,avoid:Ti,transform:Ti,rubberband:Ti},B0={id:"modifiers",install:function(f){var h=f.interactStatic;for(var x in f.usePlugin(Pu),f.usePlugin(k0),h.modifiers=rr,rr){var _=rr[x],N=_._defaults,H=_._methods;N._methods=H,f.defaults.perAction[x]=N}}},U0=B0,Wu=function(f){l(x,f);var h=y(x);function x(_,N,H,Z,ne,oe){var ce;if(i(this,x),xe(g(ce=h.call(this,ne)),H),H!==N&&xe(g(ce),N),ce.timeStamp=oe,ce.originalEvent=H,ce.type=_,ce.pointerId=ft(N),ce.pointerType=Cs(N),ce.target=Z,ce.currentTarget=null,_==="tap"){var re=ne.getPointerIndex(N);ce.dt=ce.timeStamp-ne.pointers[re].downTime;var me=ce.timeStamp-ne.tapTime;ce.double=!!ne.prevTap&&ne.prevTap.type!=="doubletap"&&ne.prevTap.target===ce.target&&me<500}else _==="doubletap"&&(ce.dt=N.timeStamp-ne.tapTime,ce.double=!0);return ce}return d(x,"n"),o(x,[{key:"_subtractOrigin",value:function(_){var N=_.x,H=_.y;return this.pageX-=N,this.pageY-=H,this.clientX-=N,this.clientY-=H,this}},{key:"_addOrigin",value:function(_){var N=_.x,H=_.y;return this.pageX+=N,this.pageY+=H,this.clientX+=N,this.clientY+=H,this}},{key:"preventDefault",value:function(){this.originalEvent.preventDefault()}}]),x}(wn),_a={id:"pointer-events/base",before:["inertia","modifiers","auto-start","actions"],install:function(f){f.pointerEvents=_a,f.defaults.actions.pointerEvents=_a.defaults,te(f.actions.phaselessTypes,_a.types)},listeners:{"interactions:new":function(f){var h=f.interaction;h.prevTap=null,h.tapTime=0},"interactions:update-pointer":function(f){var h=f.down,x=f.pointerInfo;!h&&x.hold||(x.hold={duration:1/0,timeout:null})},"interactions:move":function(f,h){var x=f.interaction,_=f.pointer,N=f.event,H=f.eventTarget;f.duplicate||x.pointerIsDown&&!x.pointerWasMoved||(x.pointerIsDown&&lr(f),as({interaction:x,pointer:_,event:N,eventTarget:H,type:"move"},h))},"interactions:down":function(f,h){(function(x,_){for(var N=x.interaction,H=x.pointer,Z=x.event,ne=x.eventTarget,oe=x.pointerIndex,ce=N.pointers[oe].hold,re=se(ne),me={interaction:N,pointer:H,event:Z,eventTarget:ne,type:"hold",targets:[],path:re,node:null},Se=0;Se<re.length;Se++){var Te=re[Se];me.node=Te,_.fire("pointerEvents:collect-targets",me)}if(me.targets.length){for(var De=1/0,Me=0,ze=me.targets;Me<ze.length;Me++){var qe=ze[Me].eventable.options.holdDuration;qe<De&&(De=qe)}ce.duration=De,ce.timeout=setTimeout(function(){as({interaction:N,eventTarget:ne,pointer:H,event:Z,type:"hold"},_)},De)}})(f,h),as(f,h)},"interactions:up":function(f,h){lr(f),as(f,h),function(x,_){var N=x.interaction,H=x.pointer,Z=x.event,ne=x.eventTarget;N.pointerWasMoved||as({interaction:N,eventTarget:ne,pointer:H,event:Z,type:"tap"},_)}(f,h)},"interactions:cancel":function(f,h){lr(f),as(f,h)}},PointerEvent:Wu,fire:as,collectEventTargets:Ku,defaults:{holdDuration:600,ignoreFrom:null,allowFrom:null,origin:{x:0,y:0}},types:{down:!0,move:!0,up:!0,cancel:!0,tap:!0,doubletap:!0,hold:!0}};function as(f,h){var x=f.interaction,_=f.pointer,N=f.event,H=f.eventTarget,Z=f.type,ne=f.targets,oe=ne===void 0?Ku(f,h):ne,ce=new Wu(Z,_,N,H,x,h.now());h.fire("pointerEvents:new",{pointerEvent:ce});for(var re={interaction:x,pointer:_,event:N,eventTarget:H,targets:oe,type:Z,pointerEvent:ce},me=0;me<oe.length;me++){var Se=oe[me];for(var Te in Se.props||{})ce[Te]=Se.props[Te];var De=ke(Se.eventable,Se.node);if(ce._subtractOrigin(De),ce.eventable=Se.eventable,ce.currentTarget=Se.node,Se.eventable.fire(ce),ce._addOrigin(De),ce.immediatePropagationStopped||ce.propagationStopped&&me+1<oe.length&&oe[me+1].node!==ce.currentTarget)break}if(h.fire("pointerEvents:fired",re),Z==="tap"){var Me=ce.double?as({interaction:x,pointer:_,event:N,eventTarget:H,type:"doubletap"},h):ce;x.prevTap=Me,x.tapTime=Me.timeStamp}return ce}d(as,"Vn");function Ku(f,h){var x=f.interaction,_=f.pointer,N=f.event,H=f.eventTarget,Z=f.type,ne=x.getPointerIndex(_),oe=x.pointers[ne];if(Z==="tap"&&(x.pointerWasMoved||!oe||oe.downTarget!==H))return[];for(var ce=se(H),re={interaction:x,pointer:_,event:N,eventTarget:H,type:Z,path:ce,targets:[],node:null},me=0;me<ce.length;me++){var Se=ce[me];re.node=Se,h.fire("pointerEvents:collect-targets",re)}return Z==="hold"&&(re.targets=re.targets.filter(function(Te){var De,Me;return Te.eventable.options.holdDuration===((De=x.pointers[ne])==null||(Me=De.hold)==null?void 0:Me.duration)})),re.targets}d(Ku,"Wn");function lr(f){var h=f.interaction,x=f.pointerIndex,_=h.pointers[x].hold;_&&_.timeout&&(clearTimeout(_.timeout),_.timeout=null)}d(lr,"Gn");var z0=Object.freeze({__proto__:null,default:_a});function H0(f){var h=f.interaction;h.holdIntervalHandle&&(clearInterval(h.holdIntervalHandle),h.holdIntervalHandle=null)}d(H0,"Un");var G0={id:"pointer-events/holdRepeat",install:function(f){f.usePlugin(_a);var h=f.pointerEvents;h.defaults.holdRepeatInterval=0,h.types.holdrepeat=f.actions.phaselessTypes.holdrepeat=!0},listeners:["move","up","cancel","endall"].reduce(function(f,h){return f["pointerEvents:".concat(h)]=H0,f},{"pointerEvents:new":function(f){var h=f.pointerEvent;h.type==="hold"&&(h.count=(h.count||0)+1)},"pointerEvents:fired":function(f,h){var x=f.interaction,_=f.pointerEvent,N=f.eventTarget,H=f.targets;if(_.type==="hold"&&H.length){var Z=H[0].eventable.options.holdRepeatInterval;Z<=0||(x.holdIntervalHandle=setTimeout(function(){h.pointerEvents.fire({interaction:x,eventTarget:N,type:"hold",pointer:_,event:_},h)},Z))}}})},V0=G0,W0={id:"pointer-events/interactableTargets",install:function(f){var h=f.Interactable;h.prototype.pointerEvents=function(_){return te(this.events.options,_),this};var x=h.prototype._backCompatOption;h.prototype._backCompatOption=function(_,N){var H=x.call(this,_,N);return H===this&&(this.events.options[_]=N),H}},listeners:{"pointerEvents:collect-targets":function(f,h){var x=f.targets,_=f.node,N=f.type,H=f.eventTarget;h.interactables.forEachMatch(_,function(Z){var ne=Z.events,oe=ne.options;ne.types[N]&&ne.types[N].length&&Z.testIgnoreAllow(oe,_,H)&&x.push({node:_,eventable:ne,props:{interactable:Z}})})},"interactable:new":function(f){var h=f.interactable;h.events.getRect=function(x){return h.getRect(x)}},"interactable:set":function(f,h){var x=f.interactable,_=f.options;te(x.events.options,h.pointerEvents.defaults),te(x.events.options,_.pointerEvents||{})}}},K0=W0,Y0={id:"pointer-events",install:function(f){f.usePlugin(z0),f.usePlugin(V0),f.usePlugin(K0)}},X0=Y0,J0={id:"reflow",install:function(f){var h=f.Interactable;f.actions.phases.reflow=!0,h.prototype.reflow=function(x){return function(_,N,H){for(var Z=_.getAllElements(),ne=H.window.Promise,oe=ne?[]:null,ce=function(){var me=Z[re],Se=_.getRect(me);if(!Se)return 1;var Te,De=Cn(H.interactions.list,function(qe){return qe.interacting()&&qe.interactable===_&&qe.element===me&&qe.prepared.name===N.name});if(De)De.move(),oe&&(Te=De._reflowPromise||new ne(function(qe){De._reflowResolve=qe}));else{var Me=ge(Se),ze=function(qe){return{coords:qe,get page(){return this.coords.page},get client(){return this.coords.client},get timeStamp(){return this.coords.timeStamp},get pageX(){return this.coords.page.x},get pageY(){return this.coords.page.y},get clientX(){return this.coords.client.x},get clientY(){return this.coords.client.y},get pointerId(){return this.coords.pointerId},get target(){return this.coords.target},get type(){return this.coords.type},get pointerType(){return this.coords.pointerType},get buttons(){return this.coords.buttons},preventDefault:function(){}}}({page:{x:Me.x,y:Me.y},client:{x:Me.x,y:Me.y},timeStamp:H.now()});Te=function(qe,We,nt,rt,Je){var st=qe.interactions.new({pointerType:"reflow"}),Kt={interaction:st,event:Je,pointer:Je,eventTarget:nt,phase:"reflow"};st.interactable=We,st.element=nt,st.prevEvent=Je,st.updatePointer(Je,Je,nt,!0),we(st.coords.delta),ts(st.prepared,rt),st._doPhase(Kt);var xt=qe.window,rn=xt.Promise,An=rn?new rn(function(Hn){st._reflowResolve=Hn}):void 0;return st._reflowPromise=An,st.start(rt,We,nt),st._interacting?(st.move(Kt),st.end(Je)):(st.stop(),st._reflowResolve()),st.removePointer(Je,Je),An}(H,_,me,N,ze)}oe&&oe.push(Te)},re=0;re<Z.length&&!ce();re++);return oe&&ne.all(oe).then(function(){return _})}(this,x,f)}},listeners:{"interactions:stop":function(f,h){var x=f.interaction;x.pointerType==="reflow"&&(x._reflowResolve&&x._reflowResolve(),function(_,N){_.splice(_.indexOf(N),1)}(h.interactions.list,x))}}},Z0=J0;if(Wt.use(ku),Wt.use(Mu),Wt.use(X0),Wt.use(m0),Wt.use(U0),Wt.use(ki),Wt.use($e),Wt.use(pt),Wt.use(Z0),Wt.default=Wt,a(t)==="object"&&t)try{t.exports=Wt}catch{}return Wt.default=Wt,Wt})}(to,to.exports);var oy=to.exports,ds=cr(oy),Pt=d(function(){return Pt=Object.assign||d(function(e){for(var n,s=1,a=arguments.length;s<a;s++){n=arguments[s];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},"__assign"),Pt.apply(this,arguments)},"__assign");typeof SuppressedError=="function"&&SuppressedError,typeof window<"u"&&(window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),typeof window.CustomEvent!="function"&&(window.CustomEvent=d(function(e,n){n=n||{bubbles:!1,cancelable:!1,detail:null};var s=document.createEvent("CustomEvent");return s.initCustomEvent(e,n.bubbles,n.cancelable,n.detail),s},"CustomEvent")));var ry=typeof document<"u"&&!!document.documentMode,Or;function ly(){return Or||(Or=document.createElement("div").style)}d(ly,"createStyle");var Vc=["webkit","moz","ms"],no={};function jr(t){if(no[t])return no[t];var e=ly();if(t in e)return no[t]=t;for(var n=t[0].toUpperCase()+t.slice(1),s=Vc.length;s--;){var a="".concat(Vc[s]).concat(n);if(a in e)return no[t]=a}}d(jr,"getPrefixedName");function so(t,e){return parseFloat(e[jr(t)])||0}d(so,"getCSSNum");function ao(t,e,n){n===void 0&&(n=window.getComputedStyle(t));var s=e==="border"?"Width":"";return{left:so("".concat(e,"Left").concat(s),n),right:so("".concat(e,"Right").concat(s),n),top:so("".concat(e,"Top").concat(s),n),bottom:so("".concat(e,"Bottom").concat(s),n)}}d(ao,"getBoxStyle");function ea(t,e,n){t.style[jr(e)]=n}d(ea,"setStyle");function uy(t,e){var n=jr("transform");ea(t,"transition","".concat(n," ").concat(e.duration,"ms ").concat(e.easing))}d(uy,"setTransition");function cy(t,e,n){var s=e.x,a=e.y,i=e.scale,r=e.isSVG;if(ea(t,"transform","scale(".concat(i,") translate(").concat(s,"px, ").concat(a,"px)")),r&&ry){var o=window.getComputedStyle(t).getPropertyValue("transform");t.setAttribute("transform",o)}}d(cy,"setTransform");function Nr(t){var e=t.parentNode,n=window.getComputedStyle(t),s=window.getComputedStyle(e),a=t.getBoundingClientRect(),i=e.getBoundingClientRect();return{elem:{style:n,width:a.width,height:a.height,top:a.top,bottom:a.bottom,left:a.left,right:a.right,margin:ao(t,"margin",n),border:ao(t,"border",n)},parent:{style:s,width:i.width,height:i.height,top:i.top,bottom:i.bottom,left:i.left,right:i.right,padding:ao(e,"padding",s),border:ao(e,"border",s)}}}d(Nr,"getDimensions");var Ua={down:"mousedown",move:"mousemove",up:"mouseup mouseleave"};typeof window<"u"&&(typeof window.PointerEvent=="function"?Ua={down:"pointerdown",move:"pointermove",up:"pointerup pointerleave pointercancel"}:typeof window.TouchEvent=="function"&&(Ua={down:"touchstart",move:"touchmove",up:"touchend touchcancel"}));function Fr(t,e,n,s){Ua[t].split(" ").forEach(function(a){e.addEventListener(a,n,s)})}d(Fr,"onPointer");function $r(t,e,n){Ua[t].split(" ").forEach(function(s){e.removeEventListener(s,n)})}d($r,"destroyPointer");function Wc(t,e){for(var n=t.length;n--;)if(t[n].pointerId===e.pointerId)return n;return-1}d(Wc,"findEventIndex");function Rr(t,e){var n;if(e.touches){n=0;for(var s=0,a=e.touches;s<a.length;s++){var i=a[s];i.pointerId=n++,Rr(t,i)}return}n=Wc(t,e),n>-1&&t.splice(n,1),t.push(e)}d(Rr,"addPointer");function dy(t,e){if(e.touches){for(;t.length;)t.pop();return}var n=Wc(t,e);n>-1&&t.splice(n,1)}d(dy,"removePointer");function Kc(t){t=t.slice(0);for(var e=t.pop(),n;n=t.pop();)e={clientX:(n.clientX-e.clientX)/2+e.clientX,clientY:(n.clientY-e.clientY)/2+e.clientY};return e}d(Kc,"getMiddle");function qr(t){if(t.length<2)return 0;var e=t[0],n=t[1];return Math.sqrt(Math.pow(Math.abs(n.clientX-e.clientX),2)+Math.pow(Math.abs(n.clientY-e.clientY),2))}d(qr,"getDistance");function py(t){for(var e=t;e&&e.parentNode;){if(e.parentNode===document)return!0;e=e.parentNode instanceof ShadowRoot?e.parentNode.host:e.parentNode}return!1}d(py,"isAttached");function hy(t){return(t.getAttribute("class")||"").trim()}d(hy,"getClass");function fy(t,e){return t.nodeType===1&&" ".concat(hy(t)," ").indexOf(" ".concat(e," "))>-1}d(fy,"hasClass");function my(t,e){for(var n=t;n!=null;n=n.parentNode)if(fy(n,e.excludeClass)||e.exclude.indexOf(n)>-1)return!0;return!1}d(my,"isExcluded");var gy=/^http:[\w\.\/]+svg$/;function by(t){return gy.test(t.namespaceURI)&&t.nodeName.toLowerCase()!=="svg"}d(by,"isSVGElement");function vy(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}d(vy,"shallowClone");var Yc={animate:!1,canvas:!1,cursor:"move",disablePan:!1,disableZoom:!1,disableXAxis:!1,disableYAxis:!1,duration:200,easing:"ease-in-out",exclude:[],excludeClass:"panzoom-exclude",handleStartEvent:function(t){t.preventDefault(),t.stopPropagation()},maxScale:4,minScale:.125,overflow:"hidden",panOnlyWhenZoomed:!1,pinchAndPan:!1,relative:!1,setTransform:cy,startX:0,startY:0,startScale:1,step:.3,touchAction:"none"};function Xc(t,e){if(!t)throw new Error("Panzoom requires an element as an argument");if(t.nodeType!==1)throw new Error("Panzoom requires an element with a nodeType of 1");if(!py(t))throw new Error("Panzoom should be called on elements that have been attached to the DOM");e=Pt(Pt({},Yc),e);var n=by(t),s=t.parentNode;s.style.overflow=e.overflow,s.style.userSelect="none",s.style.touchAction=e.touchAction,(e.canvas?s:t).style.cursor=e.cursor,t.style.userSelect="none",t.style.touchAction=e.touchAction,ea(t,"transformOrigin",typeof e.origin=="string"?e.origin:n?"0 0":"50% 50%");function a(){s.style.overflow="",s.style.userSelect="",s.style.touchAction="",s.style.cursor="",t.style.cursor="",t.style.userSelect="",t.style.touchAction="",ea(t,"transformOrigin","")}d(a,"resetStyle");function i(G){G===void 0&&(G={});for(var J in G)G.hasOwnProperty(J)&&(e[J]=G[J]);(G.hasOwnProperty("cursor")||G.hasOwnProperty("canvas"))&&(s.style.cursor=t.style.cursor="",(e.canvas?s:t).style.cursor=e.cursor),G.hasOwnProperty("overflow")&&(s.style.overflow=G.overflow),G.hasOwnProperty("touchAction")&&(s.style.touchAction=G.touchAction,t.style.touchAction=G.touchAction)}d(i,"setOptions");var r=0,o=0,c=1,l=!1;S(e.startScale,{animate:!1,force:!0}),setTimeout(function(){w(e.startX,e.startY,{animate:!1,force:!0})});function u(G,J,E){if(!E.silent){var O=new CustomEvent(G,{detail:J});t.dispatchEvent(O)}}d(u,"trigger");function p(G,J,E){var O={x:r,y:o,scale:c,isSVG:n,originalEvent:E};return requestAnimationFrame(function(){typeof J.animate=="boolean"&&(J.animate?uy(t,J):ea(t,"transition","none")),J.setTransform(t,O,J),u(G,O,J),u("panzoomchange",O,J)}),O}d(p,"setTransformWithEvent");function g(G,J,E,O){var C=Pt(Pt({},e),O),B={x:r,y:o,opts:C};if(!C.force&&(C.disablePan||C.panOnlyWhenZoomed&&c===C.startScale))return B;if(G=parseFloat(G),J=parseFloat(J),C.disableXAxis||(B.x=(C.relative?r:0)+G),C.disableYAxis||(B.y=(C.relative?o:0)+J),C.contain){var z=Nr(t),Y=z.elem.width/c,se=z.elem.height/c,le=Y*E,te=se*E,he=(le-Y)/2,fe=(te-se)/2;if(C.contain==="inside"){var be=(-z.elem.margin.left-z.parent.padding.left+he)/E,ge=(z.parent.width-le-z.parent.padding.left-z.elem.margin.left-z.parent.border.left-z.parent.border.right+he)/E;B.x=Math.max(Math.min(B.x,ge),be);var ye=(-z.elem.margin.top-z.parent.padding.top+fe)/E,ke=(z.parent.height-te-z.parent.padding.top-z.elem.margin.top-z.parent.border.top-z.parent.border.bottom+fe)/E;B.y=Math.max(Math.min(B.y,ke),ye)}else if(C.contain==="outside"){var be=(-(le-z.parent.width)-z.parent.padding.left-z.parent.border.left-z.parent.border.right+he)/E,ge=(he-z.parent.padding.left)/E;B.x=Math.max(Math.min(B.x,ge),be);var ye=(-(te-z.parent.height)-z.parent.padding.top-z.parent.border.top-z.parent.border.bottom+fe)/E,ke=(fe-z.parent.padding.top)/E;B.y=Math.max(Math.min(B.y,ke),ye)}}return C.roundPixels&&(B.x=Math.round(B.x),B.y=Math.round(B.y)),B}d(g,"constrainXY");function y(G,J){var E=Pt(Pt({},e),J),O={scale:c,opts:E};if(!E.force&&E.disableZoom)return O;var C=e.minScale,B=e.maxScale;if(E.contain){var z=Nr(t),Y=z.elem.width/c,se=z.elem.height/c;if(Y>1&&se>1){var le=z.parent.width-z.parent.border.left-z.parent.border.right,te=z.parent.height-z.parent.border.top-z.parent.border.bottom,he=le/Y,fe=te/se;e.contain==="inside"?B=Math.min(B,he,fe):e.contain==="outside"&&(C=Math.max(C,he,fe))}}return O.scale=Math.min(Math.max(G,C),B),O}d(y,"constrainScale");function w(G,J,E,O){var C=g(G,J,c,E);return r!==C.x||o!==C.y?(r=C.x,o=C.y,p("panzoompan",C.opts,O)):{x:r,y:o,scale:c,isSVG:n,originalEvent:O}}d(w,"pan");function S(G,J,E){var O=y(G,J),C=O.opts;if(!(!C.force&&C.disableZoom)){G=O.scale;var B=r,z=o;if(C.focal){var Y=C.focal;B=(Y.x/G-Y.x/c+r*G)/G,z=(Y.y/G-Y.y/c+o*G)/G}var se=g(B,z,G,{relative:!1,force:!0});return r=se.x,o=se.y,c=G,p("panzoomzoom",C,E)}}d(S,"zoom");function m(G,J){var E=Pt(Pt(Pt({},e),{animate:!0}),J);return S(c*Math.exp((G?1:-1)*E.step),E)}d(m,"zoomInOut");function D(G){return m(!0,G)}d(D,"zoomIn");function A(G){return m(!1,G)}d(A,"zoomOut");function j(G,J,E,O){var C=Nr(t),B={width:C.parent.width-C.parent.padding.left-C.parent.padding.right-C.parent.border.left-C.parent.border.right,height:C.parent.height-C.parent.padding.top-C.parent.padding.bottom-C.parent.border.top-C.parent.border.bottom},z=J.clientX-C.parent.left-C.parent.padding.left-C.parent.border.left-C.elem.margin.left,Y=J.clientY-C.parent.top-C.parent.padding.top-C.parent.border.top-C.elem.margin.top;n||(z-=C.elem.width/c/2,Y-=C.elem.height/c/2);var se={x:z/B.width*(B.width*G),y:Y/B.height*(B.height*G)};return S(G,Pt(Pt({},E),{animate:!1,focal:se}),O)}d(j,"zoomToPoint");function L(G,J){G.preventDefault();var E=Pt(Pt(Pt({},e),J),{animate:!1}),O=G.deltaY===0&&G.deltaX?G.deltaX:G.deltaY,C=O<0?1:-1,B=y(c*Math.exp(C*E.step/3),E).scale;return j(B,G,E,G)}d(L,"zoomWithWheel");function k(G){var J=Pt(Pt(Pt({},e),{animate:!0,force:!0}),G);c=y(J.startScale,J).scale;var E=g(J.startX,J.startY,c,J);return r=E.x,o=E.y,p("panzoomreset",J)}d(k,"reset");var I,v,T,P,F,U,M=[];function V(G){if(!my(G.target,e)){Rr(M,G),l=!0,e.handleStartEvent(G),I=r,v=o,u("panzoomstart",{x:r,y:o,scale:c,isSVG:n,originalEvent:G},e);var J=Kc(M);T=J.clientX,P=J.clientY,F=c,U=qr(M)}}d(V,"handleDown");function W(G){if(!(!l||I===void 0||v===void 0||T===void 0||P===void 0)){Rr(M,G);var J=Kc(M),E=M.length>1,O=c;if(E){U===0&&(U=qr(M));var C=qr(M)-U;O=y(C*e.step/80+F).scale,j(O,J,{animate:!1},G)}(!E||e.pinchAndPan)&&w(I+(J.clientX-T)/O,v+(J.clientY-P)/O,{animate:!1},G)}}d(W,"handleMove");function K(G){M.length===1&&u("panzoomend",{x:r,y:o,scale:c,isSVG:n,originalEvent:G},e),dy(M,G),l&&(l=!1,I=v=T=P=void 0)}d(K,"handleUp");var R=!1;function X(){R||(R=!0,Fr("down",e.canvas?s:t,V),Fr("move",document,W,{passive:!0}),Fr("up",document,K,{passive:!0}))}d(X,"bind");function Q(){R=!1,$r("down",e.canvas?s:t,V),$r("move",document,W),$r("up",document,K)}return d(Q,"destroy"),e.noBind||X(),{bind:X,destroy:Q,eventNames:Ua,getPan:function(){return{x:r,y:o}},getScale:function(){return c},getOptions:function(){return vy(e)},handleDown:V,handleMove:W,handleUp:K,pan:w,reset:k,resetStyle:a,setOptions:i,setStyle:function(G,J){return ea(t,G,J)},zoom:S,zoomIn:D,zoomOut:A,zoomToPoint:j,zoomWithWheel:L}}d(Xc,"Panzoom"),Xc.defaultOptions=Yc;var Jc={};(function(t){(function(){typeof Math.sgn>"u"&&(Math.sgn=function(R){return R==0?0:R>0?1:-1});var e={subtract:function(R,X){return{x:R.x-X.x,y:R.y-X.y}},dotProduct:function(R,X){return R.x*X.x+R.y*X.y},square:function(R){return Math.sqrt(R.x*R.x+R.y*R.y)},scale:function(R,X){return{x:R.x*X,y:R.y*X}}},n=64,s=Math.pow(2,-n-1),a=d(function(R,X){for(var Q=[],G=r(R,X),J=X.length-1,E=2*J-1,O=o(G,E,Q,0),C=e.subtract(R,X[0]),B=e.square(C),z=0,Y=0;Y<O;Y++){C=e.subtract(R,p(X,J,Q[Y],null,null));var se=e.square(C);se<B&&(B=se,z=Q[Y])}return C=e.subtract(R,X[J]),se=e.square(C),se<B&&(B=se,z=1),{location:z,distance:B}},"_distanceFromCurve"),i=d(function(R,X){var Q=a(R,X);return{point:p(X,X.length-1,Q.location,null,null),location:Q.location}},"_nearestPointOnCurve"),r=d(function(R,X){for(var Q=X.length-1,G=2*Q-1,J=[],E=[],O=[],C=[],B=[[1,.6,.3,.1],[.4,.6,.6,.4],[.1,.3,.6,1]],z=0;z<=Q;z++)J[z]=e.subtract(X[z],R);for(var z=0;z<=Q-1;z++)E[z]=e.subtract(X[z+1],X[z]),E[z]=e.scale(E[z],3);for(var Y=0;Y<=Q-1;Y++)for(var se=0;se<=Q;se++)O[Y]||(O[Y]=[]),O[Y][se]=e.dotProduct(E[Y],J[se]);for(z=0;z<=G;z++)C[z]||(C[z]=[]),C[z].y=0,C[z].x=parseFloat(z)/G;for(var le=Q,te=Q-1,he=0;he<=le+te;he++){var fe=Math.max(0,he-te),be=Math.min(he,le);for(z=fe;z<=be;z++){var ge=he-z;C[z+ge].y+=O[ge][z]*B[ge][z]}}return C},"_convertToBezier"),o=d(function(R,X,Q,G){var J=[],E=[],O,C,B=[],z=[];switch(c(R,X)){case 0:return 0;case 1:{if(G>=n)return Q[0]=(R[0].x+R[X].x)/2,1;if(l(R,X))return Q[0]=u(R,X),1;break}}p(R,X,.5,J,E),O=o(J,X,B,G+1),C=o(E,X,z,G+1);for(var Y=0;Y<O;Y++)Q[Y]=B[Y];for(var Y=0;Y<C;Y++)Q[Y+O]=z[Y];return O+C},"_findRoots"),c=d(function(R,X){var Q=0,G,J;G=J=Math.sgn(R[0].y);for(var E=1;E<=X;E++)G=Math.sgn(R[E].y),G!=J&&Q++,J=G;return Q},"_getCrossingCount"),l=d(function(R,X){var Q,G,J,E,O,C,B,z,Y,se,le,te,he,fe,be,ge;C=R[0].y-R[X].y,B=R[X].x-R[0].x,z=R[0].x*R[X].y-R[X].x*R[0].y;var ye,ke;ye=ke=0;for(var Ie=1;Ie<X;Ie++){var _e=C*R[Ie].x+B*R[Ie].y+z;_e>ye?ye=_e:_e<ke&&(ke=_e)}return le=0,te=1,he=0,fe=C,be=B,ge=z-ye,Y=le*be-fe*te,se=1/Y,G=(te*ge-be*he)*se,fe=C,be=B,ge=z-ke,Y=le*be-fe*te,se=1/Y,J=(te*ge-be*he)*se,E=Math.min(G,J),O=Math.max(G,J),Q=O-E,Q<s?1:0},"_isFlatEnough"),u=d(function(R,X){var Q=1,G=0,J=R[X].x-R[0].x,E=R[X].y-R[0].y,O=R[0].x-0,C=R[0].y-0,B=J*G-E*Q,z=1/B,Y=(J*C-E*O)*z;return 0+Q*Y},"_computeXIntercept"),p=d(function(R,X,Q,G,J){for(var E=[[]],O=0;O<=X;O++)E[0][O]=R[O];for(var C=1;C<=X;C++)for(var O=0;O<=X-C;O++)E[C]||(E[C]=[]),E[C][O]||(E[C][O]={}),E[C][O].x=(1-Q)*E[C-1][O].x+Q*E[C-1][O+1].x,E[C][O].y=(1-Q)*E[C-1][O].y+Q*E[C-1][O+1].y;if(G!=null)for(O=0;O<=X;O++)G[O]=E[O][0];if(J!=null)for(O=0;O<=X;O++)J[O]=E[X-O][O];return E[X][0]},"_bezier"),g={},y=d(function(R){var X=g[R];if(!X){X=[];var Q=d(function(){return function(se){return Math.pow(se,R)}},"f_term"),G=d(function(){return function(se){return Math.pow(1-se,R)}},"l_term"),J=d(function(se){return function(le){return se}},"c_term"),E=d(function(){return function(se){return se}},"t_term"),O=d(function(){return function(se){return 1-se}},"one_minus_t_term"),C=d(function(se){return function(le){for(var te=1,he=0;he<se.length;he++)te=te*se[he](le);return te}},"_termFunc");X.push(new Q);for(var B=1;B<R;B++){for(var z=[new J(R)],Y=0;Y<R-B;Y++)z.push(new E);for(var Y=0;Y<B;Y++)z.push(new O);X.push(new C(z))}X.push(new G),g[R]=X}return X},"_getCurveFunctions"),w=d(function(R,X){for(var Q=y(R.length-1),G=0,J=0,E=0;E<R.length;E++)G=G+R[E].x*Q[E](X),J=J+R[E].y*Q[E](X);return{x:G,y:J}},"_pointOnPath"),S=d(function(R,X){return Math.sqrt(Math.pow(R.x-X.x,2)+Math.pow(R.y-X.y,2))},"_dist"),m=d(function(R){return R[0].x===R[1].x&&R[0].y===R[1].y},"_isPoint"),D=d(function(R,X,Q){if(m(R))return{point:R[0],location:X};for(var G=w(R,X),J=0,E=X,O=Q>0?1:-1,C=null;J<Math.abs(Q);)E+=.005*O,C=w(R,E),J+=S(C,G),G=C;return{point:C,location:E}},"_pointAlongPath"),A=d(function(R){var X=new Date().getTime();if(m(R))return 0;for(var Q=w(R,0),G=0,J=0,E=1,O=null;J<1;)J+=.005*E,O=w(R,J),G+=S(O,Q),Q=O;return console.log("length",new Date().getTime()-X),G},"_length"),j=d(function(R,X,Q){return D(R,X,Q).point},"_pointAlongPathFrom"),L=d(function(R,X,Q){return D(R,X,Q).location},"_locationAlongPathFrom"),k=d(function(R,X){var Q=w(R,X),G=w(R.slice(0,R.length-1),X),J=G.y-Q.y,E=G.x-Q.x;return J===0?1/0:Math.atan(J/E)},"_gradientAtPoint"),I=d(function(R,X,Q){var G=D(R,X,Q);return G.location>1&&(G.location=1),G.location<0&&(G.location=0),k(R,G.location)},"_gradientAtPointAlongPathFrom"),v=d(function(R,X,Q,G){G=G??0;var J=D(R,X,G),E=k(R,J.location),O=Math.atan(-1/E),C=Q/2*Math.sin(O),B=Q/2*Math.cos(O);return[{x:J.point.x+B,y:J.point.y+C},{x:J.point.x-B,y:J.point.y-C}]},"_perpendicularToPathAt"),T=d(function(R,X,Q,G,J){var E=G-X,O=R-Q,C=R*(X-G)+X*(Q-R),B=M(J),z=[E*B[0][0]+O*B[1][0],E*B[0][1]+O*B[1][1],E*B[0][2]+O*B[1][2],E*B[0][3]+O*B[1][3]+C],Y=W.apply(null,z),se=[];if(Y!=null)for(var le=0;le<3;le++){var te=Y[le],he=Math.pow(te,2),fe=Math.pow(te,3),be=[B[0][0]*fe+B[0][1]*he+B[0][2]*te+B[0][3],B[1][0]*fe+B[1][1]*he+B[1][2]*te+B[1][3]],ge;Q-R!==0?ge=(be[0]-R)/(Q-R):ge=(be[1]-X)/(G-X),te>=0&&te<=1&&ge>=0&&ge<=1&&se.push(be)}return se},"_lineIntersection"),P=d(function(R,X,Q,G,J){var E=[];return E.push.apply(E,T(R,X,R+Q,X,J)),E.push.apply(E,T(R+Q,X,R+Q,X+G,J)),E.push.apply(E,T(R+Q,X+G,R,X+G,J)),E.push.apply(E,T(R,X+G,R,X,J)),E},"_boxIntersection"),F=d(function(R,X){var Q=[];return Q.push.apply(Q,T(R.x,R.y,R.x+R.w,R.y,X)),Q.push.apply(Q,T(R.x+R.w,R.y,R.x+R.w,R.y+R.h,X)),Q.push.apply(Q,T(R.x+R.w,R.y+R.h,R.x,R.y+R.h,X)),Q.push.apply(Q,T(R.x,R.y+R.h,R.x,R.y,X)),Q},"_boundingBoxIntersection");function U(R,X){return[-R[0][X]+3*R[1][X]+-3*R[2][X]+R[3][X],3*R[0][X]-6*R[1][X]+3*R[2][X],-3*R[0][X]+3*R[1][X],R[0][X]]}d(U,"_computeCoefficientsForAxis");function M(R){return[U(R,"x"),U(R,"y")]}d(M,"_computeCoefficients");function V(R){return R<0?-1:R>0?1:0}d(V,"sgn");function W(R,X,Q,G){var J=X/R,E=Q/R,O=G/R,C=(3*E-Math.pow(J,2))/9,B=(9*J*E-27*O-2*Math.pow(J,3))/54,z=Math.pow(C,3)+Math.pow(B,2),Y,se,le=[];if(z>=0)Y=V(B+Math.sqrt(z))*Math.pow(Math.abs(B+Math.sqrt(z)),1/3),se=V(B-Math.sqrt(z))*Math.pow(Math.abs(B-Math.sqrt(z)),1/3),le[0]=-J/3+(Y+se),le[1]=-J/3-(Y+se)/2,le[2]=-J/3-(Y+se)/2,Math.abs(Math.sqrt(3)*(Y-se)/2)!==0&&(le[1]=-1,le[2]=-1);else{var te=Math.acos(B/Math.sqrt(-Math.pow(C,3)));le[0]=2*Math.sqrt(-C)*Math.cos(te/3)-J/3,le[1]=2*Math.sqrt(-C)*Math.cos((te+2*Math.PI)/3)-J/3,le[2]=2*Math.sqrt(-C)*Math.cos((te+4*Math.PI)/3)-J/3}for(var he=0;he<3;he++)(le[he]<0||le[he]>1)&&(le[he]=-1);return le}d(W,"_cubicRoots");var K=this.jsBezier={distanceFromCurve:a,gradientAtPoint:k,gradientAtPointAlongCurveFrom:I,nearestPointOnCurve:i,pointOnCurve:w,pointAlongCurveFrom:j,perpendicularToCurveAt:v,locationAlongCurveFrom:L,getLength:A,lineIntersection:T,boxIntersection:P,boundingBoxIntersection:F,version:"0.9.0"};t.jsBezier=K}).call(typeof window<"u"?window:ht),function(){var e=this,n=e.Biltong={version:"0.4.0"};t.Biltong=n;var s=d(function(l){return Object.prototype.toString.call(l)==="[object Array]"},"_isa"),a=d(function(l,u,p){return l=s(l)?l:[l.x,l.y],u=s(u)?u:[u.x,u.y],p(l,u)},"_pointHelper"),i=n.gradient=function(l,u){return a(l,u,function(p,g){return g[0]==p[0]?g[1]>p[1]?1/0:-1/0:g[1]==p[1]?g[0]>p[0]?0:-0:(g[1]-p[1])/(g[0]-p[0])})};n.normal=function(l,u){return-1/i(l,u)},n.lineLength=function(l,u){return a(l,u,function(p,g){return Math.sqrt(Math.pow(g[1]-p[1],2)+Math.pow(g[0]-p[0],2))})};var r=n.quadrant=function(l,u){return a(l,u,function(p,g){return g[0]>p[0]||g[0]==p[0]?g[1]>p[1]?2:1:g[1]>p[1]?3:4})};n.theta=function(l,u){return a(l,u,function(p,g){var y=i(p,g),w=Math.atan(y),S=r(p,g);return(S==4||S==3)&&(w+=Math.PI),w<0&&(w+=2*Math.PI),w})},n.intersects=function(l,u){var p=l.x,g=l.x+l.w,y=l.y,w=l.y+l.h,S=u.x,m=u.x+u.w,D=u.y,A=u.y+u.h;return p<=S&&S<=g&&y<=D&&D<=w||p<=m&&m<=g&&y<=D&&D<=w||p<=S&&S<=g&&y<=A&&A<=w||p<=m&&S<=g&&y<=A&&A<=w||S<=p&&p<=m&&D<=y&&y<=A||S<=g&&g<=m&&D<=y&&y<=A||S<=p&&p<=m&&D<=w&&w<=A||S<=g&&p<=m&&D<=w&&w<=A},n.encloses=function(l,u,p){var g=l.x,y=l.x+l.w,w=l.y,S=l.y+l.h,m=u.x,D=u.x+u.w,A=u.y,j=u.y+u.h,L=d(function(k,I,v,T){return p?k<=I&&v>=T:k<I&&v>T},"c");return L(g,m,y,D)&&L(w,A,S,j)};var o=[null,[1,-1],[1,1],[-1,1],[-1,-1]],c=[null,[-1,-1],[-1,1],[1,1],[1,-1]];n.pointOnLine=function(l,u,p){var g=i(l,u),y=r(l,u),w=p>0?o[y]:c[y],S=Math.atan(g),m=Math.abs(p*Math.sin(S))*w[1],D=Math.abs(p*Math.cos(S))*w[0];return{x:l.x+D,y:l.y+m}},n.perpendicularLineTo=function(l,u,p){var g=i(l,u),y=Math.atan(-1/g),w=p/2*Math.sin(y),S=p/2*Math.cos(y);return[{x:u.x+S,y:u.y+w},{x:u.x-S,y:u.y-w}]}}.call(typeof window<"u"?window:ht),function(){function e(E,O,C,B,z,Y,se,le){return new Touch({target:O,identifier:J(),pageX:C,pageY:B,screenX:z,screenY:Y,clientX:se||z,clientY:le||Y})}d(e,"_touch");function n(){var E=[];return Array.prototype.push.apply(E,arguments),E.item=function(O){return this[O]},E}d(n,"_touchList");function s(E,O,C,B,z,Y,se,le){return n(e.apply(null,arguments))}d(s,"_touchAndList");var a=this,i=d(function(E,O,C){C=C||E.parentNode;for(var B=C.querySelectorAll(O),z=0;z<B.length;z++)if(B[z]===E)return!0;return!1},"matchesSelector"),r=d(function(E){return typeof E=="string"||E.constructor===String?document.getElementById(E):E},"_gel"),o=d(function(E){return E.srcElement||E.target},"_t"),c=d(function(E,O,C,B){if(B){if(typeof E.path<"u"&&E.path.indexOf)return{path:E.path,end:E.path.indexOf(C)};var z={path:[],end:-1},Y=d(function(se){z.path.push(se),se===C?z.end=z.path.length-1:se.parentNode!=null&&Y(se.parentNode)},"_one");return Y(O),z}else return{path:[O],end:1}},"_pi"),l=d(function(E,O){for(var C=0,B=E.length;C<B&&E[C]!=O;C++);C<E.length&&E.splice(C,1)},"_d"),u=1,p=d(function(E,O,C){var B=u++;return E.__ta=E.__ta||{},E.__ta[O]=E.__ta[O]||{},E.__ta[O][B]=C,C.__tauid=B,B},"_store"),g=d(function(E,O,C){if(E.__ta&&E.__ta[O]&&delete E.__ta[O][C.__tauid],C.__taExtra){for(var B=0;B<C.__taExtra.length;B++)Q(E,C.__taExtra[B][0],C.__taExtra[B][1]);C.__taExtra.length=0}C.__taUnstore&&C.__taUnstore()},"_unstore"),y=d(function(E,O,C,B){if(E==null)return C;var z=E.split(","),Y=d(function(se){Y.__tauid=C.__tauid;var le=o(se),te=le,he=c(se,le,O,E!=null);if(he.end!=-1)for(var fe=0;fe<he.end;fe++){te=he.path[fe];for(var be=0;be<z.length;be++)i(te,z[be],O)&&C.apply(te,arguments)}},"_fn");return w(C,B,Y),Y},"_curryChildFilter"),w=d(function(E,O,C){E.__taExtra=E.__taExtra||[],E.__taExtra.push([O,C])},"registerExtraFunction"),S=d(function(E,O,C,B){if(k&&v[O]){var z=y(B,E,C,v[O]);X(E,v[O],z,C)}O==="focus"&&E.getAttribute("tabindex")==null&&E.setAttribute("tabindex","1"),X(E,O,y(B,E,C,O),C)},"DefaultHandler"),m=d(function(E,O,C,B){if(E.__taSmartClicks==null){var z=d(function(le){E.__tad=U(le)},"down"),Y=d(function(le){E.__tau=U(le)},"up"),se=d(function(le){if(E.__tad&&E.__tau&&E.__tad[0]===E.__tau[0]&&E.__tad[1]===E.__tau[1])for(var te=0;te<E.__taSmartClicks.length;te++)E.__taSmartClicks[te].apply(o(le),[le])},"click");S(E,"mousedown",z,B),S(E,"mouseup",Y,B),S(E,"click",se,B),E.__taSmartClicks=[]}E.__taSmartClicks.push(C),C.__taUnstore=function(){l(E.__taSmartClicks,C)}},"SmartClickHandler"),D={tap:{touches:1,taps:1},dbltap:{touches:1,taps:2},contextmenu:{touches:2,taps:1}},A=d(function(E,O){return function(C,B,z,Y){if(B=="contextmenu"&&I)S(C,B,z,Y);else{if(C.__taTapHandler==null){var se=C.__taTapHandler={tap:[],dbltap:[],contextmenu:[],down:!1,taps:0,downSelectors:[]},le=d(function(be){for(var ge=o(be),ye=c(be,ge,C,Y!=null),ke=!1,Ie=0;Ie<ye.end;Ie++){if(ke)return;ge=ye.path[Ie];for(var _e=0;_e<se.downSelectors.length;_e++)if(se.downSelectors[_e]==null||i(ge,se.downSelectors[_e],C)){se.down=!0,setTimeout(he,E),setTimeout(fe,O),ke=!0;break}}},"down"),te=d(function(be){if(se.down){var ge=o(be),ye,ke;se.taps++;var Ie=R(be);for(var _e in D)if(D.hasOwnProperty(_e)){var Ue=D[_e];if(Ue.touches===Ie&&(Ue.taps===1||Ue.taps===se.taps))for(var Fe=0;Fe<se[_e].length;Fe++){ke=c(be,ge,C,se[_e][Fe][1]!=null);for(var xe=0;xe<ke.end;xe++)if(ye=ke.path[xe],se[_e][Fe][1]==null||i(ye,se[_e][Fe][1],C)){se[_e][Fe][0].apply(ye,[be]);break}}}}},"up"),he=d(function(){se.down=!1},"clearSingle"),fe=d(function(){se.taps=0},"clearDouble");S(C,"mousedown",le),S(C,"mouseup",te)}C.__taTapHandler.downSelectors.push(Y),C.__taTapHandler[B].push([z,Y]),z.__taUnstore=function(){l(C.__taTapHandler[B],z)}}}},"TapHandler"),j=d(function(E,O,C,B){for(var z in C.__tamee[E])C.__tamee[E].hasOwnProperty(z)&&C.__tamee[E][z].apply(B,[O])},"meeHelper"),L=d(function(){var E=[];return function(O,C,B,z){if(!O.__tamee){O.__tamee={over:!1,mouseenter:[],mouseexit:[]};var Y=d(function(le){var te=o(le);(z==null&&te==O&&!O.__tamee.over||i(te,z,O)&&(te.__tamee==null||!te.__tamee.over))&&(j("mouseenter",le,O,te),te.__tamee=te.__tamee||{},te.__tamee.over=!0,E.push(te))},"over"),se=d(function(le){for(var te=o(le),he=0;he<E.length;he++)te==E[he]&&!i(le.relatedTarget||le.toElement,"*",te)&&(te.__tamee.over=!1,E.splice(he,1),j("mouseexit",le,O,te))},"out");X(O,"mouseover",y(z,O,Y,"mouseover"),Y),X(O,"mouseout",y(z,O,se,"mouseout"),se)}B.__taUnstore=function(){delete O.__tamee[C][B.__tauid]},p(O,C,B),O.__tamee[C][B.__tauid]=B}},"MouseEnterExitHandler"),k="ontouchstart"in document.documentElement||navigator.maxTouchPoints,I="onmousedown"in document.documentElement,v={mousedown:"touchstart",mouseup:"touchend",mousemove:"touchmove"},T=function(){var E=-1;if(navigator.appName=="Microsoft Internet Explorer"){var O=navigator.userAgent,C=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");C.exec(O)!=null&&(E=parseFloat(RegExp.$1))}return E}(),P=T>-1&&T<9,F=d(function(E,O){if(E==null)return[0,0];var C=K(E),B=W(C,0);return[B[O+"X"],B[O+"Y"]]},"_genLoc"),U=d(function(E){return E==null?[0,0]:P?[E.clientX+document.documentElement.scrollLeft,E.clientY+document.documentElement.scrollTop]:F(E,"page")},"_pageLocation"),M=d(function(E){return F(E,"screen")},"_screenLocation"),V=d(function(E){return F(E,"client")},"_clientLocation"),W=d(function(E,O){return E.item?E.item(O):E[O]},"_getTouch"),K=d(function(E){return E.touches&&E.touches.length>0?E.touches:E.changedTouches&&E.changedTouches.length>0?E.changedTouches:E.targetTouches&&E.targetTouches.length>0?E.targetTouches:[E]},"_touches"),R=d(function(E){return K(E).length},"_touchCount"),X=d(function(E,O,C,B){if(p(E,O,C),B.__tauid=C.__tauid,E.addEventListener)E.addEventListener(O,C,!1);else if(E.attachEvent){var z=O+C.__tauid;E["e"+z]=C,E[z]=function(){E["e"+z]&&E["e"+z](window.event)},E.attachEvent("on"+O,E[z])}},"_bind"),Q=d(function(E,O,C){C!=null&&G(E,function(){var B=r(this);if(g(B,O,C),C.__tauid!=null){if(B.removeEventListener)B.removeEventListener(O,C,!1),k&&v[O]&&B.removeEventListener(v[O],C,!1);else if(this.detachEvent){var z=O+C.__tauid;B[z]&&B.detachEvent("on"+O,B[z]),B[z]=null,B["e"+z]=null}}C.__taTouchProxy&&Q(E,C.__taTouchProxy[1],C.__taTouchProxy[0])})},"_unbind"),G=d(function(E,O){if(E!=null){E=typeof Window<"u"&&typeof E.top!="unknown"&&E==E.top?[E]:typeof E!="string"&&E.tagName==null&&E.length!=null?E:typeof E=="string"?document.querySelectorAll(E):[E];for(var C=0;C<E.length;C++)O.apply(E[C])}},"_each"),J=d(function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(E){var O=Math.random()*16|0,C=E=="x"?O:O&3|8;return C.toString(16)})},"_uuid");a.Mottle=function(E){E=E||{};var O=E.clickThreshold||250,C=E.dblClickThreshold||450,B=new L,z=new A(O,C),Y=E.smartClicks,se=d(function(le,te,he,fe){he!=null&&G(le,function(){var be=r(this);Y&&te==="click"?m(be,te,he,fe):te==="tap"||te==="dbltap"||te==="contextmenu"?z(be,te,he,fe):te==="mouseenter"||te=="mouseexit"?B(be,te,he,fe):S(be,te,he,fe)})},"_doBind");this.remove=function(le){return G(le,function(){var te=r(this);if(te.__ta){for(var he in te.__ta)if(te.__ta.hasOwnProperty(he))for(var fe in te.__ta[he])te.__ta[he].hasOwnProperty(fe)&&Q(te,he,te.__ta[he][fe])}te.parentNode&&te.parentNode.removeChild(te)}),this},this.on=function(le,te,he,fe){var be=arguments[0],ge=arguments.length==4?arguments[2]:null,ye=arguments[1],ke=arguments[arguments.length-1];return se(be,ye,ke,ge),this},this.off=function(le,te,he){return Q(le,te,he),this},this.trigger=function(le,te,he,fe){var be=I&&(typeof MouseEvent>"u"||he==null||he.constructor===MouseEvent),ge=k&&!I&&v[te]?v[te]:te,ye=!(k&&!I&&v[te]),ke=U(he),Ie=M(he),_e=V(he);return G(le,function(){var Ue=r(this),Fe;he=he||{screenX:Ie[0],screenY:Ie[1],clientX:_e[0],clientY:_e[1]};var xe=d(function(Ne){fe&&(Ne.payload=fe)},"_decorate"),de={TouchEvent:function(Ne){var Ze=s(window,Ue,0,ke[0],ke[1],Ie[0],Ie[1],_e[0],_e[1]),ft=Ne.initTouchEvent||Ne.initEvent;ft(ge,!0,!0,window,null,Ie[0],Ie[1],_e[0],_e[1],!1,!1,!1,!1,Ze,Ze,Ze,1,0)},MouseEvents:function(Ne){Ne.initMouseEvent(ge,!0,!0,window,0,Ie[0],Ie[1],_e[0],_e[1],!1,!1,!1,!1,1,Ue)}};if(document.createEvent){var we=!ye&&!be&&k&&v[te],Pe=we?"TouchEvent":"MouseEvents";Fe=document.createEvent(Pe),de[Pe](Fe),xe(Fe),Ue.dispatchEvent(Fe)}else document.createEventObject&&(Fe=document.createEventObject(),Fe.eventType=Fe.eventName=ge,Fe.screenX=Ie[0],Fe.screenY=Ie[1],Fe.clientX=_e[0],Fe.clientY=_e[1],xe(Fe),Ue.fireEvent("on"+ge,Fe))}),this}},a.Mottle.consume=function(E,O){E.stopPropagation?E.stopPropagation():E.returnValue=!1,!O&&E.preventDefault&&E.preventDefault()},a.Mottle.pageLocation=U,a.Mottle.setForceTouchEvents=function(E){k=E},a.Mottle.setForceMouseEvents=function(E){I=E},a.Mottle.version="0.8.0",t.Mottle=a.Mottle}.call(typeof window>"u"?ht:window),function(){var e=this,n=d(function(E,O,C){return E.indexOf(O)===-1?(C?E.unshift(O):E.push(O),!0):!1},"_suggest"),s=d(function(E,O){var C=E.indexOf(O);C!==-1&&E.splice(C,1)},"_vanquish"),a=d(function(E,O){for(var C=[],B=0;B<E.length;B++)O.indexOf(E[B])===-1&&C.push(E[B]);return C},"_difference"),i=d(function(E){return E==null?!1:typeof E=="string"||E.constructor===String},"_isString"),r=d(function(E){var O=E.getBoundingClientRect(),C=document.body,B=document.documentElement,z=window.pageYOffset||B.scrollTop||C.scrollTop,Y=window.pageXOffset||B.scrollLeft||C.scrollLeft,se=B.clientTop||C.clientTop||0,le=B.clientLeft||C.clientLeft||0,te=O.top+z-se,he=O.left+Y-le;return{top:Math.round(te),left:Math.round(he)}},"getOffsetRect"),o=d(function(E,O,C){C=C||E.parentNode;for(var B=C.querySelectorAll(O),z=0;z<B.length;z++)if(B[z]===E)return!0;return!1},"matchesSelector"),c=d(function(E,O,C){if(o(O,C,E))return O;for(var B=O.parentNode;B!=null&&B!==E;){if(o(B,C,E))return B;B=B.parentNode}},"findDelegateElement"),l=d(function(E,O,C){for(var B=null,z=O.getAttribute("katavorio-draggable"),Y=z!=null?"[katavorio-draggable='"+z+"'] ":"",se=0;se<E.length;se++)if(B=c(O,C,Y+E[se].selector),B!=null){if(E[se].filter){var le=o(C,E[se].filter,B),te=E[se].filterExclude===!0;if(te&&!le||le)return null}return[E[se],B]}return null},"findMatchingSelector"),u=function(){var E=-1;if(navigator.appName==="Microsoft Internet Explorer"){var O=navigator.userAgent,C=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");C.exec(O)!=null&&(E=parseFloat(RegExp.$1))}return E}(),p=10,g=10,y=u>-1&&u<9,w=u===9,S=d(function(E){if(y)return[E.clientX+document.documentElement.scrollLeft,E.clientY+document.documentElement.scrollTop];var O=D(E),C=m(O,0);return w?[C.pageX||C.clientX,C.pageY||C.clientY]:[C.pageX,C.pageY]},"_pl"),m=d(function(E,O){return E.item?E.item(O):E[O]},"_getTouch"),D=d(function(E){return E.touches&&E.touches.length>0?E.touches:E.changedTouches&&E.changedTouches.length>0?E.changedTouches:E.targetTouches&&E.targetTouches.length>0?E.targetTouches:[E]},"_touches"),A={delegatedDraggable:"katavorio-delegated-draggable",draggable:"katavorio-draggable",droppable:"katavorio-droppable",drag:"katavorio-drag",selected:"katavorio-drag-selected",active:"katavorio-drag-active",hover:"katavorio-drag-hover",noSelect:"katavorio-drag-no-select",ghostProxy:"katavorio-ghost-proxy",clonedDrag:"katavorio-clone-drag"},j="katavorio-drag-scope",L=["stop","start","drag","drop","over","out","beforeStart"],k=d(function(){},"_devNull"),I=d(function(){return!0},"_true"),v=d(function(E,O,C){for(var B=0;B<E.length;B++)E[B]!=C&&O(E[B])},"_foreach"),T=d(function(E,O,C,B){v(E,function(z){z.setActive(O),O&&z.updatePosition(),C&&z.setHover(B,O)})},"_setDroppablesActive"),P=d(function(E,O){if(E!=null){E=!i(E)&&E.tagName==null&&E.length!=null?E:[E];for(var C=0;C<E.length;C++)O.apply(E[C],[E[C]])}},"_each"),F=d(function(E){E.stopPropagation?(E.stopPropagation(),E.preventDefault()):E.returnValue=!1},"_consume"),U="input,textarea,select,button,option",M=d(function(E,O,C){var B=E.srcElement||E.target;return!o(B,C.getInputFilterSelector(),O)},"_inputFilter"),V=d(function(E,O,C,B){this.params=O||{},this.el=E,this.params.addClass(this.el,this._class),this.uuid=Q();var z=!0;return this.setEnabled=function(Y){z=Y},this.isEnabled=function(){return z},this.toggleEnabled=function(){z=!z},this.setScope=function(Y){this.scopes=Y?Y.split(/\s+/):[B]},this.addScope=function(Y){var se={};P(this.scopes,function(te){se[te]=!0}),P(Y?Y.split(/\s+/):[],function(te){se[te]=!0}),this.scopes=[];for(var le in se)this.scopes.push(le)},this.removeScope=function(Y){var se={};P(this.scopes,function(te){se[te]=!0}),P(Y?Y.split(/\s+/):[],function(te){delete se[te]}),this.scopes=[];for(var le in se)this.scopes.push(le)},this.toggleScope=function(Y){var se={};P(this.scopes,function(te){se[te]=!0}),P(Y?Y.split(/\s+/):[],function(te){se[te]?delete se[te]:se[te]=!0}),this.scopes=[];for(var le in se)this.scopes.push(le)},this.setScope(O.scope),this.k=O.katavorio,O.katavorio},"Super"),W=d(function(){return!0},"TRUE"),K=d(function(){return!1},"FALSE"),R=d(function(E,O,C,B){this._class=C.draggable;var z=V.apply(this,arguments);this.rightButtonCanDrag=this.params.rightButtonCanDrag;var Y=[0,0],se=null,le=null,te=[0,0],he=!1,fe=[0,0],be=this.params.consumeStartEvent!==!1,ge=this.el,ye=this.params.clone;this.params.scroll;var ke=O.multipleDrop!==!1,Ie=!1,_e,Ue,Fe=null,xe=[],de=null,we=O.ghostProxyParent,Pe,Ne,Ze,ft;if(O.ghostProxy===!0?_e=W:O.ghostProxy&&typeof O.ghostProxy=="function"?_e=O.ghostProxy:_e=d(function(Ee,Ke){return de&&de.useGhostProxy?de.useGhostProxy(Ee,Ke):!1},"useGhostProxy"),O.makeGhostProxy?Ue=O.makeGhostProxy:Ue=d(function(Ee){return de&&de.makeGhostProxy?de.makeGhostProxy(Ee):Ee.cloneNode(!0)},"ghostProxy"),O.selector){var Rt=E.getAttribute("katavorio-draggable");Rt==null&&(Rt=""+new Date().getTime(),E.setAttribute("katavorio-draggable",Rt)),xe.push(O)}var Gt=O.snapThreshold,tn=d(function(Ee,Ke,Qe,Ye,tt){var ut=Math.floor(Ee[0]/Ke),q=Ke*ut,ae=q+Ke,ee=Math.abs(Ee[0]-q)<=Ye?q:Math.abs(ae-Ee[0])<=Ye?ae:Ee[0],ie=Math.floor(Ee[1]/Qe),ue=Qe*ie,ve=ue+Qe,Ae=Math.abs(Ee[1]-ue)<=tt?ue:Math.abs(ve-Ee[1])<=tt?ve:Ee[1];return[ee,Ae]},"_snap");this.posses=[],this.posseRoles={},this.toGrid=function(Ee){if(this.params.grid==null)return Ee;var Ke=this.params.grid?this.params.grid[0]/2:Gt||p/2,Qe=this.params.grid?this.params.grid[1]/2:Gt||g/2;return tn(Ee,this.params.grid[0],this.params.grid[1],Ke,Qe)},this.snap=function(Ee,Ke){if(ge!=null){Ee=Ee||(this.params.grid?this.params.grid[0]:p),Ke=Ke||(this.params.grid?this.params.grid[1]:g);var Qe=this.params.getPosition(ge),Ye=this.params.grid?this.params.grid[0]/2:Gt,tt=this.params.grid?this.params.grid[1]/2:Gt,ut=tn(Qe,Ee,Ke,Ye,tt);return this.params.setPosition(ge,ut),ut}},this.setUseGhostProxy=function(Ee){_e=Ee?W:K};var Jt,Qn=d(function(Ee){return O.allowNegative===!1?[Math.max(0,Ee[0]),Math.max(0,Ee[1])]:Ee},"negativeFilter"),es=function(Ee){Jt=typeof Ee=="function"?Ee:Ee?function(Ke,Qe,Ye,tt){return Qn([Math.max(0,Math.min(Ye.w-tt[0],Ke[0])),Math.max(0,Math.min(Ye.h-tt[1],Ke[1]))])}.bind(this):function(Ke){return Qn(Ke)}}.bind(this);es(typeof this.params.constrain=="function"?this.params.constrain:this.params.constrain||this.params.containment),this.setConstrain=function(Ee){es(Ee)};var Cs=d(function(Ee,Ke,Qe,Ye){return de!=null&&de.constrain&&typeof de.constrain=="function"?de.constrain(Ee,Ke,Qe,Ye):Jt(Ee,Ke,Qe,Ye)},"_doConstrain"),nn;this.setRevert=function(Ee){nn=Ee},this.params.revert&&(nn=this.params.revert);var wn=d(function(Ee){return typeof Ee=="function"?(Ee._katavorioId=Q(),Ee._katavorioId):Ee},"_assignId"),sn={},Un=d(function(Ee){for(var Ke in sn){var Qe=sn[Ke],Ye=Qe[0](Ee);if(Qe[1]&&(Ye=!Ye),!Ye)return!1}return!0},"_testFilter"),Sn=this.setFilter=function(Ee,Ke){if(Ee){var Qe=wn(Ee);sn[Qe]=[function(Ye){var tt=Ye.srcElement||Ye.target,ut;return i(Ee)?ut=o(tt,Ee,E):typeof Ee=="function"&&(ut=Ee(Ye,E)),ut},Ke!==!1]}};this.addFilter=Sn,this.removeFilter=function(Ee){var Ke=typeof Ee=="function"?Ee._katavorioId:Ee;delete sn[Ke]},this.clearAllFilters=function(){sn={}},this.canDrag=this.params.canDrag||I;var Cn,dt=[],an=[];this.addSelector=function(Ee){Ee.selector&&xe.push(Ee)},this.downListener=function(Ee){if(!Ee.defaultPrevented){var Ke=this.rightButtonCanDrag||Ee.which!==3&&Ee.button!==2;if(Ke&&this.isEnabled()&&this.canDrag()){var Qe=Un(Ee)&&M(Ee,this.el,this.k);if(Qe){if(de=null,Fe=null,xe.length>0){var Ye=l(xe,this.el,Ee.target||Ee.srcElement);if(Ye!=null&&(de=Ye[0],Fe=Ye[1]),Fe==null)return}else Fe=this.el;if(ye)if(ge=Fe.cloneNode(!0),this.params.addClass(ge,A.clonedDrag),ge.setAttribute("id",null),ge.style.position="absolute",this.params.parent!=null){var tt=this.params.getPosition(this.el);ge.style.left=tt[0]+"px",ge.style.top=tt[1]+"px",this.params.parent.appendChild(ge)}else{var ut=r(Fe);ge.style.left=ut.left+"px",ge.style.top=ut.top+"px",document.body.appendChild(ge)}else ge=Fe;be&&F(Ee),Y=S(Ee),ge&&ge.parentNode&&(fe=[ge.parentNode.scrollLeft,ge.parentNode.scrollTop]),this.params.bind(document,"mousemove",this.moveListener),this.params.bind(document,"mouseup",this.upListener),z.markSelection(this),z.markPosses(this),this.params.addClass(document.body,C.noSelect),on("beforeStart",{el:this.el,pos:se,e:Ee,drag:this})}else this.params.consumeFilteredEvents&&F(Ee)}}}.bind(this),this.moveListener=function(Ee){if(Y){if(!he){var Ke=on("start",{el:this.el,pos:se,e:Ee,drag:this});if(Ke!==!1){if(!Y)return;this.mark(!0),he=!0}else this.abort()}if(Y){an.length=0;var Qe=S(Ee),Ye=Qe[0]-Y[0],tt=Qe[1]-Y[1],ut=this.params.ignoreZoom?1:z.getZoom();ge&&ge.parentNode&&(Ye+=ge.parentNode.scrollLeft-fe[0],tt+=ge.parentNode.scrollTop-fe[1]),Ye/=ut,tt/=ut,this.moveBy(Ye,tt,Ee),z.updateSelection(Ye,tt,this),z.updatePosses(Ye,tt,this)}}}.bind(this),this.upListener=function(Ee){Y&&(Y=null,this.params.unbind(document,"mousemove",this.moveListener),this.params.unbind(document,"mouseup",this.upListener),this.params.removeClass(document.body,C.noSelect),this.unmark(Ee),z.unmarkSelection(this,Ee),z.unmarkPosses(this,Ee),this.stop(Ee),z.notifyPosseDragStop(this,Ee),he=!1,an.length=0,ye?(ge&&ge.parentNode&&ge.parentNode.removeChild(ge),ge=null):nn&&nn(ge,this.params.getPosition(ge))===!0&&(this.params.setPosition(ge,se),on("revert",ge)))}.bind(this),this.getFilters=function(){return sn},this.abort=function(){Y!=null&&this.upListener()},this.getDragElement=function(Ee){return Ee?Fe||this.el:ge||this.el};var Ct={start:[],drag:[],stop:[],over:[],out:[],beforeStart:[],revert:[]};O.events.start&&Ct.start.push(O.events.start),O.events.beforeStart&&Ct.beforeStart.push(O.events.beforeStart),O.events.stop&&Ct.stop.push(O.events.stop),O.events.drag&&Ct.drag.push(O.events.drag),O.events.revert&&Ct.revert.push(O.events.revert),this.on=function(Ee,Ke){Ct[Ee]&&Ct[Ee].push(Ke)},this.off=function(Ee,Ke){if(Ct[Ee]){for(var Qe=[],Ye=0;Ye<Ct[Ee].length;Ye++)Ct[Ee][Ye]!==Ke&&Qe.push(Ct[Ee][Ye]);Ct[Ee]=Qe}};var on=d(function(Ee,Ke){var Qe=null;if(de&&de[Ee])Qe=de[Ee](Ke);else if(Ct[Ee])for(var Ye=0;Ye<Ct[Ee].length;Ye++)try{var tt=Ct[Ee][Ye](Ke);tt!=null&&(Qe=tt)}catch{}return Qe},"_dispatch");this.notifyStart=function(Ee){on("start",{el:this.el,pos:this.params.getPosition(ge),e:Ee,drag:this})},this.stop=function(Ee,Ke){if(Ke||he){var Qe=[],Ye=z.getSelection(),tt=this.params.getPosition(ge);if(Ye.length>0)for(var ut=0;ut<Ye.length;ut++){var q=this.params.getPosition(Ye[ut].el);Qe.push([Ye[ut].el,{left:q[0],top:q[1]},Ye[ut]])}else Qe.push([ge,{left:tt[0],top:tt[1]},this]);on("stop",{el:ge,pos:gn||tt,finalPos:tt,e:Ee,drag:this,selection:Qe})}},this.mark=function(Ee){se=this.params.getPosition(ge),le=this.params.getPosition(ge,!0),te=[le[0]-se[0],le[1]-se[1]],this.size=this.params.getSize(ge),dt=z.getMatchingDroppables(this),T(dt,!0,!1,this),this.params.addClass(ge,this.params.dragClass||C.drag);var Ke;this.params.getConstrainingRectangle?Ke=this.params.getConstrainingRectangle(ge):Ke=this.params.getSize(ge.parentNode),Cn={w:Ke[0],h:Ke[1]},Ze=0,ft=0,Ee&&z.notifySelectionDragStart(this)};var gn;this.unmark=function(Ee,Ke){if(T(dt,!1,!0,this),Ie&&_e(Fe,ge)?(gn=[ge.offsetLeft-Ze,ge.offsetTop-ft],ge.parentNode.removeChild(ge),ge=Fe):gn=null,this.params.removeClass(ge,this.params.dragClass||C.drag),dt.length=0,Ie=!1,!Ke){an.length>0&&gn&&O.setPosition(Fe,gn),an.sort(G);for(var Qe=0;Qe<an.length;Qe++){var Ye=an[Qe].drop(this,Ee);if(Ye===!0)break}}},this.moveBy=function(Ee,Ke,Qe){an.length=0;var Ye=this.toGrid([se[0]+Ee,se[1]+Ke]),tt=Cs(Ye,ge,Cn,this.size);if(_e(this.el,ge))if(Ye[0]!==tt[0]||Ye[1]!==tt[1]){if(!Ie){var ut=Ue(Fe);O.addClass(ut,A.ghostProxy),we?(we.appendChild(ut),Pe=O.getPosition(Fe.parentNode,!0),Ne=O.getPosition(O.ghostProxyParent,!0),Ze=Pe[0]-Ne[0],ft=Pe[1]-Ne[1]):Fe.parentNode.appendChild(ut),ge=ut,Ie=!0}tt=Ye}else Ie&&(ge.parentNode.removeChild(ge),ge=Fe,Ie=!1,Pe=null,Ne=null,Ze=0,ft=0);var q={x:tt[0],y:tt[1],w:this.size[0],h:this.size[1]},ae={x:q.x+te[0],y:q.y+te[1],w:q.w,h:q.h},ee=null;this.params.setPosition(ge,[tt[0]+Ze,tt[1]+ft]);for(var ie=0;ie<dt.length;ie++){var ue={x:dt[ie].pagePosition[0],y:dt[ie].pagePosition[1],w:dt[ie].size[0],h:dt[ie].size[1]};this.params.intersects(ae,ue)&&(ke||ee==null||ee===dt[ie].el)&&dt[ie].canDrop(this)?(ee||(ee=dt[ie].el),an.push(dt[ie]),dt[ie].setHover(this,!0,Qe)):dt[ie].isHover()&&dt[ie].setHover(this,!1,Qe)}on("drag",{el:this.el,pos:tt,e:Qe,drag:this})},this.destroy=function(){this.params.unbind(this.el,"mousedown",this.downListener),this.params.unbind(document,"mousemove",this.moveListener),this.params.unbind(document,"mouseup",this.upListener),this.downListener=null,this.upListener=null,this.moveListener=null},this.params.bind(this.el,"mousedown",this.downListener),this.params.handle?Sn(this.params.handle,!1):Sn(this.params.filter,this.params.filterExclude)},"Drag"),X=d(function(E,O,C,B){this._class=C.droppable,this.params=O||{},this.rank=O.rank||0,this._activeClass=this.params.activeClass||C.active,this._hoverClass=this.params.hoverClass||C.hover,V.apply(this,arguments);var z=!1;this.allowLoopback=this.params.allowLoopback!==!1,this.setActive=function(Y){this.params[Y?"addClass":"removeClass"](this.el,this._activeClass)},this.updatePosition=function(){this.position=this.params.getPosition(this.el),this.pagePosition=this.params.getPosition(this.el,!0),this.size=this.params.getSize(this.el)},this.canDrop=this.params.canDrop||function(Y){return!0},this.isHover=function(){return z},this.setHover=function(Y,se,le){(se||this.el._katavorioDragHover==null||this.el._katavorioDragHover===Y.el._katavorio)&&(this.params[se?"addClass":"removeClass"](this.el,this._hoverClass),this.el._katavorioDragHover=se?Y.el._katavorio:null,z!==se&&this.params.events[se?"over":"out"]({el:this.el,e:le,drag:Y,drop:this}),z=se)},this.drop=function(Y,se){return this.params.events.drop({drag:Y,e:se,drop:this})},this.destroy=function(){this._class=null,this._activeClass=null,this._hoverClass=null,z=null}},"Drop"),Q=d(function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(E){var O=Math.random()*16|0,C=E==="x"?O:O&3|8;return C.toString(16)})},"_uuid"),G=d(function(E,O){return E.rank<O.rank?1:E.rank>O.rank?-1:0},"_rankSort"),J=d(function(E){return E==null||(E=typeof E=="string"||E.constructor===String?document.getElementById(E):E,E==null)?null:(E._katavorio=E._katavorio||Q(),E)},"_gel");e.Katavorio=function(E){var O=[],C={};this._dragsByScope={},this._dropsByScope={};var B=1,z=d(function(xe,de){P(xe,function(we){for(var Pe=0;Pe<we.scopes.length;Pe++)de[we.scopes[Pe]]=de[we.scopes[Pe]]||[],de[we.scopes[Pe]].push(we)})},"_reg"),Y=d(function(xe,de){var we=0;return P(xe,function(Pe){for(var Ne=0;Ne<Pe.scopes.length;Ne++)if(de[Pe.scopes[Ne]]){var Ze=E.indexOf(de[Pe.scopes[Ne]],Pe);Ze!==-1&&(de[Pe.scopes[Ne]].splice(Ze,1),we++)}}),we>0},"_unreg");this.getMatchingDroppables=function(xe){for(var de=[],we={},Pe=0;Pe<xe.scopes.length;Pe++){var Ne=this._dropsByScope[xe.scopes[Pe]];if(Ne)for(var Ze=0;Ze<Ne.length;Ze++)Ne[Ze].canDrop(xe)&&!we[Ne[Ze].uuid]&&(Ne[Ze].allowLoopback||Ne[Ze].el!==xe.el)&&(we[Ne[Ze].uuid]=!0,de.push(Ne[Ze]))}return de.sort(G),de};var se=function(xe){xe=xe||{};var de={events:{}},we;for(we in E)de[we]=E[we];for(we in xe)de[we]=xe[we];for(we=0;we<L.length;we++)de.events[L[we]]=xe[L[we]]||k;return de.katavorio=this,de}.bind(this),le=function(xe,de){for(var we=0;we<L.length;we++)de[L[we]]&&xe.on(L[we],de[L[we]])}.bind(this),te={},he=E.css||{},fe=E.scope||j;for(var be in A)te[be]=A[be];for(var be in he)te[be]=he[be];var ge=E.inputFilterSelector||U;this.getInputFilterSelector=function(){return ge},this.setInputFilterSelector=function(xe){return ge=xe,this},this.draggable=function(xe,de){var we=[];return P(xe,function(Pe){if(Pe=J(Pe),Pe!=null)if(Pe._katavorioDrag==null){var Ne=se(de);Pe._katavorioDrag=new R(Pe,Ne,te,fe),z(Pe._katavorioDrag,this._dragsByScope),we.push(Pe._katavorioDrag),E.addClass(Pe,Ne.selector?te.delegatedDraggable:te.draggable)}else le(Pe._katavorioDrag,de)}.bind(this)),we},this.droppable=function(xe,de){var we=[];return P(xe,function(Pe){if(Pe=J(Pe),Pe!=null){var Ne=new X(Pe,se(de),te,fe);Pe._katavorioDrop=Pe._katavorioDrop||[],Pe._katavorioDrop.push(Ne),z(Ne,this._dropsByScope),we.push(Ne),E.addClass(Pe,te.droppable)}}.bind(this)),we},this.select=function(xe){return P(xe,function(){var de=J(this);de&&de._katavorioDrag&&(C[de._katavorio]||(O.push(de._katavorioDrag),C[de._katavorio]=[de,O.length-1],E.addClass(de,te.selected)))}),this},this.deselect=function(xe){return P(xe,function(){var de=J(this);if(de&&de._katavorio){var we=C[de._katavorio];if(we){for(var Pe=[],Ne=0;Ne<O.length;Ne++)O[Ne].el!==de&&Pe.push(O[Ne]);O=Pe,delete C[de._katavorio],E.removeClass(de,te.selected)}}}),this},this.deselectAll=function(){for(var xe in C){var de=C[xe];E.removeClass(de[0],te.selected)}O.length=0,C={}},this.markSelection=function(xe){v(O,function(de){de.mark()},xe)},this.markPosses=function(xe){xe.posses&&P(xe.posses,function(de){xe.posseRoles[de]&&Ue[de]&&v(Ue[de].members,function(we){we.mark()},xe)})},this.unmarkSelection=function(xe,de){v(O,function(we){we.unmark(de)},xe)},this.unmarkPosses=function(xe,de){xe.posses&&P(xe.posses,function(we){xe.posseRoles[we]&&Ue[we]&&v(Ue[we].members,function(Pe){Pe.unmark(de,!0)},xe)})},this.getSelection=function(){return O.slice(0)},this.updateSelection=function(xe,de,we){v(O,function(Pe){Pe.moveBy(xe,de)},we)};var ye=d(function(xe,de){de.posses&&P(de.posses,function(we){de.posseRoles[we]&&Ue[we]&&v(Ue[we].members,function(Pe){xe(Pe)},de)})},"_posseAction");this.updatePosses=function(xe,de,we){ye(function(Pe){Pe.moveBy(xe,de)},we)},this.notifyPosseDragStop=function(xe,de){ye(function(we){we.stop(de,!0)},xe)},this.notifySelectionDragStop=function(xe,de){v(O,function(we){we.stop(de,!0)},xe)},this.notifySelectionDragStart=function(xe,de){v(O,function(we){we.notifyStart(de)},xe)},this.setZoom=function(xe){B=xe},this.getZoom=function(){return B};var ke=d(function(xe,de,we,Pe){P(xe,function(Ne){Y(Ne,we),Ne[Pe](de),z(Ne,we)})},"_scopeManip");P(["set","add","remove","toggle"],function(xe){this[xe+"Scope"]=function(de,we){ke(de._katavorioDrag,we,this._dragsByScope,xe+"Scope"),ke(de._katavorioDrop,we,this._dropsByScope,xe+"Scope")}.bind(this),this[xe+"DragScope"]=function(de,we){ke(de.constructor===R?de:de._katavorioDrag,we,this._dragsByScope,xe+"Scope")}.bind(this),this[xe+"DropScope"]=function(de,we){ke(de.constructor===X?de:de._katavorioDrop,we,this._dropsByScope,xe+"Scope")}.bind(this)}.bind(this)),this.snapToGrid=function(xe,de){for(var we in this._dragsByScope)v(this._dragsByScope[we],function(Pe){Pe.snap(xe,de)})},this.getDragsForScope=function(xe){return this._dragsByScope[xe]},this.getDropsForScope=function(xe){return this._dropsByScope[xe]};var Ie=d(function(xe,de,we){if(xe=J(xe),xe[de]){var Pe=O.indexOf(xe[de]);Pe>=0&&O.splice(Pe,1),Y(xe[de],we)&&P(xe[de],function(Ne){Ne.destroy()}),delete xe[de]}},"_destroy"),_e=d(function(xe,de,we,Pe){xe=J(xe),xe[de]&&xe[de].off(we,Pe)},"_removeListener");this.elementRemoved=function(xe){xe._katavorioDrag&&this.destroyDraggable(xe),xe._katavorioDrop&&this.destroyDroppable(xe)},this.destroyDraggable=function(xe,de,we){arguments.length===1?Ie(xe,"_katavorioDrag",this._dragsByScope):_e(xe,"_katavorioDrag",de,we)},this.destroyDroppable=function(xe,de,we){arguments.length===1?Ie(xe,"_katavorioDrop",this._dropsByScope):_e(xe,"_katavorioDrop",de,we)},this.reset=function(){this._dragsByScope={},this._dropsByScope={},O=[],C={},Ue={}};var Ue={},Fe=d(function(xe,de,we){var Pe=i(de)?de:de.id,Ne=i(de)?!0:de.active!==!1,Ze=Ue[Pe]||function(){var ft={name:Pe,members:[]};return Ue[Pe]=ft,ft}();return P(xe,function(ft){if(ft._katavorioDrag){if(we&&ft._katavorioDrag.posseRoles[Ze.name]!=null)return;n(Ze.members,ft._katavorioDrag),n(ft._katavorioDrag.posses,Ze.name),ft._katavorioDrag.posseRoles[Ze.name]=Ne}}),Ze},"_processOneSpec");this.addToPosse=function(xe,de){for(var we=[],Pe=1;Pe<arguments.length;Pe++)we.push(Fe(xe,arguments[Pe]));return we.length===1?we[0]:we},this.setPosse=function(xe,de){for(var we=[],Pe=1;Pe<arguments.length;Pe++)we.push(Fe(xe,arguments[Pe],!0).name);return P(xe,function(Ne){if(Ne._katavorioDrag){var Ze=a(Ne._katavorioDrag.posses,we),ft=[];Array.prototype.push.apply(ft,Ne._katavorioDrag.posses);for(var Rt=0;Rt<Ze.length;Rt++)this.removeFromPosse(Ne,Ze[Rt])}}.bind(this)),we.length===1?we[0]:we},this.removeFromPosse=function(xe,de){if(arguments.length<2)throw new TypeError("No posse id provided for remove operation");for(var we=1;we<arguments.length;we++)de=arguments[we],P(xe,function(Pe){if(Pe._katavorioDrag&&Pe._katavorioDrag.posses){var Ne=Pe._katavorioDrag;P(de,function(Ze){s(Ue[Ze].members,Ne),s(Ne.posses,Ze),delete Ne.posseRoles[Ze]})}})},this.removeFromAllPosses=function(xe){P(xe,function(de){if(de._katavorioDrag&&de._katavorioDrag.posses){var we=de._katavorioDrag;P(we.posses,function(Pe){s(Ue[Pe].members,we)}),we.posses.length=0,we.posseRoles={}}})},this.setPosseState=function(xe,de,we){var Pe=Ue[de];Pe&&P(xe,function(Ne){Ne._katavorioDrag&&Ne._katavorioDrag.posses&&(Ne._katavorioDrag.posseRoles[Pe.name]=we)})}},e.Katavorio.version="1.0.0",t.Katavorio=e.Katavorio}.call(typeof window<"u"?window:ht),function(){var e=this;e.jsPlumbUtil=e.jsPlumbUtil||{};var n=e.jsPlumbUtil;t.jsPlumbUtil=n;function s(E){return Object.prototype.toString.call(E)==="[object Array]"}d(s,"isArray"),n.isArray=s;function a(E){return Object.prototype.toString.call(E)==="[object Number]"}d(a,"isNumber"),n.isNumber=a;function i(E){return typeof E=="string"}d(i,"isString"),n.isString=i;function r(E){return typeof E=="boolean"}d(r,"isBoolean"),n.isBoolean=r;function o(E){return E==null}d(o,"isNull"),n.isNull=o;function c(E){return E==null?!1:Object.prototype.toString.call(E)==="[object Object]"}d(c,"isObject"),n.isObject=c;function l(E){return Object.prototype.toString.call(E)==="[object Date]"}d(l,"isDate"),n.isDate=l;function u(E){return Object.prototype.toString.call(E)==="[object Function]"}d(u,"isFunction"),n.isFunction=u;function p(E){return u(E)&&E.name!=null&&E.name.length>0}d(p,"isNamedFunction"),n.isNamedFunction=p;function g(E){for(var O in E)if(E.hasOwnProperty(O))return!1;return!0}d(g,"isEmpty"),n.isEmpty=g;function y(E){if(i(E))return""+E;if(r(E))return!!E;if(l(E))return new Date(E.getTime());if(u(E))return E;if(s(E)){for(var O=[],C=0;C<E.length;C++)O.push(y(E[C]));return O}else if(c(E)){var B={};for(var z in E)B[z]=y(E[z]);return B}else return E}d(y,"clone"),n.clone=y;function w(E,O,C,B){var z={},Y,se,le={};for(C=C||[],B=B||[],se=0;se<C.length;se++)z[C[se]]=!0;for(se=0;se<B.length;se++)le[B[se]]=!0;var te=y(E);for(se in O)if(te[se]==null||le[se])te[se]=O[se];else if(i(O[se])||r(O[se]))z[se]?(Y=[],Y.push.apply(Y,s(te[se])?te[se]:[te[se]]),Y.push.apply(Y,r(O[se])?O[se]:[O[se]]),te[se]=Y):te[se]=O[se];else if(s(O[se]))Y=[],s(te[se])&&Y.push.apply(Y,te[se]),Y.push.apply(Y,O[se]),te[se]=Y;else if(c(O[se])){c(te[se])||(te[se]={});for(var he in O[se])te[se][he]=O[se][he]}return te}d(w,"merge"),n.merge=w;function S(E,O,C){if(E!=null){var B=E,z=B;return O.replace(/([^\.])+/g,function(Y,se,le,te){var he=Y.match(/([^\[0-9]+){1}(\[)([0-9+])/),fe=le+Y.length>=te.length,be=d(function(){return z[he[1]]||function(){return z[he[1]]=[],z[he[1]]}()},"_getArray");if(fe)he?be()[he[3]]=C:z[Y]=C;else if(he){var ge=be();z=ge[he[3]]||function(){return ge[he[3]]={},ge[he[3]]}()}else z=z[Y]||function(){return z[Y]={},z[Y]}();return""}),E}}d(S,"replace"),n.replace=S;function m(E,O,C){for(var B=0;B<C.length;B++){var z=C[B][0][C[B][1]].apply(C[B][0],C[B][2]);if(z===O)return z}return E}d(m,"functionChain"),n.functionChain=m;function D(E,O,C,B){var z=d(function(se){var le=se.match(/(\${.*?})/g);if(le!=null)for(var te=0;te<le.length;te++){var he=O[le[te].substring(2,le[te].length-1)]||"";he!=null&&(se=se.replace(le[te],he))}return se},"getValue"),Y=d(function(se){if(se!=null){if(i(se))return z(se);if(u(se)&&!B&&(C==null||(se.name||"").indexOf(C)===0))return se(O);if(s(se)){for(var le=[],te=0;te<se.length;te++)le.push(Y(se[te]));return le}else if(c(se)){var he={};for(var fe in se)he[fe]=Y(se[fe]);return he}else return se}},"_one");return Y(E)}d(D,"populate"),n.populate=D;function A(E,O){if(E){for(var C=0;C<E.length;C++)if(O(E[C]))return C}return-1}d(A,"findWithFunction"),n.findWithFunction=A;function j(E,O){var C=A(E,O);return C>-1&&E.splice(C,1),C!==-1}d(j,"removeWithFunction"),n.removeWithFunction=j;function L(E,O){var C=E.indexOf(O);return C>-1&&E.splice(C,1),C!==-1}d(L,"remove"),n.remove=L;function k(E,O,C){A(E,C)===-1&&E.push(O)}d(k,"addWithFunction"),n.addWithFunction=k;function I(E,O,C,B){var z=E[O];return z==null&&(z=[],E[O]=z),z[B?"unshift":"push"](C),z}d(I,"addToList"),n.addToList=I;function v(E,O,C){return E.indexOf(O)===-1?(C?E.unshift(O):E.push(O),!0):!1}d(v,"suggest"),n.suggest=v;function T(E,O,C){var B;O=s(O)?O:[O];var z=d(function(te){for(var he=te.__proto__;he!=null;)if(he.prototype!=null){for(var fe in he.prototype)he.prototype.hasOwnProperty(fe)&&!E.prototype.hasOwnProperty(fe)&&(E.prototype[fe]=he.prototype[fe]);he=he.prototype.__proto__}else he=null},"_copyProtoChain");for(B=0;B<O.length;B++){for(var Y in O[B].prototype)O[B].prototype.hasOwnProperty(Y)&&!E.prototype.hasOwnProperty(Y)&&(E.prototype[Y]=O[B].prototype[Y]);z(O[B])}var se=d(function(te,he){return function(){for(B=0;B<O.length;B++)O[B].prototype[te]&&O[B].prototype[te].apply(this,arguments);return he.apply(this,arguments)}},"_makeFn"),le=d(function(te){for(var he in te)E.prototype[he]=se(he,te[he])},"_oneSet");if(arguments.length>2)for(B=2;B<arguments.length;B++)le(arguments[B]);return E}d(T,"extend"),n.extend=T;for(var P=[],F=0;F<256;F++)P[F]=(F<16?"0":"")+F.toString(16);function U(){var E=Math.random()*4294967295|0,O=Math.random()*4294967295|0,C=Math.random()*4294967295|0,B=Math.random()*4294967295|0;return P[E&255]+P[E>>8&255]+P[E>>16&255]+P[E>>24&255]+"-"+P[O&255]+P[O>>8&255]+"-"+P[O>>16&15|64]+P[O>>24&255]+"-"+P[C&63|128]+P[C>>8&255]+"-"+P[C>>16&255]+P[C>>24&255]+P[B&255]+P[B>>8&255]+P[B>>16&255]+P[B>>24&255]}d(U,"uuid"),n.uuid=U;function M(E){if(E==null)return null;for(var O=E.replace(/^\s\s*/,""),C=/\s/,B=O.length;C.test(O.charAt(--B)););return O.slice(0,B+1)}d(M,"fastTrim"),n.fastTrim=M;function V(E,O){E=E.length==null||typeof E=="string"?[E]:E;for(var C=0;C<E.length;C++)O(E[C])}d(V,"each"),n.each=V;function W(E,O){for(var C=[],B=0;B<E.length;B++)C.push(O(E[B]));return C}d(W,"map"),n.map=W;function K(E,O,C){C=C||"parent";var B=d(function(te){return te?O[te]:null},"_def"),z=d(function(te){return te?B(te[C]):null},"_parent"),Y=d(function(te,he){if(te==null)return he;var fe=["anchor","anchors","cssClass","connector","paintStyle","hoverPaintStyle","endpoint","endpoints"];he.mergeStrategy==="override"&&Array.prototype.push.apply(fe,["events","overlays"]);var be=w(te,he,[],fe);return Y(z(te),be)},"_one"),se=d(function(te){if(te==null)return{};if(typeof te=="string")return B(te);if(te.length){for(var he=!1,fe=0,be=void 0;!he&&fe<te.length;)be=se(te[fe]),be?he=!0:fe++;return be}},"_getDef"),le=se(E);return le?Y(z(le),le):{}}d(K,"mergeWithParents"),n.mergeWithParents=K,n.logEnabled=!0;function R(){if(n.logEnabled&&typeof console<"u")try{var E=arguments[arguments.length-1];console.log(E)}catch{}}d(R,"log"),n.log=R;function X(E,O,C){return function(){var B=null;try{O!=null&&(B=O.apply(this,arguments))}catch(z){R("jsPlumb function failed : "+z)}if(E!=null&&(C==null||B!==C))try{B=E.apply(this,arguments)}catch(z){R("wrapped function failed : "+z)}return B}}d(X,"wrap"),n.wrap=X;var Q=function(){function E(){var O=this;this._listeners={},this.eventsSuspended=!1,this.tick=!1,this.eventsToDieOn={ready:!0},this.queue=[],this.bind=function(C,B,z){var Y=d(function(le){I(O._listeners,le,B,z),B.__jsPlumb=B.__jsPlumb||{},B.__jsPlumb[U()]=le},"_one");if(typeof C=="string")Y(C);else if(C.length!=null)for(var se=0;se<C.length;se++)Y(C[se]);return O},this.fire=function(C,B,z){if(this.tick)this.queue.unshift(arguments);else{if(this.tick=!0,!this.eventsSuspended&&this._listeners[C]){var Y=this._listeners[C].length,se=0,le=!1,te=null;if(!this.shouldFireEvent||this.shouldFireEvent(C,B,z))for(;!le&&se<Y&&te!==!1;){if(this.eventsToDieOn[C])this._listeners[C][se].apply(this,[B,z]);else try{te=this._listeners[C][se].apply(this,[B,z])}catch(he){R("jsPlumb: fire failed for event "+C+" : "+he)}se++,(this._listeners==null||this._listeners[C]==null)&&(le=!0)}}this.tick=!1,this._drain()}return this},this._drain=function(){var C=O.queue.pop();C&&O.fire.apply(O,C)},this.unbind=function(C,B){if(arguments.length===0)this._listeners={};else if(arguments.length===1){if(typeof C=="string")delete this._listeners[C];else if(C.__jsPlumb){var z=void 0;for(var Y in C.__jsPlumb)z=C.__jsPlumb[Y],L(this._listeners[z]||[],C)}}else arguments.length===2&&L(this._listeners[C]||[],B);return this},this.getListener=function(C){return O._listeners[C]},this.setSuspendEvents=function(C){O.eventsSuspended=C},this.isSuspendEvents=function(){return O.eventsSuspended},this.silently=function(C){O.setSuspendEvents(!0);try{C()}catch(B){R("Cannot execute silent function "+B)}O.setSuspendEvents(!1)},this.cleanupListeners=function(){for(var C in O._listeners)O._listeners[C]=null}}return d(E,"EventGenerator"),E}();n.EventGenerator=Q;function G(E,O,C){var B=[E[0]-O[0],E[1]-O[1]],z=Math.cos(C/360*Math.PI*2),Y=Math.sin(C/360*Math.PI*2);return[B[0]*z-B[1]*Y+O[0],B[1]*z+B[0]*Y+O[1],z,Y]}d(G,"rotatePoint"),n.rotatePoint=G;function J(E,O){var C=G(E,[0,0],O);return[Math.round(C[0]),Math.round(C[1])]}d(J,"rotateAnchorOrientation"),n.rotateAnchorOrientation=J}.call(typeof window<"u"?window:ht),function(){var e=this;e.jsPlumbUtil.matchesSelector=function(n,s,a){a=a||n.parentNode;for(var i=a.querySelectorAll(s),r=0;r<i.length;r++)if(i[r]===n)return!0;return!1},e.jsPlumbUtil.consume=function(n,s){n.stopPropagation?n.stopPropagation():n.returnValue=!1,!s&&n.preventDefault&&n.preventDefault()},e.jsPlumbUtil.sizeElement=function(n,s,a,i,r){n&&(n.style.height=r+"px",n.height=r,n.style.width=i+"px",n.width=i,n.style.left=s+"px",n.style.top=a+"px")}}.call(typeof window<"u"?window:ht),function(){var e={deriveAnchor:function(i,r,o,c){return{top:["TopRight","TopLeft"],bottom:["BottomRight","BottomLeft"]}[i][r]}},n=this,s=d(function(i,r){this.count=0,this.instance=i,this.lists={},this.options=r||{},this.instance.addList=function(o,c){return this.listManager.addList(o,c)},this.instance.removeList=function(o){this.listManager.removeList(o)},this.instance.bind("manageElement",function(o){for(var c=this.instance.getSelector(o.el,"[jtk-scrollable-list]"),l=0;l<c.length;l++)this.addList(c[l])}.bind(this)),this.instance.bind("unmanageElement",function(o){this.removeList(o.el)}),this.instance.bind("connection",function(o,c){c==null&&(this._maybeUpdateParentList(o.source),this._maybeUpdateParentList(o.target))}.bind(this))},"ListManager");n.jsPlumbListManager=s,s.prototype={addList:function(i,r){var o=this.instance.extend({},e);this.instance.extend(o,this.options),r=this.instance.extend(o,r||{});var c=[this.instance.getInstanceIndex(),this.count++].join("_");this.lists[c]=new a(this.instance,i,r,c)},removeList:function(i){var r=this.lists[i._jsPlumbList];r&&(r.destroy(),delete this.lists[i._jsPlumbList])},_maybeUpdateParentList:function(i){for(var r=i.parentNode,o=this.instance.getContainer();r!=null&&r!==o;){if(r._jsPlumbList!=null&&this.lists[r._jsPlumbList]!=null){r._jsPlumbScrollHandler();return}r=r.parentNode}}};var a=d(function(i,r,o,c){r._jsPlumbList=c;function l(y,w,S,m){return o.anchor?o.anchor:o.deriveAnchor(y,w,S,m)}d(l,"deriveAnchor");function u(y,w,S,m){return o.deriveEndpoint?o.deriveEndpoint(y,w,S,m):o.endpoint?o.endpoint:S.type}d(u,"deriveEndpoint");function p(y){for(var w=y.parentNode,S=i.getContainer();w!=null&&w!==S;){if(i.hasClass(w,"jtk-managed")){i.recalculateOffsets(w);return}w=w.parentNode}}d(p,"_maybeUpdateDraggable");var g=d(function(y){for(var w=i.getSelector(r,".jtk-managed"),S=i.getId(r),m=0;m<w.length;m++){if(w[m].offsetTop<r.scrollTop)w[m]._jsPlumbProxies||(w[m]._jsPlumbProxies=w[m]._jsPlumbProxies||[],i.select({source:w[m]}).each(function(A){i.proxyConnection(A,0,r,S,function(){return u("top",0,A.endpoints[0],A)},function(){return l("top",0,A.endpoints[0],A)}),w[m]._jsPlumbProxies.push([A,0])}),i.select({target:w[m]}).each(function(A){i.proxyConnection(A,1,r,S,function(){return u("top",1,A.endpoints[1],A)},function(){return l("top",1,A.endpoints[1],A)}),w[m]._jsPlumbProxies.push([A,1])}));else if(w[m].offsetTop+w[m].offsetHeight>r.scrollTop+r.offsetHeight)w[m]._jsPlumbProxies||(w[m]._jsPlumbProxies=w[m]._jsPlumbProxies||[],i.select({source:w[m]}).each(function(A){i.proxyConnection(A,0,r,S,function(){return u("bottom",0,A.endpoints[0],A)},function(){return l("bottom",0,A.endpoints[0],A)}),w[m]._jsPlumbProxies.push([A,0])}),i.select({target:w[m]}).each(function(A){i.proxyConnection(A,1,r,S,function(){return u("bottom",1,A.endpoints[1],A)},function(){return l("bottom",1,A.endpoints[1],A)}),w[m]._jsPlumbProxies.push([A,1])}));else if(w[m]._jsPlumbProxies){for(var D=0;D<w[m]._jsPlumbProxies.length;D++)i.unproxyConnection(w[m]._jsPlumbProxies[D][0],w[m]._jsPlumbProxies[D][1],S);delete w[m]._jsPlumbProxies}i.revalidate(w[m])}p(r)},"scrollHandler");i.setAttribute(r,"jtk-scrollable-list","true"),r._jsPlumbScrollHandler=g,i.on(r,"scroll",g),g(),this.destroy=function(){i.off(r,"scroll",g),delete r._jsPlumbScrollHandler;for(var y=i.getSelector(r,".jtk-managed"),w=i.getId(r),S=0;S<y.length;S++)if(y[S]._jsPlumbProxies){for(var m=0;m<y[S]._jsPlumbProxies.length;m++)i.unproxyConnection(y[S]._jsPlumbProxies[m][0],y[S]._jsPlumbProxies[m][1],w);delete y[S]._jsPlumbProxies}}},"List")}.call(typeof window<"u"?window:ht),function(){var e=this,n=e.jsPlumbUtil,s=d(function(S){if(S._jsPlumb.paintStyle&&S._jsPlumb.hoverPaintStyle){var m={};w.extend(m,S._jsPlumb.paintStyle),w.extend(m,S._jsPlumb.hoverPaintStyle),delete S._jsPlumb.hoverPaintStyle,m.gradient&&S._jsPlumb.paintStyle.fill&&delete m.gradient,S._jsPlumb.hoverPaintStyle=m}},"_updateHoverStyle"),a=["tap","dbltap","click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","contextmenu"],i=d(function(S,m,D,A){var j=S.getAttachedElements();if(j)for(var L=0,k=j.length;L<k;L++)(!A||A!==j[L])&&j[L].setHover(m,!0,D)},"_updateAttachedElements"),r=d(function(S){return S==null?null:S.split(" ")},"_splitType"),o=d(function(S,m,D){for(var A in m)S[A]=D},"_mapType"),c=d(function(S,m,D){if(S.getDefaultType){var A=S.getTypeDescriptor(),j={},L=S.getDefaultType(),k=n.merge({},L);o(j,L,"__default");for(var I=0,v=S._jsPlumb.types.length;I<v;I++){var T=S._jsPlumb.types[I];if(T!=="__default"){var P=S._jsPlumb.instance.getType(T,A);if(P!=null){var F=["anchor","anchors","connector","paintStyle","hoverPaintStyle","endpoint","endpoints","connectorOverlays","connectorStyle","connectorHoverStyle","endpointStyle","endpointHoverStyle"],U=[];P.mergeStrategy==="override"?Array.prototype.push.apply(F,["events","overlays","cssClass"]):U.push("cssClass"),k=n.merge(k,P,U,F),o(j,P,T)}}}m&&(k=n.populate(k,m,"_")),S.applyType(k,D,j),D||S.repaint()}},"_applyTypes"),l=e.jsPlumbUIComponent=function(S){n.EventGenerator.apply(this,arguments);var m=this,D=arguments,A=m.idPrefix,j=A+new Date().getTime();this._jsPlumb={instance:S._jsPlumb,parameters:S.parameters||{},paintStyle:null,hoverPaintStyle:null,paintStyleInUse:null,hover:!1,beforeDetach:S.beforeDetach,beforeDrop:S.beforeDrop,overlayPlacements:[],hoverClass:S.hoverClass||S._jsPlumb.Defaults.HoverClass,types:[],typeCache:{}},this.cacheTypeItem=function(U,M,V){this._jsPlumb.typeCache[V]=this._jsPlumb.typeCache[V]||{},this._jsPlumb.typeCache[V][U]=M},this.getCachedTypeItem=function(U,M){return this._jsPlumb.typeCache[M]?this._jsPlumb.typeCache[M][U]:null},this.getId=function(){return j};var L=S.overlays||[],k={};if(this.defaultOverlayKeys){for(var I=0;I<this.defaultOverlayKeys.length;I++)Array.prototype.push.apply(L,this._jsPlumb.instance.Defaults[this.defaultOverlayKeys[I]]||[]);for(I=0;I<L.length;I++){var v=w.convertToFullOverlaySpec(L[I]);k[v[1].id]=v}}var T={overlays:k,parameters:S.parameters||{},scope:S.scope||this._jsPlumb.instance.getDefaultScope()};if(this.getDefaultType=function(){return T},this.appendToDefaultType=function(U){for(var M in U)T[M]=U[M]},S.events)for(var P in S.events)m.bind(P,S.events[P]);this.clone=function(){var U=Object.create(this.constructor.prototype);return this.constructor.apply(U,D),U}.bind(this),this.isDetachAllowed=function(U){var M=!0;if(this._jsPlumb.beforeDetach)try{M=this._jsPlumb.beforeDetach(U)}catch(V){n.log("jsPlumb: beforeDetach callback failed",V)}return M},this.isDropAllowed=function(U,M,V,W,K,R,X){var Q=this._jsPlumb.instance.checkCondition("beforeDrop",{sourceId:U,targetId:M,scope:V,connection:W,dropEndpoint:K,source:R,target:X});if(this._jsPlumb.beforeDrop)try{Q=this._jsPlumb.beforeDrop({sourceId:U,targetId:M,scope:V,connection:W,dropEndpoint:K,source:R,target:X})}catch(G){n.log("jsPlumb: beforeDrop callback failed",G)}return Q};var F=[];this.setListenerComponent=function(U){for(var M=0;M<F.length;M++)F[M][3]=U}},u=d(function(S,m){var D=S._jsPlumb.types[m],A=S._jsPlumb.instance.getType(D,S.getTypeDescriptor());A!=null&&A.cssClass&&S.canvas&&S._jsPlumb.instance.removeClass(S.canvas,A.cssClass)},"_removeTypeCssHelper");n.extend(e.jsPlumbUIComponent,n.EventGenerator,{getParameter:function(S){return this._jsPlumb.parameters[S]},setParameter:function(S,m){this._jsPlumb.parameters[S]=m},getParameters:function(){return this._jsPlumb.parameters},setParameters:function(S){this._jsPlumb.parameters=S},getClass:function(){return w.getClass(this.canvas)},hasClass:function(S){return w.hasClass(this.canvas,S)},addClass:function(S){w.addClass(this.canvas,S)},removeClass:function(S){w.removeClass(this.canvas,S)},updateClasses:function(S,m){w.updateClasses(this.canvas,S,m)},setType:function(S,m,D){this.clearTypes(),this._jsPlumb.types=r(S)||[],c(this,m,D)},getType:function(){return this._jsPlumb.types},reapplyTypes:function(S,m){c(this,S,m)},hasType:function(S){return this._jsPlumb.types.indexOf(S)!==-1},addType:function(S,m,D){var A=r(S),j=!1;if(A!=null){for(var L=0,k=A.length;L<k;L++)this.hasType(A[L])||(this._jsPlumb.types.push(A[L]),j=!0);j&&c(this,m,D)}},removeType:function(S,m,D){var A=r(S),j=!1,L=function(v){var T=this._jsPlumb.types.indexOf(v);return T!==-1?(u(this,T),this._jsPlumb.types.splice(T,1),!0):!1}.bind(this);if(A!=null){for(var k=0,I=A.length;k<I;k++)j=L(A[k])||j;j&&c(this,m,D)}},clearTypes:function(S,m){for(var D=this._jsPlumb.types.length,A=0;A<D;A++)u(this,0),this._jsPlumb.types.splice(0,1);c(this,S,m)},toggleType:function(S,m,D){var A=r(S);if(A!=null){for(var j=0,L=A.length;j<L;j++){var k=this._jsPlumb.types.indexOf(A[j]);k!==-1?(u(this,k),this._jsPlumb.types.splice(k,1)):this._jsPlumb.types.push(A[j])}c(this,m,D)}},applyType:function(S,m){if(this.setPaintStyle(S.paintStyle,m),this.setHoverPaintStyle(S.hoverPaintStyle,m),S.parameters)for(var D in S.parameters)this.setParameter(D,S.parameters[D]);this._jsPlumb.paintStyleInUse=this.getPaintStyle()},setPaintStyle:function(S,m){this._jsPlumb.paintStyle=S,this._jsPlumb.paintStyleInUse=this._jsPlumb.paintStyle,s(this),m||this.repaint()},getPaintStyle:function(){return this._jsPlumb.paintStyle},setHoverPaintStyle:function(S,m){this._jsPlumb.hoverPaintStyle=S,s(this),m||this.repaint()},getHoverPaintStyle:function(){return this._jsPlumb.hoverPaintStyle},destroy:function(S){(S||this.typeId==null)&&(this.cleanupListeners(),this.clone=null,this._jsPlumb=null)},isHover:function(){return this._jsPlumb.hover},setHover:function(S,m,D){if(this._jsPlumb&&!this._jsPlumb.instance.currentlyDragging&&!this._jsPlumb.instance.isHoverSuspended()){this._jsPlumb.hover=S;var A=S?"addClass":"removeClass";this.canvas!=null&&(this._jsPlumb.instance.hoverClass!=null&&this._jsPlumb.instance[A](this.canvas,this._jsPlumb.instance.hoverClass),this._jsPlumb.hoverClass!=null&&this._jsPlumb.instance[A](this.canvas,this._jsPlumb.hoverClass)),this._jsPlumb.hoverPaintStyle!=null&&(this._jsPlumb.paintStyleInUse=S?this._jsPlumb.hoverPaintStyle:this._jsPlumb.paintStyle,this._jsPlumb.instance.isSuspendDrawing()||(D=D||jsPlumbUtil.uuid(),this.repaint({timestamp:D,recalc:!1}))),this.getAttachedElements&&!m&&i(this,S,jsPlumbUtil.uuid(),this)}}});var p=0,g=d(function(){var S=p+1;return p++,S},"getInstanceIndex"),y=e.jsPlumbInstance=function(S){this.version="2.15.6",this.Defaults={Anchor:"Bottom",Anchors:[null,null],ConnectionsDetachable:!0,ConnectionOverlays:[],Connector:"Bezier",Container:null,DoNotThrowErrors:!1,DragOptions:{},DropOptions:{},Endpoint:"Dot",EndpointOverlays:[],Endpoints:[null,null],EndpointStyle:{fill:"#456"},EndpointStyles:[null,null],EndpointHoverStyle:null,EndpointHoverStyles:[null,null],HoverPaintStyle:null,LabelStyle:{color:"black"},ListStyle:{},LogEnabled:!1,Overlays:[],MaxConnections:1,PaintStyle:{"stroke-width":4,stroke:"#456"},ReattachConnections:!1,RenderMode:"svg",Scope:"jsPlumb_DefaultScope"},S&&w.extend(this.Defaults,S),this.logEnabled=this.Defaults.LogEnabled,this._connectionTypes={},this._endpointTypes={},n.EventGenerator.apply(this);var m=this,D=g(),A=m.bind,j={},L=1,k=d(function(q){if(q==null)return null;if(q.nodeType===3||q.nodeType===8)return{el:q,text:!0};var ae=m.getElement(q);return{el:ae,id:n.isString(q)&&ae==null?q:_e(ae)}},"_info");this.getInstanceIndex=function(){return D},this.setZoom=function(q,ae){return L=q,m.fire("zoom",L),ae&&m.repaintEverything(),!0},this.getZoom=function(){return L};for(var I in this.Defaults)j[I]=this.Defaults[I];var v,T=[];this.unbindContainer=function(){if(v!=null&&T.length>0)for(var q=0;q<T.length;q++)m.off(v,T[q][0],T[q][1])},this.setContainer=function(q){this.unbindContainer(),q=this.getElement(q),this.select().each(function(Oe){Oe.moveParent(q)}),this.selectEndpoints().each(function(Oe){Oe.moveParent(q)});var ae=v;v=q,T.length=0;for(var ee={endpointclick:"endpointClick",endpointdblclick:"endpointDblClick"},ie=d(function(Oe,Ce,et){var Ve=Ce.srcElement||Ce.target,it=(Ve&&Ve.parentNode?Ve.parentNode._jsPlumb:null)||(Ve?Ve._jsPlumb:null)||(Ve&&Ve.parentNode&&Ve.parentNode.parentNode?Ve.parentNode.parentNode._jsPlumb:null);if(it){it.fire(Oe,it,Ce);var pt=et&&ee[et+Oe]||Oe;m.fire(pt,it.component||it,Ce)}},"_oneDelegateHandler"),ue=d(function(Oe,Ce,et){T.push([Oe,et]),m.on(v,Oe,Ce,et)},"_addOneDelegate"),ve=d(function(Oe){ue(Oe,".jtk-connector",function(Ce){ie(Oe,Ce)}),ue(Oe,".jtk-endpoint",function(Ce){ie(Oe,Ce,"endpoint")}),ue(Oe,".jtk-overlay",function(Ce){ie(Oe,Ce)})},"_oneDelegate"),Ae=0;Ae<a.length;Ae++)ve(a[Ae]);for(var $e in W){var Le=W[$e].el;Le.parentNode===ae&&(ae.removeChild(Le),v.appendChild(Le))}},this.getContainer=function(){return v},this.bind=function(q,ae){q==="ready"&&F?ae():A.apply(m,[q,ae])},m.importDefaults=function(q){for(var ae in q)m.Defaults[ae]=q[ae];return q.Container&&m.setContainer(q.Container),m},m.restoreDefaults=function(){return m.Defaults=w.extend({},j),m};var P=null,F=!1,U=[],M={},V={},W={},K={},R={},X=!1,Q=[],G=!1,J=null,E=this.Defaults.Scope,O=1,C=d(function(){return""+O++},"_idstamp"),B=function(q,ae){v?v.appendChild(q):ae?this.getElement(ae).appendChild(q):this.appendToRoot(q)}.bind(this),z=d(function(q,ae,ee,ie){var ue={c:[],e:[]};if(!G&&(q=m.getElement(q),q!=null)){var ve=_e(q),Ae=q.querySelectorAll(".jtk-managed");ee==null&&(ee=jsPlumbUtil.uuid()),dt({elId:ve,offset:ae,recalc:!1,timestamp:ee});for(var $e=0;$e<Ae.length;$e++)dt({elId:Ae[$e].getAttribute("id"),recalc:!0,timestamp:ee});var Le=m.router.redraw(ve,ae,ee,null,ie);if(Array.prototype.push.apply(ue.c,Le.c),Array.prototype.push.apply(ue.e,Le.e),Ae)for(var Oe=0;Oe<Ae.length;Oe++)Le=m.router.redraw(Ae[Oe].getAttribute("id"),null,ee,null,ie,!0),Array.prototype.push.apply(ue.c,Le.c),Array.prototype.push.apply(ue.e,Le.e)}return ue},"_draw"),Y=d(function(q){return V[q]},"_getEndpoint"),se=d(function(q,ae){for(var ee=q.scope.split(/\s/),ie=ae.scope.split(/\s/),ue=0;ue<ee.length;ue++)for(var ve=0;ve<ie.length;ve++)if(ie[ve]===ee[ue])return!0;return!1},"_scopeMatch"),le=d(function(q,ae){var ee=w.extend({},q);for(var ie in ae)ae[ie]&&(ee[ie]=ae[ie]);return ee},"_mergeOverrides"),te=function(q,ae){var ee=w.extend({},q);if(ae&&w.extend(ee,ae),ee.source&&(ee.source.endpoint?ee.sourceEndpoint=ee.source:ee.source=m.getElement(ee.source)),ee.target&&(ee.target.endpoint?ee.targetEndpoint=ee.target:ee.target=m.getElement(ee.target)),q.uuids&&(ee.sourceEndpoint=Y(q.uuids[0]),ee.targetEndpoint=Y(q.uuids[1])),ee.sourceEndpoint&&ee.sourceEndpoint.isFull()){n.log(m,"could not add connection; source endpoint is full");return}if(ee.targetEndpoint&&ee.targetEndpoint.isFull()){n.log(m,"could not add connection; target endpoint is full");return}if(!ee.type&&ee.sourceEndpoint&&(ee.type=ee.sourceEndpoint.connectionType),ee.sourceEndpoint&&ee.sourceEndpoint.connectorOverlays){ee.overlays=ee.overlays||[];for(var ie=0,ue=ee.sourceEndpoint.connectorOverlays.length;ie<ue;ie++)ee.overlays.push(ee.sourceEndpoint.connectorOverlays[ie])}ee.sourceEndpoint&&ee.sourceEndpoint.scope&&(ee.scope=ee.sourceEndpoint.scope),!ee["pointer-events"]&&ee.sourceEndpoint&&ee.sourceEndpoint.connectorPointerEvents&&(ee["pointer-events"]=ee.sourceEndpoint.connectorPointerEvents);var ve=d(function($e,Le,Oe){var Ce=le(Le,{anchor:ee.anchors?ee.anchors[Oe]:ee.anchor,endpoint:ee.endpoints?ee.endpoints[Oe]:ee.endpoint,paintStyle:ee.endpointStyles?ee.endpointStyles[Oe]:ee.endpointStyle,hoverPaintStyle:ee.endpointHoverStyles?ee.endpointHoverStyles[Oe]:ee.endpointHoverStyle});return m.addEndpoint($e,Ce)},"_addEndpoint"),Ae=d(function($e,Le,Oe,Ce){if(ee[$e]&&!ee[$e].endpoint&&!ee[$e+"Endpoint"]&&!ee.newConnection){var et=_e(ee[$e]),Ve=Oe[et];if(Ve=Ve?Ve[Ce]:null,Ve){if(!Ve.enabled)return!1;var it=w.extend({},Ve.def);delete it.label;var pt=Ve.endpoint!=null&&Ve.endpoint._jsPlumb?Ve.endpoint:ve(ee[$e],it,Le);if(pt.isFull())return!1;ee[$e+"Endpoint"]=pt,!ee.scope&&it.scope&&(ee.scope=it.scope),Ve.uniqueEndpoint?Ve.endpoint?pt.finalEndpoint=Ve.endpoint:(Ve.endpoint=pt,pt.setDeleteOnEmpty(!1)):pt.setDeleteOnEmpty(!0),Le===0&&Ve.def.connectorOverlays&&(ee.overlays=ee.overlays||[],Array.prototype.push.apply(ee.overlays,Ve.def.connectorOverlays))}}},"_oneElementDef");if(Ae("source",0,this.sourceEndpointDefinitions,ee.type||"default")!==!1&&Ae("target",1,this.targetEndpointDefinitions,ee.type||"default")!==!1)return ee.sourceEndpoint&&ee.targetEndpoint&&(se(ee.sourceEndpoint,ee.targetEndpoint)||(ee=null)),ee}.bind(m),he=d(function(q){var ae=m.Defaults.ConnectionType||m.getDefaultConnectionType();q._jsPlumb=m,q.newConnection=he,q.newEndpoint=be,q.endpointsByUUID=V,q.endpointsByElement=M,q.finaliseConnection=fe,q.id="con_"+C();var ee=new ae(q);return ee.isDetachable()&&(ee.endpoints[0].initDraggable("_jsPlumbSource"),ee.endpoints[1].initDraggable("_jsPlumbTarget")),ee},"_newConnection"),fe=m.finaliseConnection=function(q,ae,ee,ie){if(ae=ae||{},q.suspendedEndpoint||U.push(q),q.pending=null,q.endpoints[0].isTemporarySource=!1,ie!==!1&&m.router.newConnection(q),z(q.source),!ae.doNotFireConnectionEvent&&ae.fireEvent!==!1){var ue={connection:q,source:q.source,target:q.target,sourceId:q.sourceId,targetId:q.targetId,sourceEndpoint:q.endpoints[0],targetEndpoint:q.endpoints[1]};m.fire("connection",ue,ee)}},be=d(function(q,ae){var ee=m.Defaults.EndpointType||w.Endpoint,ie=w.extend({},q);ie._jsPlumb=m,ie.newConnection=he,ie.newEndpoint=be,ie.endpointsByUUID=V,ie.endpointsByElement=M,ie.fireDetachEvent=xe,ie.elementId=ae||_e(ie.source);var ue=new ee(ie);return ue.id="ep_"+C(),Cn(ie.elementId,ie.source),w.headless||m.getDragManager().endpointAdded(ie.source,ae),ue},"_newEndpoint"),ge=d(function(q,ae,ee){var ie=M[q];if(ie&&ie.length)for(var ue=0,ve=ie.length;ue<ve;ue++){for(var Ae=0,$e=ie[ue].connections.length;Ae<$e;Ae++){var Le=ae(ie[ue].connections[Ae]);if(Le)return}ee&&ee(ie[ue])}},"_operation"),ye=d(function(q,ae,ee){ae=ae==="block";var ie=null;ee&&(ie=d(function(ve){ve.setVisible(ae,!0,!0)},"endpointFunc"));var ue=k(q);ge(ue.id,function(ve){if(ae&&ee){var Ae=ve.sourceId===ue.id?1:0;ve.endpoints[Ae].isVisible()&&ve.setVisible(!0)}else ve.setVisible(ae)},ie)},"_setVisible"),ke=d(function(q,ae){var ee=null;ae&&(ee=d(function(ie){var ue=ie.isVisible();ie.setVisible(!ue)},"endpointFunc")),ge(q,function(ie){var ue=ie.isVisible();ie.setVisible(!ue)},ee)},"_toggleVisible"),Ie=d(function(q){var ae=K[q];return ae?{o:ae,s:Q[q]}:dt({elId:q})},"_getCachedData"),_e=d(function(q,ae,ee){if(n.isString(q))return q;if(q==null)return null;var ie=m.getAttribute(q,"id");return(!ie||ie==="undefined")&&(arguments.length===2&&arguments[1]!==void 0?ie=ae:(arguments.length===1||arguments.length===3&&!arguments[2])&&(ie="jsPlumb_"+D+"_"+C()),ee||m.setAttribute(q,"id",ie)),ie},"_getId");this.setConnectionBeingDragged=function(q){X=q},this.isConnectionBeingDragged=function(){return X},this.getManagedElements=function(){return W},this.connectorClass="jtk-connector",this.connectorOutlineClass="jtk-connector-outline",this.connectedClass="jtk-connected",this.hoverClass="jtk-hover",this.endpointClass="jtk-endpoint",this.endpointConnectedClass="jtk-endpoint-connected",this.endpointFullClass="jtk-endpoint-full",this.endpointDropAllowedClass="jtk-endpoint-drop-allowed",this.endpointDropForbiddenClass="jtk-endpoint-drop-forbidden",this.overlayClass="jtk-overlay",this.draggingClass="jtk-dragging",this.elementDraggingClass="jtk-element-dragging",this.sourceElementDraggingClass="jtk-source-element-dragging",this.targetElementDraggingClass="jtk-target-element-dragging",this.endpointAnchorClassPrefix="jtk-endpoint-anchor",this.hoverSourceClass="jtk-source-hover",this.hoverTargetClass="jtk-target-hover",this.dragSelectClass="jtk-drag-select",this.Anchors={},this.Connectors={svg:{}},this.Endpoints={svg:{}},this.Overlays={svg:{}},this.ConnectorRenderers={},this.SVG="svg",this.addEndpoint=function(q,ae,ee){ee=ee||{};var ie=w.extend({},ee);w.extend(ie,ae),ie.endpoint=ie.endpoint||m.Defaults.Endpoint,ie.paintStyle=ie.paintStyle||m.Defaults.EndpointStyle;for(var ue=[],ve=n.isArray(q)||q.length!=null&&!n.isString(q)?q:[q],Ae=0,$e=ve.length;Ae<$e;Ae++){ie.source=m.getElement(ve[Ae]),Un(ie.source);var Le=_e(ie.source),Oe=be(ie,Le),Ce=Cn(Le,ie.source,null,!G).info.o;n.addToList(M,Le,Oe),G||Oe.paint({anchorLoc:Oe.anchor.compute({xy:[Ce.left,Ce.top],wh:Q[Le],element:Oe,timestamp:J,rotation:this.getRotation(Le)}),timestamp:J}),ue.push(Oe)}return ue.length===1?ue[0]:ue},this.addEndpoints=function(q,ae,ee){for(var ie=[],ue=0,ve=ae.length;ue<ve;ue++){var Ae=m.addEndpoint(q,ae[ue],ee);n.isArray(Ae)?Array.prototype.push.apply(ie,Ae):ie.push(Ae)}return ie},this.animate=function(q,ae,ee){if(!this.animationSupported)return!1;ee=ee||{};var ie=m.getElement(q),ue=_e(ie),ve=w.animEvents.step,Ae=w.animEvents.complete;ee[ve]=n.wrap(ee[ve],function(){m.revalidate(ue)}),ee[Ae]=n.wrap(ee[Ae],function(){m.revalidate(ue)}),m.doAnimate(ie,ae,ee)},this.checkCondition=function(q,ae){var ee=m.getListener(q),ie=!0;if(ee&&ee.length>0){var ue=Array.prototype.slice.call(arguments,1);try{for(var ve=0,Ae=ee.length;ve<Ae;ve++)ie=ie&&ee[ve].apply(ee[ve],ue)}catch($e){n.log(m,"cannot check condition ["+q+"]"+$e)}}return ie},this.connect=function(q,ae){var ee=te(q,ae),ie;if(ee){if(ee.source==null&&ee.sourceEndpoint==null){n.log("Cannot establish connection - source does not exist");return}if(ee.target==null&&ee.targetEndpoint==null){n.log("Cannot establish connection - target does not exist");return}Un(ee.source),ie=he(ee),fe(ie,ee)}return ie};var Ue=[{el:"source",elId:"sourceId",epDefs:"sourceEndpointDefinitions"},{el:"target",elId:"targetId",epDefs:"targetEndpointDefinitions"}],Fe=function(q,ae,ee,ie){var ue,ve=Ue[ee],Ae=q[ve.elId];q[ve.el];var $e,Le,Oe=q.endpoints[ee],Ce={index:ee,originalSourceId:ee===0?Ae:q.sourceId,newSourceId:q.sourceId,originalTargetId:ee===1?Ae:q.targetId,newTargetId:q.targetId,connection:q};if(ae.constructor===w.Endpoint)ue=ae,ue.addConnection(q),ae=ue.element;else if($e=_e(ae),Le=this[ve.epDefs][$e],$e===q[ve.elId])ue=null;else if(Le)for(var et in Le){if(!Le[et].enabled)return;ue=Le[et].endpoint!=null&&Le[et].endpoint._jsPlumb?Le[et].endpoint:this.addEndpoint(ae,Le[et].def),Le[et].uniqueEndpoint&&(Le[et].endpoint=ue),ue.addConnection(q)}else ue=q.makeEndpoint(ee===0,ae,$e);return ue!=null&&(Oe.detachFromConnection(q),q.endpoints[ee]=ue,q[ve.el]=ue.element,q[ve.elId]=ue.elementId,Ce[ee===0?"newSourceId":"newTargetId"]=ue.elementId,de(Ce),ie||q.repaint()),Ce.element=ae,Ce}.bind(this);this.setSource=function(q,ae,ee){var ie=Fe(q,ae,0,ee);this.router.sourceOrTargetChanged(ie.originalSourceId,ie.newSourceId,q,ie.el,0)},this.setTarget=function(q,ae,ee){var ie=Fe(q,ae,1,ee);this.router.sourceOrTargetChanged(ie.originalTargetId,ie.newTargetId,q,ie.el,1)},this.deleteEndpoint=function(q,ae,ee){var ie=typeof q=="string"?V[q]:q;return ie&&m.deleteObject({endpoint:ie,dontUpdateHover:ae,deleteAttachedObjects:ee}),m},this.deleteEveryEndpoint=function(){var q=m.setSuspendDrawing(!0);for(var ae in M){var ee=M[ae];if(ee&&ee.length)for(var ie=0,ue=ee.length;ie<ue;ie++)m.deleteEndpoint(ee[ie],!0)}M={},W={},V={},K={},R={},m.router.reset();var ve=m.getDragManager();return ve&&ve.reset(),q||m.setSuspendDrawing(!1),m};var xe=d(function(q,ae,ee){var ie=m.Defaults.ConnectionType||m.getDefaultConnectionType(),ue=q.constructor===ie,ve=ue?{connection:q,source:q.source,target:q.target,sourceId:q.sourceId,targetId:q.targetId,sourceEndpoint:q.endpoints[0],targetEndpoint:q.endpoints[1]}:q;ae&&m.fire("connectionDetached",ve,ee),m.fire("internal.connectionDetached",ve,ee),m.router.connectionDetached(ve)},"fireDetachEvent"),de=m.fireMoveEvent=function(q,ae){m.fire("connectionMoved",q,ae)};this.unregisterEndpoint=function(q){q._jsPlumb.uuid&&(V[q._jsPlumb.uuid]=null),m.router.deleteEndpoint(q);for(var ae in M){var ee=M[ae];if(ee){for(var ie=[],ue=0,ve=ee.length;ue<ve;ue++)ee[ue]!==q&&ie.push(ee[ue]);M[ae]=ie}M[ae].length<1&&delete M[ae]}};var we="isDetachAllowed",Pe="beforeDetach",Ne="checkCondition";this.deleteConnection=function(q,ae){return q!=null&&(ae=ae||{},ae.force||n.functionChain(!0,!1,[[q.endpoints[0],we,[q]],[q.endpoints[1],we,[q]],[q,we,[q]],[m,Ne,[Pe,q]]]))?(q.setHover(!1),xe(q,!q.pending&&ae.fireEvent!==!1,ae.originalEvent),q.endpoints[0].detachFromConnection(q),q.endpoints[1].detachFromConnection(q),n.removeWithFunction(U,function(ee){return q.id===ee.id}),q.cleanup(),q.destroy(),!0):!1},this.deleteEveryConnection=function(q){q=q||{};var ae=U.length,ee=0;return m.batch(function(){for(var ie=0;ie<ae;ie++)ee+=m.deleteConnection(U[0],q)?1:0}),ee},this.deleteConnectionsForElement=function(q,ae){ae=ae||{},q=m.getElement(q);var ee=_e(q),ie=M[ee];if(ie&&ie.length)for(var ue=0,ve=ie.length;ue<ve;ue++)ie[ue].deleteEveryConnection(ae);return m},this.deleteObject=function(q){var ae={endpoints:{},connections:{},endpointCount:0,connectionCount:0},ee=q.deleteAttachedObjects!==!1,ie=d(function(Ce){Ce!=null&&ae.connections[Ce.id]==null&&(!q.dontUpdateHover&&Ce._jsPlumb!=null&&Ce.setHover(!1),ae.connections[Ce.id]=Ce,ae.connectionCount++)},"unravelConnection"),ue=d(function(Ce){if(Ce!=null&&ae.endpoints[Ce.id]==null&&(!q.dontUpdateHover&&Ce._jsPlumb!=null&&Ce.setHover(!1),ae.endpoints[Ce.id]=Ce,ae.endpointCount++,ee))for(var et=0;et<Ce.connections.length;et++){var Ve=Ce.connections[et];ie(Ve)}},"unravelEndpoint");q.connection?ie(q.connection):ue(q.endpoint);for(var ve in ae.connections){var Ae=ae.connections[ve];if(Ae._jsPlumb){n.removeWithFunction(U,function(Ce){return Ae.id===Ce.id}),xe(Ae,q.fireEvent===!1?!1:!Ae.pending,q.originalEvent);var $e=q.deleteAttachedObjects==null?null:!q.deleteAttachedObjects;Ae.endpoints[0].detachFromConnection(Ae,null,$e),Ae.endpoints[1].detachFromConnection(Ae,null,$e),Ae.cleanup(!0),Ae.destroy(!0)}}for(var Le in ae.endpoints){var Oe=ae.endpoints[Le];Oe._jsPlumb&&(m.unregisterEndpoint(Oe),Oe.cleanup(!0),Oe.destroy(!0))}return ae};var Ze=d(function(q,ae,ee,ie){for(var ue=0,ve=q.length;ue<ve;ue++)q[ue][ae].apply(q[ue],ee);return ie(q)},"_setOperation"),ft=d(function(q,ae,ee){for(var ie=[],ue=0,ve=q.length;ue<ve;ue++)ie.push([q[ue][ae].apply(q[ue],ee),q[ue]]);return ie},"_getOperation"),Rt=d(function(q,ae,ee){return function(){return Ze(q,ae,arguments,ee)}},"setter"),Gt=d(function(q,ae){return function(){return ft(q,ae,arguments)}},"getter"),tn=d(function(q,ae){var ee=[];if(q)if(typeof q=="string"){if(q==="*")return q;ee.push(q)}else if(ae)ee=q;else if(q.length)for(var ie=0,ue=q.length;ie<ue;ie++)ee.push(k(q[ie]).id);else ee.push(k(q).id);return ee},"prepareList"),Jt=d(function(q,ae,ee){return q==="*"?!0:q.length>0?q.indexOf(ae)!==-1:!ee},"filterList");this.getConnections=function(q,ae){q?q.constructor===String&&(q={scope:q}):q={};for(var ee=q.scope||m.getDefaultScope(),ie=tn(ee,!0),ue=tn(q.source),ve=tn(q.target),Ae=!ae&&ie.length>1?{}:[],$e=d(function(it,pt){if(!ae&&ie.length>1){var vt=Ae[it];vt==null&&(vt=Ae[it]=[]),vt.push(pt)}else Ae.push(pt)},"_addOne"),Le=0,Oe=U.length;Le<Oe;Le++){var Ce=U[Le],et=Ce.proxies&&Ce.proxies[0]?Ce.proxies[0].originalEp.elementId:Ce.sourceId,Ve=Ce.proxies&&Ce.proxies[1]?Ce.proxies[1].originalEp.elementId:Ce.targetId;Jt(ie,Ce.scope)&&Jt(ue,et)&&Jt(ve,Ve)&&$e(Ce.scope,Ce)}return Ae};var Qn=d(function(q,ae){return function(ee){for(var ie=0,ue=q.length;ie<ue;ie++)ee(q[ie]);return ae(q)}},"_curryEach"),es=d(function(q){return function(ae){return q[ae]}},"_curryGet"),Cs=d(function(q,ae){var ee={length:q.length,each:Qn(q,ae),get:es(q)},ie=["setHover","removeAllOverlays","setLabel","addClass","addOverlay","removeOverlay","removeOverlays","showOverlay","hideOverlay","showOverlays","hideOverlays","setPaintStyle","setHoverPaintStyle","setSuspendEvents","setParameter","setParameters","setVisible","repaint","addType","toggleType","removeType","removeClass","setType","bind","unbind"],ue=["getLabel","getOverlay","isHover","getParameter","getParameters","getPaintStyle","getHoverPaintStyle","isVisible","hasType","getType","isSuspendEvents"],ve,Ae;for(ve=0,Ae=ie.length;ve<Ae;ve++)ee[ie[ve]]=Rt(q,ie[ve],ae);for(ve=0,Ae=ue.length;ve<Ae;ve++)ee[ue[ve]]=Gt(q,ue[ve]);return ee},"_makeCommonSelectHandler"),nn=d(function(q){var ae=Cs(q,nn);return w.extend(ae,{setDetachable:Rt(q,"setDetachable",nn),setReattach:Rt(q,"setReattach",nn),setConnector:Rt(q,"setConnector",nn),delete:function(){for(var ee=0,ie=q.length;ee<ie;ee++)m.deleteConnection(q[ee])},isDetachable:Gt(q,"isDetachable"),isReattach:Gt(q,"isReattach")})},"_makeConnectionSelectHandler"),wn=d(function(q){var ae=Cs(q,wn);return w.extend(ae,{setEnabled:Rt(q,"setEnabled",wn),setAnchor:Rt(q,"setAnchor",wn),isEnabled:Gt(q,"isEnabled"),deleteEveryConnection:function(){for(var ee=0,ie=q.length;ee<ie;ee++)q[ee].deleteEveryConnection()},delete:function(){for(var ee=0,ie=q.length;ee<ie;ee++)m.deleteEndpoint(q[ee])}})},"_makeEndpointSelectHandler");this.select=function(q){return q=q||{},q.scope=q.scope||"*",nn(q.connections||m.getConnections(q,!0))},this.selectEndpoints=function(q){q=q||{},q.scope=q.scope||"*";var ae=!q.element&&!q.source&&!q.target,ee=ae?"*":tn(q.element),ie=ae?"*":tn(q.source),ue=ae?"*":tn(q.target),ve=tn(q.scope,!0),Ae=[];for(var $e in M){var Le=Jt(ee,$e,!0),Oe=Jt(ie,$e,!0),Ce=ie!=="*",et=Jt(ue,$e,!0),Ve=ue!=="*";if(Le||Oe||et)e:for(var it=0,pt=M[$e].length;it<pt;it++){var vt=M[$e][it];if(Jt(ve,vt.scope,!0)){var ts=Ce&&ie.length>0&&!vt.isSource,zs=Ve&&ue.length>0&&!vt.isTarget;if(ts||zs)continue e;Ae.push(vt)}}}return wn(Ae)},this.getAllConnections=function(){return U},this.getDefaultScope=function(){return E},this.getEndpoint=Y,this.getEndpoints=function(q){return M[k(q).id]||[]},this.getDefaultEndpointType=function(){return w.Endpoint},this.getDefaultConnectionType=function(){return w.Connection},this.getId=_e,this.draw=z,this.info=k,this.appendElement=B;var sn=!1;this.isHoverSuspended=function(){return sn},this.setHoverSuspended=function(q){sn=q},this.hide=function(q,ae){return ye(q,"none",ae),m},this.idstamp=C;var Un=d(function(q){if(!v&&q){var ae=m.getElement(q);ae.offsetParent&&m.setContainer(ae.offsetParent)}},"_ensureContainer"),Sn=d(function(){m.Defaults.Container&&m.setContainer(m.Defaults.Container)},"_getContainerFromDefaults"),Cn=m.manage=function(q,ae,ee,ie){return W[q]?ie&&(W[q].info=dt({elId:q,timestamp:J,recalc:!0})):(W[q]={el:ae,endpoints:[],connections:[],rotation:0},W[q].info=dt({elId:q,timestamp:J}),m.addClass(ae,"jtk-managed"),ee||m.fire("manageElement",{id:q,info:W[q].info,el:ae})),W[q]};this.unmanage=function(q){if(W[q]){var ae=W[q].el;m.removeClass(ae,"jtk-managed"),delete W[q],m.fire("unmanageElement",{id:q,el:ae})}},this.rotate=function(q,ae,ee){return W[q]&&(W[q].rotation=ae,W[q].el.style.transform="rotate("+ae+"deg)",W[q].el.style.transformOrigin="center center",ee!==!0)?this.revalidate(q):{c:[],e:[]}},this.getRotation=function(q){return W[q]&&W[q].rotation||0};var dt=d(function(q){var ae=q.timestamp,ee=q.recalc,ie=q.offset,ue=q.elId,ve;return G&&!ae&&(ae=J),!ee&&ae&&ae===R[ue]?{o:q.offset||K[ue],s:Q[ue]}:(ee||!ie&&K[ue]==null?(ve=W[ue]?W[ue].el:null,ve!=null&&(Q[ue]=m.getSize(ve),K[ue]=m.getOffset(ve),R[ue]=ae)):(K[ue]=ie||K[ue],Q[ue]==null&&(ve=W[ue].el,ve!=null&&(Q[ue]=m.getSize(ve))),R[ue]=ae),K[ue]&&!K[ue].right&&(K[ue].right=K[ue].left+Q[ue][0],K[ue].bottom=K[ue].top+Q[ue][1],K[ue].width=Q[ue][0],K[ue].height=Q[ue][1],K[ue].centerx=K[ue].left+K[ue].width/2,K[ue].centery=K[ue].top+K[ue].height/2),{o:K[ue],s:Q[ue]})},"_updateOffset");this.updateOffset=dt,this.init=function(){F||(Sn(),m.router=new e.jsPlumb.DefaultRouter(m),m.anchorManager=m.router.anchorManager,F=!0,m.fire("ready",m))}.bind(this),this.log=P,this.jsPlumbUIComponent=l,this.makeAnchor=function(){var q,ae=d(function(Ae,$e){if(e.jsPlumb.Anchors[Ae])return new e.jsPlumb.Anchors[Ae]($e);if(!m.Defaults.DoNotThrowErrors)throw{msg:"jsPlumb: unknown anchor type '"+Ae+"'"}},"_a");if(arguments.length===0)return null;var ee=arguments[0],ie=arguments[1],ue=null;if(ee.compute&&ee.getOrientation)return ee;if(typeof ee=="string")ue=ae(arguments[0],{elementId:ie,jsPlumbInstance:m});else if(n.isArray(ee))if(n.isArray(ee[0])||n.isString(ee[0]))ee.length===2&&n.isObject(ee[1])?n.isString(ee[0])?(q=e.jsPlumb.extend({elementId:ie,jsPlumbInstance:m},ee[1]),ue=ae(ee[0],q)):(q=e.jsPlumb.extend({elementId:ie,jsPlumbInstance:m,anchors:ee[0]},ee[1]),ue=new e.jsPlumb.DynamicAnchor(q)):ue=new w.DynamicAnchor({anchors:ee,selector:null,elementId:ie,jsPlumbInstance:m});else{var ve={x:ee[0],y:ee[1],orientation:ee.length>=4?[ee[2],ee[3]]:[0,0],offsets:ee.length>=6?[ee[4],ee[5]]:[0,0],elementId:ie,jsPlumbInstance:m,cssClass:ee.length===7?ee[6]:null};ue=new e.jsPlumb.Anchor(ve),ue.clone=function(){return new e.jsPlumb.Anchor(ve)}}return ue.id||(ue.id="anchor_"+C()),ue},this.makeAnchors=function(q,ae,ee){for(var ie=[],ue=0,ve=q.length;ue<ve;ue++)typeof q[ue]=="string"?ie.push(e.jsPlumb.Anchors[q[ue]]({elementId:ae,jsPlumbInstance:ee})):n.isArray(q[ue])&&ie.push(m.makeAnchor(q[ue],ae,ee));return ie},this.makeDynamicAnchor=function(q,ae){return new e.jsPlumb.DynamicAnchor({anchors:q,selector:ae,elementId:null,jsPlumbInstance:m})},this.targetEndpointDefinitions={},this.sourceEndpointDefinitions={};var an=d(function(q,ae,ee,ie,ue){for(var ve=q.target||q.srcElement,Ae=!1,$e=ie.getSelector(ae,ee),Le=0;Le<$e.length;Le++)if($e[Le]===ve){Ae=!0;break}return ue?!Ae:Ae},"selectorFilter"),Ct=d(function(q,ae,ee,ie,ue){var ve=new l(ae),Ae=ae._jsPlumb.EndpointDropHandler({jsPlumb:m,enabled:function(){return q.def.enabled},isFull:function(){var Le=m.select({target:q.id}).length;return q.def.maxConnections>0&&Le>=q.def.maxConnections},element:q.el,elementId:q.id,isSource:ie,isTarget:ue,addClass:function(Le){m.addClass(q.el,Le)},removeClass:function(Le){m.removeClass(q.el,Le)},onDrop:function(Le){var Oe=Le.endpoints[0];Oe.anchor.locked=!1},isDropAllowed:function(){return ve.isDropAllowed.apply(ve,arguments)},isRedrop:function(Le){return Le.suspendedElement!=null&&Le.suspendedEndpoint!=null&&Le.suspendedEndpoint.element===q.el},getEndpoint:function(Le){var Oe=q.def.endpoint;if(Oe==null||Oe._jsPlumb==null){var Ce=m.deriveEndpointAndAnchorSpec(Le.getType().join(" "),!0),et=Ce.endpoints?e.jsPlumb.extend(ae,{endpoint:q.def.def.endpoint||Ce.endpoints[1]}):ae;Ce.anchors&&(et=e.jsPlumb.extend(et,{anchor:q.def.def.anchor||Ce.anchors[1]})),Oe=m.addEndpoint(q.el,et),Oe._mtNew=!0}if(ae.uniqueEndpoint&&(q.def.endpoint=Oe),Oe.setDeleteOnEmpty(!0),Le.isDetachable()&&Oe.initDraggable(),Oe.anchor.positionFinder!=null){var Ve=m.getUIPosition(arguments,m.getZoom()),it=m.getOffset(q.el),pt=m.getSize(q.el),vt=Ve==null?[0,0]:Oe.anchor.positionFinder(Ve,it,pt,Oe.anchor.constructorParams);Oe.anchor.x=vt[0],Oe.anchor.y=vt[1]}return Oe},maybeCleanup:function(Le){Le._mtNew&&Le.connections.length===0?m.deleteObject({endpoint:Le}):delete Le._mtNew}}),$e=e.jsPlumb.dragEvents.drop;return ee.scope=ee.scope||ae.scope||m.Defaults.Scope,ee[$e]=n.wrap(ee[$e],Ae,!0),ee.rank=ae.rank||0,ue&&(ee[e.jsPlumb.dragEvents.over]=function(){return!0}),ae.allowLoopback===!1&&(ee.canDrop=function(Le){var Oe=Le.getDragElement()._jsPlumbRelatedElement;return Oe!==q.el}),m.initDroppable(q.el,ee,"internal"),Ae},"_makeElementDropHandler");this.makeTarget=function(q,ae,ee){var ie=e.jsPlumb.extend({_jsPlumb:this},ee);e.jsPlumb.extend(ie,ae);for(var ue=ie.maxConnections||-1,ve=function(Oe){var Ce=k(Oe),et=Ce.id,Ve=e.jsPlumb.extend({},ie.dropOptions||{}),it=ie.connectionType||"default";this.targetEndpointDefinitions[et]=this.targetEndpointDefinitions[et]||{},Un(et),Ce.el._isJsPlumbGroup&&Ve.rank==null&&(Ve.rank=-1);var pt={def:e.jsPlumb.extend({},ie),uniqueEndpoint:ie.uniqueEndpoint,maxConnections:ue,enabled:!0};ie.createEndpoint&&(pt.uniqueEndpoint=!0,pt.endpoint=m.addEndpoint(Oe,pt.def),pt.endpoint.setDeleteOnEmpty(!1)),Ce.def=pt,this.targetEndpointDefinitions[et][it]=pt,Ct(Ce,ie,Ve,ie.isSource===!0,!0),Ce.el._katavorioDrop[Ce.el._katavorioDrop.length-1].targetDef=pt}.bind(this),Ae=q.length&&q.constructor!==String?q:[q],$e=0,Le=Ae.length;$e<Le;$e++)ve(Ae[$e]);return this},this.unmakeTarget=function(q,ae){var ee=k(q);return m.destroyDroppable(ee.el,"internal"),ae||delete this.targetEndpointDefinitions[ee.id],this},this.makeSource=function(q,ae,ee){var ie=e.jsPlumb.extend({_jsPlumb:this},ee);e.jsPlumb.extend(ie,ae);var ue=ie.connectionType||"default",ve=m.deriveEndpointAndAnchorSpec(ue);ie.endpoint=ie.endpoint||ve.endpoints[0],ie.anchor=ie.anchor||ve.anchors[0];for(var Ae=ie.maxConnections||-1,$e=ie.onMaxConnections,Le=function(Ve){var it=Ve.id,pt=this.getElement(Ve.el);this.sourceEndpointDefinitions[it]=this.sourceEndpointDefinitions[it]||{},Un(it);var vt={def:e.jsPlumb.extend({},ie),uniqueEndpoint:ie.uniqueEndpoint,maxConnections:Ae,enabled:!0};ie.createEndpoint&&(vt.uniqueEndpoint=!0,vt.endpoint=m.addEndpoint(q,vt.def),vt.endpoint.setDeleteOnEmpty(!1)),this.sourceEndpointDefinitions[it][ue]=vt,Ve.def=vt;var ts=e.jsPlumb.dragEvents.stop,zs=e.jsPlumb.dragEvents.drag,En=e.jsPlumb.extend({},ie.dragOptions||{}),_i=En.drag,wa=En.stop,Tt=null,Es=!1;En.scope=En.scope||ie.scope,En[zs]=n.wrap(En[zs],function(){_i&&_i.apply(this,arguments),Es=!1}),En[ts]=n.wrap(En[ts],function(){if(wa&&wa.apply(this,arguments),this.currentlyDragging=!1,Tt._jsPlumb!=null){var Vt=ie.anchor||this.Defaults.Anchor,kt=Tt.anchor,As=Tt.connections[0],Ln=this.makeAnchor(Vt,it,this),zn=Tt.element;if(Ln.positionFinder!=null){var bn=m.getOffset(zn),vn=this.getSize(zn),Gs={left:bn.left+kt.x*vn[0],top:bn.top+kt.y*vn[1]},_s=Ln.positionFinder(Gs,bn,vn,Ln.constructorParams);Ln.x=_s[0],Ln.y=_s[1]}Tt.setAnchor(Ln,!0),Tt.repaint(),this.repaint(Tt.elementId),As!=null&&this.repaint(As.targetId)}}.bind(this));var Sa=function(Vt){if(!(Vt.which===3||Vt.button===2)){it=this.getId(this.getElement(Ve.el));var kt=this.sourceEndpointDefinitions[it][ue];if(kt.enabled){if(ie.filter){var As=n.isString(ie.filter)?an(Vt,Ve.el,ie.filter,this,ie.filterExclude):ie.filter(Vt,Ve.el);if(As===!1)return}var Ln=this.select({source:it}).length;if(kt.maxConnections>=0&&Ln>=kt.maxConnections)return $e&&$e({element:Ve.el,maxConnections:Ae},Vt),!1;var zn=e.jsPlumb.getPositionOnElement(Vt,pt,L),bn={};e.jsPlumb.extend(bn,kt.def),bn.isTemporarySource=!0,bn.anchor=[zn[0],zn[1],0,0],bn.dragOptions=En,kt.def.scope&&(bn.scope=kt.def.scope),Tt=this.addEndpoint(it,bn),Es=!0,Tt.setDeleteOnEmpty(!0),kt.uniqueEndpoint&&(kt.endpoint?Tt.finalEndpoint=kt.endpoint:(kt.endpoint=Tt,Tt.setDeleteOnEmpty(!1)));var vn=d(function(){m.off(Tt.canvas,"mouseup",vn),m.off(Ve.el,"mouseup",vn),Es&&(Es=!1,m.deleteEndpoint(Tt))},"_delTempEndpoint");m.on(Tt.canvas,"mouseup",vn),m.on(Ve.el,"mouseup",vn);var Gs={};if(kt.def.extract)for(var _s in kt.def.extract){var ki=(Vt.srcElement||Vt.target).getAttribute(_s);ki&&(Gs[kt.def.extract[_s]]=ki)}m.trigger(Tt.canvas,"mousedown",Vt,Gs),n.consume(Vt)}}}.bind(this);this.on(Ve.el,"mousedown",Sa),vt.trigger=Sa,ie.filter&&(n.isString(ie.filter)||n.isFunction(ie.filter))&&m.setDragFilter(Ve.el,ie.filter);var Hs=e.jsPlumb.extend({},ie.dropOptions||{});Ct(Ve,ie,Hs,!0,ie.isTarget===!0)}.bind(this),Oe=q.length&&q.constructor!==String?q:[q],Ce=0,et=Oe.length;Ce<et;Ce++)Le(k(Oe[Ce]));return this},this.unmakeSource=function(q,ae,ee){var ie=k(q);m.destroyDroppable(ie.el,"internal");var ue=this.sourceEndpointDefinitions[ie.id];if(ue){for(var ve in ue)if(ae==null||ae===ve){var Ae=ue[ve].trigger;Ae&&m.off(ie.el,"mousedown",Ae),ee||delete this.sourceEndpointDefinitions[ie.id][ve]}}return this},this.unmakeEverySource=function(){for(var q in this.sourceEndpointDefinitions)m.unmakeSource(q,null,!0);return this.sourceEndpointDefinitions={},this};var on=function(q,ae,ee){ae=n.isArray(ae)?ae:[ae];var ie=_e(q);ee=ee||"default";for(var ue=0;ue<ae.length;ue++){var ve=this[ae[ue]][ie];if(ve&&ve[ee])return ve[ee].def.scope||this.Defaults.Scope}}.bind(this),gn=function(q,ae,ee,ie){ee=n.isArray(ee)?ee:[ee];var ue=_e(q);ie=ie||"default";for(var ve=0;ve<ee.length;ve++){var Ae=this[ee[ve]][ue];Ae&&Ae[ie]&&(Ae[ie].def.scope=ae)}}.bind(this);this.getScope=function(q,ae){return on(q,["sourceEndpointDefinitions","targetEndpointDefinitions"])},this.getSourceScope=function(q){return on(q,"sourceEndpointDefinitions")},this.getTargetScope=function(q){return on(q,"targetEndpointDefinitions")},this.setScope=function(q,ae,ee){this.setSourceScope(q,ae,ee),this.setTargetScope(q,ae,ee)},this.setSourceScope=function(q,ae,ee){gn(q,ae,"sourceEndpointDefinitions",ee),this.setDragScope(q,ae)},this.setTargetScope=function(q,ae,ee){gn(q,ae,"targetEndpointDefinitions",ee),this.setDropScope(q,ae)},this.unmakeEveryTarget=function(){for(var q in this.targetEndpointDefinitions)m.unmakeTarget(q,!0);return this.targetEndpointDefinitions={},this};var Ee=function(q,ae,ee,ie,ue){var ve=q==="source"?this.sourceEndpointDefinitions:this.targetEndpointDefinitions,Ae,$e,Le;if(ue=ue||"default",ae.length&&!n.isString(ae)){Ae=[];for(var Oe=0,Ce=ae.length;Oe<Ce;Oe++)$e=k(ae[Oe]),ve[$e.id]&&ve[$e.id][ue]&&(Ae[Oe]=ve[$e.id][ue].enabled,Le=ie?!Ae[Oe]:ee,ve[$e.id][ue].enabled=Le,m[Le?"removeClass":"addClass"]($e.el,"jtk-"+q+"-disabled"))}else{$e=k(ae);var et=$e.id;ve[et]&&ve[et][ue]&&(Ae=ve[et][ue].enabled,Le=ie?!Ae:ee,ve[et][ue].enabled=Le,m[Le?"removeClass":"addClass"]($e.el,"jtk-"+q+"-disabled"))}return Ae}.bind(this),Ke=function(q,ae){if(q!=null){if(n.isString(q)||!q.length)return ae.apply(this,[q]);if(q.length)return ae.apply(this,[q[0]])}}.bind(this);this.toggleSourceEnabled=function(q,ae){return Ee("source",q,null,!0,ae),this.isSourceEnabled(q,ae)},this.setSourceEnabled=function(q,ae,ee){return Ee("source",q,ae,null,ee)},this.isSource=function(q,ae){return ae=ae||"default",Ke(q,function(ee){var ie=this.sourceEndpointDefinitions[k(ee).id];return ie!=null&&ie[ae]!=null}.bind(this))},this.isSourceEnabled=function(q,ae){return ae=ae||"default",Ke(q,function(ee){var ie=this.sourceEndpointDefinitions[k(ee).id];return ie&&ie[ae]&&ie[ae].enabled===!0}.bind(this))},this.toggleTargetEnabled=function(q,ae){return Ee("target",q,null,!0,ae),this.isTargetEnabled(q,ae)},this.isTarget=function(q,ae){return ae=ae||"default",Ke(q,function(ee){var ie=this.targetEndpointDefinitions[k(ee).id];return ie!=null&&ie[ae]!=null}.bind(this))},this.isTargetEnabled=function(q,ae){return ae=ae||"default",Ke(q,function(ee){var ie=this.targetEndpointDefinitions[k(ee).id];return ie&&ie[ae]&&ie[ae].enabled===!0}.bind(this))},this.setTargetEnabled=function(q,ae,ee){return Ee("target",q,ae,null,ee)},this.ready=function(q){m.bind("ready",q)};var Qe=d(function(q,ae){if(typeof q=="object"&&q.length)for(var ee=0,ie=q.length;ee<ie;ee++)ae(q[ee]);else ae(q);return m},"_elEach");this.repaint=function(q,ae,ee){return Qe(q,function(ie){z(ie,ae,ee)})},this.revalidate=function(q,ae,ee){var ie=ee?q:m.getId(q);m.updateOffset({elId:ie,recalc:!0,timestamp:ae});var ue=m.getDragManager();return ue&&ue.updateOffsets(ie),z(q,null,ae)},this.repaintEverything=function(){var q=jsPlumbUtil.uuid(),ae;for(ae in M)m.updateOffset({elId:ae,recalc:!0,timestamp:q});for(ae in M)z(ae,null,q);return this},this.removeAllEndpoints=function(q,ae,ee){ee=ee||[];var ie=d(function(ue){var ve=k(ue),Ae=M[ve.id],$e,Le;if(Ae)for(ee.push(ve),$e=0,Le=Ae.length;$e<Le;$e++)m.deleteEndpoint(Ae[$e],!1);if(delete M[ve.id],ae&&ve.el&&ve.el.nodeType!==3&&ve.el.nodeType!==8)for($e=0,Le=ve.el.childNodes.length;$e<Le;$e++)ie(ve.el.childNodes[$e])},"_one");return ie(q),this};var Ye=d(function(q,ae){m.removeAllEndpoints(q.id,!0,ae);for(var ee=m.getDragManager(),ie=d(function(ve){ee&&ee.elementRemoved(ve.id),m.router.elementRemoved(ve.id),m.isSource(ve.el)&&m.unmakeSource(ve.el),m.isTarget(ve.el)&&m.unmakeTarget(ve.el),m.destroyDraggable(ve.el),m.destroyDroppable(ve.el),delete m.floatingConnections[ve.id],delete W[ve.id],delete K[ve.id],ve.el&&(m.removeElement(ve.el),ve.el._jsPlumb=null)},"_one"),ue=1;ue<ae.length;ue++)ie(ae[ue]);ie(q)},"_doRemove");this.remove=function(q,ae){var ee=k(q),ie=[];return ee.text&&ee.el.parentNode?ee.el.parentNode.removeChild(ee.el):ee.id&&m.batch(function(){Ye(ee,ie)},ae===!0),m},this.empty=function(q,ae){var ee=[],ie=d(function(ue,ve){var Ae=k(ue);if(Ae.text)Ae.el.parentNode.removeChild(Ae.el);else if(Ae.el){for(;Ae.el.childNodes.length>0;)ie(Ae.el.childNodes[0]);ve||Ye(Ae,ee)}},"_one");return m.batch(function(){ie(q,!0)},ae===!1),m},this.reset=function(q){m.silently(function(){sn=!1,m.removeAllGroups(),m.removeGroupManager(),m.deleteEveryEndpoint(),q||m.unbind(),this.targetEndpointDefinitions={},this.sourceEndpointDefinitions={},U.length=0,this.doReset&&this.doReset()}.bind(this))},this.destroy=function(){this.reset(),v=null,T=null};var tt=d(function(q){q.canvas&&q.canvas.parentNode&&q.canvas.parentNode.removeChild(q.canvas),q.cleanup(),q.destroy()},"_clearObject");this.clear=function(){m.select().each(tt),m.selectEndpoints().each(tt),M={},V={}},this.setDefaultScope=function(q){return E=q,m},this.deriveEndpointAndAnchorSpec=function(q,ae){for(var ee=((ae?"":"default ")+q).split(/[\s]/),ie=null,ue=null,ve=null,Ae=null,$e=0;$e<ee.length;$e++){var Le=m.getType(ee[$e],"connection");Le&&(Le.endpoints&&(ie=Le.endpoints),Le.endpoint&&(ue=Le.endpoint),Le.anchors&&(Ae=Le.anchors),Le.anchor&&(ve=Le.anchor))}return{endpoints:ie||[ue,ue],anchors:Ae||[ve,ve]}},this.setId=function(q,ae,ee){var ie;n.isString(q)?ie=q:(q=this.getElement(q),ie=this.getId(q));var ue=this.getConnections({source:ie,scope:"*"},!0),ve=this.getConnections({target:ie,scope:"*"},!0);ae=""+ae,ee?q=this.getElement(ae):(q=this.getElement(ie),this.setAttribute(q,"id",ae)),M[ae]=M[ie]||[];for(var Ae=0,$e=M[ae].length;Ae<$e;Ae++)M[ae][Ae].setElementId(ae),M[ae][Ae].setReferenceElement(q);delete M[ie],this.sourceEndpointDefinitions[ae]=this.sourceEndpointDefinitions[ie],delete this.sourceEndpointDefinitions[ie],this.targetEndpointDefinitions[ae]=this.targetEndpointDefinitions[ie],delete this.targetEndpointDefinitions[ie],this.router.changeId(ie,ae);var Le=this.getDragManager();Le&&Le.changeId(ie,ae),W[ae]=W[ie],delete W[ie];var Oe=d(function(Ce,et,Ve){for(var it=0,pt=Ce.length;it<pt;it++)Ce[it].endpoints[et].setElementId(ae),Ce[it].endpoints[et].setReferenceElement(q),Ce[it][Ve+"Id"]=ae,Ce[it][Ve]=q},"_conns");Oe(ue,0,"source"),Oe(ve,1,"target"),this.repaint(ae)},this.setDebugLog=function(q){P=q},this.setSuspendDrawing=function(q,ae){var ee=G;return G=q,q?J=new Date().getTime():J=null,ae&&this.repaintEverything(),ee},this.isSuspendDrawing=function(){return G},this.getSuspendedAt=function(){return J},this.batch=function(q,ae){var ee=this.isSuspendDrawing();ee||this.setSuspendDrawing(!0);try{q()}catch(ie){n.log("Function run while suspended failed",ie)}ee||this.setSuspendDrawing(!1,!ae)},this.doWhileSuspended=this.batch,this.getCachedData=Ie,this.show=function(q,ae){return ye(q,"block",ae),m},this.toggleVisible=ke,this.addListener=this.bind;var ut=[];this.registerFloatingConnection=function(q,ae,ee){ut[q.id]=ae,n.addToList(M,q.id,ee)},this.getFloatingConnectionFor=function(q){return ut[q]},this.listManager=new e.jsPlumbListManager(this,this.Defaults.ListStyle)};n.extend(e.jsPlumbInstance,n.EventGenerator,{setAttribute:function(S,m,D){this.setAttribute(S,m,D)},getAttribute:function(S,m){return this.getAttribute(e.jsPlumb.getElement(S),m)},convertToFullOverlaySpec:function(S){return n.isString(S)&&(S=[S,{}]),S[1].id=S[1].id||n.uuid(),S},registerConnectionType:function(S,m){if(this._connectionTypes[S]=e.jsPlumb.extend({},m),m.overlays){for(var D={},A=0;A<m.overlays.length;A++){var j=this.convertToFullOverlaySpec(m.overlays[A]);D[j[1].id]=j}this._connectionTypes[S].overlays=D}},registerConnectionTypes:function(S){for(var m in S)this.registerConnectionType(m,S[m])},registerEndpointType:function(S,m){if(this._endpointTypes[S]=e.jsPlumb.extend({},m),m.overlays){for(var D={},A=0;A<m.overlays.length;A++){var j=this.convertToFullOverlaySpec(m.overlays[A]);D[j[1].id]=j}this._endpointTypes[S].overlays=D}},registerEndpointTypes:function(S){for(var m in S)this.registerEndpointType(m,S[m])},getType:function(S,m){return m==="connection"?this._connectionTypes[S]:this._endpointTypes[S]},setIdChanged:function(S,m){this.setId(S,m,!0)},setParent:function(S,m){var D=this.getElement(S),A=this.getId(D),j=this.getElement(m),L=this.getId(j),k=this.getDragManager();D.parentNode.removeChild(D),j.appendChild(D),k&&k.setParent(D,A,j,L)},extend:function(S,m,D){var A;if(D)for(A=0;A<D.length;A++)S[D[A]]=m[D[A]];else for(A in m)S[A]=m[A];return S},floatingConnections:{},getFloatingAnchorIndex:function(S){return S.endpoints[0].isFloating()?0:S.endpoints[1].isFloating()?1:-1},proxyConnection:function(S,m,D,A,j,L){var k,I=S.endpoints[m].elementId,v=S.endpoints[m];S.proxies=S.proxies||[],S.proxies[m]?k=S.proxies[m].ep:k=this.addEndpoint(D,{endpoint:j(S,m),anchor:L(S,m),parameters:{isProxyEndpoint:!0}}),k.setDeleteOnEmpty(!0),S.proxies[m]={ep:k,originalEp:v},m===0?this.router.sourceOrTargetChanged(I,A,S,D,0):this.router.sourceOrTargetChanged(I,A,S,D,1),v.detachFromConnection(S,null,!0),k.connections=[S],S.endpoints[m]=k,v.setVisible(!1),S.setVisible(!0),this.revalidate(D)},unproxyConnection:function(S,m,D){if(!(S._jsPlumb==null||S.proxies==null||S.proxies[m]==null)){var A=S.proxies[m].originalEp.element,j=S.proxies[m].originalEp.elementId;S.endpoints[m]=S.proxies[m].originalEp,m===0?this.router.sourceOrTargetChanged(D,j,S,A,0):this.router.sourceOrTargetChanged(D,j,S,A,1),S.proxies[m].ep.detachFromConnection(S,null),S.proxies[m].originalEp.addConnection(S),S.isVisible()&&S.proxies[m].originalEp.setVisible(!0),delete S.proxies[m]}}});var w=new y;e.jsPlumb=w,w.getInstance=function(S,m){var D=new y(S);if(m)for(var A in m)D[A]=m[A];return D.init(),D},w.each=function(S,m){if(S!=null)if(typeof S=="string")m(w.getElement(S));else if(S.length!=null)for(var D=0;D<S.length;D++)m(w.getElement(S[D]));else m(S)},t.jsPlumb=w}.call(typeof window<"u"?window:ht),function(){var e=this,n=e.jsPlumb,s=e.jsPlumbUtil,a="__label",i=d(function(o,c){var l={cssClass:c.cssClass,labelStyle:o.labelStyle,id:a,component:o,_jsPlumb:o._jsPlumb.instance},u=n.extend(l,c);return new n.Overlays[o._jsPlumb.instance.getRenderMode()].Label(u)},"_makeLabelOverlay"),r=d(function(o,c){var l=null;if(s.isArray(c)){var u=c[0],p=n.extend({component:o,_jsPlumb:o._jsPlumb.instance},c[1]);c.length===3&&n.extend(p,c[2]),l=new n.Overlays[o._jsPlumb.instance.getRenderMode()][u](p)}else c.constructor===String?l=new n.Overlays[o._jsPlumb.instance.getRenderMode()][c]({component:o,_jsPlumb:o._jsPlumb.instance}):l=c;return l.id=l.id||s.uuid(),o.cacheTypeItem("overlay",l,l.id),o._jsPlumb.overlays[l.id]=l,l},"_processOverlay");n.OverlayCapableJsPlumbUIComponent=function(o){e.jsPlumbUIComponent.apply(this,arguments),this._jsPlumb.overlays={},this._jsPlumb.overlayPositions={},o.label&&(this.getDefaultType().overlays[a]=["Label",{label:o.label,location:o.labelLocation||this.defaultLabelLocation||.5,labelStyle:o.labelStyle||this._jsPlumb.instance.Defaults.LabelStyle,id:a}]),this.setListenerComponent=function(c){if(this._jsPlumb)for(var l in this._jsPlumb.overlays)this._jsPlumb.overlays[l].setListenerComponent(c)}},n.OverlayCapableJsPlumbUIComponent.applyType=function(o,c){if(c.overlays){var l={},u;for(u in c.overlays){var p=o._jsPlumb.overlays[c.overlays[u][1].id];if(p)p.updateFrom(c.overlays[u][1]),l[c.overlays[u][1].id]=!0,p.reattach(o._jsPlumb.instance,o);else{var g=o.getCachedTypeItem("overlay",c.overlays[u][1].id);g!=null?(g.reattach(o._jsPlumb.instance,o),g.setVisible(!0),g.updateFrom(c.overlays[u][1]),o._jsPlumb.overlays[g.id]=g):g=o.addOverlay(c.overlays[u],!0),l[g.id]=!0}}for(u in o._jsPlumb.overlays)l[o._jsPlumb.overlays[u].id]==null&&o.removeOverlay(o._jsPlumb.overlays[u].id,!0)}},s.extend(n.OverlayCapableJsPlumbUIComponent,e.jsPlumbUIComponent,{setHover:function(o,c){if(this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged())for(var l in this._jsPlumb.overlays)this._jsPlumb.overlays[l][o?"addClass":"removeClass"](this._jsPlumb.instance.hoverClass)},addOverlay:function(o,c){var l=r(this,o);if(this.getData&&l.type==="Label"&&s.isArray(o)){var u=this.getData(),p=o[1];if(u){var g=p.labelLocationAttribute||"labelLocation",y=u?u[g]:null;y&&(l.loc=y)}}return c||this.repaint(),l},getOverlay:function(o){return this._jsPlumb.overlays[o]},getOverlays:function(){return this._jsPlumb.overlays},hideOverlay:function(o){var c=this.getOverlay(o);c&&c.hide()},hideOverlays:function(){for(var o in this._jsPlumb.overlays)this._jsPlumb.overlays[o].hide()},showOverlay:function(o){var c=this.getOverlay(o);c&&c.show()},showOverlays:function(){for(var o in this._jsPlumb.overlays)this._jsPlumb.overlays[o].show()},removeAllOverlays:function(o){for(var c in this._jsPlumb.overlays)this._jsPlumb.overlays[c].cleanup&&this._jsPlumb.overlays[c].cleanup();this._jsPlumb.overlays={},this._jsPlumb.overlayPositions=null,this._jsPlumb.overlayPlacements={},o||this.repaint()},removeOverlay:function(o,c){var l=this._jsPlumb.overlays[o];l&&(l.setVisible(!1),!c&&l.cleanup&&l.cleanup(),delete this._jsPlumb.overlays[o],this._jsPlumb.overlayPositions&&delete this._jsPlumb.overlayPositions[o],this._jsPlumb.overlayPlacements&&delete this._jsPlumb.overlayPlacements[o])},removeOverlays:function(){for(var o=0,c=arguments.length;o<c;o++)this.removeOverlay(arguments[o])},moveParent:function(o){if(this.bgCanvas&&(this.bgCanvas.parentNode.removeChild(this.bgCanvas),o.appendChild(this.bgCanvas)),this.canvas&&this.canvas.parentNode){this.canvas.parentNode.removeChild(this.canvas),o.appendChild(this.canvas);for(var c in this._jsPlumb.overlays)if(this._jsPlumb.overlays[c].isAppendedAtTopLevel){var l=this._jsPlumb.overlays[c].getElement();l.parentNode.removeChild(l),o.appendChild(l)}}},getLabel:function(){var o=this.getOverlay(a);return o!=null?o.getLabel():null},getLabelOverlay:function(){return this.getOverlay(a)},setLabel:function(o){var c=this.getOverlay(a);if(c)o.constructor===String||o.constructor===Function?c.setLabel(o):(o.label&&c.setLabel(o.label),o.location&&c.setLocation(o.location));else{var l=o.constructor===String||o.constructor===Function?{label:o}:o;c=i(this,l),this._jsPlumb.overlays[a]=c}this._jsPlumb.instance.isSuspendDrawing()||this.repaint()},cleanup:function(o){for(var c in this._jsPlumb.overlays)this._jsPlumb.overlays[c].cleanup(o),this._jsPlumb.overlays[c].destroy(o);o&&(this._jsPlumb.overlays={},this._jsPlumb.overlayPositions=null)},setVisible:function(o){this[o?"showOverlays":"hideOverlays"]()},setAbsoluteOverlayPosition:function(o,c){this._jsPlumb.overlayPositions[o.id]=c},getAbsoluteOverlayPosition:function(o){return this._jsPlumb.overlayPositions?this._jsPlumb.overlayPositions[o.id]:null},_clazzManip:function(o,c,l){if(!l)for(var u in this._jsPlumb.overlays)this._jsPlumb.overlays[u][o+"Class"](c)},addClass:function(o,c){this._clazzManip("add",o,c)},removeClass:function(o,c){this._clazzManip("remove",o,c)}})}.call(typeof window<"u"?window:ht),function(){var e=this,n=e.jsPlumb,s=e.jsPlumbUtil,a=d(function(l,u,p){var g=!1;return{drag:function(){if(g)return g=!1,!0;if(u.element){var y=p.getUIPosition(arguments,p.getZoom());y!=null&&p.setPosition(u.element,y),p.repaint(u.element,y),l.paint({anchorPoint:l.anchor.getCurrentLocation({element:l})})}},stopDrag:function(){g=!0}}},"_makeConnectionDragHandler"),i=d(function(l,u,p,g){var y=u.createElement("div",{position:"absolute"});u.appendElement(y);var w=u.getId(y);u.setPosition(y,p),y.style.width=g[0]+"px",y.style.height=g[1]+"px",u.manage(w,y,!0),l.id=w,l.element=y},"_makeDraggablePlaceholder"),r=d(function(l,u,p,g,y,w,S,m){var D=new n.FloatingAnchor({reference:u,referenceCanvas:g,jsPlumbInstance:w});return S({paintStyle:l,endpoint:p,anchor:D,source:y,scope:m})},"_makeFloatingEndpoint"),o=["connectorStyle","connectorHoverStyle","connectorOverlays","connector","connectionType","connectorClass","connectorHoverClass"],c=d(function(l,u){var p=0;if(u!=null){for(var g=0;g<l.connections.length;g++)if(l.connections[g].sourceId===u||l.connections[g].targetId===u){p=g;break}}return l.connections[p]},"findConnectionToUseForDynamicAnchor");n.Endpoint=function(l){var u=l._jsPlumb,p=l.newConnection,g=l.newEndpoint;this.idPrefix="_jsplumb_e_",this.defaultLabelLocation=[.5,.5],this.defaultOverlayKeys=["Overlays","EndpointOverlays"],n.OverlayCapableJsPlumbUIComponent.apply(this,arguments),this.appendToDefaultType({connectionType:l.connectionType,maxConnections:l.maxConnections==null?this._jsPlumb.instance.Defaults.MaxConnections:l.maxConnections,paintStyle:l.endpointStyle||l.paintStyle||l.style||this._jsPlumb.instance.Defaults.EndpointStyle||n.Defaults.EndpointStyle,hoverPaintStyle:l.endpointHoverStyle||l.hoverPaintStyle||this._jsPlumb.instance.Defaults.EndpointHoverStyle||n.Defaults.EndpointHoverStyle,connectorStyle:l.connectorStyle,connectorHoverStyle:l.connectorHoverStyle,connectorClass:l.connectorClass,connectorHoverClass:l.connectorHoverClass,connectorOverlays:l.connectorOverlays,connector:l.connector,connectorTooltip:l.connectorTooltip}),this._jsPlumb.enabled=l.enabled!==!1,this._jsPlumb.visible=!0,this.element=n.getElement(l.source),this._jsPlumb.uuid=l.uuid,this._jsPlumb.floatingEndpoint=null,this._jsPlumb.uuid&&(l.endpointsByUUID[this._jsPlumb.uuid]=this),this.elementId=l.elementId,this.dragProxy=l.dragProxy,this._jsPlumb.connectionCost=l.connectionCost,this._jsPlumb.connectionsDirected=l.connectionsDirected,this._jsPlumb.currentAnchorClass="",this._jsPlumb.events={};var y=l.deleteOnEmpty===!0;this.setDeleteOnEmpty=function(k){y=k};var w=function(){var k=u.endpointAnchorClassPrefix+"-"+this._jsPlumb.currentAnchorClass;this._jsPlumb.currentAnchorClass=this.anchor.getCssClass();var I=u.endpointAnchorClassPrefix+(this._jsPlumb.currentAnchorClass?"-"+this._jsPlumb.currentAnchorClass:"");this.removeClass(k),this.addClass(I),n.updateClasses(this.element,I,k)}.bind(this);this.prepareAnchor=function(k){var I=this._jsPlumb.instance.makeAnchor(k,this.elementId,u);return I.bind("anchorChanged",function(v){this.fire("anchorChanged",{endpoint:this,anchor:v}),w()}.bind(this)),I},this.setPreparedAnchor=function(k,I){return this._jsPlumb.instance.continuousAnchorFactory.clear(this.elementId),this.anchor=k,w(),I||this._jsPlumb.instance.repaint(this.elementId),this},this.setAnchor=function(k,I){var v=this.prepareAnchor(k);return this.setPreparedAnchor(v,I),this};var S=function(k){if(this.connections.length>0)for(var I=0;I<this.connections.length;I++)this.connections[I].setHover(k,!1);else this.setHover(k)}.bind(this);this.bind("mouseover",function(){S(!0)}),this.bind("mouseout",function(){S(!1)}),l._transient||this._jsPlumb.instance.router.addEndpoint(this,this.elementId),this.prepareEndpoint=function(k,I){var v=d(function(F,U){var M=u.getRenderMode();if(n.Endpoints[M][F])return new n.Endpoints[M][F](U);if(!u.Defaults.DoNotThrowErrors)throw{msg:"jsPlumb: unknown endpoint type '"+F+"'"}},"_e"),T={_jsPlumb:this._jsPlumb.instance,cssClass:l.cssClass,container:l.container,tooltip:l.tooltip,connectorTooltip:l.connectorTooltip,endpoint:this},P;return s.isString(k)?P=v(k,T):s.isArray(k)?(T=s.merge(k[1],T),P=v(k[0],T)):P=k.clone(),P.clone=function(){if(s.isString(k))return v(k,T);if(s.isArray(k))return T=s.merge(k[1],T),v(k[0],T)}.bind(this),P.typeId=I,P},this.setEndpoint=function(k,I){var v=this.prepareEndpoint(k);this.setPreparedEndpoint(v,!0)},this.setPreparedEndpoint=function(k,I){this.endpoint!=null&&(this.endpoint.cleanup(),this.endpoint.destroy()),this.endpoint=k,this.type=this.endpoint.type,this.canvas=this.endpoint.canvas},n.extend(this,l,o),this.isSource=l.isSource||!1,this.isTemporarySource=l.isTemporarySource||!1,this.isTarget=l.isTarget||!1,this.connections=l.connections||[],this.connectorPointerEvents=l["connector-pointer-events"],this.scope=l.scope||u.getDefaultScope(),this.timestamp=null,this.reattachConnections=l.reattach||u.Defaults.ReattachConnections,this.connectionsDetachable=u.Defaults.ConnectionsDetachable,(l.connectionsDetachable===!1||l.detachable===!1)&&(this.connectionsDetachable=!1),this.dragAllowedWhenFull=l.dragAllowedWhenFull!==!1,l.onMaxConnections&&this.bind("maxConnections",l.onMaxConnections),this.addConnection=function(k){this.connections.push(k),this[(this.connections.length>0?"add":"remove")+"Class"](u.endpointConnectedClass),this[(this.isFull()?"add":"remove")+"Class"](u.endpointFullClass)},this.detachFromConnection=function(k,I,v){I=I??this.connections.indexOf(k),I>=0&&(this.connections.splice(I,1),this[(this.connections.length>0?"add":"remove")+"Class"](u.endpointConnectedClass),this[(this.isFull()?"add":"remove")+"Class"](u.endpointFullClass)),!v&&y&&this.connections.length===0&&u.deleteObject({endpoint:this,fireEvent:!1,deleteAttachedObjects:v!==!0})},this.deleteEveryConnection=function(k){for(var I=this.connections.length,v=0;v<I;v++)u.deleteConnection(this.connections[0],k)},this.detachFrom=function(k,I,v){for(var T=[],P=0;P<this.connections.length;P++)(this.connections[P].endpoints[1]===k||this.connections[P].endpoints[0]===k)&&T.push(this.connections[P]);for(var F=0,U=T.length;F<U;F++)u.deleteConnection(T[0]);return this},this.getElement=function(){return this.element},this.setElement=function(k){var I=this._jsPlumb.instance.getId(k),v=this.elementId;return s.removeWithFunction(l.endpointsByElement[this.elementId],function(T){return T.id===this.id}.bind(this)),this.element=n.getElement(k),this.elementId=u.getId(this.element),u.router.rehomeEndpoint(this,v,this.element),u.dragManager.endpointAdded(this.element),s.addToList(l.endpointsByElement,I,this),this},this.makeInPlaceCopy=function(){var k=this.anchor.getCurrentLocation({element:this}),I=this.anchor.getOrientation(this),v=this.anchor.getCssClass(),T={bind:function(){},compute:function(){return[k[0],k[1]]},getCurrentLocation:function(){return[k[0],k[1]]},getOrientation:function(){return I},getCssClass:function(){return v}};return g({dropOptions:l.dropOptions,anchor:T,source:this.element,paintStyle:this.getPaintStyle(),endpoint:l.hideOnDrag?"Blank":this.endpoint,_transient:!0,scope:this.scope,reference:this})},this.connectorSelector=function(){return this.connections[0]},this.setStyle=this.setPaintStyle,this.paint=function(k){k=k||{};var I=k.timestamp,v=k.recalc!==!1;if(!I||this.timestamp!==I){var T=u.updateOffset({elId:this.elementId,timestamp:I}),P=k.offset?k.offset.o:T.o;if(P!=null){var F=k.anchorPoint,U=k.connectorPaintStyle;if(F==null){var M=k.dimensions||T.s,V={xy:[P.left,P.top],wh:M,element:this,timestamp:I};if(v&&this.anchor.isDynamic&&this.connections.length>0){var W=c(this,k.elementWithPrecedence),K=W.endpoints[0]===this?1:0,R=K===0?W.sourceId:W.targetId,X=u.getCachedData(R),Q=X.o,G=X.s;V.index=K===0?1:0,V.connection=W,V.txy=[Q.left,Q.top],V.twh=G,V.tElement=W.endpoints[K],V.tRotation=u.getRotation(R)}else this.connections.length>0&&(V.connection=this.connections[0]);V.rotation=u.getRotation(this.elementId),F=this.anchor.compute(V)}this.endpoint.compute(F,this.anchor.getOrientation(this),this._jsPlumb.paintStyleInUse,U||this.paintStyleInUse),this.endpoint.paint(this._jsPlumb.paintStyleInUse,this.anchor),this.timestamp=I;for(var J in this._jsPlumb.overlays)if(this._jsPlumb.overlays.hasOwnProperty(J)){var E=this._jsPlumb.overlays[J];E.isVisible()&&(this._jsPlumb.overlayPlacements[J]=E.draw(this.endpoint,this._jsPlumb.paintStyleInUse),E.paint(this._jsPlumb.overlayPlacements[J]))}}}},this.getTypeDescriptor=function(){return"endpoint"},this.isVisible=function(){return this._jsPlumb.visible},this.repaint=this.paint;var m=!1;this.initDraggable=function(){if(!m&&n.isDragSupported(this.element)){var k={id:null,element:null},I=null,v=!1,T=null,P=a(this,k,u),F=l.dragOptions||{},U={},M=n.dragEvents.start,V=n.dragEvents.stop,W=n.dragEvents.drag,K=n.dragEvents.beforeStart,R,X=d(function(J){R=J.e.payload||{}},"beforeStart"),Q=function(J){I=this.connectorSelector();var E=!0;this.isEnabled()||(E=!1),I==null&&!this.isSource&&!this.isTemporarySource&&(E=!1),this.isSource&&this.isFull()&&!(I!=null&&this.dragAllowedWhenFull)&&(E=!1),I!=null&&!I.isDetachable(this)&&(this.isFull()?E=!1:I=null);var O=u.checkCondition(I==null?"beforeDrag":"beforeStartDetach",{endpoint:this,source:this.element,sourceId:this.elementId,connection:I});if(O===!1?E=!1:typeof O=="object"?n.extend(O,R||{}):O=R||{},E===!1)return u.stopDrag&&u.stopDrag(this.canvas),P.stopDrag(),!1;for(var C=0;C<this.connections.length;C++)this.connections[C].setHover(!1);this.addClass("endpointDrag"),u.setConnectionBeingDragged(!0),I&&!this.isFull()&&this.isSource&&(I=null),u.updateOffset({elId:this.elementId});var B=this._jsPlumb.instance.getOffset(this.canvas),z=this.canvas,Y=this._jsPlumb.instance.getSize(this.canvas);i(k,u,B,Y),u.setAttributes(this.canvas,{dragId:k.id,elId:this.elementId});var se=this.dragProxy||this.endpoint;if(this.dragProxy==null&&this.connectionType!=null){var le=this._jsPlumb.instance.deriveEndpointAndAnchorSpec(this.connectionType);le.endpoints[1]&&(se=le.endpoints[1])}var te=this._jsPlumb.instance.makeAnchor("Center");te.isFloating=!0,this._jsPlumb.floatingEndpoint=r(this.getPaintStyle(),te,se,this.canvas,k.element,u,g,this.scope);var he=this._jsPlumb.floatingEndpoint.anchor;if(I==null)this.setHover(!1,!1),I=p({sourceEndpoint:this,targetEndpoint:this._jsPlumb.floatingEndpoint,source:this.element,target:k.element,anchors:[this.anchor,this._jsPlumb.floatingEndpoint.anchor],paintStyle:l.connectorStyle,hoverPaintStyle:l.connectorHoverStyle,connector:l.connector,overlays:l.connectorOverlays,type:this.connectionType,cssClass:this.connectorClass,hoverClass:this.connectorHoverClass,scope:l.scope,data:O}),I.pending=!0,I.addClass(u.draggingClass),this._jsPlumb.floatingEndpoint.addClass(u.draggingClass),this._jsPlumb.floatingEndpoint.anchor=he,u.fire("connectionDrag",I),u.router.newConnection(I);else{v=!0,I.setHover(!1);var fe=I.endpoints[0].id===this.id?0:1;this.detachFromConnection(I,null,!0);var be=u.getDragScope(z);u.setAttribute(this.canvas,"originalScope",be),u.fire("connectionDrag",I),fe===0?(T=[I.source,I.sourceId,z,be],u.router.sourceOrTargetChanged(I.endpoints[fe].elementId,k.id,I,k.element,0)):(T=[I.target,I.targetId,z,be],u.router.sourceOrTargetChanged(I.endpoints[fe].elementId,k.id,I,k.element,1)),I.suspendedEndpoint=I.endpoints[fe],I.suspendedElement=I.endpoints[fe].getElement(),I.suspendedElementId=I.endpoints[fe].elementId,I.suspendedElementType=fe===0?"source":"target",I.suspendedEndpoint.setHover(!1),this._jsPlumb.floatingEndpoint.referenceEndpoint=I.suspendedEndpoint,I.endpoints[fe]=this._jsPlumb.floatingEndpoint,I.addClass(u.draggingClass),this._jsPlumb.floatingEndpoint.addClass(u.draggingClass)}u.registerFloatingConnection(k,I,this._jsPlumb.floatingEndpoint),u.currentlyDragging=!0}.bind(this),G=function(){if(u.setConnectionBeingDragged(!1),I&&I.endpoints!=null){var J=u.getDropEvent(arguments),E=u.getFloatingAnchorIndex(I);if(I.endpoints[E===0?1:0].anchor.locked=!1,I.removeClass(u.draggingClass),this._jsPlumb&&(I.deleteConnectionNow||I.endpoints[E]===this._jsPlumb.floatingEndpoint)&&v&&I.suspendedEndpoint){E===0?(I.floatingElement=I.source,I.floatingId=I.sourceId,I.floatingEndpoint=I.endpoints[0],I.floatingIndex=0,I.source=T[0],I.sourceId=T[1]):(I.floatingElement=I.target,I.floatingId=I.targetId,I.floatingEndpoint=I.endpoints[1],I.floatingIndex=1,I.target=T[0],I.targetId=T[1]);var O=this._jsPlumb.floatingEndpoint;u.setDragScope(T[2],T[3]),I.endpoints[E]=I.suspendedEndpoint,I.isReattach()||I._forceReattach||I._forceDetach||!u.deleteConnection(I,{originalEvent:J})?(I.setHover(!1),I._forceDetach=null,I._forceReattach=null,this._jsPlumb.floatingEndpoint.detachFromConnection(I),I.suspendedEndpoint.addConnection(I),E===1?u.router.sourceOrTargetChanged(I.floatingId,I.targetId,I,I.target,E):u.router.sourceOrTargetChanged(I.floatingId,I.sourceId,I,I.source,E),u.repaint(T[1])):u.deleteObject({endpoint:O})}this.deleteAfterDragStop?u.deleteObject({endpoint:this}):this._jsPlumb&&this.paint({recalc:!1}),u.fire("connectionDragStop",I,J),I.pending&&u.fire("connectionAborted",I,J),u.currentlyDragging=!1,I.suspendedElement=null,I.suspendedEndpoint=null,I=null}k&&k.element&&u.remove(k.element,!1,!1),this._jsPlumb&&(this.canvas.style.visibility="visible",this.anchor.locked=!1,this._jsPlumb.floatingEndpoint=null)}.bind(this);F=n.extend(U,F),F.scope=this.scope||F.scope,F[K]=s.wrap(F[K],X,!1),F[M]=s.wrap(F[M],Q,!1),F[W]=s.wrap(F[W],P.drag),F[V]=s.wrap(F[V],G),F.multipleDrop=!1,F.canDrag=function(){return this.isSource||this.isTemporarySource||this.connections.length>0&&this.connectionsDetachable!==!1}.bind(this),u.initDraggable(this.canvas,F,"internal"),this.canvas._jsPlumbRelatedElement=this.element,m=!0}};var D=l.endpoint||this._jsPlumb.instance.Defaults.Endpoint||n.Defaults.Endpoint;this.setEndpoint(D,!0);var A=l.anchor?l.anchor:l.anchors?l.anchors:u.Defaults.Anchor||"Top";this.setAnchor(A,!0);var j=["default",l.type||""].join(" ");this.addType(j,l.data,!0),this.canvas=this.endpoint.canvas,this.canvas._jsPlumb=this,this.initDraggable();var L=function(k,I,v,T){if(n.isDropSupported(this.element)){var P=l.dropOptions||u.Defaults.DropOptions||n.Defaults.DropOptions;P=n.extend({},P),P.scope=P.scope||this.scope;var F=n.dragEvents.drop,U=n.dragEvents.over,M=n.dragEvents.out,V=this,W=u.EndpointDropHandler({getEndpoint:function(){return V},jsPlumb:u,enabled:function(){return v!=null?v.isEnabled():!0},isFull:function(){return v.isFull()},element:this.element,elementId:this.elementId,isSource:this.isSource,isTarget:this.isTarget,addClass:function(K){V.addClass(K)},removeClass:function(K){V.removeClass(K)},isDropAllowed:function(){return V.isDropAllowed.apply(V,arguments)},reference:T,isRedrop:function(K,R){return K.suspendedEndpoint&&R.reference&&K.suspendedEndpoint.id===R.reference.id}});P[F]=s.wrap(P[F],W,!0),P[U]=s.wrap(P[U],function(){var K=n.getDragObject(arguments),R=u.getAttribute(n.getElement(K),"dragId"),X=u.getFloatingConnectionFor(R);if(X!=null){var Q=u.getFloatingAnchorIndex(X),G=this.isTarget&&Q!==0||X.suspendedEndpoint&&this.referenceEndpoint&&this.referenceEndpoint.id===X.suspendedEndpoint.id;if(G){var J=u.checkCondition("checkDropAllowed",{sourceEndpoint:X.endpoints[Q],targetEndpoint:this,connection:X});this[(J?"add":"remove")+"Class"](u.endpointDropAllowedClass),this[(J?"remove":"add")+"Class"](u.endpointDropForbiddenClass),X.endpoints[Q].anchor.over(this.anchor,this)}}}.bind(this)),P[M]=s.wrap(P[M],function(){var K=n.getDragObject(arguments),R=K==null?null:u.getAttribute(n.getElement(K),"dragId"),X=R?u.getFloatingConnectionFor(R):null;if(X!=null){var Q=u.getFloatingAnchorIndex(X),G=this.isTarget&&Q!==0||X.suspendedEndpoint&&this.referenceEndpoint&&this.referenceEndpoint.id===X.suspendedEndpoint.id;G&&(this.removeClass(u.endpointDropAllowedClass),this.removeClass(u.endpointDropForbiddenClass),X.endpoints[Q].anchor.out())}}.bind(this)),u.initDroppable(k,P,"internal",I)}}.bind(this);return this.anchor.isFloating||L(this.canvas,!(l._transient||this.anchor.isFloating),this,l.reference),this},s.extend(n.Endpoint,n.OverlayCapableJsPlumbUIComponent,{setVisible:function(l,u,p){if(this._jsPlumb.visible=l,this.canvas&&(this.canvas.style.display=l?"block":"none"),this[l?"showOverlays":"hideOverlays"](),!u){for(var g=0;g<this.connections.length;g++)if(this.connections[g].setVisible(l),!p){var y=this===this.connections[g].endpoints[0]?1:0;this.connections[g].endpoints[y].connections.length===1&&this.connections[g].endpoints[y].setVisible(l,!0,!0)}}},getAttachedElements:function(){return this.connections},applyType:function(l,u){this.setPaintStyle(l.endpointStyle||l.paintStyle,u),this.setHoverPaintStyle(l.endpointHoverStyle||l.hoverPaintStyle,u),l.maxConnections!=null&&(this._jsPlumb.maxConnections=l.maxConnections),l.scope&&(this.scope=l.scope),n.extend(this,l,o),l.cssClass!=null&&this.canvas&&this._jsPlumb.instance.addClass(this.canvas,l.cssClass),n.OverlayCapableJsPlumbUIComponent.applyType(this,l)},isEnabled:function(){return this._jsPlumb.enabled},setEnabled:function(l){this._jsPlumb.enabled=l},cleanup:function(){var l=this._jsPlumb.instance.endpointAnchorClassPrefix+(this._jsPlumb.currentAnchorClass?"-"+this._jsPlumb.currentAnchorClass:"");n.removeClass(this.element,l),this.anchor=null,this.endpoint.cleanup(!0),this.endpoint.destroy(),this.endpoint=null,this._jsPlumb.instance.destroyDraggable(this.canvas,"internal"),this._jsPlumb.instance.destroyDroppable(this.canvas,"internal")},setHover:function(l){this.endpoint&&this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged()&&this.endpoint.setHover(l)},isFull:function(){return this._jsPlumb.maxConnections===0?!0:!(this.isFloating()||this._jsPlumb.maxConnections<0||this.connections.length<this._jsPlumb.maxConnections)},isFloating:function(){return this.anchor!=null&&this.anchor.isFloating},isConnectedTo:function(l){var u=!1;if(l){for(var p=0;p<this.connections.length;p++)if(this.connections[p].endpoints[1]===l||this.connections[p].endpoints[0]===l){u=!0;break}}return u},getConnectionCost:function(){return this._jsPlumb.connectionCost},setConnectionCost:function(l){this._jsPlumb.connectionCost=l},areConnectionsDirected:function(){return this._jsPlumb.connectionsDirected},setConnectionsDirected:function(l){this._jsPlumb.connectionsDirected=l},setElementId:function(l){this.elementId=l,this.anchor.elementId=l},setReferenceElement:function(l){this.element=n.getElement(l)},setDragAllowedWhenFull:function(l){this.dragAllowedWhenFull=l},equals:function(l){return this.anchor.equals(l.anchor)},getUuid:function(){return this._jsPlumb.uuid},computeAnchor:function(l){return this.anchor.compute(l)}}),e.jsPlumbInstance.prototype.EndpointDropHandler=function(l){return function(u){var p=l.jsPlumb;l.removeClass(p.endpointDropAllowedClass),l.removeClass(p.endpointDropForbiddenClass);var g=p.getDropEvent(arguments),y=p.getDragObject(arguments),w=p.getAttribute(y,"dragId");p.getAttribute(y,"elId");var S=p.getAttribute(y,"originalScope"),m=p.getFloatingConnectionFor(w);if(m!=null){var D=m.suspendedEndpoint!=null;if(!(D&&m.suspendedEndpoint._jsPlumb==null)){var A=l.getEndpoint(m);if(A!=null){if(l.isRedrop(m,l)){m._forceReattach=!0,m.setHover(!1),l.maybeCleanup&&l.maybeCleanup(A);return}var j=p.getFloatingAnchorIndex(m);if(j===0&&!l.isSource||j===1&&!l.isTarget){l.maybeCleanup&&l.maybeCleanup(A);return}l.onDrop&&l.onDrop(m),S&&p.setDragScope(y,S);var L=l.isFull(u);if(L&&A.fire("maxConnections",{endpoint:this,connection:m,maxConnections:A._jsPlumb.maxConnections},g),!L&&l.enabled()){var k=!0;j===0?(m.floatingElement=m.source,m.floatingId=m.sourceId,m.floatingEndpoint=m.endpoints[0],m.floatingIndex=0,m.source=l.element,m.sourceId=p.getId(l.element)):(m.floatingElement=m.target,m.floatingId=m.targetId,m.floatingEndpoint=m.endpoints[1],m.floatingIndex=1,m.target=l.element,m.targetId=p.getId(l.element)),D&&m.suspendedEndpoint.id!==A.id&&(!m.isDetachAllowed(m)||!m.endpoints[j].isDetachAllowed(m)||!m.suspendedEndpoint.isDetachAllowed(m)||!p.checkCondition("beforeDetach",m))&&(k=!1);var I=function(T){m.endpoints[j].detachFromConnection(m),m.suspendedEndpoint&&m.suspendedEndpoint.detachFromConnection(m),m.endpoints[j]=A,A.addConnection(m);var P=A.getParameters();for(var F in P)m.setParameter(F,P[F]);if(!D)P.draggable&&p.initDraggable(this.element,l.dragOptions,"internal",p);else{var U=m.suspendedEndpoint.elementId;p.fireMoveEvent({index:j,originalSourceId:j===0?U:m.sourceId,newSourceId:j===0?A.elementId:m.sourceId,originalTargetId:j===1?U:m.targetId,newTargetId:j===1?A.elementId:m.targetId,originalSourceEndpoint:j===0?m.suspendedEndpoint:m.endpoints[0],newSourceEndpoint:j===0?A:m.endpoints[0],originalTargetEndpoint:j===1?m.suspendedEndpoint:m.endpoints[1],newTargetEndpoint:j===1?A:m.endpoints[1],connection:m},g)}if(j===1?p.router.sourceOrTargetChanged(m.floatingId,m.targetId,m,m.target,1):p.router.sourceOrTargetChanged(m.floatingId,m.sourceId,m,m.source,0),m.endpoints[0].finalEndpoint){var M=m.endpoints[0];M.detachFromConnection(m),m.endpoints[0]=m.endpoints[0].finalEndpoint,m.endpoints[0].addConnection(m)}s.isObject(T)&&m.mergeData(T),p.finaliseConnection(m,null,g,!1),m.setHover(!1),p.revalidate(m.endpoints[0].element)}.bind(this),v=d(function(){m.suspendedEndpoint&&(m.endpoints[j]=m.suspendedEndpoint,m.setHover(!1),m._forceDetach=!0,j===0?(m.source=m.suspendedEndpoint.element,m.sourceId=m.suspendedEndpoint.elementId):(m.target=m.suspendedEndpoint.element,m.targetId=m.suspendedEndpoint.elementId),m.suspendedEndpoint.addConnection(m),j===1?p.router.sourceOrTargetChanged(m.floatingId,m.targetId,m,m.target,1):p.router.sourceOrTargetChanged(m.floatingId,m.sourceId,m,m.source,0),p.repaint(m.sourceId),m._forceDetach=!1)},"dontContinueFunction");if(k=k&&l.isDropAllowed(m.sourceId,m.targetId,m.scope,m,A),k)return I(k),!0;v()}l.maybeCleanup&&l.maybeCleanup(A),p.currentlyDragging=!1}}}}}}.call(typeof window<"u"?window:ht),function(){var e=this,n=e.jsPlumb,s=e.jsPlumbUtil,a=d(function(o,c,l,u,p){if(n.Connectors[c]=n.Connectors[c]||{},n.Connectors[c][l]==null){if(n.Connectors[l]==null){if(o.Defaults.DoNotThrowErrors)return null;throw new TypeError("jsPlumb: unknown connector type '"+l+"'")}n.Connectors[c][l]=function(){n.Connectors[l].apply(this,arguments),n.ConnectorRenderers[c].apply(this,arguments)},s.extend(n.Connectors[c][l],[n.Connectors[l],n.ConnectorRenderers[c]])}return new n.Connectors[c][l](u,p)},"makeConnector"),i=d(function(o,c,l){return o?l.makeAnchor(o,c,l):null},"_makeAnchor"),r=d(function(o,c,l,u){c!=null&&(c._jsPlumbConnections=c._jsPlumbConnections||{},u?delete c._jsPlumbConnections[o.id]:c._jsPlumbConnections[o.id]=!0,s.isEmpty(c._jsPlumbConnections)?l.removeClass(c,l.connectedClass):l.addClass(c,l.connectedClass))},"_updateConnectedClass");n.Connection=function(o){var c=o.newEndpoint;this.id=o.id,this.connector=null,this.idPrefix="_jsplumb_c_",this.defaultLabelLocation=.5,this.defaultOverlayKeys=["Overlays","ConnectionOverlays"],this.previousConnection=o.previousConnection,this.source=n.getElement(o.source),this.target=n.getElement(o.target),n.OverlayCapableJsPlumbUIComponent.apply(this,arguments),o.sourceEndpoint?(this.source=o.sourceEndpoint.getElement(),this.sourceId=o.sourceEndpoint.elementId):this.sourceId=this._jsPlumb.instance.getId(this.source),o.targetEndpoint?(this.target=o.targetEndpoint.getElement(),this.targetId=o.targetEndpoint.elementId):this.targetId=this._jsPlumb.instance.getId(this.target),this.scope=o.scope,this.endpoints=[],this.endpointStyles=[];var l=this._jsPlumb.instance;l.manage(this.sourceId,this.source),l.manage(this.targetId,this.target),this._jsPlumb.visible=!0,this._jsPlumb.params={cssClass:o.cssClass,container:o.container,"pointer-events":o["pointer-events"],editorParams:o.editorParams,overlays:o.overlays},this._jsPlumb.lastPaintedAt=null,this.bind("mouseover",function(){this.setHover(!0)}.bind(this)),this.bind("mouseout",function(){this.setHover(!1)}.bind(this)),this.makeEndpoint=function(F,U,M,V,W){return M=M||this._jsPlumb.instance.getId(U),this.prepareEndpoint(l,c,this,V,F?0:1,o,U,M,W)},o.type&&(o.endpoints=o.endpoints||this._jsPlumb.instance.deriveEndpointAndAnchorSpec(o.type).endpoints);var u=this.makeEndpoint(!0,this.source,this.sourceId,o.sourceEndpoint),p=this.makeEndpoint(!1,this.target,this.targetId,o.targetEndpoint);u&&s.addToList(o.endpointsByElement,this.sourceId,u),p&&s.addToList(o.endpointsByElement,this.targetId,p),this.scope||(this.scope=this.endpoints[0].scope),o.deleteEndpointsOnEmpty!=null&&(this.endpoints[0].setDeleteOnEmpty(o.deleteEndpointsOnEmpty),this.endpoints[1].setDeleteOnEmpty(o.deleteEndpointsOnEmpty));var g=l.Defaults.ConnectionsDetachable;o.detachable===!1&&(g=!1),this.endpoints[0].connectionsDetachable===!1&&(g=!1),this.endpoints[1].connectionsDetachable===!1&&(g=!1);var y=o.reattach||this.endpoints[0].reattachConnections||this.endpoints[1].reattachConnections||l.Defaults.ReattachConnections;this.appendToDefaultType({detachable:g,reattach:y,paintStyle:this.endpoints[0].connectorStyle||this.endpoints[1].connectorStyle||o.paintStyle||l.Defaults.PaintStyle||n.Defaults.PaintStyle,hoverPaintStyle:this.endpoints[0].connectorHoverStyle||this.endpoints[1].connectorHoverStyle||o.hoverPaintStyle||l.Defaults.HoverPaintStyle||n.Defaults.HoverPaintStyle});var w=l.getSuspendedAt();if(!l.isSuspendDrawing()){var S=l.getCachedData(this.sourceId),m=S.o,D=S.s,A=l.getCachedData(this.targetId),j=A.o,L=A.s,k=w||jsPlumbUtil.uuid(),I=this.endpoints[0].anchor.compute({xy:[m.left,m.top],wh:D,element:this.endpoints[0],elementId:this.endpoints[0].elementId,txy:[j.left,j.top],twh:L,tElement:this.endpoints[1],timestamp:k,rotation:l.getRotation(this.endpoints[0].elementId)});this.endpoints[0].paint({anchorLoc:I,timestamp:k}),I=this.endpoints[1].anchor.compute({xy:[j.left,j.top],wh:L,element:this.endpoints[1],elementId:this.endpoints[1].elementId,txy:[m.left,m.top],twh:D,tElement:this.endpoints[0],timestamp:k,rotation:l.getRotation(this.endpoints[1].elementId)}),this.endpoints[1].paint({anchorLoc:I,timestamp:k})}this.getTypeDescriptor=function(){return"connection"},this.getAttachedElements=function(){return this.endpoints},this.isDetachable=function(F){return this._jsPlumb.detachable===!1?!1:F!=null?F.connectionsDetachable===!0:this._jsPlumb.detachable===!0},this.setDetachable=function(F){this._jsPlumb.detachable=F===!0},this.isReattach=function(){return this._jsPlumb.reattach===!0||this.endpoints[0].reattachConnections===!0||this.endpoints[1].reattachConnections===!0},this.setReattach=function(F){this._jsPlumb.reattach=F===!0},this._jsPlumb.cost=o.cost||this.endpoints[0].getConnectionCost(),this._jsPlumb.directed=o.directed,o.directed==null&&(this._jsPlumb.directed=this.endpoints[0].areConnectionsDirected());var v=n.extend({},this.endpoints[1].getParameters());n.extend(v,this.endpoints[0].getParameters()),n.extend(v,this.getParameters()),this.setParameters(v),this.setConnector(this.endpoints[0].connector||this.endpoints[1].connector||o.connector||l.Defaults.Connector||n.Defaults.Connector,!0);var T=o.data==null||!s.isObject(o.data)?{}:o.data;this.getData=function(){return T},this.setData=function(F){T=F||{}},this.mergeData=function(F){T=n.extend(T,F)};var P=["default",this.endpoints[0].connectionType,this.endpoints[1].connectionType,o.type].join(" ");/[^\s]/.test(P)&&this.addType(P,o.data,!0),this.updateConnectedClass()},s.extend(n.Connection,n.OverlayCapableJsPlumbUIComponent,{applyType:function(o,c,l){var u=null;o.connector!=null&&(u=this.getCachedTypeItem("connector",l.connector),u==null&&(u=this.prepareConnector(o.connector,l.connector),this.cacheTypeItem("connector",u,l.connector)),this.setPreparedConnector(u)),o.detachable!=null&&this.setDetachable(o.detachable),o.reattach!=null&&this.setReattach(o.reattach),o.scope&&(this.scope=o.scope),o.cssClass!=null&&this.canvas&&this._jsPlumb.instance.addClass(this.canvas,o.cssClass);var p=null;o.anchor?(p=this.getCachedTypeItem("anchors",l.anchor),p==null&&(p=[this._jsPlumb.instance.makeAnchor(o.anchor),this._jsPlumb.instance.makeAnchor(o.anchor)],this.cacheTypeItem("anchors",p,l.anchor))):o.anchors&&(p=this.getCachedTypeItem("anchors",l.anchors),p==null&&(p=[this._jsPlumb.instance.makeAnchor(o.anchors[0]),this._jsPlumb.instance.makeAnchor(o.anchors[1])],this.cacheTypeItem("anchors",p,l.anchors))),p!=null&&(this.endpoints[0].anchor=p[0],this.endpoints[1].anchor=p[1],this.endpoints[1].anchor.isDynamic&&this._jsPlumb.instance.repaint(this.endpoints[1].elementId)),n.OverlayCapableJsPlumbUIComponent.applyType(this,o)},addClass:function(o,c){c&&(this.endpoints[0].addClass(o),this.endpoints[1].addClass(o),this.suspendedEndpoint&&this.suspendedEndpoint.addClass(o)),this.connector&&this.connector.addClass(o)},removeClass:function(o,c){c&&(this.endpoints[0].removeClass(o),this.endpoints[1].removeClass(o),this.suspendedEndpoint&&this.suspendedEndpoint.removeClass(o)),this.connector&&this.connector.removeClass(o)},isVisible:function(){return this._jsPlumb.visible},setVisible:function(o){this._jsPlumb.visible=o,this.connector&&this.connector.setVisible(o),this.repaint()},cleanup:function(){this.updateConnectedClass(!0),this.endpoints=null,this.source=null,this.target=null,this.connector!=null&&(this.connector.cleanup(!0),this.connector.destroy(!0)),this.connector=null},updateConnectedClass:function(o){this._jsPlumb&&(r(this,this.source,this._jsPlumb.instance,o),r(this,this.target,this._jsPlumb.instance,o))},setHover:function(o){this.connector&&this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged()&&(this.connector.setHover(o),e.jsPlumb[o?"addClass":"removeClass"](this.source,this._jsPlumb.instance.hoverSourceClass),e.jsPlumb[o?"addClass":"removeClass"](this.target,this._jsPlumb.instance.hoverTargetClass))},getUuids:function(){return[this.endpoints[0].getUuid(),this.endpoints[1].getUuid()]},getCost:function(){return this._jsPlumb?this._jsPlumb.cost:-1/0},setCost:function(o){this._jsPlumb.cost=o},isDirected:function(){return this._jsPlumb.directed},getConnector:function(){return this.connector},prepareConnector:function(o,c){var l={_jsPlumb:this._jsPlumb.instance,cssClass:this._jsPlumb.params.cssClass,container:this._jsPlumb.params.container,"pointer-events":this._jsPlumb.params["pointer-events"]},u=this._jsPlumb.instance.getRenderMode(),p;return s.isString(o)?p=a(this._jsPlumb.instance,u,o,l,this):s.isArray(o)&&(o.length===1?p=a(this._jsPlumb.instance,u,o[0],l,this):p=a(this._jsPlumb.instance,u,o[0],s.merge(o[1],l),this)),c!=null&&(p.typeId=c),p},setPreparedConnector:function(o,c,l,u){if(this.connector!==o){var p,g="";if(this.connector!=null&&(p=this.connector,g=p.getClass(),this.connector.cleanup(),this.connector.destroy()),this.connector=o,u&&this.cacheTypeItem("connector",o,u),this.canvas=this.connector.canvas,this.bgCanvas=this.connector.bgCanvas,this.connector.reattach(this._jsPlumb.instance),this.addClass(g),this.canvas&&(this.canvas._jsPlumb=this),this.bgCanvas&&(this.bgCanvas._jsPlumb=this),p!=null)for(var y=this.getOverlays(),w=0;w<y.length;w++)y[w].transfer&&y[w].transfer(this.connector);l||this.setListenerComponent(this.connector),c||this.repaint()}},setConnector:function(o,c,l,u){var p=this.prepareConnector(o,u);this.setPreparedConnector(p,c,l,u)},paint:function(o){if(!this._jsPlumb.instance.isSuspendDrawing()&&this._jsPlumb.visible){o=o||{};var c=o.timestamp,l=!1,u=l?this.sourceId:this.targetId,p=l?this.targetId:this.sourceId,g=l?0:1,y=l?1:0;if(c==null||c!==this._jsPlumb.lastPaintedAt){var w=this._jsPlumb.instance.updateOffset({elId:p}).o,S=this._jsPlumb.instance.updateOffset({elId:u}).o,m=this.endpoints[y],D=this.endpoints[g],A=m.anchor.getCurrentLocation({xy:[w.left,w.top],wh:[w.width,w.height],element:m,timestamp:c,rotation:this._jsPlumb.instance.getRotation(this.sourceId)}),j=D.anchor.getCurrentLocation({xy:[S.left,S.top],wh:[S.width,S.height],element:D,timestamp:c,rotation:this._jsPlumb.instance.getRotation(this.targetId)});this.connector.resetBounds(),this.connector.compute({sourcePos:A,targetPos:j,sourceOrientation:m.anchor.getOrientation(m),targetOrientation:D.anchor.getOrientation(D),sourceEndpoint:this.endpoints[y],targetEndpoint:this.endpoints[g],"stroke-width":this._jsPlumb.paintStyleInUse.strokeWidth,sourceInfo:w,targetInfo:S});var L={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};for(var k in this._jsPlumb.overlays)if(this._jsPlumb.overlays.hasOwnProperty(k)){var I=this._jsPlumb.overlays[k];I.isVisible()&&(this._jsPlumb.overlayPlacements[k]=I.draw(this.connector,this._jsPlumb.paintStyleInUse,this.getAbsoluteOverlayPosition(I)),L.minX=Math.min(L.minX,this._jsPlumb.overlayPlacements[k].minX),L.maxX=Math.max(L.maxX,this._jsPlumb.overlayPlacements[k].maxX),L.minY=Math.min(L.minY,this._jsPlumb.overlayPlacements[k].minY),L.maxY=Math.max(L.maxY,this._jsPlumb.overlayPlacements[k].maxY))}var v=parseFloat(this._jsPlumb.paintStyleInUse.strokeWidth||1)/2,T=parseFloat(this._jsPlumb.paintStyleInUse.strokeWidth||0),P={xmin:Math.min(this.connector.bounds.minX-(v+T),L.minX),ymin:Math.min(this.connector.bounds.minY-(v+T),L.minY),xmax:Math.max(this.connector.bounds.maxX+(v+T),L.maxX),ymax:Math.max(this.connector.bounds.maxY+(v+T),L.maxY)};this.connector.paintExtents=P,this.connector.paint(this._jsPlumb.paintStyleInUse,null,P);for(var F in this._jsPlumb.overlays)if(this._jsPlumb.overlays.hasOwnProperty(F)){var U=this._jsPlumb.overlays[F];U.isVisible()&&U.paint(this._jsPlumb.overlayPlacements[F],P)}}this._jsPlumb.lastPaintedAt=c}},repaint:function(o){var c=jsPlumb.extend(o||{},{});c.elId=this.sourceId,this.paint(c)},prepareEndpoint:function(o,c,l,u,p,g,y,w,S){var m;if(u)l.endpoints[p]=u,u.addConnection(l);else{g.endpoints||(g.endpoints=[null,null]);var D=S||g.endpoints[p]||g.endpoint||o.Defaults.Endpoints[p]||n.Defaults.Endpoints[p]||o.Defaults.Endpoint||n.Defaults.Endpoint;g.endpointStyles||(g.endpointStyles=[null,null]),g.endpointHoverStyles||(g.endpointHoverStyles=[null,null]);var A=g.endpointStyles[p]||g.endpointStyle||o.Defaults.EndpointStyles[p]||n.Defaults.EndpointStyles[p]||o.Defaults.EndpointStyle||n.Defaults.EndpointStyle;A.fill==null&&g.paintStyle!=null&&(A.fill=g.paintStyle.stroke),A.outlineStroke==null&&g.paintStyle!=null&&(A.outlineStroke=g.paintStyle.outlineStroke),A.outlineWidth==null&&g.paintStyle!=null&&(A.outlineWidth=g.paintStyle.outlineWidth);var j=g.endpointHoverStyles[p]||g.endpointHoverStyle||o.Defaults.EndpointHoverStyles[p]||n.Defaults.EndpointHoverStyles[p]||o.Defaults.EndpointHoverStyle||n.Defaults.EndpointHoverStyle;g.hoverPaintStyle!=null&&(j==null&&(j={}),j.fill==null&&(j.fill=g.hoverPaintStyle.stroke));var L=g.anchors?g.anchors[p]:g.anchor?g.anchor:i(o.Defaults.Anchors[p],w,o)||i(n.Defaults.Anchors[p],w,o)||i(o.Defaults.Anchor,w,o)||i(n.Defaults.Anchor,w,o),k=g.uuids?g.uuids[p]:null;m=c({paintStyle:A,hoverPaintStyle:j,endpoint:D,connections:[l],uuid:k,anchor:L,source:y,scope:g.scope,reattach:g.reattach||o.Defaults.ReattachConnections,detachable:g.detachable||o.Defaults.ConnectionsDetachable}),u==null&&m.setDeleteOnEmpty(!0),l.endpoints[p]=m,g.drawEndpoints===!1&&m.setVisible(!1,!0,!0)}return m},replaceEndpoint:function(o,c){var l=this.endpoints[o],u=l.elementId,p=this._jsPlumb.instance.getEndpoints(u),g=p.indexOf(l),y=this.makeEndpoint(o===0,l.element,u,null,c);this.endpoints[o]=y,p.splice(g,1,y),this._jsPlumb.instance.deleteObject({endpoint:l,deleteAttachedObjects:!1}),this._jsPlumb.instance.fire("endpointReplaced",{previous:l,current:y}),this._jsPlumb.instance.router.sourceOrTargetChanged(this.endpoints[1].elementId,this.endpoints[1].elementId,this,this.endpoints[1].element,1)}})}.call(typeof window<"u"?window:ht),function(){var e=this,n=e.jsPlumbUtil,s=e.jsPlumb;s.AnchorManager=function(o){var c={},l={},u={},p={},g=this,y={},w=o.jsPlumbInstance,S={},m=d(function(P,F,U,M,V,W,K,R){for(var X=[],Q=F[V?0:1]/(M.length+1),G=0;G<M.length;G++){var J=(G+1)*Q,E=W*F[V?1:0];K&&(J=F[V?0:1]-J);var O=V?J:E,C=U.left+O,B=O/F[0],z=V?E:J,Y=U.top+z,se=z/F[1];if(R!==0){var le=jsPlumbUtil.rotatePoint([C,Y],[U.centerx,U.centery],R);C=le[0],Y=le[1]}X.push([C,Y,B,se,M[G][1],M[G][2]])}return X},"placeAnchorsOnLine"),D=d(function(P,F){return F[0][0]-P[0][0]},"rightAndBottomSort"),A=d(function(P,F){var U=P[0][0]<0?-Math.PI-P[0][0]:Math.PI-P[0][0],M=F[0][0]<0?-Math.PI-F[0][0]:Math.PI-F[0][0];return U-M},"leftAndTopSort"),j={top:A,right:D,bottom:D,left:A},L=d(function(P,F){return P.sort(F)},"_sortHelper"),k=d(function(P,F){var U=w.getCachedData(P),M=U.s,V=U.o,W=d(function(K,R,X,Q,G,J,E){if(Q.length>0)for(var O=L(Q,j[K]),C=K==="right"||K==="top",B=w.getRotation(P),z=m(K,R,X,O,G,J,C,B),Y=d(function(fe,be){l[fe.id]=[be[0],be[1],be[2],be[3]],u[fe.id]=E},"_setAnchorLocation"),se=0;se<z.length;se++){var le=z[se][4],te=le.endpoints[0].elementId===P,he=le.endpoints[1].elementId===P;te&&Y(le.endpoints[0],z[se]),he&&Y(le.endpoints[1],z[se])}},"placeSomeAnchors");W("bottom",M,V,F.bottom,!0,1,[0,1]),W("top",M,V,F.top,!0,0,[0,-1]),W("left",M,V,F.left,!1,0,[-1,0]),W("right",M,V,F.right,!1,1,[1,0])},"placeAnchors");this.reset=function(){c={},p={},y={}},this.addFloatingConnection=function(P,F){S[P]=F},this.newConnection=function(P){var F=P.sourceId,U=P.targetId,M=P.endpoints,V=!0,W=d(function(K,R,X,Q,G){F===U&&X.isContinuous&&(P._jsPlumb.instance.removeElement(M[1].canvas),V=!1),n.addToList(p,Q,[G,R,X.constructor===s.DynamicAnchor])},"registerConnection");W(0,M[0],M[0].anchor,U,P),V&&W(1,M[1],M[1].anchor,F,P)};var I=d(function(P){(function(F,U){if(F){var M=d(function(V){return V[4]===U},"f");n.removeWithFunction(F.top,M),n.removeWithFunction(F.left,M),n.removeWithFunction(F.bottom,M),n.removeWithFunction(F.right,M)}})(y[P.elementId],P.id)},"removeEndpointFromAnchorLists");this.connectionDetached=function(P,F){var U=P.connection||P,M=P.sourceId,V=P.targetId,W=U.endpoints,K=d(function(R,X,Q,G,J){n.removeWithFunction(p[G],function(E){return E[0].id===J.id})},"removeConnection");K(1,W[1],W[1].anchor,M,U),K(0,W[0],W[0].anchor,V,U),U.floatingId&&(K(U.floatingIndex,U.floatingEndpoint,U.floatingEndpoint.anchor,U.floatingId,U),I(U.floatingEndpoint)),I(U.endpoints[0]),I(U.endpoints[1]),F||(g.redraw(U.sourceId),U.targetId!==U.sourceId&&g.redraw(U.targetId))},this.addEndpoint=function(P,F){n.addToList(c,F,P)},this.changeId=function(P,F){p[F]=p[P],c[F]=c[P],delete p[P],delete c[P]},this.getConnectionsFor=function(P){return p[P]||[]},this.getEndpointsFor=function(P){return c[P]||[]},this.deleteEndpoint=function(P){n.removeWithFunction(c[P.elementId],function(F){return F.id===P.id}),I(P)},this.elementRemoved=function(P){delete S[P],delete c[P],c[P]=[]};var v=d(function(P,F,U,M,V,W,K,R,X,Q,G,J){var E=-1,O=M.endpoints[K],C=O.id,B=[1,0][K],z=[[F,U],M,V,W,C],Y=P[X],se=O._continuousAnchorEdge?P[O._continuousAnchorEdge]:null,le,te;if(se){var he=n.findWithFunction(se,function(be){return be[4]===C});if(he!==-1)for(se.splice(he,1),le=0;le<se.length;le++)te=se[le][1],n.addWithFunction(G,te,function(be){return be.id===te.id}),n.addWithFunction(J,se[le][1].endpoints[K],function(be){return be.id===te.endpoints[K].id}),n.addWithFunction(J,se[le][1].endpoints[B],function(be){return be.id===te.endpoints[B].id})}for(le=0;le<Y.length;le++)te=Y[le][1],o.idx===1&&Y[le][3]===W&&E===-1&&(E=le),n.addWithFunction(G,te,function(be){return be.id===te.id}),n.addWithFunction(J,Y[le][1].endpoints[K],function(be){return be.id===te.endpoints[K].id}),n.addWithFunction(J,Y[le][1].endpoints[B],function(be){return be.id===te.endpoints[B].id});{var fe=R?E!==-1?E:0:Y.length;Y.splice(fe,0,z)}O._continuousAnchorEdge=X},"_updateAnchorList");this.sourceOrTargetChanged=function(P,F,U,M,V){if(V===0){if(P!==F){U.sourceId=F,U.source=M,n.removeWithFunction(p[P],function(Q){return Q[0].id===U.id});var W=n.findWithFunction(p[U.targetId],function(Q){return Q[0].id===U.id});W>-1&&(p[U.targetId][W][0]=U,p[U.targetId][W][1]=U.endpoints[0],p[U.targetId][W][2]=U.endpoints[0].anchor.constructor===s.DynamicAnchor),n.addToList(p,F,[U,U.endpoints[1],U.endpoints[1].anchor.constructor===s.DynamicAnchor]),U.endpoints[1].anchor.isContinuous&&(U.source===U.target?U._jsPlumb.instance.removeElement(U.endpoints[1].canvas):U.endpoints[1].canvas.parentNode==null&&U._jsPlumb.instance.appendElement(U.endpoints[1].canvas)),U.updateConnectedClass()}}else if(V===1){var K=U.endpoints[0].elementId;U.target=M,U.targetId=F;var R=n.findWithFunction(p[K],function(Q){return Q[0].id===U.id}),X=n.findWithFunction(p[P],function(Q){return Q[0].id===U.id});R!==-1&&(p[K][R][0]=U,p[K][R][1]=U.endpoints[1],p[K][R][2]=U.endpoints[1].anchor.constructor===s.DynamicAnchor),X>-1&&(p[P].splice(X,1),n.addToList(p,F,[U,U.endpoints[0],U.endpoints[0].anchor.constructor===s.DynamicAnchor])),U.updateConnectedClass()}},this.rehomeEndpoint=function(P,F,U){var M=c[F]||[],V=w.getId(U);if(V!==F){var W=M.indexOf(P);if(W>-1){var K=M.splice(W,1)[0];g.add(K,V)}}for(var R=0;R<P.connections.length;R++)P.connections[R].sourceId===F?g.sourceOrTargetChanged(F,P.elementId,P.connections[R],P.element,0):P.connections[R].targetId===F&&g.sourceOrTargetChanged(F,P.elementId,P.connections[R],P.element,1)},this.redraw=function(P,F,U,M,V,W){var K=[],R=[],X=[];if(!w.isSuspendDrawing()){var Q=c[P]||[],G=p[P]||[];U=U||jsPlumbUtil.uuid(),M=M||{left:0,top:0},F&&(F={left:F.left+M.left,top:F.top+M.top});for(var J=w.updateOffset({elId:P,offset:F,recalc:!1,timestamp:U}),E={},O=0;O<G.length;O++){var C=G[O][0],B=C.sourceId,z=C.targetId,Y=C.endpoints[0].anchor.isContinuous,se=C.endpoints[1].anchor.isContinuous;if(Y||se){var le=B+"_"+z,te=E[le],he=C.sourceId===P?1:0,fe=w.getRotation(z),be=w.getRotation(B);Y&&!y[B]&&(y[B]={top:[],right:[],bottom:[],left:[]}),se&&!y[z]&&(y[z]={top:[],right:[],bottom:[],left:[]}),P!==z&&w.updateOffset({elId:z,timestamp:U}),P!==B&&w.updateOffset({elId:B,timestamp:U});var ge=w.getCachedData(z),ye=w.getCachedData(B);z===B&&(Y||se)?(v(y[B],-Math.PI/2,0,C,!1,z,0,!1,"top",B,K,R),v(y[z],-Math.PI/2,0,C,!1,B,1,!1,"top",z,K,R)):(te||(te=this.calculateOrientation(B,z,ye.o,ge.o,C.endpoints[0].anchor,C.endpoints[1].anchor,C,be,fe),E[le]=te),Y&&v(y[B],te.theta,0,C,!1,z,0,!1,te.a[0],B,K,R),se&&v(y[z],te.theta2,-1,C,!0,B,1,!0,te.a[1],z,K,R)),Y&&n.addWithFunction(X,B,function(Fe){return Fe===B}),se&&n.addWithFunction(X,z,function(Fe){return Fe===z}),n.addWithFunction(K,C,function(Fe){return Fe.id===C.id}),(Y&&he===0||se&&he===1)&&n.addWithFunction(R,C.endpoints[he],function(Fe){return Fe.id===C.endpoints[he].id})}}for(O=0;O<Q.length;O++)Q[O].connections.length===0&&Q[O].anchor.isContinuous&&(y[P]||(y[P]={top:[],right:[],bottom:[],left:[]}),v(y[P],-Math.PI/2,0,{endpoints:[Q[O],Q[O]],paint:function(){}},!1,P,0,!1,Q[O].anchor.getDefaultFace(),P,K,R),n.addWithFunction(X,P,function(Fe){return Fe===P}));for(O=0;O<X.length;O++)k(X[O],y[X[O]]);for(O=0;O<Q.length;O++)Q[O].paint({timestamp:U,offset:J,dimensions:J.s,recalc:W!==!0});for(O=0;O<R.length;O++){var ke=w.getCachedData(R[O].elementId);R[O].paint({timestamp:null,offset:ke,dimensions:ke.s})}for(O=0;O<G.length;O++){var Ie=G[O][1];if(Ie.anchor.constructor===s.DynamicAnchor){Ie.paint({elementWithPrecedence:P,timestamp:U}),n.addWithFunction(K,G[O][0],function(Fe){return Fe.id===G[O][0].id});for(var _e=0;_e<Ie.connections.length;_e++)Ie.connections[_e]!==G[O][0]&&n.addWithFunction(K,Ie.connections[_e],function(Fe){return Fe.id===Ie.connections[_e].id})}else n.addWithFunction(K,G[O][0],function(Fe){return Fe.id===G[O][0].id})}var Ue=S[P];for(Ue&&Ue.paint({timestamp:U,recalc:!1,elId:P}),O=0;O<K.length;O++)K[O].paint({elId:P,timestamp:null,recalc:!1,clearEdits:V})}return{c:K,e:R}};var T=d(function(P){n.EventGenerator.apply(this),this.type="Continuous",this.isDynamic=!0,this.isContinuous=!0;for(var F=P.faces||["top","right","bottom","left"],U=P.clockwise!==!1,M={},V={top:"bottom",right:"left",left:"right",bottom:"top"},W={top:"right",right:"bottom",left:"top",bottom:"left"},K={top:"left",right:"top",left:"bottom",bottom:"right"},R=U?W:K,X=U?K:W,Q=P.cssClass||"",G=null,J=null,E=["left","right"],O=["top","bottom"],C=null,B=0;B<F.length;B++)M[F[B]]=!0;this.getDefaultFace=function(){return F.length===0?"top":F[0]},this.isRelocatable=function(){return!0},this.isSnapOnRelocate=function(){return!0},this.verifyEdge=function(z){return M[z]?z:M[V[z]]?V[z]:M[R[z]]?R[z]:M[X[z]]?X[z]:z},this.isEdgeSupported=function(z){return C==null?J==null?M[z]===!0:J===z:C.indexOf(z)!==-1},this.setCurrentFace=function(z,Y){G=z,Y&&J!=null&&(J=G)},this.getCurrentFace=function(){return G},this.getSupportedFaces=function(){var z=[];for(var Y in M)M[Y]&&z.push(Y);return z},this.lock=function(){J=G},this.unlock=function(){J=null},this.isLocked=function(){return J!=null},this.lockCurrentAxis=function(){G!=null&&(C=G==="left"||G==="right"?E:O)},this.unlockCurrentAxis=function(){C=null},this.compute=function(z){return l[z.element.id]||[0,0]},this.getCurrentLocation=function(z){return l[z.element.id]||[0,0]},this.getOrientation=function(z){return u[z.id]||[0,0]},this.getCssClass=function(){return Q}},"ContinuousAnchor");w.continuousAnchorFactory={get:function(P){return new T(P)},clear:function(P){delete l[P]}}},s.AnchorManager.prototype.calculateOrientation=function(o,c,l,u,p,g,y,w,S){var m={HORIZONTAL:"horizontal",VERTICAL:"vertical",DIAGONAL:"diagonal",IDENTITY:"identity"},D=["left","top","right","bottom"];if(o===c)return{orientation:m.IDENTITY,a:["top","top"]};var A=Math.atan2(u.centery-l.centery,u.centerx-l.centerx),j=Math.atan2(l.centery-u.centery,l.centerx-u.centerx),L=[],k={};(function(U,M){for(var V=0;V<U.length;V++)if(k[U[V]]={left:[M[V][0].left,M[V][0].centery],right:[M[V][0].right,M[V][0].centery],top:[M[V][0].centerx,M[V][0].top],bottom:[M[V][0].centerx,M[V][0].bottom]},M[V][1]!==0)for(var W in k[U[V]])k[U[V]][W]=jsPlumbUtil.rotatePoint(k[U[V]][W],[M[V][0].centerx,M[V][0].centery],M[V][1])})(["source","target"],[[l,w],[u,S]]);for(var I=0;I<D.length;I++)for(var v=0;v<D.length;v++)L.push({source:D[I],target:D[v],dist:Biltong.lineLength(k.source[D[I]],k.target[D[v]])});L.sort(function(U,M){return U.dist<M.dist?-1:U.dist>M.dist?1:0});for(var T=L[0].source,P=L[0].target,F=0;F<L.length&&(p.isContinuous&&p.locked?T=p.getCurrentFace():!p.isContinuous||p.isEdgeSupported(L[F].source)?T=L[F].source:T=null,g.isContinuous&&g.locked?P=g.getCurrentFace():!g.isContinuous||g.isEdgeSupported(L[F].target)?P=L[F].target:P=null,!(T!=null&&P!=null));F++);return p.isContinuous&&p.setCurrentFace(T),g.isContinuous&&g.setCurrentFace(P),{a:[T,P],theta:A,theta2:j}},s.Anchor=function(o){this.x=o.x||0,this.y=o.y||0,this.elementId=o.elementId,this.cssClass=o.cssClass||"",this.orientation=o.orientation||[0,0],this.lastReturnValue=null,this.offsets=o.offsets||[0,0],this.timestamp=null,this._unrotatedOrientation=[this.orientation[0],this.orientation[1]],this.relocatable=o.relocatable!==!1,this.snapOnRelocate=o.snapOnRelocate!==!1,this.locked=!1,n.EventGenerator.apply(this),this.compute=function(c){var l=c.xy,u=c.wh,p=c.timestamp;if(p&&p===this.timestamp)return this.lastReturnValue;var g=[l[0]+this.x*u[0]+this.offsets[0],l[1]+this.y*u[1]+this.offsets[1],this.x,this.y],y=c.rotation;if(y!=null&&y!==0){var w=jsPlumbUtil.rotatePoint(g,[l[0]+u[0]/2,l[1]+u[1]/2],y);this.orientation[0]=Math.round(this._unrotatedOrientation[0]*w[2]-this._unrotatedOrientation[1]*w[3]),this.orientation[1]=Math.round(this._unrotatedOrientation[1]*w[2]+this._unrotatedOrientation[0]*w[3]),this.lastReturnValue=[w[0],w[1],this.x,this.y]}else this.orientation[0]=this._unrotatedOrientation[0],this.orientation[1]=this._unrotatedOrientation[1],this.lastReturnValue=g;return this.timestamp=p,this.lastReturnValue},this.getCurrentLocation=function(c){return c=c||{},this.lastReturnValue==null||c.timestamp!=null&&this.timestamp!==c.timestamp?this.compute(c):this.lastReturnValue},this.setPosition=function(c,l,u,p,g){(!this.locked||g)&&(this.x=c,this.y=l,this.orientation=[u,p],this.lastReturnValue=null)}},n.extend(s.Anchor,n.EventGenerator,{equals:function(o){if(!o)return!1;var c=o.getOrientation(),l=this.getOrientation();return this.x===o.x&&this.y===o.y&&this.offsets[0]===o.offsets[0]&&this.offsets[1]===o.offsets[1]&&l[0]===c[0]&&l[1]===c[1]},getOrientation:function(){return this.orientation},getCssClass:function(){return this.cssClass}}),s.FloatingAnchor=function(o){s.Anchor.apply(this,arguments);var c=o.reference,l=o.referenceCanvas,u=s.getSize(l),p=0,g=0,y=null,w=null;this.orientation=null,this.x=0,this.y=0,this.isFloating=!0,this.compute=function(S){var m=S.xy,D=[m[0]+u[0]/2,m[1]+u[1]/2];return w=D,D},this.getOrientation=function(S){if(y)return y;var m=c.getOrientation(S);return[Math.abs(m[0])*p*-1,Math.abs(m[1])*g*-1]},this.over=function(S,m){y=S.getOrientation(m)},this.out=function(){y=null},this.getCurrentLocation=function(S){return w??this.compute(S)}},n.extend(s.FloatingAnchor,s.Anchor);var a=d(function(o,c,l){return o.constructor===s.Anchor?o:c.makeAnchor(o,l,c)},"_convertAnchor");s.DynamicAnchor=function(o){s.Anchor.apply(this,arguments),this.isDynamic=!0,this.anchors=[],this.elementId=o.elementId,this.jsPlumbInstance=o.jsPlumbInstance;for(var c=0;c<o.anchors.length;c++)this.anchors[c]=a(o.anchors[c],this.jsPlumbInstance,this.elementId);this.getAnchors=function(){return this.anchors};var l=this.anchors.length>0?this.anchors[0]:null,u=l,p=d(function(y,w,S,m,D,A,j){var L=m[0]+y.x*D[0],k=m[1]+y.y*D[1],I=m[0]+D[0]/2,v=m[1]+D[1]/2;if(A!=null&&A!==0){var T=jsPlumbUtil.rotatePoint([L,k],[I,v],A);L=T[0],k=T[1]}return Math.sqrt(Math.pow(w-L,2)+Math.pow(S-k,2))+Math.sqrt(Math.pow(I-L,2)+Math.pow(v-k,2))},"_distance"),g=o.selector||function(y,w,S,m,D,A,j){for(var L=S[0]+m[0]/2,k=S[1]+m[1]/2,I=-1,v=1/0,T=0;T<j.length;T++){var P=p(j[T],L,k,y,w,D);P<v&&(I=T+0,v=P)}return j[I]};this.compute=function(y){var w=y.xy,S=y.wh,m=y.txy,D=y.twh,A=y.rotation,j=y.tRotation;return this.timestamp=y.timestamp,this.locked||m==null||D==null?(this.lastReturnValue=l.compute(y),this.lastReturnValue):(y.timestamp=null,l=g(w,S,m,D,A,j,this.anchors),this.x=l.x,this.y=l.y,l!==u&&this.fire("anchorChanged",l),u=l,this.lastReturnValue=l.compute(y),this.lastReturnValue)},this.getCurrentLocation=function(y){return l!=null?l.getCurrentLocation(y):null},this.getOrientation=function(y){return l!=null?l.getOrientation(y):[0,0]},this.over=function(y,w){l?.over(y,w)},this.out=function(){l?.out()},this.setAnchor=function(y){l=y},this.getCssClass=function(){return l&&l.getCssClass()||""},this.setAnchorCoordinates=function(y){var w=jsPlumbUtil.findWithFunction(this.anchors,function(S){return S.x===y[0]&&S.y===y[1]});return w!==-1?(this.setAnchor(this.anchors[w]),!0):!1}},n.extend(s.DynamicAnchor,s.Anchor);var i=d(function(o,c,l,u,p,g){s.Anchors[p]=function(y){var w=y.jsPlumbInstance.makeAnchor([o,c,l,u,0,0],y.elementId,y.jsPlumbInstance);return w.type=p,g&&g(w,y),w}},"_curryAnchor");i(.5,0,0,-1,"TopCenter"),i(.5,1,0,1,"BottomCenter"),i(0,.5,-1,0,"LeftMiddle"),i(1,.5,1,0,"RightMiddle"),i(.5,0,0,-1,"Top"),i(.5,1,0,1,"Bottom"),i(0,.5,-1,0,"Left"),i(1,.5,1,0,"Right"),i(.5,.5,0,0,"Center"),i(1,0,0,-1,"TopRight"),i(1,1,0,1,"BottomRight"),i(0,0,0,-1,"TopLeft"),i(0,1,0,1,"BottomLeft"),s.Defaults.DynamicAnchors=function(o){return o.jsPlumbInstance.makeAnchors(["TopCenter","RightMiddle","BottomCenter","LeftMiddle"],o.elementId,o.jsPlumbInstance)},s.Anchors.AutoDefault=function(o){var c=o.jsPlumbInstance.makeDynamicAnchor(s.Defaults.DynamicAnchors(o));return c.type="AutoDefault",c};var r=d(function(o,c){s.Anchors[o]=function(l){var u=l.jsPlumbInstance.makeAnchor(["Continuous",{faces:c}],l.elementId,l.jsPlumbInstance);return u.type=o,u}},"_curryContinuousAnchor");s.Anchors.Continuous=function(o){return o.jsPlumbInstance.continuousAnchorFactory.get(o)},r("ContinuousLeft",["left"]),r("ContinuousTop",["top"]),r("ContinuousBottom",["bottom"]),r("ContinuousRight",["right"]),i(0,0,0,0,"Assign",function(o,c){var l=c.position||"Fixed";o.positionFinder=l.constructor===String?c.jsPlumbInstance.AnchorPositionFinders[l]:l,o.constructorParams=c}),e.jsPlumbInstance.prototype.AnchorPositionFinders={Fixed:function(o,c,l){return[(o.left-c.left)/l[0],(o.top-c.top)/l[1]]},Grid:function(o,c,l,u){var p=o.left-c.left,g=o.top-c.top,y=l[0]/u.grid[0],w=l[1]/u.grid[1],S=Math.floor(p/y),m=Math.floor(g/w);return[(S*y+y/2)/l[0],(m*w+w/2)/l[1]]}},s.Anchors.Perimeter=function(o){o=o||{};var c=o.anchorCount||60,l=o.shape;if(!l)throw new Error("no shape supplied to Perimeter Anchor type");var u=d(function(){for(var A=.5,j=Math.PI*2/c,L=0,k=[],I=0;I<c;I++){var v=A+A*Math.sin(L),T=A+A*Math.cos(L);k.push([v,T,0,0]),L+=j}return k},"_circle"),p=d(function(A){for(var j=c/A.length,L=[],k=d(function(v,T,P,F,U,M,V){j=c*U;for(var W=(P-v)/j,K=(F-T)/j,R=0;R<j;R++)L.push([v+W*R,T+K*R,M??0,V??0])},"_computeFace"),I=0;I<A.length;I++)k.apply(null,A[I]);return L},"_path"),g=d(function(A){for(var j=[],L=0;L<A.length;L++)j.push([A[L][0],A[L][1],A[L][2],A[L][3],1/A.length,A[L][4],A[L][5]]);return p(j)},"_shape"),y=d(function(){return g([[0,0,1,0,0,-1],[1,0,1,1,1,0],[1,1,0,1,0,1],[0,1,0,0,-1,0]])},"_rectangle"),w={Circle:u,Ellipse:u,Diamond:function(){return g([[.5,0,1,.5],[1,.5,.5,1],[.5,1,0,.5],[0,.5,.5,0]])},Rectangle:y,Square:y,Triangle:function(){return g([[.5,0,1,1],[1,1,0,1],[0,1,.5,0]])},Path:function(A){for(var j=A.points,L=[],k=0,I=0;I<j.length-1;I++){var v=Math.sqrt(Math.pow(j[I][2]-j[I][0])+Math.pow(j[I][3]-j[I][1]));k+=v,L.push([j[I][0],j[I][1],j[I+1][0],j[I+1][1],v])}for(var T=0;T<L.length;T++)L[T][4]=L[T][4]/k;return p(L)}},S=d(function(A,j){for(var L=[],k=j/180*Math.PI,I=0;I<A.length;I++){var v=A[I][0]-.5,T=A[I][1]-.5;L.push([.5+(v*Math.cos(k)-T*Math.sin(k)),.5+(v*Math.sin(k)+T*Math.cos(k)),A[I][2],A[I][3]])}return L},"_rotate");if(!w[l])throw new Error("Shape ["+l+"] is unknown by Perimeter Anchor type");var m=w[l](o);o.rotation&&(m=S(m,o.rotation));var D=o.jsPlumbInstance.makeDynamicAnchor(m);return D.type="Perimeter",D}}.call(typeof window<"u"?window:ht),function(){var e=this;e.jsPlumbUtil;var n=e.jsPlumb;n.DefaultRouter=function(s){this.jsPlumbInstance=s,this.anchorManager=new n.AnchorManager({jsPlumbInstance:s}),this.sourceOrTargetChanged=function(a,i,r,o,c){this.anchorManager.sourceOrTargetChanged(a,i,r,o,c)},this.reset=function(){this.anchorManager.reset()},this.changeId=function(a,i){this.anchorManager.changeId(a,i)},this.elementRemoved=function(a){this.anchorManager.elementRemoved(a)},this.newConnection=function(a){this.anchorManager.newConnection(a)},this.connectionDetached=function(a,i){this.anchorManager.connectionDetached(a,i)},this.redraw=function(a,i,r,o,c,l){return this.anchorManager.redraw(a,i,r,o,c,l)},this.deleteEndpoint=function(a){this.anchorManager.deleteEndpoint(a)},this.rehomeEndpoint=function(a,i,r){this.anchorManager.rehomeEndpoint(a,i,r)},this.addEndpoint=function(a,i){this.anchorManager.addEndpoint(a,i)}}}.call(typeof window<"u"?window:ht),function(){var e=this,n=e.jsPlumb,s=e.jsPlumbUtil,a=e.Biltong;n.Segments={AbstractSegment:function(u){this.params=u,this.findClosestPointOnPath=function(p,g){return{d:1/0,x:null,y:null,l:null}},this.getBounds=function(){return{minX:Math.min(u.x1,u.x2),minY:Math.min(u.y1,u.y2),maxX:Math.max(u.x1,u.x2),maxY:Math.max(u.y1,u.y2)}},this.lineIntersection=function(p,g,y,w){return[]},this.boxIntersection=function(p,g,y,w){var S=[];return S.push.apply(S,this.lineIntersection(p,g,p+y,g)),S.push.apply(S,this.lineIntersection(p+y,g,p+y,g+w)),S.push.apply(S,this.lineIntersection(p+y,g+w,p,g+w)),S.push.apply(S,this.lineIntersection(p,g+w,p,g)),S},this.boundingBoxIntersection=function(p){return this.boxIntersection(p.x,p.y,p.w,p.y)}},Straight:function(u){n.Segments.AbstractSegment.apply(this,arguments);var p,g,y,w,S,m,D,A=d(function(){p=Math.sqrt(Math.pow(S-w,2)+Math.pow(D-m,2)),g=a.gradient({x:w,y:m},{x:S,y:D}),y=-1/g},"_recalc");this.type="Straight",this.getLength=function(){return p},this.getGradient=function(){return g},this.getCoordinates=function(){return{x1:w,y1:m,x2:S,y2:D}},this.setCoordinates=function(v){w=v.x1,m=v.y1,S=v.x2,D=v.y2,A()},this.setCoordinates({x1:u.x1,y1:u.y1,x2:u.x2,y2:u.y2}),this.getBounds=function(){return{minX:Math.min(w,S),minY:Math.min(m,D),maxX:Math.max(w,S),maxY:Math.max(m,D)}},this.pointOnPath=function(v,T){if(v===0&&!T)return{x:w,y:m};if(v===1&&!T)return{x:S,y:D};var P=T?v>0?v:p+v:v*p;return a.pointOnLine({x:w,y:m},{x:S,y:D},P)},this.gradientAtPoint=function(v){return g},this.pointAlongPathFrom=function(v,T,P){var F=this.pointOnPath(v,P),U=T<=0?{x:w,y:m}:{x:S,y:D};return T<=0&&Math.abs(T)>1&&(T*=-1),a.pointOnLine(F,U,T)};var j=d(function(v,T,P){return P>=Math.min(v,T)&&P<=Math.max(v,T)},"within"),L=d(function(v,T,P){return Math.abs(P-v)<Math.abs(P-T)?v:T},"closest");this.findClosestPointOnPath=function(v,T){var P={d:1/0,x:null,y:null,l:null,x1:w,x2:S,y1:m,y2:D};if(g===0)P.y=m,P.x=j(w,S,v)?v:L(w,S,v);else if(g===1/0||g===-1/0)P.x=w,P.y=j(m,D,T)?T:L(m,D,T);else{var F=m-g*w,U=T-y*v,M=(U-F)/(g-y),V=g*M+F;P.x=j(w,S,M)?M:L(w,S,M),P.y=j(m,D,V)?V:L(m,D,V)}var W=a.lineLength([P.x,P.y],[w,m]);return P.d=a.lineLength([v,T],[P.x,P.y]),P.l=W/p,P};var k=d(function(v,T,P){return P>T?T<=v&&v<=P:T>=v&&v>=P},"_pointLiesBetween"),I=k;this.lineIntersection=function(v,T,P,F){var U=Math.abs(a.gradient({x:v,y:T},{x:P,y:F})),M=Math.abs(g),V=M===1/0?w:m-M*w,W=[],K=U===1/0?v:T-U*v;if(U!==M)if(U===1/0&&M===0)I(v,w,S)&&I(m,T,F)&&(W=[v,m]);else if(U===0&&M===1/0)I(T,m,D)&&I(w,v,P)&&(W=[w,T]);else{var R,X;U===1/0?(R=v,I(R,w,S)&&(X=M*v+V,I(X,T,F)&&(W=[R,X]))):U===0?(X=T,I(X,m,D)&&(R=(T-V)/M,I(R,v,P)&&(W=[R,X]))):(R=(K-V)/(M-U),X=M*R+V,I(R,w,S)&&I(X,m,D)&&(W=[R,X]))}return W},this.boxIntersection=function(v,T,P,F){var U=[];return U.push.apply(U,this.lineIntersection(v,T,v+P,T)),U.push.apply(U,this.lineIntersection(v+P,T,v+P,T+F)),U.push.apply(U,this.lineIntersection(v+P,T+F,v,T+F)),U.push.apply(U,this.lineIntersection(v,T+F,v,T)),U},this.boundingBoxIntersection=function(v){return this.boxIntersection(v.x,v.y,v.w,v.h)}},Arc:function(u){n.Segments.AbstractSegment.apply(this,arguments);var p=d(function(L,k){return a.theta([u.cx,u.cy],[L,k])},"_calcAngle"),g=d(function(L,k){if(L.anticlockwise){var I=L.startAngle<L.endAngle?L.startAngle+y:L.startAngle,v=Math.abs(I-L.endAngle);return I-v*k}else{var T=L.endAngle<L.startAngle?L.endAngle+y:L.endAngle,P=Math.abs(T-L.startAngle);return L.startAngle+P*k}},"_calcAngleForLocation"),y=2*Math.PI;this.radius=u.r,this.anticlockwise=u.ac,this.type="Arc",u.startAngle&&u.endAngle?(this.startAngle=u.startAngle,this.endAngle=u.endAngle,this.x1=u.cx+this.radius*Math.cos(u.startAngle),this.y1=u.cy+this.radius*Math.sin(u.startAngle),this.x2=u.cx+this.radius*Math.cos(u.endAngle),this.y2=u.cy+this.radius*Math.sin(u.endAngle)):(this.startAngle=p(u.x1,u.y1),this.endAngle=p(u.x2,u.y2),this.x1=u.x1,this.y1=u.y1,this.x2=u.x2,this.y2=u.y2),this.endAngle<0&&(this.endAngle+=y),this.startAngle<0&&(this.startAngle+=y);var w=this.endAngle<this.startAngle?this.endAngle+y:this.endAngle;this.sweep=Math.abs(w-this.startAngle),this.anticlockwise&&(this.sweep=y-this.sweep);var S=2*Math.PI*this.radius,m=this.sweep/y,D=S*m;this.getLength=function(){return D},this.getBounds=function(){return{minX:u.cx-u.r,maxX:u.cx+u.r,minY:u.cy-u.r,maxY:u.cy+u.r}};var A=1e-10,j=d(function(L){var k=Math.floor(L),I=Math.ceil(L);return L-k<A?k:I-L<A?I:L},"gentleRound");this.pointOnPath=function(L,k){if(L===0)return{x:this.x1,y:this.y1,theta:this.startAngle};if(L===1)return{x:this.x2,y:this.y2,theta:this.endAngle};k&&(L=L/D);var I=g(this,L),v=u.cx+u.r*Math.cos(I),T=u.cy+u.r*Math.sin(I);return{x:j(v),y:j(T),theta:I}},this.gradientAtPoint=function(L,k){var I=this.pointOnPath(L,k),v=a.normal([u.cx,u.cy],[I.x,I.y]);return!this.anticlockwise&&(v===1/0||v===-1/0)&&(v*=-1),v},this.pointAlongPathFrom=function(L,k,I){var v=this.pointOnPath(L,I),T=k/S*2*Math.PI,P=this.anticlockwise?-1:1,F=v.theta+P*T,U=u.cx+this.radius*Math.cos(F),M=u.cy+this.radius*Math.sin(F);return{x:U,y:M}}},Bezier:function(u){this.curve=[{x:u.x1,y:u.y1},{x:u.cp1x,y:u.cp1y},{x:u.cp2x,y:u.cp2y},{x:u.x2,y:u.y2}];var p=d(function(D){return D[0].x===D[1].x&&D[0].y===D[1].y},"_isPoint"),g=d(function(D,A){return Math.sqrt(Math.pow(D.x-A.x,2)+Math.pow(D.y-A.y,2))},"_dist"),y=function(D){var A={x:0,y:0};if(D===0)return this.curve[0];var j=this.curve.length-1;if(D===1)return this.curve[j];var L=this.curve,k=1-D;if(j===0)return this.curve[0];if(j===1)return{x:k*L[0].x+D*L[1].x,y:k*L[0].y+D*L[1].y};if(j<4){var I=k*k,v=D*D,T=0,P,F,U;return j===2?(L=[L[0],L[1],L[2],A],P=I,F=2*(k*D),U=v):j===3&&(P=I*k,F=3*(I*D),U=3*(k*v),T=D*v),{x:P*L[0].x+F*L[1].x+U*L[2].x+T*L[3].x,y:P*L[0].y+F*L[1].y+U*L[2].y+T*L[3].y}}else return A}.bind(this),w=d(function(D){var A=[];D--;for(var j=0;j<=D;j++)A.push(y(j/D));return A},"_getLUT"),S=function(){p(this.curve)&&(this.length=0);var D=16,A=w(D);this.length=0;for(var j=0;j<D-1;j++){var L=A[j],k=A[j+1];this.length+=g(L,k)}}.bind(this);n.Segments.AbstractSegment.apply(this,arguments),this.bounds={minX:Math.min(u.x1,u.x2,u.cp1x,u.cp2x),minY:Math.min(u.y1,u.y2,u.cp1y,u.cp2y),maxX:Math.max(u.x1,u.x2,u.cp1x,u.cp2x),maxY:Math.max(u.y1,u.y2,u.cp1y,u.cp2y)},this.type="Bezier",S();var m=d(function(D,A,j){return j&&(A=e.jsBezier.locationAlongCurveFrom(D,A>0?0:1,A)),A},"_translateLocation");this.pointOnPath=function(D,A){return D=m(this.curve,D,A),e.jsBezier.pointOnCurve(this.curve,D)},this.gradientAtPoint=function(D,A){return D=m(this.curve,D,A),e.jsBezier.gradientAtPoint(this.curve,D)},this.pointAlongPathFrom=function(D,A,j){return D=m(this.curve,D,j),e.jsBezier.pointAlongCurveFrom(this.curve,D,A)},this.getLength=function(){return this.length},this.getBounds=function(){return this.bounds},this.findClosestPointOnPath=function(D,A){var j=e.jsBezier.nearestPointOnCurve({x:D,y:A},this.curve);return{d:Math.sqrt(Math.pow(j.point.x-D,2)+Math.pow(j.point.y-A,2)),x:j.point.x,y:j.point.y,l:1-j.location,s:this}},this.lineIntersection=function(D,A,j,L){return e.jsBezier.lineIntersection(D,A,j,L,this.curve)}}},n.SegmentRenderer={getPath:function(u,p){return{Straight:function(g){var y=u.getCoordinates();return(g?"M "+y.x1+" "+y.y1+" ":"")+"L "+y.x2+" "+y.y2},Bezier:function(g){var y=u.params;return(g?"M "+y.x2+" "+y.y2+" ":"")+"C "+y.cp2x+" "+y.cp2y+" "+y.cp1x+" "+y.cp1y+" "+y.x1+" "+y.y1},Arc:function(g){var y=u.params,w=u.sweep>Math.PI?1:0,S=u.anticlockwise?0:1;return(g?"M"+u.x1+" "+u.y1+" ":"")+"A "+u.radius+" "+y.r+" 0 "+w+","+S+" "+u.x2+" "+u.y2}}[u.type](p)}};var i=d(function(){this.resetBounds=function(){this.bounds={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}},this.resetBounds()},"AbstractComponent");n.Connectors.AbstractConnector=function(u){i.apply(this,arguments);var p=[],g=0,y=[],w=[],S=u.stub||0,m=s.isArray(S)?S[0]:S,D=s.isArray(S)?S[1]:S,A=u.gap||0,j=s.isArray(A)?A[0]:A,L=s.isArray(A)?A[1]:A,k=null,I=null;this.getPathData=function(){for(var M="",V=0;V<p.length;V++)M+=n.SegmentRenderer.getPath(p[V],V===0),M+=" ";return M},this.findSegmentForPoint=function(M,V){for(var W={d:1/0,s:null,x:null,y:null,l:null},K=0;K<p.length;K++){var R=p[K].findClosestPointOnPath(M,V);R.d<W.d&&(W.d=R.d,W.l=R.l,W.x=R.x,W.y=R.y,W.s=p[K],W.x1=R.x1,W.x2=R.x2,W.y1=R.y1,W.y2=R.y2,W.index=K,W.connectorLocation=y[K][0]+R.l*(y[K][1]-y[K][0]))}return W},this.lineIntersection=function(M,V,W,K){for(var R=[],X=0;X<p.length;X++)R.push.apply(R,p[X].lineIntersection(M,V,W,K));return R},this.boxIntersection=function(M,V,W,K){for(var R=[],X=0;X<p.length;X++)R.push.apply(R,p[X].boxIntersection(M,V,W,K));return R},this.boundingBoxIntersection=function(M){for(var V=[],W=0;W<p.length;W++)V.push.apply(V,p[W].boundingBoxIntersection(M));return V};var v=d(function(){for(var M=0,V=0;V<p.length;V++){var W=p[V].getLength();w[V]=W/g,y[V]=[M,M+=W/g]}},"_updateSegmentProportions"),T=d(function(M,V){var W,K,R;if(V&&(M=M>0?M/g:(g+M)/g),M===1)W=p.length-1,R=1;else if(M===0)R=0,W=0;else if(M>=.5){for(W=0,R=0,K=y.length-1;K>-1;K--)if(y[K][1]>=M&&y[K][0]<=M){W=K,R=(M-y[K][0])/w[K];break}}else for(W=y.length-1,R=1,K=0;K<y.length;K++)if(y[K][1]>=M){W=K,R=(M-y[K][0])/w[K];break}return{segment:p[W],proportion:R,index:W}},"_findSegmentForLocation"),P=d(function(M,V,W){if(!(W.x1===W.x2&&W.y1===W.y2)){var K=new n.Segments[V](W);p.push(K),g+=K.getLength(),M.updateBounds(K)}},"_addSegment"),F=d(function(){g=p.length=y.length=w.length=0},"_clearSegments");this.setSegments=function(M){k=[],g=0;for(var V=0;V<M.length;V++)k.push(M[V]),g+=M[V].getLength()},this.getLength=function(){return g};var U=d(function(M){this.strokeWidth=M.strokeWidth;var V=a.quadrant(M.sourcePos,M.targetPos),W=M.targetPos[0]<M.sourcePos[0],K=M.targetPos[1]<M.sourcePos[1],R=M.strokeWidth||1,X=M.sourceEndpoint.anchor.getOrientation(M.sourceEndpoint),Q=M.targetEndpoint.anchor.getOrientation(M.targetEndpoint),G=W?M.targetPos[0]:M.sourcePos[0],J=K?M.targetPos[1]:M.sourcePos[1],E=Math.abs(M.targetPos[0]-M.sourcePos[0]),O=Math.abs(M.targetPos[1]-M.sourcePos[1]);if(X[0]===0&&X[1]===0||Q[0]===0&&Q[1]===0){var C=E>O?0:1,B=[1,0][C];X=[],Q=[],X[C]=M.sourcePos[C]>M.targetPos[C]?-1:1,Q[C]=M.sourcePos[C]>M.targetPos[C]?1:-1,X[B]=0,Q[B]=0}var z=W?E+j*X[0]:j*X[0],Y=K?O+j*X[1]:j*X[1],se=W?L*Q[0]:E+L*Q[0],le=K?L*Q[1]:O+L*Q[1],te=X[0]*Q[0]+X[1]*Q[1],he={sx:z,sy:Y,tx:se,ty:le,lw:R,xSpan:Math.abs(se-z),ySpan:Math.abs(le-Y),mx:(z+se)/2,my:(Y+le)/2,so:X,to:Q,x:G,y:J,w:E,h:O,segment:V,startStubX:z+X[0]*m,startStubY:Y+X[1]*m,endStubX:se+Q[0]*D,endStubY:le+Q[1]*D,isXGreaterThanStubTimes2:Math.abs(z-se)>m+D,isYGreaterThanStubTimes2:Math.abs(Y-le)>m+D,opposite:te===-1,perpendicular:te===0,orthogonal:te===1,sourceAxis:X[0]===0?"y":"x",points:[G,J,E,O,z,Y,se,le],stubs:[m,D]};return he.anchorOrientation=he.opposite?"opposite":he.orthogonal?"orthogonal":"perpendicular",he},"_prepareCompute");return this.getSegments=function(){return p},this.updateBounds=function(M){var V=M.getBounds();this.bounds.minX=Math.min(this.bounds.minX,V.minX),this.bounds.maxX=Math.max(this.bounds.maxX,V.maxX),this.bounds.minY=Math.min(this.bounds.minY,V.minY),this.bounds.maxY=Math.max(this.bounds.maxY,V.maxY)},this.pointOnPath=function(M,V){var W=T(M,V);return W.segment&&W.segment.pointOnPath(W.proportion,!1)||[0,0]},this.gradientAtPoint=function(M,V){var W=T(M,V);return W.segment&&W.segment.gradientAtPoint(W.proportion,!1)||0},this.pointAlongPathFrom=function(M,V,W){var K=T(M,W);return K.segment&&K.segment.pointAlongPathFrom(K.proportion,V,!1)||[0,0]},this.compute=function(M){I=U.call(this,M),F(),this._compute(I,M),this.x=I.points[0],this.y=I.points[1],this.w=I.points[2],this.h=I.points[3],this.segment=I.segment,v()},{addSegment:P,prepareCompute:U,sourceStub:m,targetStub:D,maxStub:Math.max(m,D),sourceGap:j,targetGap:L,maxGap:Math.max(j,L)}},s.extend(n.Connectors.AbstractConnector,i),n.Endpoints.AbstractEndpoint=function(u){i.apply(this,arguments);var p=this.compute=function(g,y,w,S){var m=this._compute.apply(this,arguments);return this.x=m[0],this.y=m[1],this.w=m[2],this.h=m[3],this.bounds.minX=this.x,this.bounds.minY=this.y,this.bounds.maxX=this.x+this.w,this.bounds.maxY=this.y+this.h,m};return{compute:p,cssClass:u.cssClass}},s.extend(n.Endpoints.AbstractEndpoint,i),n.Endpoints.Dot=function(u){this.type="Dot",n.Endpoints.AbstractEndpoint.apply(this,arguments),u=u||{},this.radius=u.radius||10,this.defaultOffset=.5*this.radius,this.defaultInnerRadius=this.radius/3,this._compute=function(p,g,y,w){this.radius=y.radius||this.radius;var S=p[0]-this.radius,m=p[1]-this.radius,D=this.radius*2,A=this.radius*2;if(y.stroke){var j=y.strokeWidth||1;S-=j,m-=j,D+=j*2,A+=j*2}return[S,m,D,A,this.radius]}},s.extend(n.Endpoints.Dot,n.Endpoints.AbstractEndpoint),n.Endpoints.Rectangle=function(u){this.type="Rectangle",n.Endpoints.AbstractEndpoint.apply(this,arguments),u=u||{},this.width=u.width||20,this.height=u.height||20,this._compute=function(p,g,y,w){var S=y.width||this.width,m=y.height||this.height,D=p[0]-S/2,A=p[1]-m/2;return[D,A,S,m]}},s.extend(n.Endpoints.Rectangle,n.Endpoints.AbstractEndpoint);var r=d(function(u){n.jsPlumbUIComponent.apply(this,arguments),this._jsPlumb.displayElements=[]},"DOMElementEndpoint");s.extend(r,n.jsPlumbUIComponent,{getDisplayElements:function(){return this._jsPlumb.displayElements},appendDisplayElement:function(u){this._jsPlumb.displayElements.push(u)}}),n.Endpoints.Image=function(u){this.type="Image",r.apply(this,arguments),n.Endpoints.AbstractEndpoint.apply(this,arguments);var p=u.onload,g=u.src||u.url,y=u.cssClass?" "+u.cssClass:"";this._jsPlumb.img=new Image,this._jsPlumb.ready=!1,this._jsPlumb.initialized=!1,this._jsPlumb.deleted=!1,this._jsPlumb.widthToUse=u.width,this._jsPlumb.heightToUse=u.height,this._jsPlumb.endpoint=u.endpoint,this._jsPlumb.img.onload=function(){this._jsPlumb!=null&&(this._jsPlumb.ready=!0,this._jsPlumb.widthToUse=this._jsPlumb.widthToUse||this._jsPlumb.img.width,this._jsPlumb.heightToUse=this._jsPlumb.heightToUse||this._jsPlumb.img.height,p&&p(this))}.bind(this),this._jsPlumb.endpoint.setImage=function(w,S){var m=w.constructor===String?w:w.src;p=S,this._jsPlumb.img.src=m,this.canvas!=null&&this.canvas.setAttribute("src",this._jsPlumb.img.src)}.bind(this),this._jsPlumb.endpoint.setImage(g,p),this._compute=function(w,S,m,D){return this.anchorPoint=w,this._jsPlumb.ready?[w[0]-this._jsPlumb.widthToUse/2,w[1]-this._jsPlumb.heightToUse/2,this._jsPlumb.widthToUse,this._jsPlumb.heightToUse]:[0,0,0,0]},this.canvas=n.createElement("img",{position:"absolute",margin:0,padding:0,outline:0},this._jsPlumb.instance.endpointClass+y),this._jsPlumb.widthToUse&&this.canvas.setAttribute("width",this._jsPlumb.widthToUse),this._jsPlumb.heightToUse&&this.canvas.setAttribute("height",this._jsPlumb.heightToUse),this._jsPlumb.instance.appendElement(this.canvas),this.actuallyPaint=function(w,S,m){if(!this._jsPlumb.deleted){this._jsPlumb.initialized||(this.canvas.setAttribute("src",this._jsPlumb.img.src),this.appendDisplayElement(this.canvas),this._jsPlumb.initialized=!0);var D=this.anchorPoint[0]-this._jsPlumb.widthToUse/2,A=this.anchorPoint[1]-this._jsPlumb.heightToUse/2;s.sizeElement(this.canvas,D,A,this._jsPlumb.widthToUse,this._jsPlumb.heightToUse)}},this.paint=function(w,S){this._jsPlumb!=null&&(this._jsPlumb.ready?this.actuallyPaint(w,S):e.setTimeout(function(){this.paint(w,S)}.bind(this),200))}},s.extend(n.Endpoints.Image,[r,n.Endpoints.AbstractEndpoint],{cleanup:function(u){u&&(this._jsPlumb.deleted=!0,this.canvas&&this.canvas.parentNode.removeChild(this.canvas),this.canvas=null)}}),n.Endpoints.Blank=function(u){n.Endpoints.AbstractEndpoint.apply(this,arguments),this.type="Blank",r.apply(this,arguments),this._compute=function(g,y,w,S){return[g[0],g[1],10,0]};var p=u.cssClass?" "+u.cssClass:"";this.canvas=n.createElement("div",{display:"block",width:"1px",height:"1px",background:"transparent",position:"absolute"},this._jsPlumb.instance.endpointClass+p),this._jsPlumb.instance.appendElement(this.canvas),this.paint=function(g,y){s.sizeElement(this.canvas,this.x,this.y,this.w,this.h)}},s.extend(n.Endpoints.Blank,[n.Endpoints.AbstractEndpoint,r],{cleanup:function(){this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)}}),n.Endpoints.Triangle=function(u){this.type="Triangle",n.Endpoints.AbstractEndpoint.apply(this,arguments);var p=this;u=u||{},u.width=u.width||55,u.height=u.height||55,this.width=u.width,this.height=u.height,this._compute=function(g,y,w,S){var m=w.width||p.width,D=w.height||p.height,A=g[0]-m/2,j=g[1]-D/2;return[A,j,m,D]}};var o=n.Overlays.AbstractOverlay=function(u){this.visible=!0,this.isAppendedAtTopLevel=!0,this.component=u.component,this.loc=u.location==null?.5:u.location,this.endpointLoc=u.endpointLocation==null?[.5,.5]:u.endpointLocation,this.visible=u.visible!==!1};o.prototype={cleanup:function(u){u&&(this.component=null,this.canvas=null,this.endpointLoc=null)},reattach:function(u,p){},setVisible:function(u){this.visible=u,this.component.repaint()},isVisible:function(){return this.visible},hide:function(){this.setVisible(!1)},show:function(){this.setVisible(!0)},incrementLocation:function(u){this.loc+=u,this.component.repaint()},setLocation:function(u){this.loc=u,this.component.repaint()},getLocation:function(){return this.loc},updateFrom:function(){}},n.Overlays.Arrow=function(u){this.type="Arrow",o.apply(this,arguments),this.isAppendedAtTopLevel=!1,u=u||{};var p=this;this.length=u.length||20,this.width=u.width||20,this.id=u.id,this.direction=(u.direction||1)<0?-1:1;var g=u.paintStyle||{"stroke-width":1},y=u.foldback||.623;this.computeMaxSize=function(){return p.width*1.5},this.elementCreated=function(w,S){if(this.path=w,u.events)for(var m in u.events)n.on(w,m,u.events[m])},this.draw=function(w,S){var m,D,A,j,L;if(w.pointAlongPathFrom){if(s.isString(this.loc)||this.loc>1||this.loc<0){var k=parseInt(this.loc,10),I=this.loc<0?1:0;m=w.pointAlongPathFrom(I,k,!1),D=w.pointAlongPathFrom(I,k-this.direction*this.length/2,!1),A=a.pointOnLine(m,D,this.length)}else if(this.loc===1){if(m=w.pointOnPath(this.loc),D=w.pointAlongPathFrom(this.loc,-this.length),A=a.pointOnLine(m,D,this.length),this.direction===-1){var v=A;A=m,m=v}}else if(this.loc===0){if(A=w.pointOnPath(this.loc),D=w.pointAlongPathFrom(this.loc,this.length),m=a.pointOnLine(A,D,this.length),this.direction===-1){var T=A;A=m,m=T}}else m=w.pointAlongPathFrom(this.loc,this.direction*this.length/2),D=w.pointOnPath(this.loc),A=a.pointOnLine(m,D,this.length);j=a.perpendicularLineTo(m,A,this.width),L=a.pointOnLine(m,A,y*this.length);var P={hxy:m,tail:j,cxy:L},F=g.stroke||S.stroke,U=g.fill||S.stroke,M=g.strokeWidth||S.strokeWidth;return{component:w,d:P,"stroke-width":M,stroke:F,fill:U,minX:Math.min(m.x,j[0].x,j[1].x),maxX:Math.max(m.x,j[0].x,j[1].x),minY:Math.min(m.y,j[0].y,j[1].y),maxY:Math.max(m.y,j[0].y,j[1].y)}}else return{component:w,minX:0,maxX:0,minY:0,maxY:0}}},s.extend(n.Overlays.Arrow,o,{updateFrom:function(u){this.length=u.length||this.length,this.width=u.width||this.width,this.direction=u.direction!=null?u.direction:this.direction,this.foldback=u.foldback||this.foldback},cleanup:function(){this.path&&this.path.parentNode&&this.path.parentNode.removeChild(this.path)}}),n.Overlays.PlainArrow=function(u){u=u||{};var p=n.extend(u,{foldback:1});n.Overlays.Arrow.call(this,p),this.type="PlainArrow"},s.extend(n.Overlays.PlainArrow,n.Overlays.Arrow),n.Overlays.Diamond=function(u){u=u||{};var p=u.length||40,g=n.extend(u,{length:p/2,foldback:2});n.Overlays.Arrow.call(this,g),this.type="Diamond"},s.extend(n.Overlays.Diamond,n.Overlays.Arrow);var c=d(function(u,p){return(u._jsPlumb.cachedDimensions==null||p)&&(u._jsPlumb.cachedDimensions=u.getDimensions()),u._jsPlumb.cachedDimensions},"_getDimensions"),l=d(function(u){n.jsPlumbUIComponent.apply(this,arguments),o.apply(this,arguments);var p=this.fire;this.fire=function(){p.apply(this,arguments),this.component&&this.component.fire.apply(this.component,arguments)},this.detached=!1,this.id=u.id,this._jsPlumb.div=null,this._jsPlumb.initialised=!1,this._jsPlumb.component=u.component,this._jsPlumb.cachedDimensions=null,this._jsPlumb.create=u.create,this._jsPlumb.initiallyInvisible=u.visible===!1,this.getElement=function(){if(this._jsPlumb.div==null){var g=this._jsPlumb.div=n.getElement(this._jsPlumb.create(this._jsPlumb.component));g.style.position="absolute",jsPlumb.addClass(g,this._jsPlumb.instance.overlayClass+" "+(this.cssClass?this.cssClass:u.cssClass?u.cssClass:"")),this._jsPlumb.instance.appendElement(g),this._jsPlumb.instance.getId(g),this.canvas=g;var y="translate(-50%, -50%)";g.style.webkitTransform=y,g.style.mozTransform=y,g.style.msTransform=y,g.style.oTransform=y,g.style.transform=y,g._jsPlumb=this,u.visible===!1&&(g.style.display="none")}return this._jsPlumb.div},this.draw=function(g,y,w){var S=c(this);if(S!=null&&S.length===2){var m={x:0,y:0};if(w)m={x:w[0],y:w[1]};else if(g.pointOnPath){var D=this.loc,A=!1;(s.isString(this.loc)||this.loc<0||this.loc>1)&&(D=parseInt(this.loc,10),A=!0),m=g.pointOnPath(D,A)}else{var j=this.loc.constructor===Array?this.loc:this.endpointLoc;m={x:j[0]*g.w,y:j[1]*g.h}}var L=m.x-S[0]/2,k=m.y-S[1]/2;return{component:g,d:{minx:L,miny:k,td:S,cxy:m},minX:L,maxX:L+S[0],minY:k,maxY:k+S[1]}}else return{minX:0,maxX:0,minY:0,maxY:0}}},"AbstractDOMOverlay");s.extend(l,[n.jsPlumbUIComponent,o],{getDimensions:function(){return[1,1]},setVisible:function(u){this._jsPlumb.div&&(this._jsPlumb.div.style.display=u?"block":"none",u&&this._jsPlumb.initiallyInvisible&&(c(this,!0),this.component.repaint(),this._jsPlumb.initiallyInvisible=!1))},clearCachedDimensions:function(){this._jsPlumb.cachedDimensions=null},cleanup:function(u){u?this._jsPlumb.div!=null&&(this._jsPlumb.div._jsPlumb=null,this._jsPlumb.instance.removeElement(this._jsPlumb.div)):(this._jsPlumb&&this._jsPlumb.div&&this._jsPlumb.div.parentNode&&this._jsPlumb.div.parentNode.removeChild(this._jsPlumb.div),this.detached=!0)},reattach:function(u,p){this._jsPlumb.div!=null&&u.getContainer().appendChild(this._jsPlumb.div),this.detached=!1},computeMaxSize:function(){var u=c(this);return Math.max(u[0],u[1])},paint:function(u,p){this._jsPlumb.initialised||(this.getElement(),u.component.appendDisplayElement(this._jsPlumb.div),this._jsPlumb.initialised=!0,this.detached&&this._jsPlumb.div.parentNode.removeChild(this._jsPlumb.div)),this._jsPlumb.div.style.left=u.component.x+u.d.minx+"px",this._jsPlumb.div.style.top=u.component.y+u.d.miny+"px"}}),n.Overlays.Custom=function(u){this.type="Custom",l.apply(this,arguments)},s.extend(n.Overlays.Custom,l),n.Overlays.GuideLines=function(){var u=this;u.length=50,u.strokeWidth=5,this.type="GuideLines",o.apply(this,arguments),n.jsPlumbUIComponent.apply(this,arguments),this.draw=function(p,g){var y=p.pointAlongPathFrom(u.loc,u.length/2),w=p.pointOnPath(u.loc),S=a.pointOnLine(y,w,u.length),m=a.perpendicularLineTo(y,S,40),D=a.perpendicularLineTo(S,y,20);return{connector:p,head:y,tail:S,headLine:D,tailLine:m,minX:Math.min(y.x,S.x,D[0].x,D[1].x),minY:Math.min(y.y,S.y,D[0].y,D[1].y),maxX:Math.max(y.x,S.x,D[0].x,D[1].x),maxY:Math.max(y.y,S.y,D[0].y,D[1].y)}}},n.Overlays.Label=function(u){this.labelStyle=u.labelStyle,this.cssClass=this.labelStyle!=null?this.labelStyle.cssClass:null;var p=n.extend({create:function(){return n.createElement("div")}},u);if(n.Overlays.Custom.call(this,p),this.type="Label",this.label=u.label||"",this.labelText=null,this.labelStyle){var g=this.getElement();if(this.labelStyle.font=this.labelStyle.font||"12px sans-serif",g.style.font=this.labelStyle.font,g.style.color=this.labelStyle.color||"black",this.labelStyle.fill&&(g.style.background=this.labelStyle.fill),this.labelStyle.borderWidth>0){var y=this.labelStyle.borderStyle?this.labelStyle.borderStyle:"black";g.style.border=this.labelStyle.borderWidth+"px solid "+y}this.labelStyle.padding&&(g.style.padding=this.labelStyle.padding)}},s.extend(n.Overlays.Label,n.Overlays.Custom,{cleanup:function(u){u&&(this.div=null,this.label=null,this.labelText=null,this.cssClass=null,this.labelStyle=null)},getLabel:function(){return this.label},setLabel:function(u){this.label=u,this.labelText=null,this.clearCachedDimensions(),this.update(),this.component.repaint()},getDimensions:function(){return this.update(),l.prototype.getDimensions.apply(this,arguments)},update:function(){if(typeof this.label=="function"){var u=this.label(this);this.getElement().innerHTML=u.replace(/\r\n/g,"<br/>")}else this.labelText==null&&(this.labelText=this.label,this.getElement().innerHTML=this.labelText.replace(/\r\n/g,"<br/>"))},updateFrom:function(u){u.label!=null&&this.setLabel(u.label)}})}.call(typeof window<"u"?window:ht),function(){var e=this,n=e.jsPlumbUtil,s=e.jsPlumbInstance,a="jtk-group-collapsed",i="jtk-group-expanded",r="[jtk-group-content]",o="elementDraggable",c="stop",l="revert",u="_groupManager",p="_jsPlumbGroup",g="_jsPlumbGroupDrag",y="group:addMember",w="group:removeMember",S="group:add",m="group:remove",D="group:expand",A="group:collapse",j="groupDragStop",L="connectionMoved",k="internal.connectionDetached",I="removeAll",v="orphanAll",T="show",P="hide",F=d(function(M){var V={},W={},K={},R=this;function X(C,B){for(var z=M.getContainer(),Y=!1;!Y;){if(C==null||C===z)return!1;if(C===B)return!0;C=C.parentNode}}d(X,"isDescendant"),M.bind("connection",function(C){var B=M.getGroupFor(C.source),z=M.getGroupFor(C.target);B!=null&&z!=null&&B===z?(W[C.connection.id]=B,K[C.connection.id]=B):(B!=null&&(n.suggest(B.connections.source,C.connection),W[C.connection.id]=B),z!=null&&(n.suggest(z.connections.target,C.connection),K[C.connection.id]=z))});function Q(C){delete C.proxies;var B=W[C.id],z;B!=null&&(z=d(function(Y){return Y.id===C.id},"f"),n.removeWithFunction(B.connections.source,z),n.removeWithFunction(B.connections.target,z),delete W[C.id]),B=K[C.id],B!=null&&(z=d(function(Y){return Y.id===C.id},"f"),n.removeWithFunction(B.connections.source,z),n.removeWithFunction(B.connections.target,z),delete K[C.id])}d(Q,"_cleanupDetachedConnection"),M.bind(k,function(C){Q(C.connection)}),M.bind(L,function(C){var B=C.index===0?W:K,z=B[C.connection.id];if(z){var Y=z.connections[C.index===0?"source":"target"],se=Y.indexOf(C.connection);se!==-1&&Y.splice(se,1)}}),this.addGroup=function(C){M.addClass(C.getEl(),i),V[C.id]=C,C.manager=this,O(C),M.fire(S,{group:C})},this.addToGroup=function(C,B,z){if(C=this.getGroup(C),C){var Y=C.getEl();if(B._isJsPlumbGroup)return;var se=B._jsPlumbGroup;if(se!==C){M.removeFromDragSelection(B);var le=M.getOffset(B,!0),te=C.collapsed?M.getOffset(Y,!0):M.getOffset(C.getDragArea(),!0);se!=null&&(se.remove(B,!1,z,!1,C),R.updateConnectionsForGroup(se)),C.add(B,z);var he=d(function(ye,ke){var Ie=ke===0?1:0;ye.each(function(_e){_e.setVisible(!1),_e.endpoints[Ie].element._jsPlumbGroup===C?(_e.endpoints[Ie].setVisible(!1),E(_e,Ie,C)):(_e.endpoints[ke].setVisible(!1),J(_e,ke,C))})},"handleDroppedConnections");C.collapsed&&(he(M.select({source:B}),0),he(M.select({target:B}),1));var fe=M.getId(B);M.dragManager.setParent(B,fe,Y,M.getId(Y),le);var be={left:le.left-te.left,top:le.top-te.top};if(M.setPosition(B,be),M.dragManager.revalidateParent(B,fe,le),R.updateConnectionsForGroup(C),M.revalidate(fe),!z){var ge={group:C,el:B,pos:be};se&&(ge.sourceGroup=se),M.fire(y,ge)}}}},this.removeFromGroup=function(C,B,z){if(C=this.getGroup(C),C){if(C.collapsed){var Y=d(function(se,le){for(var te=0;te<se.length;te++){var he=se[te];if(he.proxies){for(var fe=0;fe<he.proxies.length;fe++)if(he.proxies[fe]!=null){var be=he.proxies[fe].originalEp.element;(be===B||X(be,B))&&E(he,le,C)}}}},"_expandSet");Y(C.connections.source.slice(),0),Y(C.connections.target.slice(),1)}C.remove(B,null,z)}},this.getGroup=function(C){var B=C;if(n.isString(C)&&(B=V[C],B==null))throw new TypeError("No such group ["+C+"]");return B},this.getGroups=function(){var C=[];for(var B in V)C.push(V[B]);return C},this.removeGroup=function(C,B,z,Y){C=this.getGroup(C),this.expandGroup(C,!0);var se=C[B?I:v](z,Y);return M.remove(C.getEl()),delete V[C.id],delete M._groups[C.id],M.fire(m,{group:C}),se},this.removeAllGroups=function(C,B,z){for(var Y in V)this.removeGroup(V[Y],C,B,z)};function G(C,B){for(var z=C.getEl().querySelectorAll(".jtk-managed"),Y=0;Y<z.length;Y++)M[B?T:P](z[Y],!0)}d(G,"_setVisible");var J=d(function(C,B,z){var Y=C.endpoints[B===0?1:0].element;if(!(Y[p]&&!Y[p].shouldProxy()&&Y[p].collapsed)){var se=z.getEl(),le=M.getId(se);M.proxyConnection(C,B,se,le,function(te,he){return z.getEndpoint(te,he)},function(te,he){return z.getAnchor(te,he)})}},"_collapseConnection");this.collapseGroup=function(C){if(C=this.getGroup(C),!(C==null||C.collapsed)){var B=C.getEl();if(G(C,!1),C.shouldProxy()){var z=d(function(Y,se){for(var le=0;le<Y.length;le++){var te=Y[le];J(te,se,C)}},"_collapseSet");z(C.connections.source,0),z(C.connections.target,1)}C.collapsed=!0,M.removeClass(B,i),M.addClass(B,a),M.revalidate(B),M.fire(A,{group:C})}};var E=d(function(C,B,z){M.unproxyConnection(C,B,M.getId(z.getEl()))},"_expandConnection");this.expandGroup=function(C,B){if(C=this.getGroup(C),!(C==null||!C.collapsed)){var z=C.getEl();if(G(C,!0),C.shouldProxy()){var Y=d(function(se,le){for(var te=0;te<se.length;te++){var he=se[te];E(he,le,C)}},"_expandSet");Y(C.connections.source,0),Y(C.connections.target,1)}C.collapsed=!1,M.addClass(z,i),M.removeClass(z,a),M.revalidate(z),this.repaintGroup(C),B||M.fire(D,{group:C})}},this.repaintGroup=function(C){C=this.getGroup(C);for(var B=C.getMembers(),z=0;z<B.length;z++)M.revalidate(B[z])};function O(C){for(var B=C.getMembers().slice(),z=[],Y=0;Y<B.length;Y++)Array.prototype.push.apply(z,B[Y].querySelectorAll(".jtk-managed"));Array.prototype.push.apply(B,z);var se=M.getConnections({source:B,scope:"*"},!0),le=M.getConnections({target:B,scope:"*"},!0),te={};C.connections.source.length=0,C.connections.target.length=0;var he=d(function(fe){for(var be=0;be<fe.length;be++)if(!te[fe[be].id]){te[fe[be].id]=!0;var ge=M.getGroupFor(fe[be].source),ye=M.getGroupFor(fe[be].target);ge===C?(ye!==C&&C.connections.source.push(fe[be]),W[fe[be].id]=C):ye===C&&(C.connections.target.push(fe[be]),K[fe[be].id]=C)}},"oneSet");he(se),he(le)}d(O,"_updateConnectionsForGroup"),this.updateConnectionsForGroup=O,this.refreshAllGroups=function(){for(var C in V)O(V[C]),M.dragManager.updateOffsets(M.getId(V[C].getEl()))}},"GroupManager"),U=d(function(M,V){var W=this,K=V.el;this.getEl=function(){return K},this.id=V.id||n.uuid(),K._isJsPlumbGroup=!0;var R=this.getDragArea=function(){var ye=M.getSelector(K,r);return ye&&ye.length>0?ye[0]:K},X=V.ghost===!0,Q=X||V.constrain===!0,G=V.revert!==!1,J=V.orphan===!0,E=V.prune===!0,O=V.dropOverride===!0,C=V.proxied!==!1,B=[];if(this.connections={source:[],target:[],internal:[]},this.getAnchor=function(ye,ke){return V.anchor||"Continuous"},this.getEndpoint=function(ye,ke){return V.endpoint||["Dot",{radius:10}]},this.collapsed=!1,V.draggable!==!1){var z={drag:function(){for(var ye=0;ye<B.length;ye++)M.draw(B[ye])},stop:function(ye){M.fire(j,jsPlumb.extend(ye,{group:W}))},scope:g};V.dragOptions&&e.jsPlumb.extend(z,V.dragOptions),M.draggable(V.el,z)}V.droppable!==!1&&M.droppable(V.el,{drop:function(ye){var ke=ye.drag.el;if(!ke._isJsPlumbGroup){var Ie=ke._jsPlumbGroup;if(Ie!==W){if(Ie!=null&&Ie.overrideDrop(ke,W))return;M.getGroupManager().addToGroup(W,ke,!1)}}}});var Y=d(function(ye,ke){for(var Ie=ye.nodeType==null?ye:[ye],_e=0;_e<Ie.length;_e++)ke(Ie[_e])},"_each");this.overrideDrop=function(ye,ke){return O&&(G||E||J)},this.add=function(ye,ke){var Ie=R();Y(ye,function(_e){if(_e._jsPlumbGroup!=null){if(_e._jsPlumbGroup===W)return;_e._jsPlumbGroup.remove(_e,!0,ke,!1)}_e._jsPlumbGroup=W,B.push(_e),M.isAlreadyDraggable(_e)&&ge(_e),_e.parentNode!==Ie&&Ie.appendChild(_e)}),M.getGroupManager().updateConnectionsForGroup(W)},this.remove=function(ye,ke,Ie,_e,Ue){Y(ye,function(Fe){if(Fe._jsPlumbGroup===W){if(delete Fe._jsPlumbGroup,n.removeWithFunction(B,function(de){return de===Fe}),ke)try{W.getDragArea().removeChild(Fe)}catch(de){jsPlumbUtil.log("Could not remove element from Group "+de)}if(be(Fe),!Ie){var xe={group:W,el:Fe};Ue&&(xe.targetGroup=Ue),M.fire(w,xe)}}}),_e||M.getGroupManager().updateConnectionsForGroup(W)},this.removeAll=function(ye,ke){for(var Ie=0,_e=B.length;Ie<_e;Ie++){var Ue=B[0];W.remove(Ue,ye,ke,!0),M.remove(Ue,!0)}B.length=0,M.getGroupManager().updateConnectionsForGroup(W)},this.orphanAll=function(){for(var ye={},ke=0;ke<B.length;ke++){var Ie=te(B[ke]);ye[Ie[0]]=Ie[1]}return B.length=0,ye},this.getMembers=function(){return B},K[p]=this,M.bind(o,function(ye){ye.el._jsPlumbGroup===this&&ge(ye.el)}.bind(this));function se(ye){return ye.offsetParent}d(se,"_findParent");function le(ye,ke){var Ie=se(ye),_e=M.getSize(Ie),Ue=M.getSize(ye),Fe=ke[0],xe=Fe+Ue[0],de=ke[1],we=de+Ue[1];return xe>0&&Fe<_e[0]&&we>0&&de<_e[1]}d(le,"_isInsideParent");function te(ye){var ke=M.getId(ye),Ie=M.getOffset(ye);return ye.parentNode.removeChild(ye),M.getContainer().appendChild(ye),M.setPosition(ye,Ie),be(ye),M.dragManager.clearParent(ye,ke),[ke,Ie]}d(te,"_orphan");function he(ye){var ke=[];function Ie(Ue,Fe,xe){var de=null;if(!le(Ue,[Fe,xe])){var we=Ue._jsPlumbGroup;E?M.remove(Ue):de=te(Ue),we.remove(Ue)}return de}d(Ie,"_one");for(var _e=0;_e<ye.selection.length;_e++)ke.push(Ie(ye.selection[_e][0],ye.selection[_e][1].left,ye.selection[_e][1].top));return ke.length===1?ke[0]:ke}d(he,"_pruneOrOrphan");function fe(ye){var ke=M.getId(ye);M.revalidate(ye),M.dragManager.revalidateParent(ye,ke)}d(fe,"_revalidate");function be(ye){ye._katavorioDrag&&((E||J)&&ye._katavorioDrag.off(c,he),!E&&!J&&G&&(ye._katavorioDrag.off(l,fe),ye._katavorioDrag.setRevert(null)))}d(be,"_unbindDragHandlers");function ge(ye){ye._katavorioDrag&&((E||J)&&ye._katavorioDrag.on(c,he),Q&&ye._katavorioDrag.setConstrain(!0),X&&ye._katavorioDrag.setUseGhostProxy(!0),!E&&!J&&G&&(ye._katavorioDrag.on(l,fe),ye._katavorioDrag.setRevert(function(ke,Ie){return!le(ke,Ie)})))}d(ge,"_bindDragHandlers"),this.shouldProxy=function(){return C},M.getGroupManager().addGroup(this)},"Group");s.prototype.addGroup=function(M){var V=this;if(V._groups=V._groups||{},V._groups[M.id]!=null)throw new TypeError("cannot create Group ["+M.id+"]; a Group with that ID exists");if(M.el[p]!=null)throw new TypeError("cannot create Group ["+M.id+"]; the given element is already a Group");var W=new U(V,M);return V._groups[W.id]=W,M.collapsed&&this.collapseGroup(W),W},s.prototype.addToGroup=function(M,V,W){var K=function(X){var Q=this.getId(X);this.manage(Q,X),this.getGroupManager().addToGroup(M,X,W)}.bind(this);if(Array.isArray(V))for(var R=0;R<V.length;R++)K(V[R]);else K(V)},s.prototype.removeFromGroup=function(M,V,W){this.getGroupManager().removeFromGroup(M,V,W),this.getContainer().appendChild(V)},s.prototype.removeGroup=function(M,V,W,K){return this.getGroupManager().removeGroup(M,V,W,K)},s.prototype.removeAllGroups=function(M,V,W){this.getGroupManager().removeAllGroups(M,V,W)},s.prototype.getGroup=function(M){return this.getGroupManager().getGroup(M)},s.prototype.getGroups=function(){return this.getGroupManager().getGroups()},s.prototype.expandGroup=function(M){this.getGroupManager().expandGroup(M)},s.prototype.collapseGroup=function(M){this.getGroupManager().collapseGroup(M)},s.prototype.repaintGroup=function(M){this.getGroupManager().repaintGroup(M)},s.prototype.toggleGroup=function(M){M=this.getGroupManager().getGroup(M),M!=null&&this.getGroupManager()[M.collapsed?"expandGroup":"collapseGroup"](M)},s.prototype.getGroupManager=function(){var M=this[u];return M==null&&(M=this[u]=new F(this)),M},s.prototype.removeGroupManager=function(){delete this[u]},s.prototype.getGroupFor=function(M){if(M=this.getElement(M),M){for(var V=this.getContainer(),W=!1,K=null;!W;)M==null||M===V?W=!0:M[p]?(K=M[p],W=!0):M=M.parentNode;return K}}}.call(typeof window<"u"?window:ht),function(){var e=this,n=e.jsPlumb,s=e.jsPlumbUtil,a="Straight",i="Arc",r=d(function(o){this.type="Flowchart",o=o||{},o.stub=o.stub==null?30:o.stub;var c,l=n.Connectors.AbstractConnector.apply(this,arguments),u=o.midpoint==null||isNaN(o.midpoint)?.5:o.midpoint,p=o.alwaysRespectStubs===!0,g=null,y=null,w=o.cornerRadius!=null?o.cornerRadius:0;o.loopbackRadius;var S=d(function(k){return k<0?-1:k===0?0:1},"sgn"),m=d(function(k){return[S(k[2]-k[0]),S(k[3]-k[1])]},"segmentDirections"),D=d(function(k,I,v,T){if(!(g===I&&y===v)){var P=g??T.sx,F=y??T.sy,U=P===I?"v":"h";g=I,y=v,k.push([P,F,I,v,U])}},"addSegment"),A=d(function(k){return Math.sqrt(Math.pow(k[0]-k[2],2)+Math.pow(k[1]-k[3],2))},"segLength"),j=d(function(k){var I=[];return I.push.apply(I,k),I},"_cloneArray"),L=d(function(k,I,v){for(var T=null,P,F,U,M=0;M<I.length-1;M++){if(T=T||j(I[M]),P=j(I[M+1]),F=m(T),U=m(P),w>0&&T[4]!==P[4]){var V=Math.min(A(T),A(P)),W=Math.min(w,V/2);T[2]-=F[0]*W,T[3]-=F[1]*W,P[0]+=U[0]*W,P[1]+=U[1]*W;var K=F[1]===U[0]&&U[0]===1||F[1]===U[0]&&U[0]===0&&F[0]!==U[1]||F[1]===U[0]&&U[0]===-1,R=P[1]>T[3]?1:-1,X=P[0]>T[2]?1:-1,Q=R===X,G=Q&&K||!Q&&!K?P[0]:T[2],J=Q&&K||!Q&&!K?T[3]:P[1];l.addSegment(k,a,{x1:T[0],y1:T[1],x2:T[2],y2:T[3]}),l.addSegment(k,i,{r:W,x1:T[2],y1:T[3],x2:P[0],y2:P[1],cx:G,cy:J,ac:K})}else{var E=T[2]===T[0]?0:T[2]>T[0]?v.lw/2:-(v.lw/2),O=T[3]===T[1]?0:T[3]>T[1]?v.lw/2:-(v.lw/2);l.addSegment(k,a,{x1:T[0]-E,y1:T[1]-O,x2:T[2]+E,y2:T[3]+O})}T=P}P!=null&&l.addSegment(k,a,{x1:P[0],y1:P[1],x2:P[2],y2:P[3]})},"writeSegments");this.midpoint=u,this._compute=function(k,I){c=[],g=null,y=null;var v=d(function(){return[k.startStubX,k.startStubY,k.endStubX,k.endStubY]},"commonStubCalculator"),T={perpendicular:v,orthogonal:v,opposite:function(O){var C=k,B=O==="x"?0:1,z={x:function(){return C.so[B]===1&&(C.startStubX>C.endStubX&&C.tx>C.startStubX||C.sx>C.endStubX&&C.tx>C.sx)||C.so[B]===-1&&(C.startStubX<C.endStubX&&C.tx<C.startStubX||C.sx<C.endStubX&&C.tx<C.sx)},y:function(){return C.so[B]===1&&(C.startStubY>C.endStubY&&C.ty>C.startStubY||C.sy>C.endStubY&&C.ty>C.sy)||C.so[B]===-1&&(C.startStubY<C.endStubY&&C.ty<C.startStubY||C.sy<C.endStubY&&C.ty<C.sy)}};return!p&&z[O]()?{x:[(k.sx+k.tx)/2,k.startStubY,(k.sx+k.tx)/2,k.endStubY],y:[k.startStubX,(k.sy+k.ty)/2,k.endStubX,(k.sy+k.ty)/2]}[O]:[k.startStubX,k.startStubY,k.endStubX,k.endStubY]}},P=T[k.anchorOrientation](k.sourceAxis),F=k.sourceAxis==="x"?0:1,U=k.sourceAxis==="x"?1:0,M=P[F],V=P[U],W=P[F+2],K=P[U+2];D(c,P[0],P[1],k);var R=k.startStubX+(k.endStubX-k.startStubX)*u,X=k.startStubY+(k.endStubY-k.startStubY)*u,Q={x:[0,1],y:[1,0]},G={perpendicular:function(O){var C=k,B={x:[[[1,2,3,4],null,[2,1,4,3]],null,[[4,3,2,1],null,[3,4,1,2]]],y:[[[3,2,1,4],null,[2,3,4,1]],null,[[4,1,2,3],null,[1,4,3,2]]]},z={x:[[C.startStubX,C.endStubX],null,[C.endStubX,C.startStubX]],y:[[C.startStubY,C.endStubY],null,[C.endStubY,C.startStubY]]},Y={x:[[R,C.startStubY],[R,C.endStubY]],y:[[C.startStubX,X],[C.endStubX,X]]},se={x:[[C.endStubX,C.startStubY]],y:[[C.startStubX,C.endStubY]]},le={x:[[C.startStubX,C.endStubY],[C.endStubX,C.endStubY]],y:[[C.endStubX,C.startStubY],[C.endStubX,C.endStubY]]},te={x:[[C.startStubX,X],[C.endStubX,X],[C.endStubX,C.endStubY]],y:[[R,C.startStubY],[R,C.endStubY],[C.endStubX,C.endStubY]]},he={x:[C.startStubY,C.endStubY],y:[C.startStubX,C.endStubX]},fe=Q[O][0],be=Q[O][1],ge=C.so[fe]+1,ye=C.to[be]+1,ke=C.to[be]===-1&&he[O][1]<he[O][0]||C.to[be]===1&&he[O][1]>he[O][0],Ie=z[O][ge][0],_e=z[O][ge][1],Ue=B[O][ge][ye];if(C.segment===Ue[3]||C.segment===Ue[2]&&ke)return Y[O];if(C.segment===Ue[2]&&_e<Ie)return se[O];if(C.segment===Ue[2]&&_e>=Ie||C.segment===Ue[1]&&!ke)return te[O];if(C.segment===Ue[0]||C.segment===Ue[1]&&ke)return le[O]},orthogonal:function(O,C,B,z,Y){var se=k,le={x:se.so[0]===-1?Math.min(C,z):Math.max(C,z),y:se.so[1]===-1?Math.min(C,z):Math.max(C,z)}[O];return{x:[[le,B],[le,Y],[z,Y]],y:[[B,le],[Y,le],[Y,z]]}[O]},opposite:function(O,C,B,z){var Y=k,se={x:"y",y:"x"}[O],le={x:"height",y:"width"}[O],te=Y["is"+O.toUpperCase()+"GreaterThanStubTimes2"];if(I.sourceEndpoint.elementId===I.targetEndpoint.elementId){var he=B+(1-I.sourceEndpoint.anchor[se])*I.sourceInfo[le]+l.maxStub;return{x:[[C,he],[z,he]],y:[[he,C],[he,z]]}[O]}else{if(!te||Y.so[F]===1&&C>z||Y.so[F]===-1&&C<z)return{x:[[C,X],[z,X]],y:[[R,C],[R,z]]}[O];if(Y.so[F]===1&&C<z||Y.so[F]===-1&&C>z)return{x:[[R,Y.sy],[R,Y.ty]],y:[[Y.sx,X],[Y.tx,X]]}[O]}}},J=G[k.anchorOrientation](k.sourceAxis,M,V,W,K);if(J)for(var E=0;E<J.length;E++)D(c,J[E][0],J[E][1],k);D(c,P[2],P[3],k),D(c,k.tx,k.ty,k),L(this,c,k)}},"Flowchart");n.Connectors.Flowchart=r,s.extend(n.Connectors.Flowchart,n.Connectors.AbstractConnector)}.call(typeof window<"u"?window:ht),function(){var e=this,n=e.jsPlumb,s=e.jsPlumbUtil;n.Connectors.AbstractBezierConnector=function(i){i=i||{};var r=i.showLoopback!==!1;i.curviness;var o=i.margin||5;i.proximityLimit;var c=i.orientation&&i.orientation==="clockwise",l=i.loopbackRadius||25,u;return this._compute=function(p,g){var y=g.sourcePos,w=g.targetPos,S=Math.abs(y[0]-w[0]),m=Math.abs(y[1]-w[1]);if(!r||g.sourceEndpoint.elementId!==g.targetEndpoint.elementId)this._computeBezier(p,g,y,w,S,m);else{var D=g.sourcePos[0],A=g.sourcePos[1]-o,j=D,L=A-l,k=j-l,I=L-l;S=2*l,m=2*l,p.points[0]=k,p.points[1]=I,p.points[2]=S,p.points[3]=m,u.addSegment(this,"Arc",{loopback:!0,x1:D-k+4,y1:A-I,startAngle:0,endAngle:2*Math.PI,r:l,ac:!c,x2:D-k-4,y2:A-I,cx:j-k,cy:L-I})}},u=n.Connectors.AbstractConnector.apply(this,arguments),u},s.extend(n.Connectors.AbstractBezierConnector,n.Connectors.AbstractConnector);var a=d(function(i){i=i||{},this.type="Bezier";var r=n.Connectors.AbstractBezierConnector.apply(this,arguments),o=i.curviness||150,c=10;this.getCurviness=function(){return o},this._findControlPoint=function(l,u,p,g,y,w,S){var m=w[0]!==S[0]||w[1]===S[1],D=[];return m?(S[0]===0?D.push(p[0]<u[0]?l[0]+c:l[0]-c):D.push(l[0]+o*S[0]),S[1]===0?D.push(p[1]<u[1]?l[1]+c:l[1]-c):D.push(l[1]+o*w[1])):(w[0]===0?D.push(u[0]<p[0]?l[0]+c:l[0]-c):D.push(l[0]-o*w[0]),w[1]===0?D.push(u[1]<p[1]?l[1]+c:l[1]-c):D.push(l[1]+o*S[1])),D},this._computeBezier=function(l,u,p,g,y,w){var S,m,D=p[0]<g[0]?y:0,A=p[1]<g[1]?w:0,j=p[0]<g[0]?0:y,L=p[1]<g[1]?0:w;S=this._findControlPoint([D,A],p,g,u.sourceEndpoint,u.targetEndpoint,l.so,l.to),m=this._findControlPoint([j,L],g,p,u.targetEndpoint,u.sourceEndpoint,l.to,l.so),r.addSegment(this,"Bezier",{x1:D,y1:A,x2:j,y2:L,cp1x:S[0],cp1y:S[1],cp2x:m[0],cp2y:m[1]})}},"Bezier");n.Connectors.Bezier=a,s.extend(a,n.Connectors.AbstractBezierConnector)}.call(typeof window<"u"?window:ht),function(){var e=this,n=e.jsPlumb,s=e.jsPlumbUtil,a=d(function(o,c,l,u){return o<=l&&u<=c?1:o<=l&&c<=u?2:l<=o&&u>=c?3:4},"_segment"),i=d(function(o,c,l,u,p,g,y,w,S){if(w<=S)return[o,c];if(l===1)return u[3]<=0&&p[3]>=1?[o+(u[2]<.5?-1*g:g),c]:u[2]>=1&&p[2]<=0?[o,c+(u[3]<.5?-1*y:y)]:[o+-1*g,c+-1*y];if(l===2)return u[3]>=1&&p[3]<=0?[o+(u[2]<.5?-1*g:g),c]:u[2]>=1&&p[2]<=0?[o,c+(u[3]<.5?-1*y:y)]:[o+g,c+-1*y];if(l===3)return u[3]>=1&&p[3]<=0?[o+(u[2]<.5?-1*g:g),c]:u[2]<=0&&p[2]>=1?[o,c+(u[3]<.5?-1*y:y)]:[o+-1*g,c+-1*y];if(l===4)return u[3]<=0&&p[3]>=1?[o+(u[2]<.5?-1*g:g),c]:u[2]<=0&&p[2]>=1?[o,c+(u[3]<.5?-1*y:y)]:[o+g,c+-1*y]},"_findControlPoint"),r=d(function(o){o=o||{},this.type="StateMachine";var c=n.Connectors.AbstractBezierConnector.apply(this,arguments),l=o.curviness||10,u=o.margin||5,p=o.proximityLimit||80;o.orientation&&o.orientation;var g;this._computeBezier=function(y,w,S,m,D,A){var j=w.sourcePos[0]<w.targetPos[0]?0:D,L=w.sourcePos[1]<w.targetPos[1]?0:A,k=w.sourcePos[0]<w.targetPos[0]?D:0,I=w.sourcePos[1]<w.targetPos[1]?A:0;w.sourcePos[2]===0&&(j-=u),w.sourcePos[2]===1&&(j+=u),w.sourcePos[3]===0&&(L-=u),w.sourcePos[3]===1&&(L+=u),w.targetPos[2]===0&&(k-=u),w.targetPos[2]===1&&(k+=u),w.targetPos[3]===0&&(I-=u),w.targetPos[3]===1&&(I+=u);var v=(j+k)/2,T=(L+I)/2,P=a(j,L,k,I),F=Math.sqrt(Math.pow(k-j,2)+Math.pow(I-L,2)),U,M,V,W;g=i(v,T,P,w.sourcePos,w.targetPos,l,l,F,p),U=g[0],M=g[0],V=g[1],W=g[1],c.addSegment(this,"Bezier",{x1:k,y1:I,x2:j,y2:L,cp1x:U,cp1y:V,cp2x:M,cp2y:W})}},"StateMachine");n.Connectors.StateMachine=r,s.extend(r,n.Connectors.AbstractBezierConnector)}.call(typeof window<"u"?window:ht),function(){var e=this,n=e.jsPlumb,s=e.jsPlumbUtil,a="Straight",i=d(function(r){this.type=a;var o=n.Connectors.AbstractConnector.apply(this,arguments);this._compute=function(c,l){o.addSegment(this,a,{x1:c.sx,y1:c.sy,x2:c.startStubX,y2:c.startStubY}),o.addSegment(this,a,{x1:c.startStubX,y1:c.startStubY,x2:c.endStubX,y2:c.endStubY}),o.addSegment(this,a,{x1:c.endStubX,y1:c.endStubY,x2:c.tx,y2:c.ty})}},"Straight");n.Connectors.Straight=i,s.extend(i,n.Connectors.AbstractConnector)}.call(typeof window<"u"?window:ht),function(){var e=this,n=e.jsPlumb,s=e.jsPlumbUtil,a={"stroke-linejoin":"stroke-linejoin","stroke-dashoffset":"stroke-dashoffset","stroke-linecap":"stroke-linecap"},i="stroke-dasharray",r="dashstyle",o="linearGradient",c="radialGradient",l="defs",u="fill",p="stop",g="stroke",y="stroke-width",w="style",S="none",m="jsplumb_gradient_",D="strokeWidth",A={svg:"http://www.w3.org/2000/svg"},j=d(function(W,K){for(var R in K)W.setAttribute(R,""+K[R])},"_attr"),L=d(function(W,K){return K=K||{},K.version="1.1",K.xmlns=A.svg,n.createElementNS(A.svg,W,null,null,K)},"_node"),k=d(function(W){return"position:absolute;left:"+W[0]+"px;top:"+W[1]+"px"},"_pos"),I=d(function(W){for(var K=W.querySelectorAll(" defs,linearGradient,radialGradient"),R=0;R<K.length;R++)K[R].parentNode.removeChild(K[R])},"_clearGradient"),v=d(function(W,K,R,X,Q){var G=m+Q._jsPlumb.instance.idstamp();I(W);var J;R.gradient.offset?J=L(c,{id:G}):J=L(o,{id:G,gradientUnits:"userSpaceOnUse"});var E=L(l);W.appendChild(E),E.appendChild(J);for(var O=0;O<R.gradient.stops.length;O++){var C=Q.segment===1||Q.segment===2?O:R.gradient.stops.length-1-O,B=R.gradient.stops[C][1],z=L(p,{offset:Math.floor(R.gradient.stops[O][0]*100)+"%","stop-color":B});J.appendChild(z)}var Y=R.stroke?g:u;K.setAttribute(Y,"url(#"+G+")")},"_updateGradient"),T=d(function(W,K,R,X,Q){if(K.setAttribute(u,R.fill?R.fill:S),K.setAttribute(g,R.stroke?R.stroke:S),R.gradient?v(W,K,R,X,Q):(I(W),K.setAttribute(w,"")),R.strokeWidth&&K.setAttribute(y,R.strokeWidth),R[r]&&R[D]&&!R[i]){var G=R[r].indexOf(",")===-1?" ":",",J=R[r].split(G),E="";J.forEach(function(C){E+=Math.floor(C*R.strokeWidth)+G}),K.setAttribute(i,E)}else R[i]&&K.setAttribute(i,R[i]);for(var O in a)R[O]&&K.setAttribute(a[O],R[O])},"_applyStyles"),P=d(function(W,K,R){W.childNodes.length>R?W.insertBefore(K,W.childNodes[R]):W.appendChild(K)},"_appendAtIndex");s.svg={node:L,attr:j,pos:k};var F=d(function(W){var K=W.pointerEventsSpec||"all",R={};n.jsPlumbUIComponent.apply(this,W.originalArgs),this.canvas=null,this.path=null,this.svg=null,this.bgCanvas=null;var X=W.cssClass+" "+(W.originalArgs[0].cssClass||""),Q={style:"",width:0,height:0,"pointer-events":K,position:"absolute"};this.svg=L("svg",Q),W.useDivWrapper?(this.canvas=n.createElement("div",{position:"absolute"}),s.sizeElement(this.canvas,0,0,1,1),this.canvas.className=X):(j(this.svg,{class:X}),this.canvas=this.svg),W._jsPlumb.appendElement(this.canvas,W.originalArgs[0].parent),W.useDivWrapper&&this.canvas.appendChild(this.svg);var G=[this.canvas];return this.getDisplayElements=function(){return G},this.appendDisplayElement=function(J){G.push(J)},this.paint=function(J,E,O){if(J!=null){var C=[this.x,this.y],B=[this.w,this.h],z;O!=null&&(O.xmin<0&&(C[0]+=O.xmin),O.ymin<0&&(C[1]+=O.ymin),B[0]=O.xmax+(O.xmin<0?-O.xmin:0),B[1]=O.ymax+(O.ymin<0?-O.ymin:0)),W.useDivWrapper?(s.sizeElement(this.canvas,C[0],C[1],B[0]>0?B[0]:1,B[1]>0?B[1]:1),C[0]=0,C[1]=0,z=k([0,0])):z=k([C[0],C[1]]),R.paint.apply(this,arguments),j(this.svg,{style:z,width:B[0]||1,height:B[1]||1})}},{renderer:R}},"SvgComponent");s.extend(F,n.jsPlumbUIComponent,{cleanup:function(W){W||this.typeId==null?(this.canvas&&(this.canvas._jsPlumb=null),this.svg&&(this.svg._jsPlumb=null),this.bgCanvas&&(this.bgCanvas._jsPlumb=null),this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.bgCanvas&&this.bgCanvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.svg=null,this.canvas=null,this.path=null,this.group=null,this._jsPlumb=null):(this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.bgCanvas&&this.bgCanvas.parentNode&&this.bgCanvas.parentNode.removeChild(this.bgCanvas))},reattach:function(W){var K=W.getContainer();this.canvas&&this.canvas.parentNode==null&&K.appendChild(this.canvas),this.bgCanvas&&this.bgCanvas.parentNode==null&&K.appendChild(this.bgCanvas)},setVisible:function(W){this.canvas&&(this.canvas.style.display=W?"block":"none")}}),n.ConnectorRenderers.svg=function(W){var K=this,R=F.apply(this,[{cssClass:W._jsPlumb.connectorClass,originalArgs:arguments,pointerEventsSpec:"none",_jsPlumb:W._jsPlumb}]);R.renderer.paint=function(X,Q,G){var J=K.getSegments(),E="",O=[0,0];if(G.xmin<0&&(O[0]=-G.xmin),G.ymin<0&&(O[1]=-G.ymin),J.length>0){E=K.getPathData();var C={d:E,transform:"translate("+O[0]+","+O[1]+")","pointer-events":W["pointer-events"]||"visibleStroke"},B=null,z=[K.x,K.y,K.w,K.h];if(X.outlineStroke){var Y=X.outlineWidth||1,se=X.strokeWidth+2*Y;B=n.extend({},X),delete B.gradient,B.stroke=X.outlineStroke,B.strokeWidth=se,K.bgPath==null?(K.bgPath=L("path",C),n.addClass(K.bgPath,n.connectorOutlineClass),P(K.svg,K.bgPath,0)):j(K.bgPath,C),T(K.svg,K.bgPath,B,z,K)}K.path==null?(K.path=L("path",C),P(K.svg,K.path,X.outlineStroke?1:0)):j(K.path,C),T(K.svg,K.path,X,z,K)}}},s.extend(n.ConnectorRenderers.svg,F);var U=n.SvgEndpoint=function(W){var K=F.apply(this,[{cssClass:W._jsPlumb.endpointClass,originalArgs:arguments,pointerEventsSpec:"all",useDivWrapper:!0,_jsPlumb:W._jsPlumb}]);K.renderer.paint=function(R){var X=n.extend({},R);X.outlineStroke&&(X.stroke=X.outlineStroke),this.node==null?(this.node=this.makeNode(X),this.svg.appendChild(this.node)):this.updateNode!=null&&this.updateNode(this.node),T(this.svg,this.node,X,[this.x,this.y,this.w,this.h],this),k(this.node,[this.x,this.y])}.bind(this)};s.extend(U,F),n.Endpoints.svg.Dot=function(){n.Endpoints.Dot.apply(this,arguments),U.apply(this,arguments),this.makeNode=function(W){return L("circle",{cx:this.w/2,cy:this.h/2,r:this.radius})},this.updateNode=function(W){j(W,{cx:this.w/2,cy:this.h/2,r:this.radius})}},s.extend(n.Endpoints.svg.Dot,[n.Endpoints.Dot,U]),n.Endpoints.svg.Rectangle=function(){n.Endpoints.Rectangle.apply(this,arguments),U.apply(this,arguments),this.makeNode=function(W){return L("rect",{width:this.w,height:this.h})},this.updateNode=function(W){j(W,{width:this.w,height:this.h})}},s.extend(n.Endpoints.svg.Rectangle,[n.Endpoints.Rectangle,U]),n.Endpoints.svg.Image=n.Endpoints.Image,n.Endpoints.svg.Blank=n.Endpoints.Blank,n.Overlays.svg.Label=n.Overlays.Label,n.Overlays.svg.Custom=n.Overlays.Custom;var M=d(function(W,K){W.apply(this,K),n.jsPlumbUIComponent.apply(this,K),this.isAppendedAtTopLevel=!1,this.path=null,this.paint=function(X,Q){if(X.component.svg&&Q){this.path==null&&(this.path=L("path",{"pointer-events":"all"}),X.component.svg.appendChild(this.path),this.elementCreated&&this.elementCreated(this.path,X.component),this.canvas=X.component.svg);var G=K&&K.length===1&&K[0].cssClass||"",J=[0,0];Q.xmin<0&&(J[0]=-Q.xmin),Q.ymin<0&&(J[1]=-Q.ymin),j(this.path,{d:R(X.d),class:G,stroke:X.stroke?X.stroke:null,fill:X.fill?X.fill:null,transform:"translate("+J[0]+","+J[1]+")"})}};var R=d(function(X){return isNaN(X.cxy.x)||isNaN(X.cxy.y)?"":"M"+X.hxy.x+","+X.hxy.y+" L"+X.tail[0].x+","+X.tail[0].y+" L"+X.cxy.x+","+X.cxy.y+" L"+X.tail[1].x+","+X.tail[1].y+" L"+X.hxy.x+","+X.hxy.y},"makePath");this.transfer=function(X){X.canvas&&this.path&&this.path.parentNode&&(this.path.parentNode.removeChild(this.path),X.canvas.appendChild(this.path))}},"AbstractSvgArrowOverlay"),V={cleanup:function(W){this.path!=null&&(W?this._jsPlumb.instance.removeElement(this.path):this.path.parentNode&&this.path.parentNode.removeChild(this.path))},reattach:function(W,K){this.path&&K.canvas&&K.canvas.appendChild(this.path)},setVisible:function(W){this.path!=null&&(this.path.style.display=W?"block":"none")}};s.extend(M,[n.jsPlumbUIComponent,n.Overlays.AbstractOverlay]),n.Overlays.svg.Arrow=function(){M.apply(this,[n.Overlays.Arrow,arguments])},s.extend(n.Overlays.svg.Arrow,[n.Overlays.Arrow,M],V),n.Overlays.svg.PlainArrow=function(){M.apply(this,[n.Overlays.PlainArrow,arguments])},s.extend(n.Overlays.svg.PlainArrow,[n.Overlays.PlainArrow,M],V),n.Overlays.svg.Diamond=function(){M.apply(this,[n.Overlays.Diamond,arguments])},s.extend(n.Overlays.svg.Diamond,[n.Overlays.Diamond,M],V),n.Overlays.svg.GuideLines=function(){var W=null,K=this,R,X;n.Overlays.GuideLines.apply(this,arguments),this.paint=function(G,J){W==null&&(W=L("path"),G.connector.svg.appendChild(W),K.attachListeners(W,G.connector),K.attachListeners(W,K),R=L("path"),G.connector.svg.appendChild(R),K.attachListeners(R,G.connector),K.attachListeners(R,K),X=L("path"),G.connector.svg.appendChild(X),K.attachListeners(X,G.connector),K.attachListeners(X,K));var E=[0,0];J.xmin<0&&(E[0]=-J.xmin),J.ymin<0&&(E[1]=-J.ymin),j(W,{d:Q(G.head,G.tail),stroke:"red",fill:null,transform:"translate("+E[0]+","+E[1]+")"}),j(R,{d:Q(G.tailLine[0],G.tailLine[1]),stroke:"blue",fill:null,transform:"translate("+E[0]+","+E[1]+")"}),j(X,{d:Q(G.headLine[0],G.headLine[1]),stroke:"green",fill:null,transform:"translate("+E[0]+","+E[1]+")"})};var Q=d(function(G,J){return"M "+G.x+","+G.y+" L"+J.x+","+J.y},"makePath")},s.extend(n.Overlays.svg.GuideLines,n.Overlays.GuideLines)}.call(typeof window<"u"?window:ht),function(){var e=this,n=e.jsPlumb,s=e.jsPlumbUtil,a=e.Katavorio,i=e.Biltong,r=d(function(v){var T=v._mottle;return T||(T=v._mottle=new e.Mottle),T},"_getEventManager"),o=d(function(v,T){T=T||"main";var P="_katavorio_"+T,F=v[P],U=v.getEventManager();return F||(F=new a({bind:U.on,unbind:U.off,getSize:n.getSize,getConstrainingRectangle:function(M){return[M.parentNode.scrollWidth,M.parentNode.scrollHeight]},getPosition:function(M,V){var W=v.getOffset(M,V,M._katavorioDrag?M.offsetParent:null);return[W.left,W.top]},setPosition:function(M,V){M.style.left=V[0]+"px",M.style.top=V[1]+"px"},addClass:n.addClass,removeClass:n.removeClass,intersects:i.intersects,indexOf:function(M,V){return M.indexOf(V)},scope:v.getDefaultScope(),css:{noSelect:v.dragSelectClass,droppable:"jtk-droppable",draggable:"jtk-draggable",drag:"jtk-drag",selected:"jtk-drag-selected",active:"jtk-drag-active",hover:"jtk-drag-hover",ghostProxy:"jtk-ghost-proxy"}}),F.setZoom(v.getZoom()),v[P]=F,v.bind("zoom",F.setZoom)),F},"_getDragManager"),c=d(function(v){var T=v.el._jsPlumbDragOptions,P=!0;return T.canDrag&&(P=T.canDrag()),P&&(this.setHoverSuspended(!0),this.select({source:v.el}).addClass(this.elementDraggingClass+" "+this.sourceElementDraggingClass,!0),this.select({target:v.el}).addClass(this.elementDraggingClass+" "+this.targetElementDraggingClass,!0),this.setConnectionBeingDragged(!0)),P},"_dragStart"),l=d(function(v){var T=this.getUIPosition(arguments,this.getZoom());if(T!=null){var P=v.el._jsPlumbDragOptions;this.draw(v.el,T,null,!0),P._dragging&&this.addClass(v.el,"jtk-dragged"),P._dragging=!0}},"_dragMove"),u=d(function(v){for(var T=v.selection,P,F=function(M){var V;M[1]!=null&&(P=this.getUIPosition([{el:M[2].el,pos:[M[1].left,M[1].top]}]),V=this.draw(M[2].el,P)),M[0]._jsPlumbDragOptions!=null&&delete M[0]._jsPlumbDragOptions._dragging,this.removeClass(M[0],"jtk-dragged"),this.select({source:M[2].el}).removeClass(this.elementDraggingClass+" "+this.sourceElementDraggingClass,!0),this.select({target:M[2].el}).removeClass(this.elementDraggingClass+" "+this.targetElementDraggingClass,!0),v.e._drawResult=v.e._drawResult||{c:[],e:[],a:[]},Array.prototype.push.apply(v.e._drawResult.c,V.c),Array.prototype.push.apply(v.e._drawResult.e,V.e),Array.prototype.push.apply(v.e._drawResult.a,V.a),this.getDragManager().dragEnded(M[2].el)}.bind(this),U=0;U<T.length;U++)F(T[U]);this.setHoverSuspended(!1),this.setConnectionBeingDragged(!1)},"_dragStop"),p=d(function(v,T){var P=d(function(F){if(T[F]!=null)if(s.isString(T[F])){var U=T[F].match(/-=/)?-1:1,M=T[F].substring(2);return v[F]+U*M}else return T[F];else return v[F]},"_one");return[P("left"),P("top")]},"_animProps"),g=d(function(v,T){if(T==null)return[0,0];var P=D(T),F=m(P,0);return[F[v+"X"],F[v+"Y"]]},"_genLoc"),y=g.bind(this,"page"),w=g.bind(this,"screen"),S=g.bind(this,"client"),m=d(function(v,T){return v.item?v.item(T):v[T]},"_getTouch"),D=d(function(v){return v.touches&&v.touches.length>0?v.touches:v.changedTouches&&v.changedTouches.length>0?v.changedTouches:v.targetTouches&&v.targetTouches.length>0?v.targetTouches:[v]},"_touches"),A=d(function(v){var T={},P=[],F={},U={},M={};this.register=function(V){var W=v.getId(V),K;T[W]||(T[W]=V,P.push(V),F[W]={});var R=d(function(X){if(X){for(var Q=0;Q<X.childNodes.length;Q++)if(X.childNodes[Q].nodeType!==3&&X.childNodes[Q].nodeType!==8){var G=jsPlumb.getElement(X.childNodes[Q]),J=v.getId(X.childNodes[Q],null,!0);if(J&&U[J]&&U[J]>0){K||(K=v.getOffset(V));var E=v.getOffset(G);F[W][J]={id:J,offset:{left:E.left-K.left,top:E.top-K.top}},M[J]=W}R(X.childNodes[Q])}}},"_oneLevel");R(V)},this.updateOffsets=function(V,W){if(V!=null){W=W||{};var K=jsPlumb.getElement(V),R=v.getId(K),X=F[R],Q;if(X){for(var G in X)if(X.hasOwnProperty(G)){var J=jsPlumb.getElement(G),E=W[G]||v.getOffset(J);if(J.offsetParent==null&&F[R][G]!=null)continue;Q||(Q=v.getOffset(K)),F[R][G]={id:G,offset:{left:E.left-Q.left,top:E.top-Q.top}},M[G]=R}}}},this.endpointAdded=function(V,W){W=W||v.getId(V);var K=document.body,R=V.parentNode;for(U[W]=U[W]?U[W]+1:1;R!=null&&R!==K;){var X=v.getId(R,null,!0);if(X&&T[X]){var Q=v.getOffset(R);if(F[X][W]==null){var G=v.getOffset(V);F[X][W]={id:W,offset:{left:G.left-Q.left,top:G.top-Q.top}},M[W]=X}break}R=R.parentNode}},this.endpointDeleted=function(V){if(U[V.elementId]&&(U[V.elementId]--,U[V.elementId]<=0))for(var W in F)F.hasOwnProperty(W)&&F[W]&&(delete F[W][V.elementId],delete M[V.elementId])},this.changeId=function(V,W){F[W]=F[V],F[V]={},M[W]=M[V],M[V]=null},this.getElementsForDraggable=function(V){return F[V]},this.elementRemoved=function(V){var W=M[V];W&&(F[W]&&delete F[W][V],delete M[V])},this.reset=function(){T={},P=[],F={},U={}},this.dragEnded=function(V){if(V.offsetParent!=null){var W=v.getId(V),K=M[W];K&&this.updateOffsets(K)}},this.setParent=function(V,W,K,R,X){var Q=M[W];F[R]||(F[R]={});var G=v.getOffset(K),J=X||v.getOffset(V);Q&&F[Q]&&delete F[Q][W],F[R][W]={id:W,offset:{left:J.left-G.left,top:J.top-G.top}},M[W]=R},this.clearParent=function(V,W){var K=M[W];K&&(delete F[K][W],delete M[W])},this.revalidateParent=function(V,W,K){var R=M[W];if(R){var X={};X[W]=K,this.updateOffsets(R,X),v.revalidate(R)}},this.getDragAncestor=function(V){var W=jsPlumb.getElement(V),K=v.getId(W),R=M[K];return R?jsPlumb.getElement(R):null}},"DragManager"),j=d(function(v,T,P){T=s.fastTrim(T),typeof v.className.baseVal<"u"?v.className.baseVal=T:v.className=T;try{var F=v.classList;if(F!=null){for(;F.length>0;)F.remove(F.item(0));for(var U=0;U<P.length;U++)P[U]&&F.add(P[U])}}catch(M){s.log("JSPLUMB: cannot set class list",M)}},"_setClassName"),L=d(function(v){return typeof v.className.baseVal>"u"?v.className:v.className.baseVal},"_getClassName"),k=d(function(v,T,P){T=T==null?[]:s.isArray(T)?T:T.split(/\s+/),P=P==null?[]:s.isArray(P)?P:P.split(/\s+/);var F=L(v),U=F.split(/\s+/),M=d(function(V,W){for(var K=0;K<W.length;K++)if(V)U.indexOf(W[K])===-1&&U.push(W[K]);else{var R=U.indexOf(W[K]);R!==-1&&U.splice(R,1)}},"_oneSet");M(!0,T),M(!1,P),j(v,U.join(" "),U)},"_classManip");e.jsPlumb.extend(e.jsPlumbInstance.prototype,{headless:!1,pageLocation:y,screenLocation:w,clientLocation:S,getDragManager:function(){return this.dragManager==null&&(this.dragManager=new A(this)),this.dragManager},recalculateOffsets:function(v){this.getDragManager().updateOffsets(v)},createElement:function(v,T,P,F){return this.createElementNS(null,v,T,P,F)},createElementNS:function(v,T,P,F,U){var M=v==null?document.createElement(T):document.createElementNS(v,T),V;P=P||{};for(V in P)M.style[V]=P[V];F&&(M.className=F),U=U||{};for(V in U)M.setAttribute(V,""+U[V]);return M},getAttribute:function(v,T){return v.getAttribute!=null?v.getAttribute(T):null},setAttribute:function(v,T,P){v.setAttribute!=null&&v.setAttribute(T,P)},setAttributes:function(v,T){for(var P in T)T.hasOwnProperty(P)&&v.setAttribute(P,T[P])},appendToRoot:function(v){document.body.appendChild(v)},getRenderModes:function(){return["svg"]},getClass:L,addClass:function(v,T){jsPlumb.each(v,function(P){k(P,T)})},hasClass:function(v,T){return v=jsPlumb.getElement(v),v.classList?v.classList.contains(T):L(v).indexOf(T)!==-1},removeClass:function(v,T){jsPlumb.each(v,function(P){k(P,null,T)})},toggleClass:function(v,T){jsPlumb.hasClass(v,T)?jsPlumb.removeClass(v,T):jsPlumb.addClass(v,T)},updateClasses:function(v,T,P){jsPlumb.each(v,function(F){k(F,T,P)})},setClass:function(v,T){T!=null&&jsPlumb.each(v,function(P){j(P,T,T.split(/\s+/))})},setPosition:function(v,T){v.style.left=T.left+"px",v.style.top=T.top+"px"},getPosition:function(v){var T=d(function(P){var F=v.style[P];return F?F.substring(0,F.length-2):0},"_one");return{left:T("left"),top:T("top")}},getStyle:function(v,T){return typeof window.getComputedStyle<"u"?getComputedStyle(v,null).getPropertyValue(T):v.currentStyle[T]},getSelector:function(v,T){var P=null;return arguments.length===1?P=v.nodeType!=null?v:document.querySelectorAll(v):P=v.querySelectorAll(T),P},getOffset:function(v,T,P){v=jsPlumb.getElement(v),P=P||this.getContainer();for(var F={left:v.offsetLeft,top:v.offsetTop},U=T||P!=null&&v!==P&&v.offsetParent!==P?v.offsetParent:null,M=function(K){K!=null&&K!==document.body&&(K.scrollTop>0||K.scrollLeft>0)&&(F.left-=K.scrollLeft,F.top-=K.scrollTop)}.bind(this);U!=null;)F.left+=U.offsetLeft,F.top+=U.offsetTop,M(U),U=T?U.offsetParent:U.offsetParent===P?null:U.offsetParent;if(P!=null&&!T&&(P.scrollTop>0||P.scrollLeft>0)){var V=v.offsetParent!=null?this.getStyle(v.offsetParent,"position"):"static",W=this.getStyle(v,"position");W!=="absolute"&&W!=="fixed"&&V!=="absolute"&&V!=="fixed"&&(F.left-=P.scrollLeft,F.top-=P.scrollTop)}return F},getPositionOnElement:function(v,T,P){var F=typeof T.getBoundingClientRect<"u"?T.getBoundingClientRect():{left:0,top:0,width:0,height:0},U=document.body,M=document.documentElement,V=window.pageYOffset||M.scrollTop||U.scrollTop,W=window.pageXOffset||M.scrollLeft||U.scrollLeft,K=M.clientTop||U.clientTop||0,R=M.clientLeft||U.clientLeft||0,X=0,Q=0,G=F.top+V-K+X*P,J=F.left+W-R+Q*P,E=jsPlumb.pageLocation(v),O=F.width||T.offsetWidth*P,C=F.height||T.offsetHeight*P,B=(E[0]-J)/O,z=(E[1]-G)/C;return[B,z]},getAbsolutePosition:function(v){var T=d(function(P){var F=v.style[P];if(F)return parseFloat(F.substring(0,F.length-2))},"_one");return[T("left"),T("top")]},setAbsolutePosition:function(v,T,P,F){P?this.animate(v,{left:"+="+(T[0]-P[0]),top:"+="+(T[1]-P[1])},F):(v.style.left=T[0]+"px",v.style.top=T[1]+"px")},getSize:function(v){return[v.offsetWidth,v.offsetHeight]},getWidth:function(v){return v.offsetWidth},getHeight:function(v){return v.offsetHeight},getRenderMode:function(){return"svg"},draggable:function(v,T){var P;return v=s.isArray(v)||v.length!=null&&!s.isString(v)?v:[v],Array.prototype.slice.call(v).forEach(function(F){P=this.info(F),P.el&&this._initDraggableIfNecessary(P.el,!0,T,P.id,!0)}.bind(this)),this},snapToGrid:function(v,T,P){var F=[],U=function(W){var K=this.info(W);if(K.el!=null&&K.el._katavorioDrag){var R=K.el._katavorioDrag.snap(T,P);this.revalidate(K.el),F.push([K.el,R])}}.bind(this);if(arguments.length===1||arguments.length===3)U(v,T,P);else{var M=this.getManagedElements();for(var V in M)U(V,arguments[0],arguments[1])}return F},initDraggable:function(v,T,P){o(this,P).draggable(v,T),v._jsPlumbDragOptions=T},destroyDraggable:function(v,T){o(this,T).destroyDraggable(v),v._jsPlumbDragOptions=null,v._jsPlumbRelatedElement=null},unbindDraggable:function(v,T,P,F){o(this,F).destroyDraggable(v,T,P)},setDraggable:function(v,T){return jsPlumb.each(v,function(P){this.isDragSupported(P)&&(this._draggableStates[this.getAttribute(P,"id")]=T,this.setElementDraggable(P,T))}.bind(this))},_draggableStates:{},toggleDraggable:function(v){var T;return jsPlumb.each(v,function(P){var F=this.getAttribute(P,"id");return T=this._draggableStates[F]==null?!1:this._draggableStates[F],T=!T,this._draggableStates[F]=T,this.setDraggable(P,T),T}.bind(this)),T},_initDraggableIfNecessary:function(v,T,P,F,U){if(!jsPlumb.headless){var M=T??!1;if(M&&jsPlumb.isDragSupported(v,this)){var V=P||this.Defaults.DragOptions;if(V=jsPlumb.extend({},V),jsPlumb.isAlreadyDraggable(v,this))P.force&&this.initDraggable(v,V);else{var W=jsPlumb.dragEvents.drag,K=jsPlumb.dragEvents.stop,R=jsPlumb.dragEvents.start;this.manage(F,v),V[R]=s.wrap(V[R],c.bind(this)),V[W]=s.wrap(V[W],l.bind(this)),V[K]=s.wrap(V[K],u.bind(this));var X=this.getId(v);this._draggableStates[X]=!0;var Q=this._draggableStates[X];V.disabled=Q==null?!1:!Q,this.initDraggable(v,V),this.getDragManager().register(v),U&&this.fire("elementDraggable",{el:v,options:V})}}}},animationSupported:!0,getElement:function(v){return v==null?null:(v=typeof v=="string"?v:v.tagName==null&&v.length!=null&&v.enctype==null?v[0]:v,typeof v=="string"?document.getElementById(v):v)},removeElement:function(v){o(this).elementRemoved(v),this.getEventManager().remove(v)},doAnimate:function(v,T,P){P=P||{};var F=this.getOffset(v),U=p(F,T),M=U[0]-F.left,V=U[1]-F.top,W=P.duration||250,K=15,R=W/K,X=K/W*M,Q=K/W*V,G=0,J=setInterval(function(){n.setPosition(v,{left:F.left+X*(G+1),top:F.top+Q*(G+1)}),P.step!=null&&P.step(G,Math.ceil(R)),G++,G>=R&&(window.clearInterval(J),P.complete!=null&&P.complete())},K)},destroyDroppable:function(v,T){o(this,T).destroyDroppable(v)},unbindDroppable:function(v,T,P,F){o(this,F).destroyDroppable(v,T,P)},droppable:function(v,T){v=s.isArray(v)||v.length!=null&&!s.isString(v)?v:[v];var P;return T=T||{},T.allowLoopback=!1,Array.prototype.slice.call(v).forEach(function(F){P=this.info(F),P.el&&this.initDroppable(P.el,T)}.bind(this)),this},initDroppable:function(v,T,P){o(this,P).droppable(v,T)},isAlreadyDraggable:function(v){return v._katavorioDrag!=null},isDragSupported:function(v,T){return!0},isDropSupported:function(v,T){return!0},isElementDraggable:function(v){return v=n.getElement(v),v._katavorioDrag&&v._katavorioDrag.isEnabled()},getDragObject:function(v){return v[0].drag.getDragElement()},getDragScope:function(v){return v._katavorioDrag&&v._katavorioDrag.scopes.join(" ")||""},getDropEvent:function(v){return v[0].e},getUIPosition:function(v,T){var P=v[0].el;if(P.offsetParent==null)return null;var F=v[0].finalPos||v[0].pos,U={left:F[0],top:F[1]};if(P._katavorioDrag&&P.offsetParent!==this.getContainer()){var M=this.getOffset(P.offsetParent);U.left+=M.left,U.top+=M.top}return U},setDragFilter:function(v,T,P){v._katavorioDrag&&v._katavorioDrag.setFilter(T,P)},setElementDraggable:function(v,T){v=n.getElement(v),v._katavorioDrag&&v._katavorioDrag.setEnabled(T)},setDragScope:function(v,T){v._katavorioDrag&&v._katavorioDrag.k.setDragScope(v,T)},setDropScope:function(v,T){v._katavorioDrop&&v._katavorioDrop.length>0&&v._katavorioDrop[0].k.setDropScope(v,T)},addToPosse:function(v,T){var P=Array.prototype.slice.call(arguments,1),F=o(this);n.each(v,function(U){U=[n.getElement(U)],U.push.apply(U,P),F.addToPosse.apply(F,U)})},setPosse:function(v,T){var P=Array.prototype.slice.call(arguments,1),F=o(this);n.each(v,function(U){U=[n.getElement(U)],U.push.apply(U,P),F.setPosse.apply(F,U)})},removeFromPosse:function(v,T){var P=Array.prototype.slice.call(arguments,1),F=o(this);n.each(v,function(U){U=[n.getElement(U)],U.push.apply(U,P),F.removeFromPosse.apply(F,U)})},removeFromAllPosses:function(v){var T=o(this);n.each(v,function(P){T.removeFromAllPosses(n.getElement(P))})},setPosseState:function(v,T,P){var F=o(this);n.each(v,function(U){F.setPosseState(n.getElement(U),T,P)})},dragEvents:{start:"start",stop:"stop",drag:"drag",step:"step",over:"over",out:"out",drop:"drop",complete:"complete",beforeStart:"beforeStart"},animEvents:{step:"step",complete:"complete"},stopDrag:function(v){v._katavorioDrag&&v._katavorioDrag.abort()},addToDragSelection:function(v){var T=this.getElement(v);T!=null&&(T._isJsPlumbGroup||T._jsPlumbGroup==null)&&o(this).select(v)},removeFromDragSelection:function(v){o(this).deselect(v)},getDragSelection:function(){return o(this).getSelection()},clearDragSelection:function(){o(this).deselectAll()},trigger:function(v,T,P,F){this.getEventManager().trigger(v,T,P,F)},doReset:function(){for(var v in this)v.indexOf("_katavorio_")===0&&this[v].reset()},getEventManager:function(){return r(this)},on:function(v,T,P){return this.getEventManager().on.apply(this,arguments),this},off:function(v,T,P){return this.getEventManager().off.apply(this,arguments),this}});var I=d(function(v){var T=d(function(){/complete|loaded|interactive/.test(document.readyState)&&typeof document.body<"u"&&document.body!=null?v():setTimeout(T,9)},"_do");T()},"ready");I(n.init)}.call(typeof window<"u"?window:ht)})(Jc);var Zc=Object.defineProperty,yy=d((t,e,n)=>e in t?Zc(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,"h$5"),xy=d((t,e)=>Zc(t,"name",{value:e,configurable:!0}),"n$u"),io=d((t,e,n)=>(yy(t,typeof e!="symbol"?e+"":e,n),n),"o$v");const Qc=class{static{d(this,"s")}constructor(e,n){io(this,"element"),io(this,"options"),io(this,"isVisible",!1),io(this,"hideTimeoutId",null),this.element=e,this.options=n,this.init()}init(){this.element.style.position="relative",this.element.setAttribute("data-tooltip",this.options.text),this.element.setAttribute("data-tooltip-position",this.options.position),this.element.classList.add("tooltip-trigger"),this.options.tooltipClass&&this.element.classList.add(this.options.tooltipClass),this.options.showWhen==="hover"?(this.element.addEventListener("mouseenter",()=>this.show()),this.element.addEventListener("mouseleave",()=>this.hide())):this.options.showWhen==="click"&&(this.element.addEventListener("click",()=>this.toggle()),document.addEventListener("click",e=>{this.element.contains(e.target)||this.hide()}))}show(){this.hideTimeoutId!==null&&(window.clearTimeout(this.hideTimeoutId),this.hideTimeoutId=null),this.isVisible=!0,this.element.classList.add("tooltip-active")}hide(){this.hideTimeoutId!==null&&(window.clearTimeout(this.hideTimeoutId),this.hideTimeoutId=null),this.isVisible=!1,this.element.classList.remove("tooltip-active")}toggle(){this.isVisible?this.hide():this.show()}destroy(){this.hideTimeoutId!==null&&(window.clearTimeout(this.hideTimeoutId),this.hideTimeoutId=null),this.element.removeAttribute("data-tooltip"),this.element.removeAttribute("data-tooltip-position"),this.element.classList.remove("tooltip-trigger","tooltip-active"),this.options.tooltipClass&&this.element.classList.remove(this.options.tooltipClass)}};xy(Qc,"TooltipV2");let Br=Qc;async function wy(t,e){const n=t.getReader();let s;for(;!(s=await n.read()).done;)e(s.value)}d(wy,"getBytes");function Sy(t){let e,n,s,a=!1;return d(function(r){e===void 0?(e=r,n=0,s=-1):e=Ey(e,r);const o=e.length;let c=0;for(;n<o;){a&&(e[n]===10&&(c=++n),a=!1);let l=-1;for(;n<o&&l===-1;++n)switch(e[n]){case 58:s===-1&&(s=n-c);break;case 13:a=!0;case 10:l=n;break}if(l===-1)break;t(e.subarray(c,l),s),c=n,s=-1}c===o?e=void 0:c!==0&&(e=e.subarray(c),n-=c)},"onChunk")}d(Sy,"getLines");function Cy(t,e,n){let s=ed();const a=new TextDecoder;return d(function(r,o){if(r.length===0)n?.(s),s=ed();else if(o>0){const c=a.decode(r.subarray(0,o)),l=o+(r[o+1]===32?2:1),u=a.decode(r.subarray(l));switch(c){case"data":s.data=s.data?s.data+`
`+u:u;break;case"event":s.event=u;break;case"id":t(s.id=u);break;case"retry":const p=parseInt(u,10);isNaN(p)||e(s.retry=p);break}}},"onLine")}d(Cy,"getMessages");function Ey(t,e){const n=new Uint8Array(t.length+e.length);return n.set(t),n.set(e,t.length),n}d(Ey,"concat$1");function ed(){return{data:"",event:"",id:"",retry:void 0}}d(ed,"newMessage");var Ay=function(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(t);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(t,s[a])&&(n[s[a]]=t[s[a]]);return n};const Ur="text/event-stream",_y=1e3,td="last-event-id";function nd(t,e){var{signal:n,headers:s,onopen:a,onmessage:i,onclose:r,onerror:o,openWhenHidden:c,fetch:l}=e,u=Ay(e,["signal","headers","onopen","onmessage","onclose","onerror","openWhenHidden","fetch"]);return new Promise((p,g)=>{const y=Object.assign({},s);y.accept||(y.accept=Ur);let w;function S(){w.abort(),document.hidden||k()}d(S,"onVisibilityChange"),c||document.addEventListener("visibilitychange",S);let m=_y,D=0;function A(){document.removeEventListener("visibilitychange",S),window.clearTimeout(D),w.abort()}d(A,"dispose"),n?.addEventListener("abort",()=>{A(),p()});const j=l??window.fetch,L=a??ky;async function k(){var I;w=new AbortController;try{const v=await j(t,Object.assign(Object.assign({},u),{headers:y,signal:w.signal}));await L(v),await wy(v.body,Sy(Cy(T=>{T?y[td]=T:delete y[td]},T=>{m=T},i))),r?.(),A(),p()}catch(v){if(!w.signal.aborted)try{const T=(I=o?.(v))!==null&&I!==void 0?I:m;window.clearTimeout(D),D=window.setTimeout(k,T)}catch(T){A(),g(T)}}}d(k,"create"),k()})}d(nd,"fetchEventSource");function ky(t){const e=t.headers.get("content-type");if(!e?.startsWith(Ur))throw new Error(`Expected content-type to be ${Ur}, Actual: ${e}`)}d(ky,"defaultOnOpen");var Py=Object.defineProperty,Kn=d((t,e)=>Py(t,"name",{value:e,configurable:!0}),"d$q"),Xt=(t=>(t.LOGS="logs",t.SOURCE="source",t.NETWORK="network",t))(Xt||{});const Dy=Kn(t=>{if(t==="logs"||t==="source")return"400px";if(t==="network")return"450px"},"getTabHeight"),sd=pe.createContext(null);async function Iy(t,e,n,s,a){const i=new AbortController;return nd(t,{signal:i.signal,headers:e,async onopen(r){if(!r.ok)throw new Error(`Failed to open monitor connection: ${r.status}`);console.log("Monitor connection opened")},onmessage(r){if(r.event==="init"){const o=r.data;console.log("Monitor initialized:",o),window.currentMonitorId=o,n(o)}else s(r)},onclose(){console.log("Monitor connection closed"),a()},onerror(r){console.error("Monitor connection error:",r)},openWhenHidden:!0}),i}d(Iy,"re$2"),Kn(Iy,"setupMonitor");const Ly=Kn(({children:t,workspace:e})=>{const[n,s]=pe.useState("logs"),[a,i]=pe.useState(!1),[r,o]=pe.useState({monitorId:null,controller:null}),[c,l]=pe.useState([]),[u,p]=pe.useState(0),[g,y]=pe.useState({}),[w,S]=pe.useState(!0),[m,D]=pe.useState({showWaterfall:!0,filters:{componentNames:[],selectedComponentNames:[]}}),A=pe.useRef(!0),j=pe.useMemo(()=>Object.values(g).sort((F,U)=>F.startTime-U.startTime),[g]);pe.useEffect(()=>{const F=Array.from(new Set(j.map(U=>U.componentName))).sort();D(U=>{if(JSON.stringify(F)!==JSON.stringify(U.filters.componentNames)){const M=[...U.filters.selectedComponentNames];return F.forEach(V=>{U.filters.componentNames.includes(V)||M.push(V)}),{...U,filters:{componentNames:F,selectedComponentNames:M}}}return U})},[j]);const L=pe.useCallback(F=>{F.eventId&&y(U=>{if(F.action==="callStart"){const M={eventId:F.eventId,componentId:F.id,componentName:F.name,componentTitle:F.title,method:"POST",url:`/api/component/${F.name}`,status:0,startTime:F.startTime,requestBody:F.input,state:"pending"};return{...U,[F.eventId]:M}}else if(F.action==="callStop"){const M=U[F.eventId];return M?{...U,[F.eventId]:{...M,endTime:F.endTime,duration:F.duration,status:F.status?F.status:F.output?._error?400:200,responseHeaders:F.output?.headers||{},responseBody:F.output,state:"complete"}}:{...U,[F.eventId]:{eventId:F.eventId,componentId:F.id,componentName:F.name,componentTitle:F.title,method:"POST",url:`/api/component/${F.name}`,status:F.status?F.status:F.output?._error?400:200,startTime:F.startTime-(F.duration||0),endTime:F.endTime,duration:F.duration,requestBody:{},responseBody:F.output,responseHeaders:F.output?.headers||{},state:"complete"}}}else if(F.action==="usage"){const M=U[F.eventId];return M?{...U,[F.eventId]:{...M,cost:F.cost}}:U}return U})},[]);pe.useEffect(()=>{console.log("EFFECT: running"),e&&Kn(()=>{const F=Kn(V=>{if(!A.current)return;L(V.data);let W="";if(V.data.action==="callStart")W=`[Running Component] ${V.data.name}:${V.data.title}`;else if(V.data.action==="callStop"&&V.data.duration)W=`[Completed Component] ${V.data.name}:${V.data.title} (${V.data.duration/1e3}s)`;else if(V.data.action==="log")W=`[Component Log] ${V.data.name}:${V.data.title}`;else if(V.data.action==="usage"){const K=V.data.cost.reduce((R,X)=>R+X.units,0).toFixed(8);W=`[Cost] ${V.data.name||"Component"} - $${K}`}W&&(l(K=>[...K,{type:"component",timestamp:V.timestamp,message:W,data:V.data}]),n!=="logs"?p(K=>K+1):n==="logs"&&u>0&&p(0))},"handleComponentEvent"),U=Kn(V=>{l(W=>[...W,{type:"agent",timestamp:V.timestamp,message:V.data.duration?`[Completed Agent] ${V.data.id}:${V.data.name} (${V.data.duration/1e3}s)`:`[Running Agent] ${V.data.id}:${V.data.name}`,data:V.data}]),n!=="logs"&&p(W=>W+1)},"handleAgentEvent"),M=Kn(V=>{console.error("Monitor error:",V)},"handleMonitorError");return e.monitor.addEventListener("component",F),e.monitor.addEventListener("agent",U),e.monitor.addEventListener("error",M),e.monitor.addEventListener("initialized",({monitorId:V})=>{o({monitorId:V,controller:null})}),e.monitor.addEventListener("closed",()=>{o({monitorId:null,controller:null})}),()=>{e.monitor&&(e.monitor.removeEventListener("component",F),e.monitor.removeEventListener("agent",U),e.monitor.removeEventListener("error",M),e.monitor.removeEventListener("initialized",M),e.monitor.removeEventListener("closed",M))}},"setupMonitorListeners")()},[e,n,u,L,A]),pe.useEffect(()=>(e.addEventListener("AgentLoaded",()=>{console.log("Agent loaded")}),()=>{e.removeEventListener("AgentLoaded",()=>{})}),[e]),pe.useEffect(()=>{A.current=w},[w]),pe.useEffect(()=>{const F=document.getElementById("studio"),U=Dy(n);if(F)if(n!==null){const M=F.classList;M.forEach(V=>{V.startsWith("debug-log-menu-opened-")&&M.remove(V)}),F.classList.add(`debug-log-menu-opened-${U}`)}else{const M=F.classList;M.forEach(V=>{V.startsWith("debug-log-menu-opened-")&&M.remove(V)})}},[n]);const k=Kn(()=>{},"toggleExpanded"),I=pe.useCallback(()=>{p(0)},[]),v=pe.useCallback(()=>{y({})},[]),T=pe.useCallback(()=>{S(F=>{const U=!F;return console.log("Network recording toggled from",F,"to",U),A.current=U,U})},[]),P=pe.useCallback(F=>{D(U=>({...U,...F}))},[]);return b.jsx(sd.Provider,{value:{workspace:e,activeTab:n,setActiveTab:s,isExpanded:a,toggleExpanded:k,monitorState:r,logs:c,setLogs:l,unreadLogsCount:u,markLogsAsRead:I,networkRequests:g,networkRequestsArray:j,clearNetworkRequests:v,isNetworkRecording:w,toggleNetworkRecording:T,networkUIState:m,updateNetworkUIState:P},children:t})},"DebugLogMenuProvider"),js=Kn(()=>{const t=pe.useContext(sd);if(!t)throw new Error("useDebugLogMenuCtx must be used within a DebugLogMenuProvider");return t},"useDebugLogMenuCtx");var Ty=Object.defineProperty,Ns=d((t,e)=>Ty(t,"name",{value:e,configurable:!0}),"i$B");const zr=Ns(({info:t})=>{const[e,n]=pe.useState(t.length>1e3),[s,a]=pe.useState(!1),i=s?t:t.length>1e3?t.substring(0,1e3):t;return b.jsxs("div",{className:"pl-4 text-xs text-gray-500",style:{overflowWrap:"anywhere",wordBreak:"break-word"},children:[i,e&&!s&&b.jsx("span",{className:"ml-1 text-blue-500 cursor-pointer hover:underline",onClick:Ns(()=>{navigator.clipboard.writeText(t)},"handleCopyFullContent"),title:"Copy full content to clipboard",children:"..."})]})},"DetailedLogInfo"),My=Ns(()=>{const{logs:t,setLogs:e}=js(),[n,s]=pe.useState(!1),a=pe.useRef(null),[i,r]=pe.useState(!0),[o,c]=pe.useState(!1),l=Ns(()=>{if(!a.current)return;const p=a.current,g=p.scrollHeight,y=p.clientHeight,w=g-y;p.scrollTo({top:w,behavior:o?"smooth":"auto"})},"scrollToBottom");pe.useEffect(()=>{i&&requestAnimationFrame(()=>{l()})},[t,i]);const u=pe.useCallback(()=>{if(!a.current)return;const{scrollTop:p,scrollHeight:g,clientHeight:y}=a.current,w=g-p-y<100;c(!0),r(w)},[]);return pe.useEffect(()=>{c(!1),r(!0),l()},[]),pe.useEffect(()=>{if(n){const p=setTimeout(()=>s(!1),1e3);return()=>clearTimeout(p)}},[n]),b.jsxs("div",{className:"flex flex-col h-full relative",children:[b.jsx("div",{className:"absolute top-2 right-2 z-[2]",children:b.jsxs("div",{className:"flex gap-1 bg-gray-100 rounded-md p-0.5",children:[b.jsx(ln,{content:n?"Copied!":"Copy",className:"text-xs",children:b.jsx("button",{onClick:Ns(()=>{const p=t.map(g=>`${new Date(g.timestamp).toLocaleTimeString()} ${g.message}${g.data.input?`
  Input: ${JSON.stringify(g.data.input)}`:""}${g.data.output?`
  Output: ${JSON.stringify(g.data.output)}`:""}`).join(`
`);navigator.clipboard.writeText(p),s(!0)},"handleCopyLogs"),className:"p-1 text-gray-500 hover:text-gray-700 hover:bg-gray-200 rounded transition-colors",children:b.jsx(Fi,{size:14})})}),b.jsx(ln,{content:"Download",className:"text-xs",children:b.jsx("button",{onClick:Ns(()=>{const p=t.map(S=>`${new Date(S.timestamp).toISOString()} ${S.message}${S.data.input?`
  Input: ${JSON.stringify(S.data.input,null,2)}`:""}${S.data.output?`
  Output: ${JSON.stringify(S.data.output,null,2)}`:""}`).join(`
`),g=new Blob([p],{type:"text/plain"}),y=URL.createObjectURL(g),w=document.createElement("a");w.href=y,w.download=`agent-logs-${new Date().toISOString()}.txt`,document.body.appendChild(w),w.click(),document.body.removeChild(w),URL.revokeObjectURL(y)},"handleDownloadLogs"),className:"p-1 text-gray-500 hover:text-gray-700 hover:bg-gray-200 rounded transition-colors",children:b.jsx(dr,{size:15})})}),b.jsx(ln,{content:"Clear",className:"text-xs",children:b.jsx("button",{onClick:Ns(()=>{e([])},"handleClearLogs"),className:"p-1 text-gray-500 hover:text-gray-700 hover:bg-gray-200 rounded transition-colors",children:b.jsx(Zu,{size:15})})})]})}),b.jsxs("div",{ref:a,onScroll:u,className:"w-full p-4 font-mono text-sm text-gray-700 overflow-auto scroll-smooth",style:{height:"calc(100% - 40px)"},children:[t.map((p,g)=>b.jsxs("div",{className:`mb-1 ${p.type==="agent"?"text-blue-600":"text-gray-600"}`,style:{overflowWrap:"anywhere",wordBreak:"break-word",maxWidth:"100%"},children:[b.jsx("span",{className:"text-gray-400 inline-block",children:new Date(p.timestamp).toLocaleTimeString()})," ",b.jsx("span",{style:{overflowWrap:"anywhere"},children:p.message}),p.data.input&&b.jsx(zr,{info:`Input: ${JSON.stringify(p.data.input)}`}),p.data.output&&b.jsx(zr,{info:`Output: ${JSON.stringify(p.data.output)}`}),p.data?.logs&&p.data.logs?.length>0&&p.data.logs.map(y=>b.jsx(zr,{info:`${y.message}`},`${y.timestamp}-${g}`)),p.data.action==="usage"&&p.data.cost&&b.jsxs("div",{className:"pl-4 text-xs",children:[b.jsx("span",{className:"text-yellow-600",children:"Cost breakdown:"}),p.data.cost.map((y,w)=>b.jsxs("div",{className:"pl-2 text-gray-500",children:["\u2022 ",y.sourceId,": $",y.units.toFixed(8)]},w))]})]},`${p.timestamp}-${g}`)),t.length===0&&b.jsx("div",{className:"text-gray-500",children:"Debug your agent to see logs"})]})]})},"LogsContent");var Oy=Object.defineProperty,oo=d((t,e)=>Oy(t,"name",{value:e,configurable:!0}),"o$u");const jy=oo(({x:t,y:e,onClose:n,showWaterfall:s,toggleWaterfall:a,targetRequest:i})=>{const r=pe.useRef(null),{workspace:o}=js();return pe.useEffect(()=>{const c=oo(l=>{r.current&&!r.current.contains(l.target)&&n()},"handleClickOutside");return document.addEventListener("mousedown",c),()=>{document.removeEventListener("mousedown",c)}},[n]),b.jsxs("div",{ref:r,className:"absolute bg-white shadow-md rounded-md py-1 z-50 w-48 border border-gray-200 animate-fadeIn text-sm",style:{top:e,left:t},"data-context-menu":"true",children:[b.jsxs("div",{className:"px-3 py-1.5 hover:bg-gray-100 cursor-pointer flex items-center justify-between",onClick:oo(()=>{console.log("Menu item clicked, toggling waterfall"),a(),setTimeout(()=>{n()},50)},"handleWaterfallToggle"),children:[b.jsx("span",{children:"Waterfall View"}),s&&b.jsx(Qu,{className:"text-blue-500 text-xs"})]}),i&&b.jsx("div",{className:"px-3 py-1.5 hover:bg-gray-100 cursor-pointer flex items-center justify-between border-t border-gray-100",onClick:oo(()=>{if(i){let c=i.componentId;const l=document.querySelector(`.component#${c}`);l&&(o.scrollToComponent(l),o.refreshComponentSelection(l),console.log("Navigated to component:",c)),n()}},"handleNavigateToComponent"),children:b.jsx("span",{className:"flex items-center gap-2",children:b.jsx("span",{children:"Navigate To Component"})})})]})},"ContextMenu");var Ny=Object.defineProperty,Fy=d((t,e)=>Ny(t,"name",{value:e,configurable:!0}),"t$8");const $y=Fy(({activeTab:t,onTabChange:e})=>b.jsx("div",{className:"flex border-b border-solid border-gray-200",children:[{id:"headers",label:"Headers"},{id:"request",label:"Request"},{id:"response",label:"Response"},{id:"timing",label:"Timing"},{id:"cost",label:"Cost"}].map(n=>b.jsx("button",{className:`px-4 py-2 text-xs font-medium transition-colors ${t===n.id?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,onClick:()=>e(n.id),children:n.label},n.id))}),"DetailTabNav");var Ry=Object.defineProperty,ad=d((t,e)=>Ry(t,"name",{value:e,configurable:!0}),"m$9");const qy=ad(t=>{const e=t.split(":");if(e.length!==2)return{name:t,description:"Resource"};const n=e[0];let s=e[1].split("-").map(i=>i.charAt(0).toUpperCase()+i.slice(1)).join(" "),a="";switch(n){case"llm":a="Large Language Model";break;case"api":a="API Call";break;default:a="Resource"}return{name:s,description:a}},"formatModelName"),By=ad(({request:t})=>{if(!t.cost||t.cost.length===0)return b.jsx("div",{className:"flex flex-col p-4",children:b.jsx("div",{className:"text-sm text-gray-500 text-center py-8",children:"No cost information available for this request."})});const e=t.cost.reduce((n,s)=>n+s.units,0);return b.jsxs("div",{className:"flex flex-col p-4",children:[b.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 p-4 mb-4 rounded-lg border border-blue-100 shadow-sm",children:[b.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[b.jsx(pr,{className:"text-yellow-500",size:16}),b.jsx("h3",{className:"text-sm font-medium text-blue-700",children:"Usage Summary"})]}),b.jsxs("div",{className:"text-sm text-blue-800",children:["Total Cost: $",b.jsx("span",{className:"font-medium",children:e.toFixed(8)})]})]}),b.jsxs("div",{className:"border rounded-lg overflow-hidden shadow-sm",children:[b.jsx("div",{className:"bg-gray-50 px-4 py-3 border-b",children:b.jsx("h3",{className:"text-sm font-medium text-gray-700",children:"Cost Breakdown"})}),b.jsxs("table",{className:"w-full",children:[b.jsx("thead",{children:b.jsxs("tr",{className:"bg-gray-50 border-b",children:[b.jsx("th",{className:"text-left p-3 text-xs font-medium text-gray-500",children:"Source"}),b.jsx("th",{className:"text-right p-3 text-xs font-medium text-gray-500",children:"Cost"}),b.jsx("th",{className:"text-right p-3 text-xs font-medium text-gray-500",children:"Percentage"})]})}),b.jsx("tbody",{children:t.cost.map((n,s)=>{const{name:a,description:i}=qy(n.sourceId),r=n.units/e*100;return b.jsxs("tr",{className:"border-b last:border-b-0 hover:bg-gray-50",children:[b.jsxs("td",{className:"text-left p-3",children:[b.jsx("div",{className:"text-sm text-gray-700 font-medium",children:a}),b.jsx("div",{className:"text-xs text-gray-500",children:i}),b.jsx("div",{className:"text-xs text-gray-400 font-mono mt-1",children:n.sourceId})]}),b.jsx("td",{className:"text-right p-3 text-sm text-gray-700 font-mono",children:n.units.toFixed(8)}),b.jsxs("td",{className:"text-right p-3",children:[b.jsxs("div",{className:"text-sm text-gray-700",children:[r.toFixed(1),"%"]}),b.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5 mt-1",children:b.jsx("div",{className:"bg-blue-600 h-1.5 rounded-full",style:{width:`${r}%`}})})]})]},s)})})]})]}),b.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg border text-xs text-gray-500 flex items-start gap-2",children:[b.jsx(ug,{className:"text-blue-400 mt-0.5 flex-shrink-0"}),b.jsx("div",{children:b.jsx("p",{children:"Cost data represents computational resource usage for this request. Cost is typically reported in dollars, depending on the service used."})})]})]})},"CostTab");var Uy=Object.defineProperty,zy=d((t,e)=>Uy(t,"name",{value:e,configurable:!0}),"d$p");const Hy=zy(({request:t})=>{const e=[{name:"Request Method",value:t.method},{name:"Status Code",value:t.status.toString()},{name:"Component",value:t.componentName},{name:"Component Title",value:t.componentTitle}];return b.jsx("div",{className:"p-3 text-xs",children:b.jsxs("div",{className:"mb-4",children:[b.jsx("h3",{className:"font-medium text-gray-700 mb-2",children:"General"}),b.jsx("div",{className:"bg-white rounded border border-gray-200",children:e.map((n,s)=>b.jsxs("div",{className:`grid grid-cols-3 px-3 py-1.5 ${s!==e.length-1?"border-b border-gray-100":""}`,children:[b.jsxs("div",{className:"font-medium text-gray-600",children:[n.name,":"]}),b.jsx("div",{className:"col-span-2 text-gray-800",children:n.value})]},n.name))})]})})},"HeadersTab"),Hr={scheme:"solarized-light-transparent",author:"Adapted from Solarized Light (Ethan Schoonover) with transparent background",base00:"transparent",base01:"#eee8d5",base02:"#93a1a1",base03:"#839496",base04:"#657b83",base05:"#586e75",base06:"#073642",base07:"#002b36",base08:"#dc322f",base09:"#cb4b16",base0A:"#b58900",base0B:"#859900",base0C:"#2aa198",base0D:"#268bd2",base0E:"#6c71c4",base0F:"#d33682"};var id={exports:{}},od={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},rd={exports:{}},Gy=d(function(e){return!e||typeof e=="string"?!1:e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&e.constructor.name!=="String")},"isArrayish"),Vy=Gy,Wy=Array.prototype.concat,Ky=Array.prototype.slice,ld=rd.exports=d(function(e){for(var n=[],s=0,a=e.length;s<a;s++){var i=e[s];Vy(i)?n=Wy.call(n,Ky.call(i)):n.push(i)}return n},"swizzle");ld.wrap=function(t){return function(){return t(ld(arguments))}};var Yy=rd.exports,za=od,Ha=Yy,ud=Object.hasOwnProperty,cd=Object.create(null);for(var Gr in za)ud.call(za,Gr)&&(cd[za[Gr]]=Gr);var cn=id.exports={to:{},get:{}};cn.get=function(t){var e=t.substring(0,3).toLowerCase(),n,s;switch(e){case"hsl":n=cn.get.hsl(t),s="hsl";break;case"hwb":n=cn.get.hwb(t),s="hwb";break;default:n=cn.get.rgb(t),s="rgb";break}return n?{model:s,value:n}:null},cn.get.rgb=function(t){if(!t)return null;var e=/^#([a-f0-9]{3,4})$/i,n=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,s=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,a=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,i=/^(\w+)$/,r=[0,0,0,1],o,c,l;if(o=t.match(n)){for(l=o[2],o=o[1],c=0;c<3;c++){var u=c*2;r[c]=parseInt(o.slice(u,u+2),16)}l&&(r[3]=parseInt(l,16)/255)}else if(o=t.match(e)){for(o=o[1],l=o[3],c=0;c<3;c++)r[c]=parseInt(o[c]+o[c],16);l&&(r[3]=parseInt(l+l,16)/255)}else if(o=t.match(s)){for(c=0;c<3;c++)r[c]=parseInt(o[c+1],0);o[4]&&(o[5]?r[3]=parseFloat(o[4])*.01:r[3]=parseFloat(o[4]))}else if(o=t.match(a)){for(c=0;c<3;c++)r[c]=Math.round(parseFloat(o[c+1])*2.55);o[4]&&(o[5]?r[3]=parseFloat(o[4])*.01:r[3]=parseFloat(o[4]))}else return(o=t.match(i))?o[1]==="transparent"?[0,0,0,0]:ud.call(za,o[1])?(r=za[o[1]],r[3]=1,r):null:null;for(c=0;c<3;c++)r[c]=ps(r[c],0,255);return r[3]=ps(r[3],0,1),r},cn.get.hsl=function(t){if(!t)return null;var e=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,n=t.match(e);if(n){var s=parseFloat(n[4]),a=(parseFloat(n[1])%360+360)%360,i=ps(parseFloat(n[2]),0,100),r=ps(parseFloat(n[3]),0,100),o=ps(isNaN(s)?1:s,0,1);return[a,i,r,o]}return null},cn.get.hwb=function(t){if(!t)return null;var e=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,n=t.match(e);if(n){var s=parseFloat(n[4]),a=(parseFloat(n[1])%360+360)%360,i=ps(parseFloat(n[2]),0,100),r=ps(parseFloat(n[3]),0,100),o=ps(isNaN(s)?1:s,0,1);return[a,i,r,o]}return null},cn.to.hex=function(){var t=Ha(arguments);return"#"+ro(t[0])+ro(t[1])+ro(t[2])+(t[3]<1?ro(Math.round(t[3]*255)):"")},cn.to.rgb=function(){var t=Ha(arguments);return t.length<4||t[3]===1?"rgb("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+")":"rgba("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+", "+t[3]+")"},cn.to.rgb.percent=function(){var t=Ha(arguments),e=Math.round(t[0]/255*100),n=Math.round(t[1]/255*100),s=Math.round(t[2]/255*100);return t.length<4||t[3]===1?"rgb("+e+"%, "+n+"%, "+s+"%)":"rgba("+e+"%, "+n+"%, "+s+"%, "+t[3]+")"},cn.to.hsl=function(){var t=Ha(arguments);return t.length<4||t[3]===1?"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)":"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+t[3]+")"},cn.to.hwb=function(){var t=Ha(arguments),e="";return t.length>=4&&t[3]!==1&&(e=", "+t[3]),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+e+")"},cn.to.keyword=function(t){return cd[t.slice(0,3)]};function ps(t,e,n){return Math.min(Math.max(e,t),n)}d(ps,"clamp");function ro(t){var e=Math.round(t).toString(16).toUpperCase();return e.length<2?"0"+e:e}d(ro,"hexDouble");var Xy=id.exports;const Ga=od,dd={};for(const t of Object.keys(Ga))dd[Ga[t]]=t;const Ge={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};var pd=Ge;for(const t of Object.keys(Ge)){if(!("channels"in Ge[t]))throw new Error("missing channels property: "+t);if(!("labels"in Ge[t]))throw new Error("missing channel labels property: "+t);if(Ge[t].labels.length!==Ge[t].channels)throw new Error("channel and label counts mismatch: "+t);const{channels:e,labels:n}=Ge[t];delete Ge[t].channels,delete Ge[t].labels,Object.defineProperty(Ge[t],"channels",{value:e}),Object.defineProperty(Ge[t],"labels",{value:n})}Ge.rgb.hsl=function(t){const e=t[0]/255,n=t[1]/255,s=t[2]/255,a=Math.min(e,n,s),i=Math.max(e,n,s),r=i-a;let o,c;i===a?o=0:e===i?o=(n-s)/r:n===i?o=2+(s-e)/r:s===i&&(o=4+(e-n)/r),o=Math.min(o*60,360),o<0&&(o+=360);const l=(a+i)/2;return i===a?c=0:l<=.5?c=r/(i+a):c=r/(2-i-a),[o,c*100,l*100]},Ge.rgb.hsv=function(t){let e,n,s,a,i;const r=t[0]/255,o=t[1]/255,c=t[2]/255,l=Math.max(r,o,c),u=l-Math.min(r,o,c),p=d(function(g){return(l-g)/6/u+1/2},"diffc");return u===0?(a=0,i=0):(i=u/l,e=p(r),n=p(o),s=p(c),r===l?a=s-n:o===l?a=1/3+e-s:c===l&&(a=2/3+n-e),a<0?a+=1:a>1&&(a-=1)),[a*360,i*100,l*100]},Ge.rgb.hwb=function(t){const e=t[0],n=t[1];let s=t[2];const a=Ge.rgb.hsl(t)[0],i=1/255*Math.min(e,Math.min(n,s));return s=1-1/255*Math.max(e,Math.max(n,s)),[a,i*100,s*100]},Ge.rgb.cmyk=function(t){const e=t[0]/255,n=t[1]/255,s=t[2]/255,a=Math.min(1-e,1-n,1-s),i=(1-e-a)/(1-a)||0,r=(1-n-a)/(1-a)||0,o=(1-s-a)/(1-a)||0;return[i*100,r*100,o*100,a*100]};function Jy(t,e){return(t[0]-e[0])**2+(t[1]-e[1])**2+(t[2]-e[2])**2}d(Jy,"comparativeDistance"),Ge.rgb.keyword=function(t){const e=dd[t];if(e)return e;let n=1/0,s;for(const a of Object.keys(Ga)){const i=Ga[a],r=Jy(t,i);r<n&&(n=r,s=a)}return s},Ge.keyword.rgb=function(t){return Ga[t]},Ge.rgb.xyz=function(t){let e=t[0]/255,n=t[1]/255,s=t[2]/255;e=e>.04045?((e+.055)/1.055)**2.4:e/12.92,n=n>.04045?((n+.055)/1.055)**2.4:n/12.92,s=s>.04045?((s+.055)/1.055)**2.4:s/12.92;const a=e*.4124+n*.3576+s*.1805,i=e*.2126+n*.7152+s*.0722,r=e*.0193+n*.1192+s*.9505;return[a*100,i*100,r*100]},Ge.rgb.lab=function(t){const e=Ge.rgb.xyz(t);let n=e[0],s=e[1],a=e[2];n/=95.047,s/=100,a/=108.883,n=n>.008856?n**(1/3):7.787*n+16/116,s=s>.008856?s**(1/3):7.787*s+16/116,a=a>.008856?a**(1/3):7.787*a+16/116;const i=116*s-16,r=500*(n-s),o=200*(s-a);return[i,r,o]},Ge.hsl.rgb=function(t){const e=t[0]/360,n=t[1]/100,s=t[2]/100;let a,i,r;if(n===0)return r=s*255,[r,r,r];s<.5?a=s*(1+n):a=s+n-s*n;const o=2*s-a,c=[0,0,0];for(let l=0;l<3;l++)i=e+1/3*-(l-1),i<0&&i++,i>1&&i--,6*i<1?r=o+(a-o)*6*i:2*i<1?r=a:3*i<2?r=o+(a-o)*(2/3-i)*6:r=o,c[l]=r*255;return c},Ge.hsl.hsv=function(t){const e=t[0];let n=t[1]/100,s=t[2]/100,a=n;const i=Math.max(s,.01);s*=2,n*=s<=1?s:2-s,a*=i<=1?i:2-i;const r=(s+n)/2,o=s===0?2*a/(i+a):2*n/(s+n);return[e,o*100,r*100]},Ge.hsv.rgb=function(t){const e=t[0]/60,n=t[1]/100;let s=t[2]/100;const a=Math.floor(e)%6,i=e-Math.floor(e),r=255*s*(1-n),o=255*s*(1-n*i),c=255*s*(1-n*(1-i));switch(s*=255,a){case 0:return[s,c,r];case 1:return[o,s,r];case 2:return[r,s,c];case 3:return[r,o,s];case 4:return[c,r,s];case 5:return[s,r,o]}},Ge.hsv.hsl=function(t){const e=t[0],n=t[1]/100,s=t[2]/100,a=Math.max(s,.01);let i,r;r=(2-n)*s;const o=(2-n)*a;return i=n*a,i/=o<=1?o:2-o,i=i||0,r/=2,[e,i*100,r*100]},Ge.hwb.rgb=function(t){const e=t[0]/360;let n=t[1]/100,s=t[2]/100;const a=n+s;let i;a>1&&(n/=a,s/=a);const r=Math.floor(6*e),o=1-s;i=6*e-r,r&1&&(i=1-i);const c=n+i*(o-n);let l,u,p;switch(r){default:case 6:case 0:l=o,u=c,p=n;break;case 1:l=c,u=o,p=n;break;case 2:l=n,u=o,p=c;break;case 3:l=n,u=c,p=o;break;case 4:l=c,u=n,p=o;break;case 5:l=o,u=n,p=c;break}return[l*255,u*255,p*255]},Ge.cmyk.rgb=function(t){const e=t[0]/100,n=t[1]/100,s=t[2]/100,a=t[3]/100,i=1-Math.min(1,e*(1-a)+a),r=1-Math.min(1,n*(1-a)+a),o=1-Math.min(1,s*(1-a)+a);return[i*255,r*255,o*255]},Ge.xyz.rgb=function(t){const e=t[0]/100,n=t[1]/100,s=t[2]/100;let a,i,r;return a=e*3.2406+n*-1.5372+s*-.4986,i=e*-.9689+n*1.8758+s*.0415,r=e*.0557+n*-.204+s*1.057,a=a>.0031308?1.055*a**(1/2.4)-.055:a*12.92,i=i>.0031308?1.055*i**(1/2.4)-.055:i*12.92,r=r>.0031308?1.055*r**(1/2.4)-.055:r*12.92,a=Math.min(Math.max(0,a),1),i=Math.min(Math.max(0,i),1),r=Math.min(Math.max(0,r),1),[a*255,i*255,r*255]},Ge.xyz.lab=function(t){let e=t[0],n=t[1],s=t[2];e/=95.047,n/=100,s/=108.883,e=e>.008856?e**(1/3):7.787*e+16/116,n=n>.008856?n**(1/3):7.787*n+16/116,s=s>.008856?s**(1/3):7.787*s+16/116;const a=116*n-16,i=500*(e-n),r=200*(n-s);return[a,i,r]},Ge.lab.xyz=function(t){const e=t[0],n=t[1],s=t[2];let a,i,r;i=(e+16)/116,a=n/500+i,r=i-s/200;const o=i**3,c=a**3,l=r**3;return i=o>.008856?o:(i-16/116)/7.787,a=c>.008856?c:(a-16/116)/7.787,r=l>.008856?l:(r-16/116)/7.787,a*=95.047,i*=100,r*=108.883,[a,i,r]},Ge.lab.lch=function(t){const e=t[0],n=t[1],s=t[2];let a;a=Math.atan2(s,n)*360/2/Math.PI,a<0&&(a+=360);const r=Math.sqrt(n*n+s*s);return[e,r,a]},Ge.lch.lab=function(t){const e=t[0],n=t[1],a=t[2]/360*2*Math.PI,i=n*Math.cos(a),r=n*Math.sin(a);return[e,i,r]},Ge.rgb.ansi16=function(t,e=null){const[n,s,a]=t;let i=e===null?Ge.rgb.hsv(t)[2]:e;if(i=Math.round(i/50),i===0)return 30;let r=30+(Math.round(a/255)<<2|Math.round(s/255)<<1|Math.round(n/255));return i===2&&(r+=60),r},Ge.hsv.ansi16=function(t){return Ge.rgb.ansi16(Ge.hsv.rgb(t),t[2])},Ge.rgb.ansi256=function(t){const e=t[0],n=t[1],s=t[2];return e===n&&n===s?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(n/255*5)+Math.round(s/255*5)},Ge.ansi16.rgb=function(t){let e=t%10;if(e===0||e===7)return t>50&&(e+=3.5),e=e/10.5*255,[e,e,e];const n=(~~(t>50)+1)*.5,s=(e&1)*n*255,a=(e>>1&1)*n*255,i=(e>>2&1)*n*255;return[s,a,i]},Ge.ansi256.rgb=function(t){if(t>=232){const i=(t-232)*10+8;return[i,i,i]}t-=16;let e;const n=Math.floor(t/36)/5*255,s=Math.floor((e=t%36)/6)/5*255,a=e%6/5*255;return[n,s,a]},Ge.rgb.hex=function(t){const n=(((Math.round(t[0])&255)<<16)+((Math.round(t[1])&255)<<8)+(Math.round(t[2])&255)).toString(16).toUpperCase();return"000000".substring(n.length)+n},Ge.hex.rgb=function(t){const e=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];let n=e[0];e[0].length===3&&(n=n.split("").map(o=>o+o).join(""));const s=parseInt(n,16),a=s>>16&255,i=s>>8&255,r=s&255;return[a,i,r]},Ge.rgb.hcg=function(t){const e=t[0]/255,n=t[1]/255,s=t[2]/255,a=Math.max(Math.max(e,n),s),i=Math.min(Math.min(e,n),s),r=a-i;let o,c;return r<1?o=i/(1-r):o=0,r<=0?c=0:a===e?c=(n-s)/r%6:a===n?c=2+(s-e)/r:c=4+(e-n)/r,c/=6,c%=1,[c*360,r*100,o*100]},Ge.hsl.hcg=function(t){const e=t[1]/100,n=t[2]/100,s=n<.5?2*e*n:2*e*(1-n);let a=0;return s<1&&(a=(n-.5*s)/(1-s)),[t[0],s*100,a*100]},Ge.hsv.hcg=function(t){const e=t[1]/100,n=t[2]/100,s=e*n;let a=0;return s<1&&(a=(n-s)/(1-s)),[t[0],s*100,a*100]},Ge.hcg.rgb=function(t){const e=t[0]/360,n=t[1]/100,s=t[2]/100;if(n===0)return[s*255,s*255,s*255];const a=[0,0,0],i=e%1*6,r=i%1,o=1-r;let c=0;switch(Math.floor(i)){case 0:a[0]=1,a[1]=r,a[2]=0;break;case 1:a[0]=o,a[1]=1,a[2]=0;break;case 2:a[0]=0,a[1]=1,a[2]=r;break;case 3:a[0]=0,a[1]=o,a[2]=1;break;case 4:a[0]=r,a[1]=0,a[2]=1;break;default:a[0]=1,a[1]=0,a[2]=o}return c=(1-n)*s,[(n*a[0]+c)*255,(n*a[1]+c)*255,(n*a[2]+c)*255]},Ge.hcg.hsv=function(t){const e=t[1]/100,n=t[2]/100,s=e+n*(1-e);let a=0;return s>0&&(a=e/s),[t[0],a*100,s*100]},Ge.hcg.hsl=function(t){const e=t[1]/100,s=t[2]/100*(1-e)+.5*e;let a=0;return s>0&&s<.5?a=e/(2*s):s>=.5&&s<1&&(a=e/(2*(1-s))),[t[0],a*100,s*100]},Ge.hcg.hwb=function(t){const e=t[1]/100,n=t[2]/100,s=e+n*(1-e);return[t[0],(s-e)*100,(1-s)*100]},Ge.hwb.hcg=function(t){const e=t[1]/100,s=1-t[2]/100,a=s-e;let i=0;return a<1&&(i=(s-a)/(1-a)),[t[0],a*100,i*100]},Ge.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]},Ge.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]},Ge.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]},Ge.gray.hsl=function(t){return[0,0,t[0]]},Ge.gray.hsv=Ge.gray.hsl,Ge.gray.hwb=function(t){return[0,100,t[0]]},Ge.gray.cmyk=function(t){return[0,0,0,t[0]]},Ge.gray.lab=function(t){return[t[0],0,0]},Ge.gray.hex=function(t){const e=Math.round(t[0]/100*255)&255,s=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".substring(s.length)+s},Ge.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]};const lo=pd;function Zy(){const t={},e=Object.keys(lo);for(let n=e.length,s=0;s<n;s++)t[e[s]]={distance:-1,parent:null};return t}d(Zy,"buildGraph");function Qy(t){const e=Zy(),n=[t];for(e[t].distance=0;n.length;){const s=n.pop(),a=Object.keys(lo[s]);for(let i=a.length,r=0;r<i;r++){const o=a[r],c=e[o];c.distance===-1&&(c.distance=e[s].distance+1,c.parent=s,n.unshift(o))}}return e}d(Qy,"deriveBFS");function e1(t,e){return function(n){return e(t(n))}}d(e1,"link$1");function t1(t,e){const n=[e[t].parent,t];let s=lo[e[t].parent][t],a=e[t].parent;for(;e[a].parent;)n.unshift(e[a].parent),s=e1(lo[e[a].parent][a],s),a=e[a].parent;return s.conversion=n,s}d(t1,"wrapConversion");var n1=d(function(t){const e=Qy(t),n={},s=Object.keys(e);for(let a=s.length,i=0;i<a;i++){const r=s[i];e[r].parent!==null&&(n[r]=t1(r,e))}return n},"route$1");const Vr=pd,s1=n1,ta={},a1=Object.keys(Vr);function i1(t){const e=d(function(...n){const s=n[0];return s==null?s:(s.length>1&&(n=s),t(n))},"wrappedFn");return"conversion"in t&&(e.conversion=t.conversion),e}d(i1,"wrapRaw");function o1(t){const e=d(function(...n){const s=n[0];if(s==null)return s;s.length>1&&(n=s);const a=t(n);if(typeof a=="object")for(let i=a.length,r=0;r<i;r++)a[r]=Math.round(a[r]);return a},"wrappedFn");return"conversion"in t&&(e.conversion=t.conversion),e}d(o1,"wrapRounded"),a1.forEach(t=>{ta[t]={},Object.defineProperty(ta[t],"channels",{value:Vr[t].channels}),Object.defineProperty(ta[t],"labels",{value:Vr[t].labels});const e=s1(t);Object.keys(e).forEach(s=>{const a=e[s];ta[t][s]=o1(a),ta[t][s].raw=i1(a)})});var r1=ta;const na=Xy,dn=r1,hd=["keyword","gray","hex"],Wr={};for(const t of Object.keys(dn))Wr[[...dn[t].labels].sort().join("")]=t;const uo={};function Mt(t,e){if(!(this instanceof Mt))return new Mt(t,e);if(e&&e in hd&&(e=null),e&&!(e in dn))throw new Error("Unknown model: "+e);let n,s;if(t==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(t instanceof Mt)this.model=t.model,this.color=[...t.color],this.valpha=t.valpha;else if(typeof t=="string"){const a=na.get(t);if(a===null)throw new Error("Unable to parse color from string: "+t);this.model=a.model,s=dn[this.model].channels,this.color=a.value.slice(0,s),this.valpha=typeof a.value[s]=="number"?a.value[s]:1}else if(t.length>0){this.model=e||"rgb",s=dn[this.model].channels;const a=Array.prototype.slice.call(t,0,s);this.color=Kr(a,s),this.valpha=typeof t[s]=="number"?t[s]:1}else if(typeof t=="number")this.model="rgb",this.color=[t>>16&255,t>>8&255,t&255],this.valpha=1;else{this.valpha=1;const a=Object.keys(t);"alpha"in t&&(a.splice(a.indexOf("alpha"),1),this.valpha=typeof t.alpha=="number"?t.alpha:0);const i=a.sort().join("");if(!(i in Wr))throw new Error("Unable to parse color from object: "+JSON.stringify(t));this.model=Wr[i];const{labels:r}=dn[this.model],o=[];for(n=0;n<r.length;n++)o.push(t[r[n]]);this.color=Kr(o)}if(uo[this.model])for(s=dn[this.model].channels,n=0;n<s;n++){const a=uo[this.model][n];a&&(this.color[n]=a(this.color[n]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}d(Mt,"Color"),Mt.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(t){let e=this.model in na.to?this:this.rgb();e=e.round(typeof t=="number"?t:1);const n=e.valpha===1?e.color:[...e.color,this.valpha];return na.to[e.model](n)},percentString(t){const e=this.rgb().round(typeof t=="number"?t:1),n=e.valpha===1?e.color:[...e.color,this.valpha];return na.to.rgb.percent(n)},array(){return this.valpha===1?[...this.color]:[...this.color,this.valpha]},object(){const t={},{channels:e}=dn[this.model],{labels:n}=dn[this.model];for(let s=0;s<e;s++)t[n[s]]=this.color[s];return this.valpha!==1&&(t.alpha=this.valpha),t},unitArray(){const t=this.rgb().color;return t[0]/=255,t[1]/=255,t[2]/=255,this.valpha!==1&&t.push(this.valpha),t},unitObject(){const t=this.rgb().object();return t.r/=255,t.g/=255,t.b/=255,this.valpha!==1&&(t.alpha=this.valpha),t},round(t){return t=Math.max(t||0,0),new Mt([...this.color.map(u1(t)),this.valpha],this.model)},alpha(t){return t!==void 0?new Mt([...this.color,Math.max(0,Math.min(1,t))],this.model):this.valpha},red:Et("rgb",0,Dt(255)),green:Et("rgb",1,Dt(255)),blue:Et("rgb",2,Dt(255)),hue:Et(["hsl","hsv","hsl","hwb","hcg"],0,t=>(t%360+360)%360),saturationl:Et("hsl",1,Dt(100)),lightness:Et("hsl",2,Dt(100)),saturationv:Et("hsv",1,Dt(100)),value:Et("hsv",2,Dt(100)),chroma:Et("hcg",1,Dt(100)),gray:Et("hcg",2,Dt(100)),white:Et("hwb",1,Dt(100)),wblack:Et("hwb",2,Dt(100)),cyan:Et("cmyk",0,Dt(100)),magenta:Et("cmyk",1,Dt(100)),yellow:Et("cmyk",2,Dt(100)),black:Et("cmyk",3,Dt(100)),x:Et("xyz",0,Dt(95.047)),y:Et("xyz",1,Dt(100)),z:Et("xyz",2,Dt(108.833)),l:Et("lab",0,Dt(100)),a:Et("lab",1),b:Et("lab",2),keyword(t){return t!==void 0?new Mt(t):dn[this.model].keyword(this.color)},hex(t){return t!==void 0?new Mt(t):na.to.hex(this.rgb().round().color)},hexa(t){if(t!==void 0)return new Mt(t);const e=this.rgb().round().color;let n=Math.round(this.valpha*255).toString(16).toUpperCase();return n.length===1&&(n="0"+n),na.to.hex(e)+n},rgbNumber(){const t=this.rgb().color;return(t[0]&255)<<16|(t[1]&255)<<8|t[2]&255},luminosity(){const t=this.rgb().color,e=[];for(const[n,s]of t.entries()){const a=s/255;e[n]=a<=.04045?a/12.92:((a+.055)/1.055)**2.4}return .2126*e[0]+.7152*e[1]+.0722*e[2]},contrast(t){const e=this.luminosity(),n=t.luminosity();return e>n?(e+.05)/(n+.05):(n+.05)/(e+.05)},level(t){const e=this.contrast(t);return e>=7?"AAA":e>=4.5?"AA":""},isDark(){const t=this.rgb().color;return(t[0]*2126+t[1]*7152+t[2]*722)/1e4<128},isLight(){return!this.isDark()},negate(){const t=this.rgb();for(let e=0;e<3;e++)t.color[e]=255-t.color[e];return t},lighten(t){const e=this.hsl();return e.color[2]+=e.color[2]*t,e},darken(t){const e=this.hsl();return e.color[2]-=e.color[2]*t,e},saturate(t){const e=this.hsl();return e.color[1]+=e.color[1]*t,e},desaturate(t){const e=this.hsl();return e.color[1]-=e.color[1]*t,e},whiten(t){const e=this.hwb();return e.color[1]+=e.color[1]*t,e},blacken(t){const e=this.hwb();return e.color[2]+=e.color[2]*t,e},grayscale(){const t=this.rgb().color,e=t[0]*.3+t[1]*.59+t[2]*.11;return Mt.rgb(e,e,e)},fade(t){return this.alpha(this.valpha-this.valpha*t)},opaquer(t){return this.alpha(this.valpha+this.valpha*t)},rotate(t){const e=this.hsl();let n=e.color[0];return n=(n+t)%360,n=n<0?360+n:n,e.color[0]=n,e},mix(t,e){if(!t||!t.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof t);const n=t.rgb(),s=this.rgb(),a=e===void 0?.5:e,i=2*a-1,r=n.alpha()-s.alpha(),o=((i*r===-1?i:(i+r)/(1+i*r))+1)/2,c=1-o;return Mt.rgb(o*n.red()+c*s.red(),o*n.green()+c*s.green(),o*n.blue()+c*s.blue(),n.alpha()*a+s.alpha()*(1-a))}};for(const t of Object.keys(dn)){if(hd.includes(t))continue;const{channels:e}=dn[t];Mt.prototype[t]=function(...n){return this.model===t?new Mt(this):n.length>0?new Mt(n,t):new Mt([...c1(dn[this.model][t].raw(this.color)),this.valpha],t)},Mt[t]=function(...n){let s=n[0];return typeof s=="number"&&(s=Kr(n,e)),new Mt(s,t)}}function l1(t,e){return Number(t.toFixed(e))}d(l1,"roundTo");function u1(t){return function(e){return l1(e,t)}}d(u1,"roundToPlace");function Et(t,e,n){t=Array.isArray(t)?t:[t];for(const s of t)(uo[s]||(uo[s]=[]))[e]=n;return t=t[0],function(s){let a;return s!==void 0?(n&&(s=n(s)),a=this[t](),a.color[e]=s,a):(a=this[t]().color[e],n&&(a=n(a)),a)}}d(Et,"getset");function Dt(t){return function(e){return Math.max(0,Math.min(t,e))}}d(Dt,"maxfn");function c1(t){return Array.isArray(t)?t:[t]}d(c1,"assertArray");function Kr(t,e){for(let n=0;n<e;n++)typeof t[n]!="number"&&(t[n]=0);return t}d(Kr,"zeroArray");var d1=Mt,fd=cr(d1);function p1(t){const e=t[0],n=t[1],s=t[2];let a,i,r;return a=e*1+n*0+s*1.13983,i=e*1+n*-.39465+s*-.5806,r=e*1+n*2.02311+s*0,a=Math.min(Math.max(0,a),1),i=Math.min(Math.max(0,i),1),r=Math.min(Math.max(0,r),1),[a*255,i*255,r*255]}d(p1,"yuv2rgb");function h1(t){const e=t[0]/255,n=t[1]/255,s=t[2]/255,a=e*.299+n*.587+s*.114,i=e*-.14713+n*-.28886+s*.436,r=e*.615+n*-.51499+s*-.10001;return[a,i,r]}d(h1,"rgb2yuv");var f1={scheme:"threezerotwofour",author:"jan t. sott (http://github.com/idleberg)",base00:"#090300",base01:"#3a3432",base02:"#4a4543",base03:"#5c5855",base04:"#807d7c",base05:"#a5a2a2",base06:"#d6d5d4",base07:"#f7f7f7",base08:"#db2d20",base09:"#e8bbd0",base0A:"#fded02",base0B:"#01a252",base0C:"#b5e4f4",base0D:"#01a0e4",base0E:"#a16a94",base0F:"#cdab53"},m1={scheme:"apathy",author:"jannik siebert (https://github.com/janniks)",base00:"#031A16",base01:"#0B342D",base02:"#184E45",base03:"#2B685E",base04:"#5F9C92",base05:"#81B5AC",base06:"#A7CEC8",base07:"#D2E7E4",base08:"#3E9688",base09:"#3E7996",base0A:"#3E4C96",base0B:"#883E96",base0C:"#963E4C",base0D:"#96883E",base0E:"#4C963E",base0F:"#3E965B"},g1={scheme:"ashes",author:"jannik siebert (https://github.com/janniks)",base00:"#1C2023",base01:"#393F45",base02:"#565E65",base03:"#747C84",base04:"#ADB3BA",base05:"#C7CCD1",base06:"#DFE2E5",base07:"#F3F4F5",base08:"#C7AE95",base09:"#C7C795",base0A:"#AEC795",base0B:"#95C7AE",base0C:"#95AEC7",base0D:"#AE95C7",base0E:"#C795AE",base0F:"#C79595"},b1={scheme:"atelier dune",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/dune)",base00:"#20201d",base01:"#292824",base02:"#6e6b5e",base03:"#7d7a68",base04:"#999580",base05:"#a6a28c",base06:"#e8e4cf",base07:"#fefbec",base08:"#d73737",base09:"#b65611",base0A:"#cfb017",base0B:"#60ac39",base0C:"#1fad83",base0D:"#6684e1",base0E:"#b854d4",base0F:"#d43552"},v1={scheme:"atelier forest",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/forest)",base00:"#1b1918",base01:"#2c2421",base02:"#68615e",base03:"#766e6b",base04:"#9c9491",base05:"#a8a19f",base06:"#e6e2e0",base07:"#f1efee",base08:"#f22c40",base09:"#df5320",base0A:"#d5911a",base0B:"#5ab738",base0C:"#00ad9c",base0D:"#407ee7",base0E:"#6666ea",base0F:"#c33ff3"},y1={scheme:"atelier heath",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/heath)",base00:"#1b181b",base01:"#292329",base02:"#695d69",base03:"#776977",base04:"#9e8f9e",base05:"#ab9bab",base06:"#d8cad8",base07:"#f7f3f7",base08:"#ca402b",base09:"#a65926",base0A:"#bb8a35",base0B:"#379a37",base0C:"#159393",base0D:"#516aec",base0E:"#7b59c0",base0F:"#cc33cc"},x1={scheme:"atelier lakeside",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/lakeside/)",base00:"#161b1d",base01:"#1f292e",base02:"#516d7b",base03:"#5a7b8c",base04:"#7195a8",base05:"#7ea2b4",base06:"#c1e4f6",base07:"#ebf8ff",base08:"#d22d72",base09:"#935c25",base0A:"#8a8a0f",base0B:"#568c3b",base0C:"#2d8f6f",base0D:"#257fad",base0E:"#5d5db1",base0F:"#b72dd2"},w1={scheme:"atelier seaside",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/seaside/)",base00:"#131513",base01:"#242924",base02:"#5e6e5e",base03:"#687d68",base04:"#809980",base05:"#8ca68c",base06:"#cfe8cf",base07:"#f0fff0",base08:"#e6193c",base09:"#87711d",base0A:"#c3c322",base0B:"#29a329",base0C:"#1999b3",base0D:"#3d62f5",base0E:"#ad2bee",base0F:"#e619c3"},S1={scheme:"bespin",author:"jan t. sott",base00:"#28211c",base01:"#36312e",base02:"#5e5d5c",base03:"#666666",base04:"#797977",base05:"#8a8986",base06:"#9d9b97",base07:"#baae9e",base08:"#cf6a4c",base09:"#cf7d34",base0A:"#f9ee98",base0B:"#54be0d",base0C:"#afc4db",base0D:"#5ea6ea",base0E:"#9b859d",base0F:"#937121"},C1={scheme:"brewer",author:"timoth\xE9e poisot (http://github.com/tpoisot)",base00:"#0c0d0e",base01:"#2e2f30",base02:"#515253",base03:"#737475",base04:"#959697",base05:"#b7b8b9",base06:"#dadbdc",base07:"#fcfdfe",base08:"#e31a1c",base09:"#e6550d",base0A:"#dca060",base0B:"#31a354",base0C:"#80b1d3",base0D:"#3182bd",base0E:"#756bb1",base0F:"#b15928"},E1={scheme:"bright",author:"chris kempson (http://chriskempson.com)",base00:"#000000",base01:"#303030",base02:"#505050",base03:"#b0b0b0",base04:"#d0d0d0",base05:"#e0e0e0",base06:"#f5f5f5",base07:"#ffffff",base08:"#fb0120",base09:"#fc6d24",base0A:"#fda331",base0B:"#a1c659",base0C:"#76c7b7",base0D:"#6fb3d2",base0E:"#d381c3",base0F:"#be643c"},A1={scheme:"chalk",author:"chris kempson (http://chriskempson.com)",base00:"#151515",base01:"#202020",base02:"#303030",base03:"#505050",base04:"#b0b0b0",base05:"#d0d0d0",base06:"#e0e0e0",base07:"#f5f5f5",base08:"#fb9fb1",base09:"#eda987",base0A:"#ddb26f",base0B:"#acc267",base0C:"#12cfc0",base0D:"#6fc2ef",base0E:"#e1a3ee",base0F:"#deaf8f"},_1={scheme:"codeschool",author:"brettof86",base00:"#232c31",base01:"#1c3657",base02:"#2a343a",base03:"#3f4944",base04:"#84898c",base05:"#9ea7a6",base06:"#a7cfa3",base07:"#b5d8f6",base08:"#2a5491",base09:"#43820d",base0A:"#a03b1e",base0B:"#237986",base0C:"#b02f30",base0D:"#484d79",base0E:"#c59820",base0F:"#c98344"},k1={scheme:"colors",author:"mrmrs (http://clrs.cc)",base00:"#111111",base01:"#333333",base02:"#555555",base03:"#777777",base04:"#999999",base05:"#bbbbbb",base06:"#dddddd",base07:"#ffffff",base08:"#ff4136",base09:"#ff851b",base0A:"#ffdc00",base0B:"#2ecc40",base0C:"#7fdbff",base0D:"#0074d9",base0E:"#b10dc9",base0F:"#85144b"},P1={scheme:"default",author:"chris kempson (http://chriskempson.com)",base00:"#181818",base01:"#282828",base02:"#383838",base03:"#585858",base04:"#b8b8b8",base05:"#d8d8d8",base06:"#e8e8e8",base07:"#f8f8f8",base08:"#ab4642",base09:"#dc9656",base0A:"#f7ca88",base0B:"#a1b56c",base0C:"#86c1b9",base0D:"#7cafc2",base0E:"#ba8baf",base0F:"#a16946"},D1={scheme:"eighties",author:"chris kempson (http://chriskempson.com)",base00:"#2d2d2d",base01:"#393939",base02:"#515151",base03:"#747369",base04:"#a09f93",base05:"#d3d0c8",base06:"#e8e6df",base07:"#f2f0ec",base08:"#f2777a",base09:"#f99157",base0A:"#ffcc66",base0B:"#99cc99",base0C:"#66cccc",base0D:"#6699cc",base0E:"#cc99cc",base0F:"#d27b53"},I1={scheme:"embers",author:"jannik siebert (https://github.com/janniks)",base00:"#16130F",base01:"#2C2620",base02:"#433B32",base03:"#5A5047",base04:"#8A8075",base05:"#A39A90",base06:"#BEB6AE",base07:"#DBD6D1",base08:"#826D57",base09:"#828257",base0A:"#6D8257",base0B:"#57826D",base0C:"#576D82",base0D:"#6D5782",base0E:"#82576D",base0F:"#825757"},L1={scheme:"flat",author:"chris kempson (http://chriskempson.com)",base00:"#2C3E50",base01:"#34495E",base02:"#7F8C8D",base03:"#95A5A6",base04:"#BDC3C7",base05:"#e0e0e0",base06:"#f5f5f5",base07:"#ECF0F1",base08:"#E74C3C",base09:"#E67E22",base0A:"#F1C40F",base0B:"#2ECC71",base0C:"#1ABC9C",base0D:"#3498DB",base0E:"#9B59B6",base0F:"#be643c"},T1={scheme:"google",author:"seth wright (http://sethawright.com)",base00:"#1d1f21",base01:"#282a2e",base02:"#373b41",base03:"#969896",base04:"#b4b7b4",base05:"#c5c8c6",base06:"#e0e0e0",base07:"#ffffff",base08:"#CC342B",base09:"#F96A38",base0A:"#FBA922",base0B:"#198844",base0C:"#3971ED",base0D:"#3971ED",base0E:"#A36AC7",base0F:"#3971ED"},M1={scheme:"grayscale",author:"alexandre gavioli (https://github.com/alexx2/)",base00:"#101010",base01:"#252525",base02:"#464646",base03:"#525252",base04:"#ababab",base05:"#b9b9b9",base06:"#e3e3e3",base07:"#f7f7f7",base08:"#7c7c7c",base09:"#999999",base0A:"#a0a0a0",base0B:"#8e8e8e",base0C:"#868686",base0D:"#686868",base0E:"#747474",base0F:"#5e5e5e"},O1={scheme:"green screen",author:"chris kempson (http://chriskempson.com)",base00:"#001100",base01:"#003300",base02:"#005500",base03:"#007700",base04:"#009900",base05:"#00bb00",base06:"#00dd00",base07:"#00ff00",base08:"#007700",base09:"#009900",base0A:"#007700",base0B:"#00bb00",base0C:"#005500",base0D:"#009900",base0E:"#00bb00",base0F:"#005500"},j1={scheme:"harmonic16",author:"jannik siebert (https://github.com/janniks)",base00:"#0b1c2c",base01:"#223b54",base02:"#405c79",base03:"#627e99",base04:"#aabcce",base05:"#cbd6e2",base06:"#e5ebf1",base07:"#f7f9fb",base08:"#bf8b56",base09:"#bfbf56",base0A:"#8bbf56",base0B:"#56bf8b",base0C:"#568bbf",base0D:"#8b56bf",base0E:"#bf568b",base0F:"#bf5656"},N1={scheme:"hopscotch",author:"jan t. sott",base00:"#322931",base01:"#433b42",base02:"#5c545b",base03:"#797379",base04:"#989498",base05:"#b9b5b8",base06:"#d5d3d5",base07:"#ffffff",base08:"#dd464c",base09:"#fd8b19",base0A:"#fdcc59",base0B:"#8fc13e",base0C:"#149b93",base0D:"#1290bf",base0E:"#c85e7c",base0F:"#b33508"},F1={scheme:"isotope",author:"jan t. sott",base00:"#000000",base01:"#404040",base02:"#606060",base03:"#808080",base04:"#c0c0c0",base05:"#d0d0d0",base06:"#e0e0e0",base07:"#ffffff",base08:"#ff0000",base09:"#ff9900",base0A:"#ff0099",base0B:"#33ff00",base0C:"#00ffff",base0D:"#0066ff",base0E:"#cc00ff",base0F:"#3300ff"},$1={scheme:"marrakesh",author:"alexandre gavioli (http://github.com/alexx2/)",base00:"#201602",base01:"#302e00",base02:"#5f5b17",base03:"#6c6823",base04:"#86813b",base05:"#948e48",base06:"#ccc37a",base07:"#faf0a5",base08:"#c35359",base09:"#b36144",base0A:"#a88339",base0B:"#18974e",base0C:"#75a738",base0D:"#477ca1",base0E:"#8868b3",base0F:"#b3588e"},R1={scheme:"mocha",author:"chris kempson (http://chriskempson.com)",base00:"#3B3228",base01:"#534636",base02:"#645240",base03:"#7e705a",base04:"#b8afad",base05:"#d0c8c6",base06:"#e9e1dd",base07:"#f5eeeb",base08:"#cb6077",base09:"#d28b71",base0A:"#f4bc87",base0B:"#beb55b",base0C:"#7bbda4",base0D:"#8ab3b5",base0E:"#a89bb9",base0F:"#bb9584"},q1={scheme:"monokai",author:"wimer hazenberg (http://www.monokai.nl)",base00:"#272822",base01:"#383830",base02:"#49483e",base03:"#75715e",base04:"#a59f85",base05:"#f8f8f2",base06:"#f5f4f1",base07:"#f9f8f5",base08:"#f92672",base09:"#fd971f",base0A:"#f4bf75",base0B:"#a6e22e",base0C:"#a1efe4",base0D:"#66d9ef",base0E:"#ae81ff",base0F:"#cc6633"},B1={scheme:"nicinabox",author:"nicinabox (http://github.com/nicinabox)",base00:"#2A2F3A",base01:"#3C444F",base02:"#4F5A65",base03:"#BEBEBE",base04:"#b0b0b0",base05:"#d0d0d0",base06:"#FFFFFF",base07:"#f5f5f5",base08:"#fb9fb1",base09:"#FC6D24",base0A:"#ddb26f",base0B:"#A1C659",base0C:"#12cfc0",base0D:"#6FB3D2",base0E:"#D381C3",base0F:"#deaf8f"},U1={scheme:"ocean",author:"chris kempson (http://chriskempson.com)",base00:"#2b303b",base01:"#343d46",base02:"#4f5b66",base03:"#65737e",base04:"#a7adba",base05:"#c0c5ce",base06:"#dfe1e8",base07:"#eff1f5",base08:"#bf616a",base09:"#d08770",base0A:"#ebcb8b",base0B:"#a3be8c",base0C:"#96b5b4",base0D:"#8fa1b3",base0E:"#b48ead",base0F:"#ab7967"},z1={scheme:"paraiso",author:"jan t. sott",base00:"#2f1e2e",base01:"#41323f",base02:"#4f424c",base03:"#776e71",base04:"#8d8687",base05:"#a39e9b",base06:"#b9b6b0",base07:"#e7e9db",base08:"#ef6155",base09:"#f99b15",base0A:"#fec418",base0B:"#48b685",base0C:"#5bc4bf",base0D:"#06b6ef",base0E:"#815ba4",base0F:"#e96ba8"},H1={scheme:"pop",author:"chris kempson (http://chriskempson.com)",base00:"#000000",base01:"#202020",base02:"#303030",base03:"#505050",base04:"#b0b0b0",base05:"#d0d0d0",base06:"#e0e0e0",base07:"#ffffff",base08:"#eb008a",base09:"#f29333",base0A:"#f8ca12",base0B:"#37b349",base0C:"#00aabb",base0D:"#0e5a94",base0E:"#b31e8d",base0F:"#7a2d00"},G1={scheme:"railscasts",author:"ryan bates (http://railscasts.com)",base00:"#2b2b2b",base01:"#272935",base02:"#3a4055",base03:"#5a647e",base04:"#d4cfc9",base05:"#e6e1dc",base06:"#f4f1ed",base07:"#f9f7f3",base08:"#da4939",base09:"#cc7833",base0A:"#ffc66d",base0B:"#a5c261",base0C:"#519f50",base0D:"#6d9cbe",base0E:"#b6b3eb",base0F:"#bc9458"},V1={scheme:"shapeshifter",author:"tyler benziger (http://tybenz.com)",base00:"#000000",base01:"#040404",base02:"#102015",base03:"#343434",base04:"#555555",base05:"#ababab",base06:"#e0e0e0",base07:"#f9f9f9",base08:"#e92f2f",base09:"#e09448",base0A:"#dddd13",base0B:"#0ed839",base0C:"#23edda",base0D:"#3b48e3",base0E:"#f996e2",base0F:"#69542d"},W1={scheme:"solarized",author:"ethan schoonover (http://ethanschoonover.com/solarized)",base00:"#002b36",base01:"#073642",base02:"#586e75",base03:"#657b83",base04:"#839496",base05:"#93a1a1",base06:"#eee8d5",base07:"#fdf6e3",base08:"#dc322f",base09:"#cb4b16",base0A:"#b58900",base0B:"#859900",base0C:"#2aa198",base0D:"#268bd2",base0E:"#6c71c4",base0F:"#d33682"},K1={scheme:"summerfruit",author:"christopher corley (http://cscorley.github.io/)",base00:"#151515",base01:"#202020",base02:"#303030",base03:"#505050",base04:"#B0B0B0",base05:"#D0D0D0",base06:"#E0E0E0",base07:"#FFFFFF",base08:"#FF0086",base09:"#FD8900",base0A:"#ABA800",base0B:"#00C918",base0C:"#1faaaa",base0D:"#3777E6",base0E:"#AD00A1",base0F:"#cc6633"},Y1={scheme:"tomorrow",author:"chris kempson (http://chriskempson.com)",base00:"#1d1f21",base01:"#282a2e",base02:"#373b41",base03:"#969896",base04:"#b4b7b4",base05:"#c5c8c6",base06:"#e0e0e0",base07:"#ffffff",base08:"#cc6666",base09:"#de935f",base0A:"#f0c674",base0B:"#b5bd68",base0C:"#8abeb7",base0D:"#81a2be",base0E:"#b294bb",base0F:"#a3685a"},X1={scheme:"london tube",author:"jan t. sott",base00:"#231f20",base01:"#1c3f95",base02:"#5a5758",base03:"#737171",base04:"#959ca1",base05:"#d9d8d8",base06:"#e7e7e8",base07:"#ffffff",base08:"#ee2e24",base09:"#f386a1",base0A:"#ffd204",base0B:"#00853e",base0C:"#85cebc",base0D:"#009ddc",base0E:"#98005d",base0F:"#b06110"},J1={scheme:"twilight",author:"david hart (http://hart-dev.com)",base00:"#1e1e1e",base01:"#323537",base02:"#464b50",base03:"#5f5a60",base04:"#838184",base05:"#a7a7a7",base06:"#c3c3c3",base07:"#ffffff",base08:"#cf6a4c",base09:"#cda869",base0A:"#f9ee98",base0B:"#8f9d6a",base0C:"#afc4db",base0D:"#7587a6",base0E:"#9b859d",base0F:"#9b703f"};const md={threezerotwofour:f1,apathy:m1,ashes:g1,atelierDune:b1,atelierForest:v1,atelierHeath:y1,atelierLakeside:x1,atelierSeaside:w1,bespin:S1,brewer:C1,bright:E1,chalk:A1,codeschool:_1,colors:k1,default:P1,eighties:D1,embers:I1,flat:L1,google:T1,grayscale:M1,greenscreen:O1,harmonic:j1,hopscotch:N1,isotope:F1,marrakesh:$1,mocha:R1,monokai:q1,nicinabox:B1,ocean:U1,paraiso:z1,pop:H1,railscasts:G1,shapeshifter:V1,solarized:W1,summerfruit:K1,tomorrow:Y1,tube:X1,twilight:J1},gd=md.default,bd=Object.keys(gd),Z1=d(t=>t<.25?1:t<.5?.9-t:1.1-t,"flip"),Q1=d(t=>{const e=fd(t),[n,s,a]=h1(e.array()),i=[Z1(n),s,a],r=p1(i);return fd.rgb(r).hex()},"invertColor"),sa=d(t=>e=>({className:[e.className,t.className].filter(Boolean).join(" "),style:{...e.style||{},...t.style||{}}}),"merger"),ex=d((t,e)=>{if(t===void 0)return e;if(e===void 0)return t;const n=typeof t,s=typeof e;switch(n){case"string":switch(s){case"string":return[e,t].filter(Boolean).join(" ");case"object":return sa({className:t,style:e});case"function":return(a,...i)=>sa({className:t})(e(a,...i))}break;case"object":switch(s){case"string":return sa({className:e,style:t});case"object":return{...e,...t};case"function":return(a,...i)=>sa({style:t})(e(a,...i))}break;case"function":switch(s){case"string":return(a,...i)=>t(sa(a)({className:e}),...i);case"object":return(a,...i)=>t(sa(a)({style:e}),...i);case"function":return(a,...i)=>t(e(a,...i),...i)}}},"mergeStyling"),tx=d((t,e)=>{const n=Object.keys(e);for(const s in t)n.indexOf(s)===-1&&n.push(s);return n.reduce((s,a)=>(s[a]=ex(t[a],e[a]),s),{})},"mergeStylings"),nx=d((t,e,...n)=>{if(e===null)return t;Array.isArray(e)||(e=[e]);const a=e.map(i=>t[i]).filter(Boolean).reduce((i,r)=>(typeof r=="string"?i.className=[i.className,r].filter(Boolean).join(" "):typeof r=="object"?i.style={...i.style,...r}:typeof r=="function"&&(i={...i,...r(i,...n)}),i),{className:"",style:{}});return a.className||delete a.className,Object.keys(a.style).length===0&&delete a.style,a},"getStylingByKeys"),Yr=d(t=>Object.keys(t).reduce((e,n)=>(e[n]=/^base/.test(n)?Q1(t[n]):n==="scheme"?t[n]+":inverted":t[n],e),{}),"invertBase16Theme"),sx=eo((t,e={},n={},...s)=>{const{defaultBase16:a=gd,base16Themes:i=null}=e,r=ax(n,i);r&&(n={...r,...n});const o=bd.reduce((p,g)=>(p[g]=n[g]||a[g],p),{}),c=Object.keys(n).reduce((p,g)=>(bd.indexOf(g)===-1&&(p[g]=n[g]),p),{}),l=t(o),u=tx(c,l);return eo(nx,2)(u,...s)},3),vd=d(t=>!!t.extend,"isStylingConfig"),ax=d((t,e)=>{if(t&&vd(t)&&t.extend&&(t=t.extend),typeof t=="string"){const[n,s]=t.split(":");e?t=e[n]:t=md[n],s==="inverted"&&(t=Yr(t))}return t&&Object.prototype.hasOwnProperty.call(t,"base00")?t:void 0},"getBase16Theme"),ix=d(t=>typeof t=="string"?`${t}:inverted`:t&&vd(t)&&t.extend?typeof t.extend=="string"?{...t,extend:`${t.extend}:inverted`}:{...t,extend:Yr(t.extend)}:t&&Yr(t),"invertTheme");function ox(t){const e=Object.prototype.toString.call(t).slice(8,-1);return e==="Object"&&typeof t[Symbol.iterator]=="function"?"Iterable":e==="Custom"&&t.constructor!==Object&&t instanceof Object?"Object":e}d(ox,"objType");function yd({styling:t,arrowStyle:e="single",expanded:n,nodeType:s,onClick:a}){return at.createElement("div",{...t("arrowContainer",e),onClick:a},at.createElement("div",{...t(["arrow","arrowSign"],s,n,e)},"\u25B6",e==="double"&&at.createElement("div",{...t(["arrowSign","arrowSignInner"])},"\u25B6")))}d(yd,"JSONArrow");function rx(t,e){return t==="Object"?Object.keys(e).length:t==="Array"?e.length:1/0}d(rx,"getLength");function lx(t){return typeof t.set=="function"}d(lx,"isIterableMap");function ux(t,e,n,s=0,a=1/0){let i;if(t==="Object"){let r=Object.getOwnPropertyNames(e);n&&r.sort(n===!0?void 0:n),r=r.slice(s,a+1),i={entries:r.map(o=>({key:o,value:e[o]}))}}else if(t==="Array")i={entries:e.slice(s,a+1).map((r,o)=>({key:o+s,value:r}))};else{let r=0;const o=[];let c=!0;const l=lx(e);for(const u of e){if(r>a){c=!1;break}s<=r&&(l&&Array.isArray(u)?typeof u[0]=="string"||typeof u[0]=="number"?o.push({key:u[0],value:u[1]}):o.push({key:`[entry ${r}]`,value:{"[key]":u[0],"[value]":u[1]}}):o.push({key:r,value:u})),r++}i={hasMore:!c,entries:o}}return i}d(ux,"getEntries");function Xr(t,e,n){const s=[];for(;e-t>n*n;)n=n*n;for(let a=t;a<=e;a+=n)s.push({from:a,to:Math.min(e,a+n-1)});return s}d(Xr,"getRanges");function cx(t,e,n,s,a=0,i=1/0){const r=ux.bind(null,t,e,n);if(!s)return r().entries;const o=i<1/0,c=Math.min(i-a,rx(t,e));if(t!=="Iterable"){if(c<=s||s<7)return r(a,i).entries}else if(c<=s&&!o)return r(a,i).entries;let l;if(t==="Iterable"){const{hasMore:u,entries:p}=r(a,a+s-1);l=u?[...p,...Xr(a+s,a+2*s-1,s)]:p}else l=o?Xr(a,i,s):[...r(0,s-5).entries,...Xr(s-4,c-5,s),...r(c-4,c-1).entries];return l}d(cx,"getCollectionEntries");function dx(t){const{styling:e,from:n,to:s,renderChildNodes:a,nodeType:i}=t,[r,o]=pe.useState(!1),c=pe.useCallback(()=>{o(!r)},[r]);return r?at.createElement("div",{...e("itemRange",r)},a(t,n,s)):at.createElement("div",{...e("itemRange",r),onClick:c},at.createElement(yd,{nodeType:i,styling:e,expanded:!1,onClick:c,arrowStyle:"double"}),`${n} ... ${s}`)}d(dx,"ItemRange");function px(t){return t.to!==void 0}d(px,"isRange");function xd(t,e,n){const{nodeType:s,data:a,collectionLimit:i,circularCache:r,keyPath:o,postprocessValue:c,sortObjectKeys:l}=t,u=[];return cx(s,a,l,i,e,n).forEach(p=>{if(px(p))u.push(at.createElement(dx,{...t,key:`ItemRange--${p.from}-${p.to}`,from:p.from,to:p.to,renderChildNodes:xd}));else{const{key:g,value:y}=p,w=r.indexOf(y)!==-1;u.push(at.createElement(wd,{...t,postprocessValue:c,collectionLimit:i,key:`Node--${g}`,keyPath:[g,...o],value:c(y),circularCache:[...r,y],isCircular:w,hideRoot:!1}))}}),u}d(xd,"renderChildNodes");function Jr(t){const{circularCache:e=[],collectionLimit:n,createItemString:s,data:a,expandable:i,getItemString:r,hideRoot:o,isCircular:c,keyPath:l,labelRenderer:u,level:p=0,nodeType:g,nodeTypeIndicator:y,shouldExpandNodeInitially:w,styling:S}=t,[m,D]=pe.useState(c?!1:w(l,a,p)),A=pe.useCallback(()=>{i&&D(!m)},[i,m]),j=m||o&&p===0?xd({...t,circularCache:e,level:p+1}):null,L=at.createElement("span",{...S("nestedNodeItemType",m)},y),k=r(g,a,L,s(a,n),l),I=[l,g,m,i];return o?at.createElement("li",{...S("rootNode",...I)},at.createElement("ul",{...S("rootNodeChildren",...I)},j)):at.createElement("li",{...S("nestedNode",...I)},i&&at.createElement(yd,{styling:S,nodeType:g,expanded:m,onClick:A}),at.createElement("label",{...S(["label","nestedNodeLabel"],...I),onClick:A},u(...I)),at.createElement("span",{...S("nestedNodeItemString",...I),onClick:A},k),at.createElement("ul",{...S("nestedNodeChildren",...I)},j))}d(Jr,"JSONNestedNode");function hx(t){const e=Object.getOwnPropertyNames(t).length;return`${e} ${e!==1?"keys":"key"}`}d(hx,"createItemString$2");function fx({data:t,...e}){return at.createElement(Jr,{...e,data:t,nodeType:"Object",nodeTypeIndicator:e.nodeType==="Error"?"Error()":"{}",createItemString:hx,expandable:Object.getOwnPropertyNames(t).length>0})}d(fx,"JSONObjectNode");function mx(t){return`${t.length} ${t.length!==1?"items":"item"}`}d(mx,"createItemString$1");function gx({data:t,...e}){return at.createElement(Jr,{...e,data:t,nodeType:"Array",nodeTypeIndicator:"[]",createItemString:mx,expandable:t.length>0})}d(gx,"JSONArrayNode");function bx(t,e){let n=0,s=!1;if(Number.isSafeInteger(t.size))n=t.size;else for(const a of t){if(e&&n+1>e){s=!0;break}n+=1}return`${s?">":""}${n} ${n!==1?"entries":"entry"}`}d(bx,"createItemString");function vx(t){return at.createElement(Jr,{...t,nodeType:"Iterable",nodeTypeIndicator:"()",createItemString:bx,expandable:!0})}d(vx,"JSONIterableNode");function Yn({nodeType:t,styling:e,labelRenderer:n,keyPath:s,valueRenderer:a,value:i,valueGetter:r=d(o=>o,"valueGetter")}){return at.createElement("li",{...e("value",t,s)},at.createElement("label",{...e(["label","valueLabel"],t,s)},n(s,t,!1,!1)),at.createElement("span",{...e("valueText",t,s)},a(r(i),i,...s)))}d(Yn,"JSONValueNode");function wd({getItemString:t,keyPath:e,labelRenderer:n,styling:s,value:a,valueRenderer:i,isCustomNode:r,...o}){const c=r(a)?"Custom":ox(a),l={getItemString:t,key:e[0],keyPath:e,labelRenderer:n,nodeType:c,styling:s,value:a,valueRenderer:i},u={...o,...l,data:a,isCustomNode:r};switch(c){case"Object":case"Error":case"WeakMap":case"WeakSet":return at.createElement(fx,{...u});case"Array":return at.createElement(gx,{...u});case"Iterable":case"Map":case"Set":return at.createElement(vx,{...u});case"String":return at.createElement(Yn,{...l,valueGetter:p=>`"${p}"`});case"Number":return at.createElement(Yn,{...l});case"Boolean":return at.createElement(Yn,{...l,valueGetter:p=>p?"true":"false"});case"Date":return at.createElement(Yn,{...l,valueGetter:p=>p.toISOString()});case"Null":return at.createElement(Yn,{...l,valueGetter:()=>"null"});case"Undefined":return at.createElement(Yn,{...l,valueGetter:()=>"undefined"});case"Function":case"Symbol":return at.createElement(Yn,{...l,valueGetter:p=>p.toString()});case"Custom":return at.createElement(Yn,{...l});default:return at.createElement(Yn,{...l,valueGetter:()=>`<${c}>`})}}d(wd,"JSONNode");var yx={scheme:"solarized",author:"ethan schoonover (http://ethanschoonover.com/solarized)",base00:"#002b36",base01:"#073642",base02:"#586e75",base03:"#657b83",base04:"#839496",base05:"#93a1a1",base06:"#eee8d5",base07:"#fdf6e3",base08:"#dc322f",base09:"#cb4b16",base0A:"#b58900",base0B:"#859900",base0C:"#2aa198",base0D:"#268bd2",base0E:"#6c71c4",base0F:"#d33682"};const xx=d(t=>({BACKGROUND_COLOR:t.base00,TEXT_COLOR:t.base07,STRING_COLOR:t.base0B,DATE_COLOR:t.base0B,NUMBER_COLOR:t.base09,BOOLEAN_COLOR:t.base09,NULL_COLOR:t.base08,UNDEFINED_COLOR:t.base08,FUNCTION_COLOR:t.base08,SYMBOL_COLOR:t.base08,LABEL_COLOR:t.base0D,ARROW_COLOR:t.base0D,ITEM_STRING_COLOR:t.base0B,ITEM_STRING_EXPANDED_COLOR:t.base03}),"colorMap"),wx=d(t=>({String:t.STRING_COLOR,Date:t.DATE_COLOR,Number:t.NUMBER_COLOR,Boolean:t.BOOLEAN_COLOR,Null:t.NULL_COLOR,Undefined:t.UNDEFINED_COLOR,Function:t.FUNCTION_COLOR,Symbol:t.SYMBOL_COLOR}),"valueColorMap"),Sx=d(t=>{const e=xx(t);return{tree:{border:0,padding:0,marginTop:"0.5em",marginBottom:"0.5em",marginLeft:"0.125em",marginRight:0,listStyle:"none",MozUserSelect:"none",WebkitUserSelect:"none",backgroundColor:e.BACKGROUND_COLOR},value:({style:n},s,a)=>({style:{...n,paddingTop:"0.25em",paddingRight:0,marginLeft:"0.875em",WebkitUserSelect:"text",MozUserSelect:"text",wordWrap:"break-word",paddingLeft:a.length>1?"2.125em":"1.25em",textIndent:"-0.5em",wordBreak:"break-all"}}),label:{display:"inline-block",color:e.LABEL_COLOR},valueLabel:{margin:"0 0.5em 0 0"},valueText:({style:n},s)=>({style:{...n,color:wx(e)[s]}}),itemRange:(n,s)=>({style:{paddingTop:s?0:"0.25em",cursor:"pointer",color:e.LABEL_COLOR}}),arrow:({style:n},s,a)=>({style:{...n,marginLeft:0,transition:"150ms",WebkitTransition:"150ms",MozTransition:"150ms",WebkitTransform:a?"rotateZ(90deg)":"rotateZ(0deg)",MozTransform:a?"rotateZ(90deg)":"rotateZ(0deg)",transform:a?"rotateZ(90deg)":"rotateZ(0deg)",transformOrigin:"45% 50%",WebkitTransformOrigin:"45% 50%",MozTransformOrigin:"45% 50%",position:"relative",lineHeight:"1.1em",fontSize:"0.75em"}}),arrowContainer:({style:n},s)=>({style:{...n,display:"inline-block",paddingRight:"0.5em",paddingLeft:s==="double"?"1em":0,cursor:"pointer"}}),arrowSign:{color:e.ARROW_COLOR},arrowSignInner:{position:"absolute",top:0,left:"-0.4em"},nestedNode:({style:n},s,a,i,r)=>({style:{...n,position:"relative",paddingTop:"0.25em",marginLeft:s.length>1?"0.875em":0,paddingLeft:r?0:"1.125em"}}),rootNode:{padding:0,margin:0},nestedNodeLabel:({style:n},s,a,i,r)=>({style:{...n,margin:0,padding:0,WebkitUserSelect:r?"inherit":"text",MozUserSelect:r?"inherit":"text",cursor:r?"pointer":"default"}}),nestedNodeItemString:({style:n},s,a,i)=>({style:{...n,paddingLeft:"0.5em",cursor:"default",color:i?e.ITEM_STRING_EXPANDED_COLOR:e.ITEM_STRING_COLOR}}),nestedNodeItemType:{marginLeft:"0.3em",marginRight:"0.3em"},nestedNodeChildren:({style:n},s,a)=>({style:{...n,padding:0,margin:0,listStyle:"none",display:a?"block":"none"}}),rootNodeChildren:{padding:0,margin:0,listStyle:"none"}}},"getDefaultThemeStyling"),Cx=sx(Sx,{defaultBase16:yx}),Sd=d(t=>t,"identity"),Ex=d((t,e,n)=>n===0,"expandRootNode"),Ax=d((t,e,n,s)=>at.createElement("span",null,n," ",s),"defaultItemString"),_x=d(([t])=>at.createElement("span",null,t,":"),"defaultLabelRenderer"),kx=d(()=>!1,"noCustomNode");function Zr({data:t,theme:e,invertTheme:n,keyPath:s=["root"],labelRenderer:a=_x,valueRenderer:i=Sd,shouldExpandNodeInitially:r=Ex,hideRoot:o=!1,getItemString:c=Ax,postprocessValue:l=Sd,isCustomNode:u=kx,collectionLimit:p=50,sortObjectKeys:g=!1}){const y=pe.useMemo(()=>Cx(n?ix(e):e),[e,n]);return at.createElement("ul",{...y("tree")},at.createElement(wd,{keyPath:o?[]:s,value:l(t),isCustomNode:u,styling:y,labelRenderer:a,valueRenderer:i,shouldExpandNodeInitially:r,hideRoot:o,getItemString:c,postprocessValue:l,collectionLimit:p,sortObjectKeys:g}))}d(Zr,"JSONTree");var Px=Object.defineProperty,Dx=d((t,e)=>Px(t,"name",{value:e,configurable:!0}),"d$o");const Ix=Dx(({request:t})=>b.jsxs("div",{className:"p-3 text-xs",children:[b.jsx("h3",{className:"font-medium text-gray-700 mb-2",children:"Request Body"}),b.jsx("div",{className:"bg-white p-3 rounded border border-gray-200",children:t.requestBody?b.jsx(Zr,{data:t.requestBody,theme:Hr,hideRoot:!0,shouldExpandNodeInitially:()=>!0}):b.jsx("div",{className:"text-gray-500",children:"No request body"})}),b.jsx("h3",{className:"font-medium text-gray-700 mt-4 mb-2",children:"Request Headers"}),b.jsx("div",{className:"bg-white p-3 rounded border border-solid border-gray-200",children:Object.keys(t.requestHeaders||{}).length>0?b.jsxs("table",{className:"w-full text-xs",children:[b.jsx("thead",{children:b.jsxs("tr",{className:"border-b border-solid border-gray-200",children:[b.jsx("th",{className:"text-left py-1 font-medium text-gray-600",children:"Name"}),b.jsx("th",{className:"text-left py-1 font-medium text-gray-600",children:"Value"})]})}),b.jsx("tbody",{children:Object.entries(t.requestHeaders||{}).map(([e,n])=>b.jsxs("tr",{className:"border-b border-gray-100",children:[b.jsx("td",{className:"py-1 pr-4 font-medium",children:e}),b.jsx("td",{className:"py-1 text-gray-600",children:n})]},e))})]}):b.jsx("div",{className:"text-gray-500",children:"No request headers"})})]}),"RequestTab");var Lx=Object.defineProperty,Tx=d((t,e)=>Lx(t,"name",{value:e,configurable:!0}),"d$n");const Mx=Tx(({request:t})=>{const[e,n]=pe.useState("preview");return b.jsxs("div",{className:"p-3 text-xs",children:[b.jsxs("div",{className:"flex justify-between items-center mb-2",children:[b.jsx("h3",{className:"font-medium text-gray-700",children:"Response Body"}),b.jsxs("div",{className:"flex text-xs bg-gray-100 rounded overflow-hidden",children:[b.jsx("button",{className:`px-3 py-1 ${e==="preview"?"bg-white shadow-sm":"hover:bg-gray-200"}`,onClick:()=>n("preview"),children:"Preview"}),b.jsx("button",{className:`px-3 py-1 ${e==="raw"?"bg-white shadow-sm":"hover:bg-gray-200"}`,onClick:()=>n("raw"),children:"Raw"})]})]}),b.jsx("div",{className:"bg-white p-3 rounded border border-gray-200",children:t.responseBody?e==="preview"?b.jsx(Zr,{data:t.responseBody,theme:Hr,hideRoot:!0,shouldExpandNodeInitially:()=>!0}):b.jsx("pre",{className:"whitespace-pre-wrap text-gray-800",children:JSON.stringify(t.responseBody)}):b.jsx("div",{className:"text-gray-500",children:"No response body"})}),b.jsx("h3",{className:"font-medium text-gray-700 mt-4 mb-2",children:"Response Headers"}),b.jsx("div",{className:"bg-white p-3 rounded border border-solid border-gray-200",children:Object.keys(t.responseHeaders||{}).length>0?b.jsxs("table",{className:"w-full text-xs",children:[b.jsx("thead",{children:b.jsxs("tr",{className:"border-b border-solid border-gray-200",children:[b.jsx("th",{className:"text-left py-1 font-medium text-gray-600",children:"Name"}),b.jsx("th",{className:"text-left py-1 font-medium text-gray-600",children:"Value"})]})}),b.jsx("tbody",{children:Object.entries(t.responseHeaders||{}).map(([s,a])=>b.jsxs("tr",{className:"border-b border-gray-100",children:[b.jsx("td",{className:"py-1 pr-4 font-medium",children:s}),b.jsx("td",{className:"py-1 text-gray-600",children:a})]},s))})]}):b.jsx("div",{className:"text-gray-500",children:"No response headers"})})]})},"ResponseTab");var Ox=Object.defineProperty,Qr=d((t,e)=>Ox(t,"name",{value:e,configurable:!0}),"t$7");const co=Qr(t=>t?t<1?"<1ms":t<1e3?`${Math.round(t)}ms`:`${(t/1e3).toFixed(2)}s`:"-","formatDuration"),jx=Qr(t=>t?t<1024?`${t}B`:t<1024*1024?`${(t/1024).toFixed(1)}KB`:`${(t/(1024*1024)).toFixed(1)}MB`:"-","formatSize"),Cd=Qr(t=>t?new Blob([JSON.stringify(t)]).size:0,"calculateSize");var Nx=Object.defineProperty,el=d((t,e)=>Nx(t,"name",{value:e,configurable:!0}),"n$s");const Fx=el(({request:t})=>{const e=t.duration||0,n=Math.max(e,100),s={queueing:e*.05,processing:e*.95},a=el(o=>`${o/n*100}%`,"getWidth"),i=el(o=>{let c=0;return Object.values(s).slice(0,o).forEach(l=>{c+=l}),a(c)},"getLeft"),r={queueing:"bg-gray-300",stalled:"bg-yellow-300",processing:"bg-blue-300",waiting:"bg-green-300",receiving:"bg-purple-300"};return b.jsx("div",{className:"p-3 text-xs",children:b.jsxs("div",{className:"mb-4",children:[b.jsx("h3",{className:"font-medium text-gray-700 mb-2",children:"Timing"}),b.jsxs("div",{className:"bg-white rounded border border-gray-200 p-3",children:[b.jsxs("div",{className:"mb-4",children:[b.jsxs("div",{className:"flex justify-between mb-1",children:[b.jsx("span",{className:"font-medium",children:"Total Duration"}),b.jsx("span",{children:co(e)})]}),b.jsx("div",{className:"h-6 relative bg-gray-100 rounded overflow-hidden",children:Object.entries(s).map(([o,c],l)=>b.jsx("div",{className:`absolute h-full ${r[o]}`,style:{width:a(c),left:i(l)}},o))}),b.jsx("div",{className:"flex mt-2 text-xs gap-3",children:Object.entries(s).map(([o,c])=>b.jsxs("div",{className:"flex items-center",children:[b.jsx("div",{className:`w-3 h-3 mr-1 rounded-sm ${r[o]}`}),b.jsxs("span",{className:"mr-1",children:[o,":"]}),b.jsx("span",{className:"font-medium",children:co(c)})]},o))})]}),b.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[b.jsxs("div",{children:[b.jsx("div",{className:"font-medium mb-1",children:"Started"}),b.jsx("div",{children:new Date(t.startTime).toLocaleTimeString()})]}),t.endTime&&b.jsxs("div",{children:[b.jsx("div",{className:"font-medium mb-1",children:"Ended"}),b.jsx("div",{children:new Date(t.endTime).toLocaleTimeString()})]})]}),!t.endTime&&b.jsxs("div",{className:"text-yellow-500 text-xs",children:[b.jsx(cg,{className:"inline-block mr-1"}),"This request did not yet end. It may still be ongoing."]})]})]})})},"TimingTab");var $x=Object.defineProperty,Rx=d((t,e)=>$x(t,"name",{value:e,configurable:!0}),"s$y");const qx=Rx(({request:t,onClose:e})=>{const[n,s]=pe.useState("headers");return b.jsxs("div",{className:"flex flex-col border-l border-gray-200",style:{height:"calc(100% - 40px)"},children:[b.jsxs("div",{className:"flex justify-between items-center px-4 py-[3px] border-b border-solid border-gray-200 bg-gray-50",children:[b.jsxs("div",{className:"flex-1 truncate flex items-center gap-2",children:[b.jsx("h2",{className:"font-medium text-sm truncate",children:t.componentTitle}),b.jsxs("p",{className:"text-xs text-gray-500 truncate",children:["- ",t.componentName]})]}),b.jsx("button",{onClick:e,className:"p-1 text-gray-500 hover:text-gray-700 hover:bg-gray-200 rounded transition-colors",children:b.jsx(ec,{size:18})})]}),b.jsx($y,{activeTab:n,onTabChange:s}),b.jsxs("div",{className:"overflow-auto pb-10",style:{height:"340px"},children:[n==="headers"&&b.jsx(Hy,{request:t}),n==="request"&&b.jsx(Ix,{request:t}),n==="response"&&b.jsx(Mx,{request:t}),n==="timing"&&b.jsx(Fx,{request:t}),n==="cost"&&b.jsx(By,{request:t})]})]})},"RequestDetailPanel");var Bx=Object.defineProperty,Ux=d((t,e)=>Bx(t,"name",{value:e,configurable:!0}),"r$t");const zx=Ux(({status:t})=>{let e="bg-gray-200";return t===0?e="bg-blue-200":t>=200&&t<300?e="bg-green-200":t>=300&&t<400?e="bg-yellow-200":t>=400&&(e="bg-red-200"),b.jsx("div",{className:`w-2 h-2 rounded-full ${e}`})},"StatusIndicator");var Hx=Object.defineProperty,Gx=d((t,e)=>Hx(t,"name",{value:e,configurable:!0}),"r$s");const Vx=Gx(({requests:t,selectedRequest:e,onSelectRequest:n,isDetailOpen:s})=>t.length===0?b.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:"No network requests recorded"}):b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"grid grid-cols-12 text-xs font-medium text-gray-500 bg-gray-50 border-b border-solid border-gray-200 px-4 py-2 z-10",children:[b.jsx("div",{className:s?"col-span-12":"col-span-4",children:"Component"}),!s&&b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"col-span-2",children:"Status"}),b.jsx("div",{className:"col-span-2",children:"Type"}),b.jsx("div",{className:"col-span-2",children:"Size"}),b.jsx("div",{className:"col-span-2",children:"Time"})]})]}),b.jsx("div",{className:"overflow-auto",style:{height:"calc(100% - 100px)"},children:t.map(a=>{const i=e===a.eventId,r=Cd(a.requestBody),o=Cd(a.responseBody),c=r+o,l=a.cost&&a.cost.length>0;return b.jsxs("div",{className:`grid grid-cols-12 text-xs border-b border-gray-100 px-4 py-2 cursor-pointer hover:bg-gray-50 transition-colors ${i?"bg-blue-50":""}`,onClick:()=>n(a.eventId),"data-request-id":a.eventId,children:[b.jsxs("div",{className:s?"col-span-12 flex items-center":"col-span-4 flex items-center gap-2",children:[b.jsx(zx,{status:a.status}),b.jsxs("div",{className:"truncate ml-2 flex-1",children:[b.jsxs("div",{className:"font-medium flex items-center gap-1",children:[a.componentTitle,l&&b.jsx("span",{title:"Has cost information",className:"inline-flex text-yellow-500",children:b.jsx(pr,{size:10})})]}),b.jsx("div",{className:"text-gray-500 text-xs truncate",children:a.componentName})]})]}),!s&&b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"col-span-2 flex items-center",children:a.state==="pending"?b.jsx("span",{className:"text-blue-500",children:"Pending"}):a.status>=200&&a.status<300?b.jsx("span",{className:"text-green-600",children:a.status}):b.jsx("span",{className:"text-red-500",children:a.status||"Error"})}),b.jsx("div",{className:"col-span-2 flex items-center text-gray-600",children:"Component"}),b.jsx("div",{className:"col-span-2 flex items-center text-gray-600",children:jx(c)}),b.jsxs("div",{className:"col-span-2 flex items-center gap-1 text-gray-600",children:[b.jsx(dg,{size:14,className:"text-gray-400"}),co(a.duration),l&&b.jsx("span",{title:"Has cost information",className:"ml-1 text-yellow-500",children:b.jsx(pr,{size:12})})]})]})]},a.eventId)})})]}),"RequestList");var Wx=Object.defineProperty,Va=d((t,e)=>Wx(t,"name",{value:e,configurable:!0}),"l$f");const Kx=Va(({isOpen:t,onClose:e,filters:n,updateFilters:s})=>{const[a,i]=pe.useState(n.selectedComponentNames);if(!t)return null;const r=Va(l=>{i(l?[...n.componentNames]:[])},"handleToggleAll"),o=Va(l=>{i(u=>u.includes(l)?u.filter(p=>p!==l):[...u,l])},"handleToggleItem"),c=Va(()=>{s(a),e()},"handleApply");return b.jsxs("div",{className:"absolute top-full right-0 mt-1 bg-white shadow-lg rounded-md border border-solid border-gray-200 z-50 w-80 animate-fadeIn",children:[b.jsxs("div",{className:"p-2 border-b border-solid border-gray-200 flex justify-between items-center",children:[b.jsx("span",{className:"font-medium text-sm",children:"Filter by Component"}),b.jsxs("div",{className:"flex gap-2",children:[b.jsx("button",{className:"text-xs text-blue-500 hover:underline",onClick:()=>r(!0),children:"Select All"}),b.jsx("button",{className:"text-xs text-blue-500 hover:underline",onClick:()=>r(!1),children:"Clear All"})]})]}),b.jsx("div",{className:"max-h-60 overflow-y-auto p-2",children:n.componentNames.length===0?b.jsx("div",{className:"text-sm text-gray-500 p-2",children:"No components found"}):n.componentNames.map(l=>b.jsxs("div",{className:"flex items-center py-1",children:[b.jsx("input",{type:"checkbox",id:`filter-${l}`,checked:a.includes(l),onChange:()=>o(l),className:"mr-2"}),b.jsx("label",{htmlFor:`filter-${l}`,className:"text-sm truncate cursor-pointer",children:l})]},l))}),b.jsx("div",{className:"p-2 border-t border-gray-200 flex justify-end",children:b.jsx("button",{className:"px-3 py-1 bg-blue-500 text-white text-sm rounded hover:bg-blue-600",onClick:c,children:"Apply"})})]})},"FilterDropdown"),Yx=Va(({searchTerm:t,setSearchTerm:e,onCopy:n,onDownload:s,onClear:a,isRecording:i,toggleRecording:r,filters:o,updateFilters:c})=>{const[l,u]=pe.useState(!1),p=o.componentNames.length-o.selectedComponentNames.length;return b.jsxs("div",{className:"flex items-center justify-between p-2 border-b border-solid border-gray-200",children:[b.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[b.jsxs("div",{className:"relative flex-1 max-w-md",children:[b.jsx(pg,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),b.jsx("input",{type:"text",placeholder:"Filter requests...",className:"pl-8 pr-4 py-1 w-full text-sm border border-solid border-gray-200 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500",value:t,onChange:g=>e(g.target.value)})]}),b.jsxs("div",{className:"relative",children:[b.jsxs("button",{className:`p-1 ${p>0?"text-blue-500":"text-gray-500"} hover:text-gray-700 hover:bg-gray-100 rounded flex items-center`,onClick:()=>u(!l),title:"Filter components",children:[b.jsx(hg,{size:18}),p>0&&b.jsx("span",{className:"ml-1 text-xs bg-blue-500 text-white rounded-full w-4 h-4 flex items-center justify-center",children:p})]}),b.jsx(Kx,{isOpen:l,onClose:()=>u(!1),filters:o,updateFilters:c})]}),b.jsx("button",{className:"p-1 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded",title:i?"Stop recording":"Start recording",onClick:r,children:b.jsx(fg,{size:18,color:i?"red":"gray"})})]}),b.jsxs("div",{className:"flex gap-1",children:[b.jsx("button",{onClick:n,title:"Copy",className:"p-1 text-gray-500 hover:text-gray-700 hover:bg-gray-200 rounded transition-colors",children:b.jsx(Fi,{size:14})}),b.jsx("button",{onClick:s,title:"Download",className:"p-1 text-gray-500 hover:text-gray-700 hover:bg-gray-200 rounded transition-colors",children:b.jsx(dr,{size:15})}),b.jsx("button",{onClick:a,title:"Clear",className:"p-1 text-gray-500 hover:text-gray-700 hover:bg-gray-200 rounded transition-colors",children:b.jsx(Zu,{size:15})})]})]})},"Toolbar");var Xx=Object.defineProperty,Nn=d((t,e)=>Xx(t,"name",{value:e,configurable:!0}),"d$m");const Jx=Nn(({requests:t,onSelectRequest:e,selectedRequest:n,onRangeChange:s})=>{const a=pe.useRef(null),i=pe.useRef(null),r=100,o=.1,c=.6,l=500,u=pe.useMemo(()=>{if(t.length===0){const O=Date.now();return{min:O-6e4,max:O}}const Q=t.map(O=>O.startTime),G=t.map(O=>O.endTime||O.startTime+(O.duration||0)),J=Math.min(...Q),E=Math.max(...G);return{min:J,max:E+(E-J)*.05}},[t]),[p,g]=pe.useState([u.min,u.max]),[y,w]=pe.useState(null),[S,m]=pe.useState(0),[D,A]=pe.useState([0,0]),[j,L]=pe.useState(!1);pe.useEffect(()=>{g([u.min,u.max])},[u]),pe.useEffect(()=>{s(p)},[p,s]),pe.useEffect(()=>{if(y){const Q=Nn(J=>{if(!a.current||!y)return;const E=a.current.getBoundingClientRect().width,O=(J.clientX-S)/E*c,C=(u.max-u.min)*O;let B=[...p];if(y==="left")B[0]=Math.max(u.min,Math.min(D[0]+C,D[1]-l));else if(y==="right")B[1]=Math.min(u.max,Math.max(D[1]+C,D[0]+l));else if(y==="middle"||y==="waterfall"){const z=D[1]-D[0],Y=y==="waterfall"?-1:1;let se=D[0]+C*Y,le=D[1]+C*Y;se<u.min&&(se=u.min,le=se+z),le>u.max&&(le=u.max,se=le-z),B=[se,le]}g(B)},"handleMouseMove"),G=Nn(()=>{w(null)},"handleMouseUp");return document.addEventListener("mousemove",Q),document.addEventListener("mouseup",G),()=>{document.removeEventListener("mousemove",Q),document.removeEventListener("mouseup",G)}}},[y,S,D,p,u]);const k=p[1]-p[0],I=Nn((Q,G,J)=>{const E=p[1]-p[0],O=E*Q;if(G){if(E<=l)return;let C=p[0],B=p[1];if(J!==void 0&&i.current){const z=i.current.getBoundingClientRect(),Y=(J-z.left)/z.width;if(C=p[0]+O*Y,B=p[1]-O*(1-Y),B-C<l){const se=C+(B-C)/2;C=se-l/2,B=se+l/2}}else C=p[0]+O/2,B=p[1]-O/2;g([C,B]),L(!0)}else{let C=p[0],B=p[1];if(J!==void 0&&i.current){const z=i.current.getBoundingClientRect(),Y=(J-z.left)/z.width;C=p[0]-O*Y,B=p[1]+O*(1-Y)}else C=p[0]-O/2,B=p[1]+O/2;C<u.min&&(C=u.min),B>u.max&&(B=u.max),g([C,B]),L(!0)}setTimeout(()=>L(!1),300)},"zoomByFactor"),v=Nn(Q=>{Q.preventDefault();const G=(u.max-u.min)/(p[1]-p[0]),J=Math.min(o,o/(G/5)),E=Q.deltaY<0;I(J,E,Q.clientX)},"handleWheel"),T=Nn(()=>{g([u.min,u.max]),L(!0),setTimeout(()=>L(!1),300)},"handleResetZoom"),P=Nn(Q=>{Q.button!==0||Q.target.closest(".request-bar")||(Q.preventDefault(),w("waterfall"),m(Q.clientX),A([...p]))},"handleWaterfallMouseDown"),F=Nn(Q=>{const G=Q.startTime,J=Q.endTime||G+(Q.duration||100);if(J<p[0]||G>p[1])return{display:"none"};const E=Math.max(0,(G-p[0])/k*100),O=Math.min(100,(p[1]-J)/k*100),C=100-E-O;return{left:`${E}%`,width:`${C}%`}},"calculateBarStyles"),U=Nn(Q=>{const G=new Date(Q),J=G.getHours().toString().padStart(2,"0"),E=G.getMinutes().toString().padStart(2,"0"),O=G.getSeconds().toString().padStart(2,"0");return`${J}:${E}:${O}`},"formatTimestamp"),M=pe.useMemo(()=>{const Q=[];for(let G=0;G<=5;G++){const J=p[0]+(p[1]-p[0])*G/5;Q.push({time:J,position:`${G/5*100}%`,label:U(J)})}return Q},[p]),V=pe.useMemo(()=>{const Q={},G=[];return[...t].sort((J,E)=>J.startTime-E.startTime).forEach(J=>{const E=J.startTime,O=J.endTime||E+(J.duration||100);if(O<p[0]||E>p[1])return;let C=0;for(;G[C]&&G[C]>E;)C++;Q[J.eventId]=C,G[C]=O}),{rows:Q,rowCount:Math.max(1,Object.keys(Q).length>0?Math.max(...Object.values(Q))+1:1)}},[t,p]),W=pe.useMemo(()=>{const Q=Math.max(5,V.rowCount);return Math.max(3,Math.min(18,Math.floor((r-10)/Q)))},[V.rowCount]),K=Nn(Q=>{let G=0;for(let J=0;J<Q.length;J++)G=Q.charCodeAt(J)+((G<<5)-G);return`hsl(${Math.abs(G%360)}, 70%, 80%)`},"getComponentColor"),R=pe.useMemo(()=>{const Q={};return[...new Set(t.map(G=>G.componentName))].forEach(G=>{Q[G]=K(G)}),Q},[t]),X=pe.useMemo(()=>{const Q=u.max-u.min,G=p[1]-p[0];return Math.round(Q/G*100)},[u,p]);return b.jsxs("div",{className:"border-b border-solid border-gray-200",ref:a,children:[b.jsxs("div",{className:"text-xs text-gray-500 flex justify-between px-4 pt-1",children:[b.jsx("div",{children:U(p[0])}),b.jsxs("div",{className:"flex items-center space-x-2",children:[b.jsx("div",{className:"flex items-center",children:b.jsx(mg,{className:`w-3 h-3 mr-1 ${X>100?"text-blue-600":"text-gray-500"} ${j?"text-blue-800":""}`})}),b.jsx("button",{className:`px-2 py-1 bg-gray-100 hover:bg-gray-200 rounded text-xs ml-2 ${X>100?"visible":"invisible"}`,onClick:T,title:"Reset zoom",children:"Reset"})]}),b.jsx("div",{children:U(p[1])})]}),b.jsxs("div",{className:"px-4 pb-2 pt-1 relative mt-4",children:[b.jsx("div",{className:"absolute inset-0 flex",children:M.map((Q,G)=>b.jsx("div",{className:"h-full flex flex-col bg-gray-100 w-[0.5px]",style:{left:Q.position},children:b.jsx("div",{className:"text-xs text-gray-400 absolute -top-5 transform -translate-x-1/2",children:G===0||G===M.length-1?"":Q.label})},G))}),b.jsx("div",{className:`relative transition-all duration-150 ${j?"bg-blue-50 bg-opacity-20":""}`,ref:i,onMouseDown:P,onWheel:v,style:{cursor:y==="waterfall"?"grabbing":"grab"},children:b.jsx("div",{className:"relative",style:{height:`${r}px`},children:t.map(Q=>{const G=n===Q.eventId,J=F(Q);if(J.display==="none")return null;const E=5+(V.rows[Q.eventId]||0)*(W+2),O=R[Q.componentName];let C="";Q.state==="pending"?C="border-blue-500":Q.status>=200&&Q.status<300?C="border-green-500":Q.status>=300&&Q.status<400?C="border-yellow-500":Q.status>=400&&(C="border-red-500");const B=`${Q.componentName} (${Q.componentTitle})
Status: ${Q.status}
Duration: ${co(Q.duration)}
URL: ${Q.url}`;return b.jsx("div",{className:`absolute flex items-center rounded cursor-pointer transition-all request-bar ${G?"ring-2 ring-blue-500":"hover:ring-1 hover:ring-blue-300"} border ${C}`,style:{...J,height:`${W}px`,top:`${E}px`,zIndex:2,backgroundColor:O},onClick:()=>e(Q.eventId),title:B},Q.eventId)})})})]})]})},"WaterfallView");var Zx=Object.defineProperty,Fs=d((t,e)=>Zx(t,"name",{value:e,configurable:!0}),"a$v");const Qx=Fs(()=>{const{networkRequestsArray:t,clearNetworkRequests:e,isNetworkRecording:n,toggleNetworkRecording:s,networkUIState:a,updateNetworkUIState:i,workspace:r}=js(),[o,c]=pe.useState(""),[l,u]=pe.useState(null),[p,g]=pe.useState([0,0]),[y,w]=pe.useState(null),S=pe.useRef(null),m=pe.useMemo(()=>{const F=t.filter(U=>{const M=U.startTime,V=U.endTime||M+(U.duration||0);return M<=p[1]&&V>=p[0]}).filter(U=>a.filters.selectedComponentNames.includes(U.componentName));return o?F.filter(U=>U.componentName.toLowerCase().includes(o.toLowerCase())||U.componentTitle.toLowerCase().includes(o.toLowerCase())||U.url.toLowerCase().includes(o.toLowerCase())):F},[t,o,p,a.filters.selectedComponentNames]),D=pe.useMemo(()=>l&&t.find(F=>F.eventId===l)||null,[l,t]),A=Fs(()=>{const F=JSON.stringify(m,null,2);navigator.clipboard.writeText(F)},"handleCopyRequests"),j=Fs(()=>{const F=JSON.stringify(m,null,2),U=new Blob([F],{type:"application/json"}),M=URL.createObjectURL(U),V=document.createElement("a");V.href=M,V.download=`network-requests-${new Date().toISOString()}.json`,document.body.appendChild(V),V.click(),document.body.removeChild(V),URL.revokeObjectURL(M)},"handleDownloadRequests"),L=Fs(F=>{u(l===F?null:F)},"handleSelectRequest"),k=Fs(F=>{g(F)},"handleRangeChange"),I=pe.useCallback(()=>{console.log("Toggling waterfall from",a.showWaterfall,"to",!a.showWaterfall),i({showWaterfall:!a.showWaterfall})},[a.showWaterfall,i]),v=Fs(F=>{const U=F.target.closest("[data-request-id]");if(U){const M=U.getAttribute("data-request-id");if(M)return t.find(V=>V.eventId===M)}},"findTargetRequest"),T=pe.useCallback(F=>{F.preventDefault(),F.stopPropagation();const U=S.current?.getBoundingClientRect();if(!U)return;const M=F.clientX-U.left,V=F.clientY-U.top,W=U.width-160,K=U.height-80,R=Math.min(M,W),X=Math.min(V,K),Q=v(F);console.log("Right click detected at:",R,X,"Target request:",Q?.componentName),w({x:R,y:X,targetRequest:Q})},[t]),P=pe.useCallback(()=>{console.log("Closing context menu"),w(null)},[]);return pe.useEffect(()=>{const F=Fs(U=>{const M=document.querySelector('[data-context-menu="true"]');y&&M&&!M.contains(U.target)&&P()},"handleClick");if(y)return document.addEventListener("click",F),()=>{document.removeEventListener("click",F)}},[y,P]),b.jsxs("div",{className:"flex flex-col h-full relative",ref:S,onContextMenu:T,title:"Right-click for options",children:[b.jsx(Yx,{searchTerm:o,setSearchTerm:c,onCopy:A,onDownload:j,onClear:e,isRecording:n,toggleRecording:s,filters:a.filters,updateFilters:F=>{i({filters:{...a.filters,selectedComponentNames:F}})}}),!n&&b.jsx("div",{className:"bg-red-50 text-red-600 text-xs px-4 py-1 border-b border-red-200",children:"Network recording is paused. Click the record button to resume capturing network activity."}),b.jsx("div",{className:`transition-all duration-300 ease-in-out overflow-hidden cursor-context-menu ${a.showWaterfall?"max-h-[150px] opacity-100":"max-h-0 opacity-0"}`,"data-waterfall-visible":a.showWaterfall?"true":"false",children:t.length>0&&b.jsx(Jx,{requests:t,selectedRequest:l,onSelectRequest:L,onRangeChange:k})}),b.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[b.jsx("div",{className:`${D?"w-1/4":"w-full"} transition-all duration-300 `,children:b.jsx(Vx,{requests:m,selectedRequest:l,onSelectRequest:L,isDetailOpen:!!D})}),D&&b.jsx("div",{className:"w-3/4 overflow-hidden animate-fadeIn",children:b.jsx(qx,{request:D,onClose:()=>u(null)})})]}),y&&b.jsx(jy,{x:y.x,y:y.y,onClose:P,showWaterfall:a.showWaterfall,toggleWaterfall:I,targetRequest:y.targetRequest})]})},"NetworkContent");var e2=Object.defineProperty,Ed=d((t,e)=>e2(t,"name",{value:e,configurable:!0}),"r$r");const t2=Ed(()=>{const{workspace:t}=js(),[e,n]=pe.useState(!1);pe.useEffect(()=>{if(e){const i=setTimeout(()=>{n(!1)},1e3);return()=>clearTimeout(i)}},[e]);const s=t?.agent?.data||{},a=JSON.stringify(s,null,2);return b.jsxs("div",{className:"relative h-full overflow-hidden text-sm",children:[b.jsx("div",{className:"absolute top-2 right-2 z-[2]",children:b.jsxs("div",{className:"flex gap-1 bg-gray-100 rounded-md p-0.5",children:[b.jsx(ln,{content:e?"Copied!":"Copy",placement:"top",className:"text-xs",children:b.jsx("button",{onClick:()=>{navigator.clipboard.writeText(a),n(!0)},className:"p-1 text-gray-500 hover:text-gray-700 hover:bg-gray-200 rounded transition-colors z-[2]",children:b.jsx(Fi,{size:14})})}),b.jsx(ln,{content:"Download JSON",placement:"top",className:"text-xs",children:b.jsx("button",{onClick:Ed(()=>{const i=new Blob([a],{type:"application/json"}),r=URL.createObjectURL(i),o=document.createElement("a");o.href=r,o.download=`agent-source-${new Date().toISOString()}.json`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(r)},"handleDownload"),className:"p-1 text-gray-500 hover:text-gray-700 hover:bg-gray-200 rounded transition-colors z-[2]",children:b.jsx(dr,{size:15})})})]})}),b.jsx("div",{className:"overflow-auto pl-4",style:{height:"calc(100% - 40px)"},children:b.jsx(Zr,{hideRoot:!0,data:s,theme:Hr})})]})},"SourceContent");var n2=Object.defineProperty,s2=d((t,e)=>n2(t,"name",{value:e,configurable:!0}),"n$r");const a2=s2(()=>{const{activeTab:t}=js();return b.jsxs("div",{className:"transition-all duration-300 ease-in-out overflow-hidden bg-white h-full",children:[t===Xt.LOGS&&b.jsx(My,{}),t===Xt.SOURCE&&b.jsx(t2,{}),t===Xt.NETWORK&&b.jsx(Qx,{})]})},"TabContent");var i2=Object.defineProperty,Ad=d((t,e)=>i2(t,"name",{value:e,configurable:!0}),"o$r");const o2=Ad(()=>{const{workspace:t}=js(),[e,n]=pe.useState(()=>{const a=t?.serverData?.status?.toLowerCase();return a==="online"?"online":a===void 0?"discovering":"offline"});pe.useEffect(()=>{let a;const i=Ad(()=>{const r=t?.serverData?.status?.toLowerCase(),o=r==="online"?"online":r===void 0?"discovering":"offline";n(o),a=setTimeout(i,o==="online"?2e4:3e3)},"checkStatus");return i(),()=>{a&&clearTimeout(a)}},[t]);const s={online:{color:"green",text:"Online"},discovering:{color:"yellow",text:"Discovering"},offline:{color:"red",text:"Offline"}};return b.jsxs("div",{className:"items-center gap-1 hidden md:flex",children:[b.jsx(gg,{className:`text-${s[e].color}-500`,size:8}),b.jsxs("span",{className:"text-sm text-gray-600 select-none",children:["Server Status: ",s[e].text]})]})},"ServerStatus");var r2=Object.defineProperty,Wa=d((t,e)=>r2(t,"name",{value:e,configurable:!0}),"o$q");const l2=Wa(({count:t,isActive:e})=>t===0||e?null:b.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 bg-blue-500 rounded-full animate-pulse duration-1000","data-testid":"unread-badge"}),"UnreadBadge"),u2=Wa(()=>{const{activeTab:t,setActiveTab:e,isExpanded:n,toggleExpanded:s,unreadLogsCount:a,markLogsAsRead:i}=js(),r=Wa(l=>`px-4 py-2 text-sm font-medium cursor-pointer transition-all duration-200 relative select-none ${t===l?"bg-white text-gray-900 rounded-t-lg border-t border-x border-gray-200 shadow-[0_-1px_2px_rgba(0,0,0,0.05)]":"text-gray-600 hover:text-gray-900"}`,"getTabClasses"),o=Wa(l=>{e(l),n||s(),l===Xt.LOGS&&i()},"handleTabClick"),c=Wa(()=>{const l=document.getElementById("bottom-bar");l&&l.classList.toggle("hidden")},"toggleBottomBar");return b.jsxs("nav",{className:"flex justify-between items-center bg-gray-100 rounded-t-lg","data-testid":"tab-navigation",children:[b.jsxs("div",{className:"flex gap-1 px-2 pt-1",children:[b.jsx("div",{className:"relative",children:b.jsxs("div",{className:r(Xt.LOGS),onClick:()=>o(Xt.LOGS),role:"tab","aria-selected":t===Xt.LOGS,tabIndex:0,"data-testid":"logs-tab",children:["Logs",b.jsx(l2,{count:a,isActive:t===Xt.LOGS})]})}),b.jsx("div",{className:r(Xt.NETWORK),onClick:()=>o(Xt.NETWORK),role:"tab","aria-selected":t===Xt.NETWORK,tabIndex:0,"data-testid":"network-tab",children:"Network"}),b.jsx("div",{className:r(Xt.SOURCE),onClick:()=>o(Xt.SOURCE),role:"tab","aria-selected":t===Xt.SOURCE,tabIndex:0,"data-testid":"source-tab",children:"Source"})]}),b.jsxs("div",{className:"flex items-center gap-2 px-4",children:[b.jsx(o2,{}),b.jsx("button",{type:"button",className:"p-0.5 rounded-full",onClick:c,"data-testid":"close-button","aria-label":"Close debug menu",children:b.jsx("svg",{className:"w-6 h-6 text-[#757575]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})]})},"TabNavigation");var c2=Object.defineProperty,d2=d((t,e)=>c2(t,"name",{value:e,configurable:!0}),"e$c");const p2=d2(({workspace:t})=>b.jsx(Ly,{workspace:t,children:b.jsxs("div",{className:"relative h-full",children:[b.jsx(u2,{}),b.jsx(a2,{})]})}),"DebugLogMenu");var h2=Object.defineProperty,po=d((t,e)=>h2(t,"name",{value:e,configurable:!0}),"l$d");const _d=pe.createContext(void 0);window.__SHARED_APP_STATE__||(window.__SHARED_APP_STATE__={isDeployModalOpen:!1,isShareAgentModalOpen:!1});const tl="APP_STATE_CHANGED",nl=po(({children:t})=>{const[e,n]=pe.useState(window.__SHARED_APP_STATE__.isDeployModalOpen),[s,a]=pe.useState(window.__SHARED_APP_STATE__.isShareAgentModalOpen),i=po((o,c,l)=>{window.__SHARED_APP_STATE__[o]=c,l(c),window.dispatchEvent(new CustomEvent(tl))},"updateState");pe.useEffect(()=>{const o=po(()=>{const{isDeployModalOpen:c,isShareAgentModalOpen:l}=window.__SHARED_APP_STATE__;c!==e&&n(c),l!==s&&a(l)},"syncState");return window.addEventListener(tl,o),()=>window.removeEventListener(tl,o)},[e,s]),pe.useEffect(()=>{window.handleDeployModalOpen=o=>{i("isDeployModalOpen",o,n)},window.handleShareAgentModalOpen=o=>{i("isShareAgentModalOpen",o,a)}},[]);const r={isDeployModalOpen:e,setIsDeployModalOpen:o=>i("isDeployModalOpen",o,n),toggleDeployModal:()=>i("isDeployModalOpen",!e,n),isShareAgentModalOpen:s,setIsShareAgentModalOpen:o=>i("isShareAgentModalOpen",o,a),toggleShareAgentModal:()=>i("isShareAgentModalOpen",!s,a)};return b.jsx(_d.Provider,{value:r,children:t})},"AppStateProvider"),sl=po(()=>{const t=pe.useContext(_d);if(t===void 0)throw new Error("useAppState must be used within a AppStateProvider");return t},"useAppState");var f2=Object.defineProperty,m2=d((t,e)=>f2(t,"name",{value:e,configurable:!0}),"o$p");const aa=m2(({title:t,onBack:e,onClose:n,className:s=""})=>b.jsxs("div",{className:`relative mb-4 ${s}`,children:[b.jsx("div",{className:"mt-[-7px] pl-8 pr-8",children:b.jsx("span",{className:"block text-lg font-semibold leading-tight text-[#222] text-left",children:t})}),b.jsx("button",{className:"absolute -left-2 -top-2 p-[6px] text-[#222] hover:bg-gray-100 rounded",onClick:e,"aria-label":"Back",style:{lineHeight:0},children:b.jsx(bg,{width:16,height:14})}),b.jsx("button",{className:"absolute -right-2 -top-2 p-[6px] text-[#222] hover:bg-gray-100 rounded",onClick:n,"aria-label":"Close",children:b.jsx(vg,{width:12,height:12})})]}),"ModalHeaderEmbodiment");var g2=Object.defineProperty,kd=d((t,e)=>g2(t,"name",{value:e,configurable:!0}),"s$x");const b2=kd(({onClose:t})=>{const{dev:e,prod:n,scheme:s}=qt.getState().agentDomains,a=e&&s?`${s}://${e}/alexa`:"",i=n&&s?`${s}://${n}/alexa`:"",r=kd(o=>{navigator.clipboard.writeText(o)},"handleCopy");return b.jsx("div",{className:"fixed inset-0 bg-black/25 flex items-center justify-center z-50",children:b.jsxs("div",{className:"relative bg-white rounded-2xl shadow-lg w-full p-6 flex flex-col gap-4 overflow-auto max-h-[90vh] max-w-[480px]",children:[b.jsx(aa,{title:"Alexa Integration",onBack:t,onClose:t}),b.jsx("p",{className:"text-sm text-gray-700 mb-4",children:"Publish your agent as an Alexa Skill. You can publish your skill to the Alexa Skill Store or use it in your own Alexa devices."}),a&&b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"text-sm text-gray-900 -mb-4",children:"Alexa Dev URL"}),b.jsxs("div",{className:"relative flex items-center mt-1 group w-full",children:[b.jsx(un,{type:"text",value:a,readOnly:!0,fullWidth:!0,className:"w-full border-[#D1D5DB] border-b-gray-900 text-xs text-gray-700 hover:pr-10","aria-label":"Alexa Dev URL"}),b.jsx("button",{type:"button","aria-label":"Copy Alexa Dev URL",onClick:()=>r(a),className:"absolute right-2 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity bg-white p-1",tabIndex:-1,children:b.jsx(is,{color:"#222"})})]})]}),i&&b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"text-sm text-gray-900 -mb-4",children:"Alexa Prod URL"}),b.jsxs("div",{className:"relative flex items-center mt-1 group w-full",children:[b.jsx(un,{type:"text",value:i,readOnly:!0,fullWidth:!0,className:"w-full border-[#D1D5DB] border-b-gray-900 text-xs text-gray-700 hover:pr-10","aria-label":"Alexa Prod URL"}),b.jsx("button",{type:"button","aria-label":"Copy Alexa Prod URL",onClick:()=>r(i),className:"absolute right-2 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity bg-white p-1",tabIndex:-1,children:b.jsx(is,{color:"#222"})})]})]})]})})},"AlexaEmbodimentModal");var v2=Object.defineProperty,al=d((t,e)=>v2(t,"name",{value:e,configurable:!0}),"n$q");const y2=al(({onClose:t})=>{const[e,n]=pe.useState(!0),s=pe.useRef(null),{dev:a,prod:i,scheme:r}=qt.getState().agentDomains,o=a&&r?`${r}://${a}/swagger`:"",c=i&&r?`${r}://${i}/swagger`:"",l=al(u=>{navigator.clipboard.writeText(u)},"handleCopy");return pe.useEffect(()=>{const u=s.current;if(!u||!o)return;const p=al(async()=>{n(!1),await yg(200),Ba.send({function:"attachHeaders",args:[{"X-MONITOR-ID":window.currentMonitorId}]},["swagger"])},"handleLoad");return u.addEventListener("load",p),()=>{u.removeEventListener("load",p)}},[o]),b.jsx("div",{className:"fixed inset-0 bg-black/25 flex items-center justify-center z-50",children:b.jsxs("div",{className:"relative bg-white rounded-2xl shadow-lg w-full p-6 flex flex-col gap-4 overflow-auto max-h-[90vh] max-w-[800px]",children:[b.jsx(aa,{title:"API Endpoints",onBack:t,onClose:t}),b.jsx("div",{children:b.jsx("p",{className:"text-sm text-gray-700",children:"Enable Agent to communicate with each other using a set of definitions and protocols."})}),o&&b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"text-sm text-gray-900 -mb-4",children:"Dev API"}),b.jsxs("div",{className:"relative flex items-center mt-1 group w-full",children:[b.jsx(un,{type:"text",value:o,readOnly:!0,fullWidth:!0,className:"w-full border-[#D1D5DB] border-b-gray-900 text-xs text-gray-700 hover:pr-10","aria-label":"Dev API URL"}),b.jsx("button",{type:"button","aria-label":"Copy Dev API URL",onClick:()=>l(o),className:"absolute right-2 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity bg-white p-1",tabIndex:-1,children:b.jsx(is,{color:"#222"})})]})]}),c&&b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"text-sm text-gray-900 -mb-4",children:"Prod API"}),b.jsxs("div",{className:"relative flex items-center mt-1 group w-full",children:[b.jsx(un,{type:"text",value:c,readOnly:!0,fullWidth:!0,className:"w-full border-[#D1D5DB] border-b-gray-900 text-xs text-gray-700 hover:pr-10","aria-label":"Prod API URL"}),b.jsx("button",{type:"button","aria-label":"Copy Prod API URL",onClick:()=>l(c),className:"absolute right-2 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity bg-white p-1",tabIndex:-1,children:b.jsx(is,{color:"#222"})})]})]}),b.jsxs("div",{className:"relative",style:{minHeight:"500px"},children:[e&&b.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white z-10",children:b.jsxs("div",{role:"status",children:[b.jsxs("svg",{className:"w-8 h-8 animate-spin",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[b.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"#0366d6",strokeWidth:"4",fill:"none"}),b.jsx("path",{fill:"none",stroke:"white",strokeWidth:"4",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),b.jsx("span",{className:"sr-only",children:"Loading..."})]})}),o&&b.jsx("iframe",{ref:s,src:o,className:"w-full border-0",style:{height:"500px",display:e?"none":"block"},title:"API Endpoints - Swagger UI"}),!o&&b.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:b.jsx("span",{className:"text-base text-gray-700",children:"Agent domain is not set. Cannot provide API features."})})]})]})})},"ApiEmbodimentModal");var x2=Object.defineProperty,il=d((t,e)=>x2(t,"name",{value:e,configurable:!0}),"n$p");const w2=il(({onClose:t,domain:e="your-domain.com",embodimentData:n,isLoading:s=!1})=>{const[a,i]=pe.useState(!1),r=pe.useRef(null);if(typeof t!="function")throw new Error("ChatbotEmbodimentModal: onClose prop must be a function");const o=il(g=>/^https?:\/\//i.test(g)?g:`https://${g}`,"getFullDomain"),c=n?.properties?.isFullScreen,l=n?.properties?.allowFileAttachments,u=!!c,p=`${u?`
  <div id="smythos-chatbot-container"></div>
  <!-- Chatbot Container: You can place it anywhere you want and style it as needed -->
  `:""}
    <script src="${o(e)}/static/embodiment/chatBot/chatbot-v2.js"><\/script>
    <script>
        ChatBot.init({
            domain: '${e}',
            isChatOnly: ${u},
            ${u?'containerId: "smythos-chatbot-container",':""}
            allowAttachments: ${l||!1},
            // ... additional settings ...
            introMessage: '${n?.properties?.introMessage||"Hello, how can I assist you today?"}',
            // ... colors settings go here ...
        });
    <\/script>`;return b.jsx("div",{className:"fixed inset-0 bg-black/25 flex items-center justify-center z-50",children:b.jsxs("div",{className:"relative bg-white rounded-2xl shadow-lg w-full p-6 flex flex-col gap-4 overflow-auto max-h-[90vh] max-w-[520px]",children:[b.jsx(aa,{title:"Chatbot Integration Snippet",onBack:t,onClose:t}),b.jsx("div",{className:"flex flex-col gap-4",children:s?b.jsxs("div",{className:"flex flex-col items-center justify-center py-12 gap-4",children:[b.jsx(Gn,{size:"lg"}),b.jsx("p",{className:"text-sm text-gray-600",children:"Loading chatbot configuration..."})]}):b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"text-sm text-gray-700",children:b.jsx("p",{children:u?"Place this snippet inside a container DOM element, and the chatbot will occupy the full available space within it.":b.jsxs(b.Fragment,{children:["Copy and paste this snippet into your website before the closing"," ","</body> tag."]})})}),b.jsxs("div",{className:"flex flex-col gap-4",children:[b.jsx("textarea",{ref:r,readOnly:!0,className:"w-full h-64 p-3 text-sm text-gray-800 bg-white rounded-lg border border-gray-200 font-mono resize-none focus:outline-none focus:border-b-2 focus:border-b-blue-500 transition-colors",value:p}),b.jsx("div",{className:"flex justify-end",children:b.jsx(At,{variant:"primary",handleClick:il(async()=>{try{r.current&&(r.current.select(),await navigator.clipboard.writeText(p),i(!0),setTimeout(()=>i(!1),2e3))}catch(g){console.error("Failed to copy code snippet:",g)}},"handleCopyClick"),label:a?"Copied":"Copy Code",className:"text-sm","aria-label":a?"Copied":"Copy code"})})]})]})})]})})},"ChatbotEmbodimentModal");var S2=Object.defineProperty,Pd=d((t,e)=>S2(t,"name",{value:e,configurable:!0}),"n$o");const C2=Pd(({onClose:t})=>{const{dev:e,prod:n,scheme:s}=qt.getState().agentDomains,a=e&&s?`${s}://${e}/api-docs/openapi-llm.json`:"",i=n&&s?`${s}://${n}/api-docs/openapi-llm.json`:"",r=Pd(o=>{navigator.clipboard.writeText(o)},"handleCopy");return b.jsx("div",{className:"fixed inset-0 bg-black/25 flex items-center justify-center z-50",children:b.jsxs("div",{className:"relative bg-white rounded-2xl shadow-lg w-full p-6 flex flex-col gap-4 overflow-auto max-h-[90vh] max-w-[480px]",children:[b.jsx(aa,{title:mt.chatgpt.title,onBack:t,onClose:t}),b.jsxs("ol",{className:"list-decimal pl-5 space-y-2 text-sm text-gray-700",children:[b.jsxs("li",{children:["Click"," ",b.jsx("a",{href:"https://chatgpt.com/gpts",target:"_blank",rel:"noopener noreferrer",className:"text-v2-blue font-semibold underline",children:"Here"})," ","to Create a custom GPT from chatGPT interface."]}),b.jsx("li",{children:'Click on "Configure" tab'}),b.jsx("li",{children:'Enter your Custom GPT information: We recommend to copy the content of SmythOS Agent behavior inside "Instructions" area in order to have a consistent behavior'}),b.jsx("li",{children:'Scroll down and Click on "Create new action" button.'}),b.jsx("li",{children:"Click Import URL and enter the following URL:"})]}),a&&b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"text-sm text-gray-900 -mb-4",children:"GPT Dev URL"}),b.jsxs("div",{className:"relative flex items-center mt-1 group w-full",children:[b.jsx(un,{type:"text",value:a,readOnly:!0,fullWidth:!0,className:"w-full border-[#D1D5DB] border-b-gray-900 text-xs text-gray-700 hover:pr-10","aria-label":"Dev OpenAPI URL"}),b.jsx("button",{type:"button","aria-label":"Copy Dev OpenAPI URL",onClick:()=>r(a),className:"absolute right-2 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity bg-white p-1",tabIndex:-1,children:b.jsx(is,{color:"#222"})})]})]}),i&&b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"text-sm text-gray-900 -mb-4",children:"GPT Prod URL"}),b.jsxs("div",{className:"relative flex items-center mt-1 group w-full",children:[b.jsx(un,{type:"text",value:i,readOnly:!0,fullWidth:!0,className:"w-full border-[#D1D5DB] border-b-gray-900 text-xs text-gray-700 hover:pr-10","aria-label":"Prod OpenAPI URL"}),b.jsx("button",{type:"button","aria-label":"Copy Prod OpenAPI URL",onClick:()=>r(i),className:"absolute right-2 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity bg-white p-1",tabIndex:-1,children:b.jsx(is,{color:"#222"})})]})]})]})})},"GptEmbodimentModal");var E2=Object.defineProperty,Pn=d((t,e)=>E2(t,"name",{value:e,configurable:!0}),"r$p");function Dd(t,e,n,s){const a=`${e}@${s}`;return{nodejs:{language:"javascript",code:`import OpenAI from 'openai';

const openai = new OpenAI({
  apiKey: ${n?`'${n}'`:"process.env.SMYTHOS_AGENTLLM_KEY"},
  baseURL: '${t}/_openai/v1',
});

const response = await openai.chat.completions.create({
  model: '${a}',
  messages: [{ role: 'user', content: 'Hello, what can you do?' }],
  stream: false,
});

console.log(response?.choices);`},python:{language:"python",code:`from openai import OpenAI
client = OpenAI(
  api_key=${n?`'${n}'`:'os.getenv("SMYTHOS_AGENTLLM_KEY")'},
  base_url='${t}/_openai/v1'
)

response = client.chat.completions.create(
  model='${a}',
  messages=[{"role": "user", "content": "Hello, what can you do?"}],
)

print(response.choices)`},curl:{language:"bash",code:`curl ${t}/_openai/v1/chat/completions   -H 'Content-Type: application/json'   -H 'Authorization: Bearer ${n||"$SMYTHOS_AGENTLLM_KEY"}'   -d '{
  "model": "${a}",
  "messages": [{
    "role": "user",
    "content": "Hello, what can you do?"
  }]
}'`},json:{language:"json",code:`{
  "model": "${a}",
  "messages": [{
    "role": "user",
    "content": "Hello, what can you do?"
  }]
}`}}}d(Dd,"me$1"),Pn(Dd,"generateCodeSamples");const A2=Pn(async t=>{const e=await(await fetch(`/api/page/builder/${t}/keys/agent-llm`,{method:"GET",headers:{"Content-Type":"application/json"}})).json();return e&&e.data?Object.entries(e.data).map(([n,s])=>({id:n,name:s.name,key:s.key,createdAt:s.metadata?.created_time?new Date(s.metadata.created_time).toLocaleString("en-US",{month:"long",year:"numeric",day:"numeric",hour:"numeric",minute:"numeric"}):"Unknown date"})):[]},"fetchAgentKeys"),Id="#707070",_2="#222",Ld="#707070",k2="#C50F1F",P2=Pn(({agent:t,defaultTab:e="code",onClose:n})=>{const[s,a]=pe.useState(e),[i,r]=pe.useState("nodejs"),[o,c]=pe.useState("dev"),[l,u]=pe.useState(""),[p,g]=pe.useState("idle"),[y,w]=pe.useState("");pe.useState("");const[S,m]=pe.useState(!1),[D,A]=pe.useState(""),j=pe.useRef(null),L="https://llm.emb-stg.smyth.ai",k=t.id,I=tc(),{data:v=[],isLoading:T,refetch:P}=os(["agent-llm-keys",k],()=>A2(k),{enabled:s==="keys"||s==="code",staleTime:5*60*1e3,cacheTime:10*60*1e3}),F=Ws({mutationFn:async J=>{m(!0);const E=await fetch(`/api/page/builder/${k}/keys/agent-llm`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({keyName:J.trim()})});if(!E.ok)throw new Error("Failed to create API key");return E.json()},onSuccess:()=>{I.invalidateQueries(["agent-llm-keys",k]),w(""),a("keys")},onError:J=>{console.error("Error creating API key:",J)},onSettled:()=>m(!1)}),U=Ws({mutationFn:async J=>{A(J);const E=await fetch(`/api/page/builder/${k}/keys/agent-llm/${J}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!E.ok)throw new Error("Failed to revoke API key");return E.json()},onSuccess:()=>{I.invalidateQueries(["agent-llm-keys",k])},onError:J=>{console.error("Error revoking API key:",J)},onSettled:()=>A("")}),M=Pn(async()=>{y.trim()&&F.mutate(y.trim())},"handleCreateKey"),V=Pn(async J=>{U.mutate(J)},"handleRevokeKey"),W=Pn(async()=>{j.current&&(await navigator.clipboard.writeText(j.current.value),g("copied"),setTimeout(()=>g("idle"),3e3))},"handleCopyCode"),K=Pn(()=>{a("create-key"),w("")},"handleOpenCreateKey"),R=Pn(()=>{a("keys")},"handleOpenKeysTab");Pn(()=>{a("code")},"handleOpenCodeTab");const X=Dd(L,k,l,o)[i],Q="h-10 bg-white border border-b-2 border-b-[#E5E7EB] focus:border-b-2 focus:border-b-blue-600 focus:outline-none focus:shadow-none text-base px-0 rounded shadow-none text-sm px-2",G=Pn(J=>{a(J)},"handleTabChange");return b.jsxs("div",{className:"relative bg-white rounded-2xl shadow-lg w-full p-6 flex flex-col gap-4 overflow-auto max-h-[90vh] max-w-[480px]",children:[b.jsx(aa,{title:Pn(()=>s==="create-key"?b.jsx("span",{className:"block text-2xl font-semibold leading-tight text-[#222] text-left",children:"Create a new key"}):b.jsxs("span",{className:"block text-lg font-semibold leading-tight text-[#222] text-left",children:["Integrating Agent as an",b.jsx("br",{}),"OpenAI-Compatible LLM"]}),"getModalTitle")(),onBack:s==="create-key"?R:n,onClose:n}),s==="keys"&&b.jsx("div",{className:"mb-2",children:b.jsx("span",{className:"text-sm text-[#222]",children:"Use these keys to authenticate your API requests"})}),b.jsxs(hr,{value:s,onValueChange:J=>G(J),className:"w-full",children:[s!=="create-key"&&b.jsxs(fr,{className:"grid w-full grid-cols-2 mb-6",children:[b.jsx(Ps,{value:"code",className:"text-sm rounded-sm",children:"Code"}),b.jsx(Ps,{value:"keys",className:"text-sm rounded-sm",children:"Keys"})]}),b.jsxs(rs,{value:"code",className:"space-y-4",children:[b.jsxs("div",{className:"flex flex-col gap-2",children:[b.jsx("span",{className:"text-base font-medium text-[#222]",children:"Add API key below to your environment or CI pipeline."}),b.jsx("div",{className:"w-full",children:b.jsxs($i,{value:l===""?"__none__":l,onValueChange:J=>u(J==="__none__"?"":J),children:[b.jsx(Ri,{className:Q,"aria-label":"API Key",children:b.jsx(qi,{placeholder:"None"})}),b.jsxs(Bi,{onClick:J=>J.stopPropagation(),children:[b.jsx(Tn,{value:"__none__",children:"None"}),v.map(J=>b.jsx(Tn,{value:J.key,children:J.name},J.id))]})]})}),v.length===0&&b.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[b.jsx(xg,{className:"text-smyth-red w-4 h-4"}),b.jsxs("span",{children:["No API keys detected."," ",b.jsx("span",{className:"underline cursor-pointer text-blue-600",onClick:()=>a("create-key"),children:"Create an API key here."})]})]})]}),b.jsx("div",{className:"text-xs text-[#888]",children:b.jsx("div",{className:"mt-[-12px]",children:"In your application code, initialize your agent with the OpenAI chat completions code snippet below:"})}),b.jsxs("div",{className:"flex gap-2 mb-2",children:[b.jsxs("div",{className:"flex flex-col flex-1",children:[b.jsx("label",{htmlFor:"code-language-select",className:"text-md font-medium text-gray-700 mb-1",children:"Code"}),b.jsxs($i,{value:i,onValueChange:J=>r(J),children:[b.jsx(Ri,{id:"code-language-select",className:Q,"aria-label":"Code Language",children:b.jsx(qi,{})}),b.jsxs(Bi,{onClick:J=>J.stopPropagation(),children:[b.jsx(Tn,{value:"nodejs",children:"Node.js"}),b.jsx(Tn,{value:"python",children:"Python"}),b.jsx(Tn,{value:"curl",children:"cURL"}),b.jsx(Tn,{value:"json",children:"JSON"})]})]})]}),b.jsxs("div",{className:"flex flex-col flex-1",children:[b.jsx("label",{htmlFor:"version-select",className:"text-md font-medium text-gray-700 mb-1",children:"Version"}),b.jsxs($i,{value:o,onValueChange:c,children:[b.jsx(Ri,{id:"version-select",className:Q,"aria-label":"Version",children:b.jsx(qi,{})}),b.jsxs(Bi,{onClick:J=>J.stopPropagation(),children:[b.jsx(Tn,{value:"dev",children:"Development"}),b.jsx(Tn,{value:"prod",children:"Production"})]})]})]})]}),b.jsx(nc,{ref:j,value:X.code,readOnly:!0,className:"w-full min-h-[250px] max-h-[400px] p-2 font-mono text-xs resize-none overflow-auto",fullWidth:!0,"aria-label":"Code Sample"}),b.jsx("div",{className:"text-xs text-[#888] mt-1",children:"Bonus: Customize the model version and language."}),b.jsx("div",{className:"flex justify-end",children:b.jsx(At,{label:p==="copied"?"Copied":"Copy Code",variant:"primary",className:"px-4 py-1 text-xs",handleClick:W,"aria-label":"Copy Code",type:"button"})})]}),s==="keys"&&b.jsx(rs,{value:"keys",className:"space-y-4",children:b.jsx("div",{className:"space-y-2",children:T?b.jsx("div",{className:"text-center text-gray-400",children:"Loading keys..."}):v.length===0?b.jsxs("div",{className:"flex flex-col items-start w-full",children:[b.jsx("div",{className:"w-full bg-gray-50 rounded-lg px-3 py-8 text-center text-gray-400 font-extralight",children:"No API keys found."}),b.jsx("div",{className:"flex justify-end w-full mt-4",children:b.jsx(At,{label:"Create a new key",variant:"primary",className:"px-6 py-2 text-sm",handleClick:K,"aria-label":"Create a new key",type:"button"})})]}):b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"text-base font-normal text-gray-900",children:"Keys"}),v.map(J=>b.jsxs("div",{className:"flex flex-col bg-gray-50 rounded-xl px-4 py-3 border border-gray-200",children:[b.jsxs("div",{className:"flex items-center justify-between mb-1",children:[b.jsx("span",{className:"text-sm font-bold text-gray-900 uppercase tracking-wide",children:J.name}),b.jsxs("div",{className:"flex items-center",children:[b.jsx("button",{className:"p-1 rounded group hover:bg-gray-200",onClick:async()=>{await navigator.clipboard.writeText(J.key)},"aria-label":"Copy API Key",title:"Copy",type:"button",children:b.jsx(wg,{className:"w-6 h-6",color:Id,style:{transition:"color 0.2s"},onMouseEnter:E=>E.currentTarget.style.color=_2,onMouseLeave:E=>E.currentTarget.style.color=Id})}),b.jsx("button",{className:"p-1 rounded group hover:bg-gray-200",onClick:()=>V(J.id),disabled:D===J.id,"aria-label":"Delete Key",title:"Delete",type:"button",children:D===J.id?b.jsx(Gn,{size:"sm",classes:"w-6 h-6"}):b.jsx(Sg,{className:"w-6 h-6",color:Ld,style:{transition:"color 0.2s"},onMouseEnter:E=>E.currentTarget.style.color=k2,onMouseLeave:E=>E.currentTarget.style.color=Ld})})]})]}),b.jsx("div",{className:"font-mono text-xs text-gray-900 break-all w-full",children:J.key}),b.jsx("div",{className:"text-xs text-gray-500 mt-1",children:J.createdAt})]},J.id)),b.jsx("div",{className:"flex justify-end mt-4",children:b.jsx(At,{label:"Create a new key",variant:"primary",className:"px-6 py-2 text-sm",handleClick:K,"aria-label":"Create a new key",type:"button"})})]})})}),s==="create-key"&&b.jsxs(rs,{value:"create-key",className:"space-y-2",children:[b.jsx("div",{className:"mb-3 -mt-4",children:b.jsx("span",{className:"text-md font-normal",children:"Keys"})}),b.jsx("div",{className:"mb-4",children:b.jsx(un,{label:"Key Name",placeholder:"API key",value:y,onChange:J=>w(J.target.value),"aria-label":"Key Name",disabled:S,fullWidth:!0})}),b.jsx("div",{className:"flex justify-end",children:b.jsx(At,{label:S?"Adding...":"Add Key",variant:"primary",className:"px-6 py-2 text-base",handleClick:M,"aria-label":"Add Key",type:"button",disabled:S||!y.trim()})})]})]})]})},"LlmEmbodimentModal");var D2=Object.defineProperty,Td=d((t,e)=>D2(t,"name",{value:e,configurable:!0}),"s$w");const I2=Td(({onClose:t})=>{const{dev:e,prod:n,scheme:s}=qt.getState().agentDomains,a=e&&s?`${s}://${e}/emb/mcp/sse`:"",i=n&&s?`${s}://${n}/emb/mcp/sse`:"",r=Td(o=>{navigator.clipboard.writeText(o)},"handleCopy");return b.jsx("div",{className:"fixed inset-0 bg-black/25 flex items-center justify-center z-50",children:b.jsxs("div",{className:"relative bg-white rounded-2xl shadow-lg w-full p-6 flex flex-col gap-4 overflow-auto max-h-[90vh] max-w-[480px]",children:[b.jsx(aa,{title:"MCP Integration",onBack:t,onClose:t}),b.jsx("p",{className:"text-sm text-gray-700 mb-4",children:"Seamlessly connect your agent to MCP-compatible workbenches, IDEs, and enterprise environments."}),a&&b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"text-sm text-gray-900 -mb-4",children:"MCP Dev URL"}),b.jsxs("div",{className:"relative flex items-center mt-1 group w-full",children:[b.jsx(un,{type:"text",value:a,readOnly:!0,fullWidth:!0,className:"w-full border-[#D1D5DB] border-b-gray-900 text-xs text-gray-700 hover:pr-10","aria-label":"MCP Dev URL"}),b.jsx("button",{type:"button","aria-label":"Copy MCP Dev URL",onClick:()=>r(a),className:"absolute right-2 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity bg-white p-1",tabIndex:-1,children:b.jsx(is,{color:"#222"})})]})]}),i&&b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"text-sm text-gray-900 -mb-4",children:"MCP Prod URL"}),b.jsxs("div",{className:"relative flex items-center mt-1 group w-full",children:[b.jsx(un,{type:"text",value:i,readOnly:!0,fullWidth:!0,className:"w-full border-[#D1D5DB] border-b-gray-900 text-xs text-gray-700 hover:pr-10","aria-label":"MCP Prod URL"}),b.jsx("button",{type:"button","aria-label":"Copy MCP Prod URL",onClick:()=>r(i),className:"absolute right-2 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity bg-white p-1",tabIndex:-1,children:b.jsx(is,{color:"#222"})})]})]})]})})},"McpEmbodimentModal");var L2=Object.defineProperty,ol=d((t,e)=>L2(t,"name",{value:e,configurable:!0}),"a$u");const Md=pe.createContext(null),Od=ol(({children:t})=>{const e=["all-deployments",workspace.agent.id],[n,s]=pe.useState(null),[a,i]=pe.useState(null),r=Ws({mutationKey:["deploy-agent",workspace.agent.id],mutationFn:async g=>{const y=await fetch("/api/page/builder/ai-agent/deployments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({releaseNotes:`${g.releaseNotes||" "}`,version:`${g.major}.${g.minor}`,agentId:workspace.agent.id})}),w=await y.clone().json();return Ks.setQueryData(e,S=>({deployments:[{createdAt:new Date().toISOString(),majorVersion:g.major,minorVersion:g.minor,version:`${g.major}.${g.minor}`,releaseNotes:`${g.releaseNotes||" "}`,aiAgentId:workspace.agent.id,aiAgent:{name:workspace.agent.name},id:w?.deployment?.id||Math.random().toString(36).substring(7)},...S.deployments]})),p(g.major,g.minor),y}}),o=os({queryKey:["latest-deployment",workspace.agent.id],queryFn:()=>fetch(`/api/page/builder/ai-agent/${workspace.agent.id}/deployments/latest`).then(g=>g.json()),refetchInterval:!1,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1}),c=os({queryKey:["domains",workspace.agent.id],queryFn:()=>fetch("/api/page/builder/domains").then(g=>g.json()),refetchInterval:!1,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1}),l=os({queryKey:e,queryFn:()=>fetch(`/api/page/builder/ai-agent/${workspace.agent.id}/deployments`).then(g=>g.json()),refetchInterval:!1,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1}),u=os({queryKey:["status-info",workspace.agent.id],queryFn:()=>fetch("/api/status").then(g=>g.json()),refetchInterval:!1,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1});pe.useEffect(()=>{o.data?.deployment&&(s(o.data.deployment?.majorVersion),i(o.data.deployment?.minorVersion))},[o.data]);function p(g,y){g!==void 0&&s(g),y!==void 0&&i(y)}return d(p,"l"),ol(p,"updateLatestVersion"),b.jsx(Md.Provider,{value:{deployMutation:r,latestDeployment:o,allDeployments:l,domains:c,ALL_DEPLOYMENTS_QUERY_KEY:e,workspace,updateVersion:p,lastVersion:{major:n,minor:a},statusInfoQuery:u},children:t})},"DeploymentSidebarProvider"),ho=ol(()=>{const t=pe.useContext(Md);if(!t)throw new Error("useDeploymentSidebar must be used within an DeploymentSidebarProvider");return t},"useDeploymentSidebarCtx");var T2=Object.defineProperty,ia=d((t,e)=>T2(t,"name",{value:e,configurable:!0}),"r$o");function jd({userInfo:t,onClose:e,onReopenDeployModal:n,onOpenLlmModal:s,onOpenCustomGptModal:a,onOpenDialogModal:i,onOpenCodeSnippetModal:r,onOpenAlexaPanel:o,onOpenChatbotPanel:c,onOpenApiPanel:l,onOpenMcpPanel:u,isVisible:p}){const{workspace:g,allDeployments:y}=ho(),{getPageAccess:w}=Da();g.agent.id;const[S,m]=pe.useState("embed"),D=pe.useMemo(()=>`post-deployment-modal-${g?.agent?.id}-${Math.random().toString(36).substr(2,9)}`,[g?.agent?.id]),[A,j]=pe.useState({availableEmbodiments:[],embodimentsData:[],agentSettings:[],canUseEmbodiments:!1,isReadOnlyAccess:!1}),L=pe.useMemo(()=>A.availableEmbodiments.sort((K,R)=>{const X=A.agentSettings.find(E=>E.key===K),Q=A.agentSettings.find(E=>E.key===R),G=X?.value?.isEnabled||X?.value==="true",J=Q?.value?.isEnabled||Q?.value==="true";return G&&!J?-1:!G&&J?1:0}),[A.availableEmbodiments]),{isLoading:k,updateEmbodimentStatus:I,refetchEmbodiments:v,modalHandlers:T}=Cg(g?.agent?.id||"",(K,R,X,Q,G)=>{j({agentSettings:K,embodimentsData:R,availableEmbodiments:X,canUseEmbodiments:Q,isReadOnlyAccess:G})},D);!window.location.pathname.includes("/agent-settings/")&&T.isActiveInstance;const P=ia(K=>{K.isUpdating||A.canUseEmbodiments&&I(K.key,!0)},"handleToggle"),F=pe.useMemo(()=>T.isActiveInstance?A.agentSettings.map(K=>b.jsxs(pe.Fragment,{children:[K.dialogComponent,K.codeSnippetComponent]},`${D}-${K.key}`)):null,[A.agentSettings,D,T.isActiveInstance,A.embodimentsData,g?.agent]);function U(K){return typeof K=="object"&&K!==null&&"properties"in K&&typeof K.properties=="object"}d(U,"ce"),ia(U,"hasProperties");const M=ia(K=>K.length===0?K:`${K.charAt(0).toUpperCase()}${K.slice(1)}`,"capitalizeFirstLetter"),V=ia(K=>{switch(K.toLowerCase()){case"chatgpt":return"chatgpt-embodiment";case"chatbot":return"chatbot-embodiment";case"llm":return"agentllm-embodiment";case"api":return"api-embodiment";case"mcp":return"mcp-embodiment";case"alexa":return"alexa-embodiment";default:return`${K}-embodiment`}},"getEmbodimentLocator");function W(K){let R=A.agentSettings.find(E=>E.key===K);R||(R={key:K,value:"false",enabled:!1,isUpdating:!1,embIcon:kg(K,"fill-[#515151] text-[#515151] text-xl"),embTitle:Pg(K),embDescription:Dg(K),codeSnippetVisible:!1,configurationVisible:!1});const X=R.key.toLowerCase(),Q=[];X===Zt.CHAT_GPT?(R.openModal&&Q.push(b.jsx("button",{className:"flex items-center px-2 py-1 h-8 text-xl text-blue-600 hover:bg-smythos-blue-500 hover:text-white rounded",onClick:()=>R.openModal(),type:"button","aria-label":"Configuration",children:b.jsx(sc,{})},"configuration-"+Zt.CHAT_GPT)),Q.push(b.jsx(At,{label:"Get Code",variant:"tertiary",className:"px-3 py-1 h-8 text-xs",handleClick:()=>a(),"aria-label":"Get Code",type:"button"},"get-code"))):X===Zt.CHAT_BOT?(R.openCodeSnippet&&Q.push(b.jsx("button",{className:"flex items-center px-2 py-1 h-8 text-xl text-blue-600 hover:bg-smythos-blue-500 hover:text-white rounded",onClick:()=>R.openModal(),type:"button","aria-label":"Configuration",children:b.jsx(sc,{})},"configuration-"+Zt.CHAT_BOT)),R.openModal&&Q.push(b.jsx(At,{label:"Get Code",variant:"tertiary",className:"px-3 py-1 h-8 text-xs",handleClick:()=>c(),"aria-label":"Get Code",type:"button"},"get-code"))):X===Zt.LLM?(Q.push(b.jsx(At,{label:"API Keys",variant:"tertiary",className:"px-3 py-1 h-8 text-xs",handleClick:()=>s("keys"),"aria-label":"API Keys",type:"button"},"api-keys-"+Zt.LLM)),Q.push(b.jsx(At,{label:"Get Code",variant:"tertiary",className:"px-3 py-1 h-8 text-xs",handleClick:()=>s("code"),"aria-label":"Get Code",type:"button"},"get-code-"+Zt.LLM))):X.indexOf(Zt.API)!==-1?Q.push(b.jsx(At,{label:"Get Endpoints",variant:"tertiary",className:"px-3 py-1 h-8 text-xs",handleClick:l,"aria-label":"Get Endpoints",type:"button"},"get-endpoints")):X===Zt.MCP?Q.push(b.jsx(At,{label:"Get URL",variant:"tertiary",className:"px-3 py-1 h-8 text-xs",handleClick:u,"aria-label":"Get URL",type:"button"},"get-url-"+Zt.MCP)):X===Zt.ALEXA&&Q.push(b.jsx(At,{label:"Get Endpoints",variant:"tertiary",className:"px-3 py-1 h-8 text-xs",handleClick:o,"aria-label":"Get Endpoints",type:"button"},"get-endpoints-"+Zt.ALEXA));const G=M(X===Zt.CHAT_GPT?"Custom GPT":R.embTitle||"Untitled Embodiment"),J=R?.value?.isEnabled||R.value=="true";return{setting:R,buttons:Q,embodimentName:G,isSettingEnabled:J}}return d(W,"_"),ia(W,"getSettingsValues"),b.jsxs("div",{className:`relative bg-white rounded-2xl shadow-lg w-full p-6 flex flex-col gap-4 max-h-[90vh] max-w-[480px] ${p?"":"hidden"}`,style:{boxShadow:"0 4px 32px 0 rgba(0,0,0,0.10)",borderRadius:"20px",padding:"32px 24px",margin:"0 auto"},children:[b.jsxs(hr,{value:S,onValueChange:m,className:"w-full",children:[b.jsxs(fr,{className:"grid w-full grid-cols-2 mb-6 h-auto",children:[b.jsx(Ps,{value:"embed",className:"px-10 py-2.5 text-sm rounded-sm",children:"Embed"}),b.jsx(Ps,{value:"domains-keys",className:"px-10 py-2.5 text-sm rounded-sm",children:"Domains"})]}),b.jsx(rs,{value:"embed",className:"space-y-2",children:b.jsx("div",{className:"space-y-2",children:k?b.jsx("div",{className:"text-center text-gray-400",children:"Loading embodiments..."}):A.availableEmbodiments.length>0?L.map(K=>{const{setting:R,buttons:X,embodimentName:Q,isSettingEnabled:G}=W(K);return b.jsxs("div",{"data-qa":V(R.key),className:`flex items-center justify-between bg-white rounded-lg px-2 py-2 ${G?"":"opacity-80"}`,children:[b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx("span",{className:"text-xl flex items-center justify-center w-6 h-6",children:R.embIcon}),b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("span",{className:"font-medium text-[#515151] text-base capitalize",children:Q}),R.embDescription&&b.jsx(ln,{content:R.embDescription,placement:"top",className:"w-56 text-center",children:b.jsx(mr,{className:"w-4 h-4 text-[#515151]"})})]})]}),R.isUpdating?b.jsx("div",{className:"flex items-center gap-2",children:b.jsx("div",{className:"circular-loader-blue w-4 h-4"})}):A.canUseEmbodiments?G?b.jsx("div",{className:"flex items-center gap-2",children:X}):b.jsx("div",{className:"flex items-center gap-2",children:b.jsx(Eg,{checked:!1,onCheckedChange:()=>P(R),disabled:R.isUpdating,className:"data-[state=checked]:bg-blue-600 data-[state=unchecked]:bg-gray-300"})}):b.jsx(ln,{content:"Premium Embodiment. Upgrade your plan",placement:"top",children:b.jsx(Ag,{cursor:"pointer",className:"text-gray-400"})})]},R.key)}):b.jsx("div",{className:"text-center text-gray-400",children:"No embodiments found."})})}),b.jsx(rs,{value:"domains-keys",className:"space-y-6",children:b.jsx(_g,{isDeployed:y?.data?.deployments.length>0,isWriteAccess:w("/builder").write})})]}),F]})}d(jd,"ie$3"),ia(jd,"PostDeploymentModal");var M2=Object.defineProperty,Ft=d((t,e)=>M2(t,"name",{value:e,configurable:!0}),"l$c");const Nd={base:"absolute z-10 inline-block rounded-lg px-3 py-2 text-sm font-medium shadow-sm left-0",arrow:{base:"absolute z-10 h-2 w-2 rotate-45 -ml-4"}},O2={...Nd,target:"w-full text-center",animation:"transition-opacity delay-3000"};function Fd({userInfo:t,deploymentSidebarCtx:e}){const{toggleDeployModal:n}=sl(),{workspace:s,domains:a,deployMutation:i,lastVersion:r,statusInfoQuery:o}=e,[c,l]=pe.useState(!1),[u,p]=pe.useState(!0),[g,y]=pe.useState({open:!1,defaultTab:"code"}),w=Ig(),{data:S}=Lg({options:{refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnFocus:!1,refetchOnReconnect:!1}}),[m,D]=pe.useState(!1),[A,j]=pe.useState(!1),[L,k]=pe.useState("none"),[I,v]=pe.useState(null),[T,P]=pe.useState(null),[F,U]=pe.useState({modalOpened:!!Ui.activeModal,snippetOpened:Ui.showCodeSnippet}),[M,V]=pe.useState({});pe.useEffect(()=>{const de=Ft(()=>{const Pe=!!Ui.activeModal,Ne=Ui.showCodeSnippet;U(Ze=>Ze.modalOpened!==Pe||Ze.snippetOpened!==Ne?{modalOpened:Pe,snippetOpened:Ne}:Ze)},"checkModalStates");de();const we=Ft(()=>de(),"handleModalStateChange");return window.addEventListener("embodimentModalStateChange",we),()=>{window.removeEventListener("embodimentModalStateChange",we)}},[]);const{modalOpened:W,snippetOpened:K}=F,{data:R,isLoading:X}=os({queryKey:["embodiments",s.agent.id],queryFn:async()=>{const de=await fetch(`/api/page/agents/embodiments/${s.agent.id}`);if(!de.ok)throw new Error("Failed to fetch embodiments");return de.json()},enabled:!!s?.agent?.id,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1}),Q=R?.embodiments?.find(de=>de.type===Zt.CHAT_BOT),G=Q?{properties:{introMessage:Q.properties?.introMessage||"",isFullScreen:Q.properties?.isFullScreen||!1,allowFileAttachments:Q.properties?.allowFileAttachments||!1}}:void 0,J=s.agent.domain||`${s.agent.id}.${o.data?.status?.prod_agent_domain}`,E=L!=="none"||I&&I.open||T!==null||g.open||W||K;pe.useEffect(()=>{const de=Ft(()=>{const we=document.getElementById("deploy-button-topbar");if(!we)return;const Pe=we.getBoundingClientRect(),Ne=520,Ze=8;V({position:"fixed",top:Pe.bottom-20,left:Math.max(Ze,Math.min(Pe.right-Ne,window.innerWidth-Ne-Ze)),zIndex:50})},"updatePosition");if(u)return de(),window.addEventListener("resize",de),()=>window.removeEventListener("resize",de)},[u]),pe.useEffect(()=>{m&&j(!0)},[m]);const O=`${s.agent.id}.${o.data?.status?.prod_agent_domain}`,C=Ft(de=>{window.open("https://github.com/Smyth-ai/smyth-runtime-local/tree/main","_blank")},"handleDeploy"),B=Ft(()=>{window.open("https://smythos.com/enterprise-enquiry/","_blank")},"handleContactSales"),z=ac({major:Tg().required("Major version is required").min(r.major??1,"Major version cannot be less than the current major version"),domain:zi().required("Domain is required"),releaseNotes:zi().optional().max(500,"Release notes cannot be more than 500 characters")});async function Y(de){const we=de;if(de=="default"&&s?.agent?.domain&&s?.agent?.domain!=="default"){(await fetch("/api/page/builder/removeDomain",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({agentId:s.agent.id,curDomain:s.agent.domain})})).ok?(s.agent.domain=null,window.dispatchEvent(new CustomEvent("queryClientInvalidate",{detail:{queryKey:["domains"]}}))):Xe("Domain Update failed");return}else if(de=="default"){qt.setState(Ne=>({...Ne,agentDomains:{...Ne.agentDomains,prod:O}}));return}const Pe=s.agent.domain;if(we!=Pe)try{(await fetch("/api/page/builder/updateDomain",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({agentId:s.agent.id,curDomain:Pe,domain:we})})).ok?(s.agent.domain=we,s.saveAgent(null,we,null,null,!0),window.dispatchEvent(new CustomEvent("queryClientInvalidate",{detail:{queryKey:["domains"]}})),qt.setState(Ne=>({agentDomains:{...Ne.agentDomains,prod:we}}))):Xe("Domain Update failed")}catch(Ne){throw Xe("Domain Update failed"),Ne}}d(Y,"Se"),Ft(Y,"updateDomain");const se=[{name:O,value:"default"},...a.data?.filter(de=>de.aiAgent==null||de.aiAgent.id==s.agent.id).map(de=>({name:de.name,value:de.name}))||[]].filter((de,we,Pe)=>we===Pe.findIndex(Ne=>Ne.value===de.value)),le={major:r.major!==null&&r.major!==void 0?r.major:1,minor:r.minor!==null&&r.minor!==void 0?r.minor+1:0,domain:s.agent.domain||"default",releaseNotes:""},te=Mg({initialValues:le,validationSchema:z,onSubmit:async(de,{setSubmitting:we})=>{l(!0),await Y(de.domain);const Pe=await(await i.mutateAsync(de))?.json();s.emit("AgentDeployed",Pe),window.dispatchEvent(new CustomEvent("queryClientInvalidate",{detail:{queryKey:["latest_deployment",s.agent.id]}})),window.dispatchEvent(new CustomEvent("agentProdDomainUpdate",{detail:{agentId:s.agent.id}})),S?.onboardingTasks?.DEPLOY_FIRST_AGENT?Ia.track("app_deploy_agent",{createdAt:new Date().toISOString().split("T")[0]}):(w.mutate({key:Og.OnboardingTasks,data:{[gr.DEPLOY_FIRST_AGENT]:!0,[gr.COMPLETED_TASK]:gr.DEPLOY_FIRST_AGENT},operation:"insertOrUpdate"}),Ia.track("app_deploy_first_agent",{createdAt:new Date().toISOString().split("T")[0]}),Ia.track("app_deploy_agent",{createdAt:new Date().toISOString().split("T")[0]})),we(!1),l(!1),D(!0),Bt("Agent Deployed Successfully.")},enableReinitialize:!0}),he=Ft(de=>{y({open:!0,defaultTab:de}),p(!1)},"handleOpenLlmModal"),fe=Ft(()=>{y({open:!1,defaultTab:"code"}),p(!0),setTimeout(()=>{m&&window.dispatchEvent(new CustomEvent("queryClientInvalidate",{detail:{queryKey:["latest_deployment",s.agent.id]}}))},100)},"handleCloseLlmModal"),be=Ft((de,we,Pe)=>{v({open:!0,title:de,component:we,componentProps:Pe}),p(!1)},"handleOpenDialogModal"),ge=Ft(de=>{P(de),p(!1)},"handleOpenCodeSnippetModal"),ye=Ft(()=>{v(null),p(!0)},"handleCloseDialogModal"),ke=Ft(()=>{P(null),p(!0)},"handleCloseCodeSnippetModal"),Ie=Ft(de=>{k(de),p(!1)},"handleOpenPanel"),_e=Ft(()=>{k("none"),p(!0)},"handleClosePanel");let Ue=null;T&&(Ue=b.jsx(br,{isOpen:!0,onClose:ke,hideCloseIcon:!0,panelWidthClasses:"w-[100vw] max-w-[480px]",children:b.jsx(jg,{onClose:ke,domain:typeof s.agent.domain=="string"?s.agent.domain:"",embodimentData:{properties:{introMessage:""}}})}));const Fe=Ft(()=>{j(!1)},"handleExpandModal"),xe=Ft(()=>{j(!0)},"handleCollapseModal");return b.jsxs(b.Fragment,{children:[L==="alexa"&&b.jsx(b2,{onClose:_e}),L==="gpt"&&b.jsx(C2,{onClose:_e}),L==="chatbot"&&b.jsx(w2,{onClose:_e,domain:J,embodimentData:G,isLoading:X}),L==="api"&&b.jsx(y2,{onClose:_e}),L==="mcp"&&b.jsx(I2,{onClose:_e}),I&&I.open&&b.jsxs(br,{isOpen:I.open,onClose:ye,hideCloseIcon:!0,panelWidthClasses:"w-[100vw] max-w-[480px]",children:[b.jsxs("div",{className:"flex items-center mb-4",children:[b.jsx("button",{className:"mr-2 -ml-2 p-2 rounded hover:bg-gray-100",onClick:ye,"aria-label":"Back",children:b.jsx(ic,{})}),b.jsx("span",{className:"flex-1 text-lg font-semibold",children:I.title}),b.jsx("button",{className:"ml-auto -mr-2 p-2 rounded hover:bg-gray-100",onClick:ye,"aria-label":"Close",children:b.jsx(ic,{})})]}),I.component?at.createElement(I.component,I.componentProps||{}):b.jsxs("div",{className:"text-center text-gray-500 py-8",children:["Coming soon: ",I.title]})]}),Ue,g.open&&b.jsx("div",{className:"fixed inset-0 bg-black/25 flex items-center justify-center z-50",children:b.jsx(P2,{agent:{id:s.agent.id,name:s.agent.name,description:s.agent.data?.description??"",shortDescription:s.agent.data?.shortDescription??"",createdAt:s.agent.data?.createdAt??"",updatedAt:s.agent.data?.updatedAt??"",__disabled:s.agent.data?.__disabled??!1,_count:s.agent.data?._count??{AiAgentDeployment:0},contributors:s.agent.data?.contributors??[],isLocked:s.agent.data?.isLocked??!1,aiAgentSettings:s.agent.data?.aiAgentSettings??[],avatar:s.agent.data?.avatar??"",status:s.agent.data?.status??"",isPublic:s.agent.data?.isPublic??!1,userId:s.agent.data?.userId??"",teamId:s.agent.data?.teamId??""},defaultTab:g.defaultTab,onClose:fe})}),u&&b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>{E||n()}}),b.jsx("div",{className:"fixed z-50 p-5","data-deploy-modal":"true",style:M,children:b.jsxs("div",{className:"flex flex-col overflow-y-auto p-5",style:{maxHeight:"90vh"},children:[A?b.jsxs("div",{className:"relative bg-white rounded-2xl shadow-lg w-[480px] p-4 flex items-center justify-between cursor-pointer hover:bg-gray-50 transition-colors",onClick:Fe,children:[b.jsxs("div",{className:"flex flex-col items-start gap-1",children:[b.jsx("h3",{className:"text-sm font-medium text-[#111827]",children:"Deploy Agent"}),b.jsx("p",{className:"text-xs text-gray-500",children:"Click to deploy a new version"})]}),b.jsx("div",{className:"flex items-center gap-2",children:b.jsxs(Ys,{variant:"ghost",size:"icon",className:"h-[22px] w-[22px]",onClick:de=>{de.stopPropagation(),n()},children:[b.jsx(oc,{className:"text-[#111827]"}),b.jsx("span",{className:"sr-only",children:"Close"})]})})]}):b.jsxs("div",{className:"relative bg-white rounded-2xl shadow-lg w-[480px] p-6 flex flex-col flex-none gap-2 overflow-auto max-h-[90vh]",children:[b.jsxs("div",{className:"flex justify-between items-center mb-4",children:[b.jsxs("div",{className:"flex items-center gap-2",children:[m&&b.jsxs(Ys,{variant:"ghost",size:"icon",className:"h-[22px] w-[22px] -ml-2",onClick:xe,children:[b.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("path",{d:"M15 18L9 12L15 6",stroke:"#111827",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),b.jsx("span",{className:"sr-only",children:"Back"})]}),b.jsxs("h2",{className:"text-xl font-semibold text-[#1E1E1E] flex items-center gap-1",children:["Deploy Agent",b.jsx(ln,{className:"w-60",theme:Nd,content:b.jsxs("div",{style:{whiteSpace:"normal"},children:["Deploy your agent to make it live and ready to integrate into your workflow. Use SmythOS's default subdomain or configure a custom one."," ",b.jsx("a",{href:`${Ut}/agent-deployments/overview/`,target:"_blank",className:"text-v2-blue hover:underline",children:"Learn more"})]}),children:b.jsx("span",{className:"",children:b.jsx(mr,{className:"w-4 h-4 text-gray-500 text-lg"})})})]})]}),b.jsxs(Ys,{variant:"ghost",size:"icon",className:"h-[22px] w-[22px]",onClick:n,children:[b.jsx(oc,{className:"text-[#111827]"}),b.jsx("span",{className:"sr-only",children:"Close"})]})]}),b.jsxs(hr,{defaultValue:"agent-cloud",className:"w-full relative",children:[b.jsxs(fr,{className:"grid w-full grid-cols-3 mb-4 h-auto",children:[b.jsx(ln,{content:b.jsx("div",{style:{whiteSpace:"normal"},children:"Convenient, easy, and instant. We handle all the hosting of your agent for you at $2 per 1,000 tasks, only pay for what you use. Unlock chat, bulk work, schedules, analytics, logs, APIs and more."}),placement:"top",theme:O2,trigger:"hover",children:b.jsx(Ps,{value:"agent-cloud",className:"px-10 py-2.5 text-sm rounded-sm w-full",children:"Agent Cloud"})}),b.jsx(Ps,{value:"enterprise",className:"px-10 py-2.5 text-sm rounded-sm",children:"Enterprise"}),b.jsx(Ps,{value:"deploy-locally",className:"px-10 py-2.5 text-sm rounded-sm",children:"Deploy Locally"})]}),b.jsx(rs,{value:"agent-cloud",children:b.jsxs("form",{onSubmit:te.handleSubmit,children:[b.jsxs("div",{className:"space-y-4",children:[b.jsxs("div",{className:"space-y-2",children:[b.jsx(La,{className:"text-base font-medium text-[#1E1E1E]",children:"Version"}),b.jsxs("div",{className:"flex space-x-[18px]",children:[b.jsxs("div",{className:"flex-1 space-y-2",children:[b.jsxs(La,{htmlFor:"major",className:"text-sm font-normal text-[#1E1E1E]",children:["Major ",b.jsx("span",{className:"text-red-500 text-sm",children:"*"})]}),b.jsx(un,{type:"number",name:"major",id:"deploy-version-major-number",placeholder:"1",min:r.major??1,value:te.values.major,onChange:de=>{te.handleChange(de),parseInt(de.target.value)===r.major&&r.major!==0&&te.values.minor<r.major+1&&te.setFieldValue("minor",r.major+1)},className:"h-[42px] bg-[#F9FAFB] border-[#D1D5DB] text-sm text-[#111827]"})]}),b.jsxs("div",{className:"flex-1 space-y-2",children:[b.jsxs(La,{htmlFor:"minor",className:"text-sm font-normal text-[#1E1E1E]",children:["Minor ",b.jsx("span",{className:"text-red-500 text-sm",children:"*"})]}),b.jsx(un,{type:"number",name:"minor",id:"deploy-version-minor-number",placeholder:"0",min:te.values.major===r.major&&r.minor!==null&&r.minor!==void 0?r.minor+1:0,value:te.values.minor,onChange:te.handleChange,className:"h-[42px] bg-[#F9FAFB] border-[#D1D5DB] text-sm text-[#111827]"})]}),te.touched.major&&te.errors.major?b.jsx("div",{className:"text-red-500 text-sm mt-2",children:typeof te.errors.major=="string"?te.errors.major:null}):null]})]}),b.jsxs("div",{className:"space-y-2",children:[b.jsx(La,{htmlFor:"subdomain",className:"text-base font-medium text-[#1E1E1E]",children:"Subdomain"}),b.jsxs($i,{name:"deploy-domain-select",value:te.values.domain,onValueChange:de=>{te.setFieldValue("domain",de)},children:[b.jsx(Ri,{id:"subdomain",className:"h-[42px] bg-[#F9FAFB] border-[#D1D5DB] text-sm text-[#111827]",children:b.jsx(qi,{children:te.values.domain==="default"?O:te.values.domain})}),b.jsxs(Bi,{children:[b.jsx(Tn,{value:"default",children:O}),se.filter(de=>de.value!=="default").map(de=>b.jsx(Tn,{value:de.value,children:de.name},de.value))]})]}),te.touched.domain&&te.errors.domain?b.jsx("div",{className:"text-red-500 text-sm mt-2",children:typeof te.errors.domain=="string"?te.errors.domain:null}):null,b.jsxs("span",{className:"text-sm font-light text-[#616161]",children:["If you want to register a subdomain, click"," ",b.jsx("a",{href:"/domains",target:"_blank",className:"text-smyth-blue hover:underline",children:"here"}),")"]})]}),b.jsxs("div",{className:"space-y-2",children:[b.jsx(La,{htmlFor:"deploy-modal-release-notes",className:"text-base font-medium text-[#1E1E1E]",children:"Release Notes"}),b.jsx(nc,{name:"releaseNotes",className:"min-h-[100px] bg-[#F9FAFB] border-[#D1D5DB] text-sm text-[#6B7280] resize-vertical",placeholder:"Enter the list of new features, bug fixes, and other changes here.",value:te.values.releaseNotes,onChange:te.handleChange,fullWidth:!0})]})]}),b.jsx("div",{className:"mt-6",children:b.jsx(At,{type:"submit",loading:c,className:"h-[48px] px-8 rounded-lg ml-auto",children:"Deploy"})})]})}),b.jsx(rs,{value:"enterprise",children:b.jsxs("div",{className:"space-y-6",children:[b.jsx("p",{className:"text-xs text-gray-600",children:"Deploy on-prem or to enterprise cloud with enterprise security and unlimited task options available. Great for enterprise."}),b.jsx(At,{className:"h-[48px] px-8 rounded-lg ml-auto",handleClick:B,children:"Contact sales"})]})}),b.jsx(rs,{value:"deploy-locally",children:b.jsxs("div",{className:"space-y-6",children:[b.jsx("p",{className:"text-xs text-gray-600",children:"Export your AI agent with Control+ Shift+E, then run it locally with our local runtime for Mac, Windows, Linux."}),b.jsx(At,{className:"h-[48px] px-8 rounded-lg ml-auto",handleClick:()=>C("locally"),children:"Download SRE"})]})})]})]}),A?b.jsx(rc,{workspace:s,workspaceAgentId:s.agent.id,children:b.jsx("div",{className:"w-[480px] mt-5",children:b.jsx(jd,{userInfo:t,onClose:n,onReopenDeployModal:()=>p(!0),onOpenLlmModal:he,onOpenCustomGptModal:()=>Ie("gpt"),onOpenDialogModal:be,onOpenCodeSnippetModal:ge,onOpenAlexaPanel:()=>Ie("alexa"),onOpenChatbotPanel:()=>Ie("chatbot"),onOpenApiPanel:()=>Ie("api"),onOpenMcpPanel:()=>Ie("mcp"),isVisible:A&&!E})})}):b.jsx("div",{className:"relative bg-white rounded-2xl shadow-lg w-[480px] mt-5 p-4 flex items-center justify-between cursor-pointer hover:bg-gray-50 transition-colors",onClick:xe,children:b.jsxs("div",{className:"flex flex-col items-start gap-1",children:[b.jsx("h3",{className:"text-sm font-medium text-[#111827]",children:"Embed Options"}),b.jsx("p",{className:"text-xs text-gray-500",children:"Click to see options for embedding agent across different channels"})]})})]})})]})]})}d(Fd,"it$1"),Ft(Fd,"DeployAgentModal");var j2=Object.defineProperty,N2=d((t,e)=>j2(t,"name",{value:e,configurable:!0}),"o$o");const $d=class extends pe.Component{static{d(this,"e")}constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,n){console.error(e,n.componentStack)}render(){return this.state.hasError?this.props.fallback:this.props.children}};N2($d,"DeploymentErrorBoundary");let F2=$d;var $2=Object.defineProperty,Xn=d((t,e)=>$2(t,"name",{value:e,configurable:!0}),"a$t");async function Rd(t,e,n,s){const a=Ud(e);await Mn("Postman Collection Detected","Do you want to import the Postman collection?",{btnYesLabel:"Yes, Import",btnNoLabel:"No, Cancel"})&&(t.refreshComponentSelection(),t.clipboard.pasteSelection(JSON.stringify(a),n,s),t.redraw())}d(Rd,"importPostman"),Xn(Rd,"importPostman");async function rl(t,e,n=!1){if([...t.domElement.querySelectorAll(".component")].length>0&&!n){await ls("Please clear the workspace before importing a Smyth Agent file.","Workspace not empty");return}!n&&!await Mn("Smyth Agent File Detected","Do you want to import it ?",{btnYesLabel:"Yes, Import",btnNoLabel:"No, Cancel"})||(delete e?.teamId,await t.import(e),t.agent.name=e.name||e.templateInfo?.name||t.agent.name||"Untitled Agent",t.agent.description=e.description,t.agent.data.description=e.description,t.agent.data.templateInfo=e.templateInfo,t.agent.shortDescription=e.shortDescription,t.agent.data.shortDescription=e.shortDescription,t.agent.behavior=e.behavior,t.agent.data.behavior=e.behavior,t.agent.variables=e.variables||{},t.agent.data.variables=e.variables||{},t.agent.introMessage=e.introMessage,t.agent.data.introMessage=e.introMessage,await t.saveAgent(e.name,"",e),t.emit("agentUpdated",t.agent),window.refetchSettingsSidebarData&&window.refetchSettingsSidebarData())}d(rl,"importSmythFile"),Xn(rl,"importSmythFile");function qd(t){const e={x:0,y:0},n=t.container;["dragenter","dragover","dragleave","drop"].forEach(r=>{n.addEventListener(r,s,!1)});function s(r){r.preventDefault(),r.stopPropagation()}d(s,"u"),Xn(s,"preventDefaults"),n.addEventListener("dragover",r=>{const o=t.domElement.getBoundingClientRect(),c=Math.round((r.clientX-o.x)/t.scale),l=Math.round((r.clientY-o.y)/t.scale);e.x=c,e.y=l}),n.addEventListener("drop",a,!1);function a(r){let o=r.dataTransfer.files;t.locked||i(o)}d(a,"c"),Xn(a,"handleDrop");function i(r){const o=e.x,c=e.y;[...r].forEach(l=>{if(l.type==="application/json"||l.type==="text/plain"||l.name.endsWith(".smyth")){const u=new FileReader;u.onload=async function(p){try{const g=JSON.parse(p.target.result);switch(Bd(g)){case"POSTMAN":Rd(t,g,o,c);break;case"SMYTH_AGENT":rl(t,g);break;case"TEXT":console.log(g);break;default:console.log("Unknown format")}}catch(g){console.log(g)}},u.readAsText(l)}})}d(i,"g"),Xn(i,"handleFiles")}d(qd,"registerFileDrag"),Xn(qd,"registerFileDrag");function Bd(t){if(typeof t=="string")return"TEXT";if(t?.info?._postman_id)return"POSTMAN";if(t.version&&Array.isArray(t.components)&&Array.isArray(t.connections))return"SMYTH_AGENT"}d(Bd,"I$2"),Xn(Bd,"identifyFormat");function Ud(t){if(!t.item)return null;let e=0;const n=Xn((s,a)=>{let i=[],r=0;for(let o of s){if(o.request){let c,l="none",u=o.request?.url?.raw||"";const p=/^{{.*?}}/.test(u);!u.startsWith("http:")&&!u.startsWith("https:")&&u!==""&&!p&&(u=`http://${u}`);const g=o.request?.method||"GET",y=o.request?.body?.mode;try{if(y==="raw")l=`application/${o.request?.body?.options?.raw?.language||"json"}`,c=JSON.parse(o.request.body.raw||"{}");else if(y==="urlencoded"||y==="formdata"){l=y==="formdata"?"multipart/form-data":"application/x-www-form-urlencoded",c={};for(let m of o.request?.body?.[y]||[])c[m.key]=m.value}}catch(m){console.error("Error parsing body:",m)}const w={};for(let m of o.request?.header||[])w[m.key]=m.value;const S={name:"APICall",outputs:[{name:"Response",color:"#3C89F9",index:0,default:!0},{name:"Headers",color:"#3C89F9",index:1,default:!0}],inputs:[],top:`${r}px`,left:`${e}px`,width:"",uid:Vn(),defaultOutputs:["Headers","Response"],defaultInputs:[],data:{method:g,contentType:l,url:u,headers:JSON.stringify(w),body:JSON.stringify(c)},title:o.name,description:a.name};i.push(S)}else o.item&&(i=[...i,...n(o.item,o).flat(1/0)]);r+=250}return e+=300,i},"parseItem");return{components:n(t.item,t),connections:[]}}d(Ud,"T$1"),Xn(Ud,"parsePostman");var R2=Object.defineProperty,fo=d((t,e)=>R2(t,"name",{value:e,configurable:!0}),"c$d");const q2=fo(()=>{const{allDeployments:t,workspace:e}=ho(),[n,s]=pe.useState(""),{userInfo:a}=Da(),i=fo(async o=>{try{const c=(await(await fetch(`/api/page/builder/ai-agent/deployments/${o}`)).json()).deployment.aiAgentData;await rl(e,c,!0)}catch(c){console.error("Failed to restore version:",c)}finally{s("")}},"restoreVersion"),r=fo(async o=>{if(!a?.subs?.plan?.paid){Ia.track("upgrade_impression",{page_url:"/builder",source:"restoring previous version"}),vr({title:"",fields:{},content:`
            <div class="text-center px-4 py-6">
              <h2 class="text-2xl font-bold text-gray-800 mb-2">
                Unlock Version Control
              </h2>

              <div class="mb-6">
                <p class="text-base text-gray-600 leading-relaxed mx-auto max-w-md">
                  Version history and restore features are not available on Free plans.
                    <a href="/plans"
                     target="_blank"
                     class="text-blue-600 underline hover:opacity-75"
                     onclick="window.analytics?.track('upgrade_click', {
                       page_url: '/builder',
                       source: 'restoring previous version'
                     })">
                    Upgrade
                  </a> to unlock access to version control and much more.
                </p>
              </div>
            </div>
          `,actions:[],onCloseClick:(l,u)=>{Ta(u)}},"auto","auto","none","auto","600px");return}s(o);const c=document.getElementById("self-contained-restore-modal-btn");if(!c){console.error("Restore modal button not found"),s("");return}try{const l=new MutationObserver(u=>{u.forEach(async p=>{if(p.type==="attributes"){const g=c.getAttribute("result");g==="cancelled"?(s(""),l.disconnect()):g==="confirmed"&&(await i(o),l.disconnect(),s(""))}})});l.observe(c,{attributes:!0}),c.click()}catch(l){console.error("Failed to restore version:",l),s("")}},"restoreVersionConfirmation");return b.jsxs(b.Fragment,{children:[t.data&&t.data.deployments.length>0&&b.jsxs("div",{className:"flex flex-col",children:[b.jsx("h4",{className:"text-sm font-semibold mb-2",children:"Changelog"}),b.jsx("ul",{className:"flex flex-col gap-6",children:t?.data?.deployments?.map((o,c)=>b.jsx("li",{children:b.jsx(zd,{deployment:o,restoreVersion:r,isRestoring:n})},o.id))})]}),t.isSuccess&&t.data?.deployments.length===0&&b.jsx("p",{className:"text-sm text-gray-500",children:"No deployments found"}),t.isError&&b.jsx("p",{className:"text-sm text-gray-500",children:"Failed to load deployments"}),t.isLoading&&b.jsx("p",{className:"text-sm text-gray-500",children:"Loading..."})]})},"DeploymentsHistory");function zd({deployment:t,isActive:e=!1,restoreVersion:n,isRestoring:s}){return b.jsxs("div",{className:"flex flex-col relative [&:hover_span]:opacity-100",children:[b.jsxs("p",{className:"text-sm text-gray-500 leading-[38px]",children:[b.jsxs("span",{className:"font-semibold text-gray-900",children:["Version: ",t.version," "]}),e&&b.jsx("span",{className:"text-smyth-emerald-400 pl-4",children:"Active"}),!e&&(!s||s==t.id)&&b.jsxs("span",{onClick:()=>n(t.id),className:_n("restore-button text-gray-500 cursor-pointer absolute right-0 top-1 w-20 rounded text-center border border-solid leading-[28px] opacity-0 transition-opacity duration-200 hover:bg-smyth-blue hover:text-white hover:border-smyth-blue",{"opacity-100":s}),children:[!s&&"Restore",s&&t.id===s&&b.jsx(Gn,{classes:"w-4 h-4"})]})]}),b.jsxs("p",{className:"text-sm text-gray-500",children:["Release date: ",Intl.DateTimeFormat("en-US").format(new Date(t.createdAt))]}),t.releaseNotes.trim()&&b.jsxs("p",{className:"text-sm text-gray-500",children:["Release notes: ",t.releaseNotes]})]})}d(zd,"_$5"),fo(zd,"DeploymentItem");function B2(t){return yr({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM11 15V17H13V15H11ZM11 7V13H13V7H11Z"}}]})(t)}d(B2,"RiErrorWarningFill");var U2=Object.defineProperty,z2=d((t,e)=>U2(t,"name",{value:e,configurable:!0}),"o$n");const ll="You have reached your quota for production agent deployments",H2=z2(({onNavigate:t})=>{const{deployMutation:e}=ho();return b.jsx("div",{children:e.isLoading?b.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1em",viewBox:"0 0 384 512",className:"animate-spin",children:b.jsx("path",{fill:"currentColor",d:"M0 32C0 14.3 14.3 0 32 0H64 320h32c17.7 0 32 14.3 32 32s-14.3 32-32 32V75c0 42.4-16.9 83.1-46.9 113.1L237.3 256l67.9 67.9c30 30 46.9 70.7 46.9 113.1v11c17.7 0 32 14.3 32 32s-14.3 32-32 32H320 64 32c-17.7 0-32-14.3-32-32s14.3-32 32-32V437c0-42.4 16.9-83.1 46.9-113.1L146.7 256 78.9 188.1C48.9 158.1 32 117.4 32 75V64C14.3 64 0 49.7 0 32zM96 64V75c0 25.5 10.1 49.9 28.1 67.9L192 210.7l67.9-67.9c18-18 28.1-42.4 28.1-67.9V64H96zm0 384H288V437c0-25.5-10.1-49.9-28.1-67.9L192 301.3l-67.9 67.9c-18 18-28.1 42.4-28.1 67.9v11z"})}),b.jsx("p",{className:"font-semibold text-gray-500",children:"Pushing Updates"})]}):e.isSuccess?b.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[b.jsx(Ng,{className:"text-emerald-500"}),b.jsx("p",{className:"text-emerald-500 font-semibold",children:"Deployment Successful"})]}):e.isError?b.jsxs("div",{className:"flex flex-col gap-1 mb-4",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx(B2,{className:"text-red-500"}),b.jsx("p",{className:"text-red-500 font-semibold",children:e.error?.error?.message===ll?"Agent Deployment Limit Reached":"Deployment Failed"})]}),e.error?.error?.message?b.jsxs(b.Fragment,{children:[b.jsx("p",{className:"text-red-500",children:e.error?.error?.message===ll?"Unlock unlimited deployments and elevate your possibilities with the Starter Plan.":e.error?.error?.message}),e.error?.error?.message===ll&&b.jsx(At,{className:"mt-3",variant:"primary",handleClick:()=>t("/plans"),children:"Upgrade for Unlimited Deployments"})]}):null]}):null})},"DeploymentStatus");var G2=Object.defineProperty,Hd=d((t,e)=>G2(t,"name",{value:e,configurable:!0}),"n$n");const V2=Hd(()=>{const[t,e]=pe.useState(!1),n=Hd(s=>{window.location.href=s},"handleNavigation");return b.jsxs("div",{children:[b.jsx("div",{className:"h-16 flex-shrink-0 p-4",children:b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[b.jsx("path",{d:"M12.5604 21.75C10.8462 21.747 9.16316 21.2922 7.68084 20.4314C6.19852 19.5706 4.96933 18.3342 4.11721 16.8469C3.26509 15.3595 2.82015 13.6738 2.82723 11.9597C2.83432 10.2456 3.2932 8.56362 4.15758 7.08338C5.02197 5.60314 6.26131 4.37694 7.75069 3.52841C9.24008 2.67987 10.9268 2.23899 12.641 2.25021C14.3551 2.26143 16.0359 2.72435 17.5141 3.5923C18.9922 4.46026 20.2154 5.70256 21.0604 7.19399C21.1415 7.36498 21.155 7.56033 21.0982 7.74086C21.0413 7.9214 20.9183 8.07377 20.7538 8.1674C20.5893 8.26103 20.3955 8.28901 20.2113 8.24572C20.027 8.20243 19.8659 8.09107 19.7603 7.93399C18.7467 6.14468 17.1012 4.79859 15.1465 4.15966C13.1918 3.52074 11.0689 3.63508 9.19411 4.48026C7.31934 5.32544 5.82792 6.84049 5.01232 8.72832C4.19672 10.6161 4.11578 12.7406 4.78536 14.685C5.35829 16.3478 6.44799 17.7839 7.89526 18.7833C9.34252 19.7826 11.0715 20.293 12.8295 20.2397C14.5874 20.1864 16.2823 19.5723 17.6664 18.4871C19.0505 17.4019 20.0512 15.9025 20.5224 14.208C20.5799 14.0216 20.7079 13.865 20.879 13.7714C21.0502 13.6778 21.251 13.6545 21.439 13.7066C21.627 13.7586 21.7873 13.8819 21.886 14.0502C21.9846 14.2184 22.0138 14.4185 21.9673 14.608C21.3932 16.6603 20.1641 18.4687 18.4672 19.7579C16.7702 21.047 14.6984 21.7462 12.5673 21.749L12.5604 21.75Z",fill:"currentColor"}),b.jsx("path",{d:"M20.6492 8.31853H17.3682C17.1693 8.31853 16.9785 8.23951 16.8379 8.09885C16.6972 7.9582 16.6182 7.76744 16.6182 7.56853C16.6182 7.36961 16.6972 7.17885 16.8379 7.0382C16.9785 6.89755 17.1693 6.81853 17.3682 6.81853H19.8992V4.26953C19.8992 4.07062 19.9782 3.87985 20.1188 3.7392C20.2595 3.59854 20.4503 3.51953 20.6492 3.51953C20.8481 3.51953 21.0389 3.59854 21.1795 3.7392C21.3202 3.87985 21.3992 4.07062 21.3992 4.26953V7.56953C21.3989 7.76827 21.3198 7.95878 21.1791 8.09921C21.0385 8.23965 20.8479 8.31853 20.6492 8.31853Z",fill:"currentColor"}),b.jsx("path",{d:"M15.3986 15.3164C15.2637 15.3164 15.1313 15.2797 15.0156 15.2104L11.8406 13.3104C11.7291 13.244 11.6367 13.1497 11.5727 13.0368C11.5087 12.9239 11.4752 12.7962 11.4756 12.6664V8.56641C11.4756 8.36749 11.5546 8.17673 11.6953 8.03608C11.8359 7.89543 12.0267 7.81641 12.2256 7.81641C12.4245 7.81641 12.6153 7.89543 12.7559 8.03608C12.8966 8.17673 12.9756 8.36749 12.9756 8.56641V12.2394L15.7846 13.9174C15.9257 14.0016 16.0352 14.1298 16.0963 14.2823C16.1575 14.4348 16.1668 14.6032 16.123 14.7616C16.0791 14.9199 15.9845 15.0595 15.8536 15.1588C15.7228 15.2581 15.5629 15.3118 15.3986 15.3114V15.3164Z",fill:"currentColor"})]}),b.jsx("span",{className:"text-xl font-semibold",children:"Deploy"})]}),b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsxs("button",{id:"deploy-toggle-modal-btn",type:"button",onClick:()=>{document.getElementById("deploy-button-topbar").click()},className:`${xr} focus:outline-none font-medium rounded text-sm px-5 py-1.5 text-center`,children:[t&&b.jsxs("svg",{"aria-hidden":"true",role:"status",id:"deploy-toggle-modal-btn-spinner",className:"inline w-4 h-4 me-1 text-white animate-spin",viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[b.jsx("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"#E5E7EB"}),b.jsx("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentColor"})]}),"Deploy"]}),b.jsx(ln,{content:"Close",placement:"left",arrow:!1,children:b.jsx("button",{type:"button",className:"close-btn p-0.5 rounded-full",onClick:()=>window.dispatchEvent(new CustomEvent("toggle-sidebar-request")),children:b.jsx("svg",{className:"w-6 h-6 text-[#757575]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})})]})]})}),b.jsxs("div",{className:"flex-shrink-0 p-4",children:[b.jsx(H2,{onNavigate:n}),b.jsx(q2,{})]})]})},"DeploymentSidebarContent");var W2=Object.defineProperty,K2=d((t,e)=>W2(t,"name",{value:e,configurable:!0}),"e$a");const Y2=K2(({workspace:t})=>b.jsx(F2,{fallback:b.jsx("p",{children:"Something went wrong"}),children:b.jsx(Od,{workspace:t,children:b.jsx(V2,{})})}),"AgentDeploymentSidebar");var X2=Object.defineProperty,Ka=d((t,e)=>X2(t,"name",{value:e,configurable:!0}),"n$m");const Gd=pe.createContext(void 0),J2=Ka(({children:t,mode:e})=>{const n=pe.useRef(null),[s,a]=pe.useState(null),[i,r]=pe.useState([]),[o,c]=pe.useState("form"),[l,u]=pe.useState(null),[p,g]=pe.useState(null),[y,w]=pe.useState([]);pe.useEffect(()=>{w([...e.props.defaultSkill?.details?.skillErrors?.errors||[]]);function j(L){w([...L])}return d(j,"s"),Ka(j,"handleChange"),e.props.defaultSkill?.details?.skillErrors?.on("changed",j),()=>{e.props.defaultSkill?.details?.skillErrors?.off("changed",j)}},[e]);const S=Ka(async j=>Promise.reject("Not implemented"),"getSkill"),m=Ka(()=>Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),"uuid"),D=Ws({mutationFn:async j=>(n.current?.abort(),n.current=new AbortController,await fetch(`/api/page/builder/ai-agent/${e.props.agentId}/skill-call`,{method:"POST",body:JSON.stringify({payload:j,componentId:s?.skillId,version:"dev"}),signal:n.current?.signal,headers:{"Content-Type":"application/json","X-MONITOR-ID":window.currentMonitorId}}).then(L=>L.json()).then(L=>(console.log("setLastResponse",L),g(L),L))),mutationKey:["call_skill",s?.skillId]}),A={selectedSkill:s,setSelectedSkill:a,requests:i,setRequests:r,getSkill:S,mode:e,uuid:m,callSkillMutation:D,view:o,setView:c,lastFormValues:l,setLastFormValues:u,abortController:n,lastResponse:p,agentSkillErrors:y};return b.jsx(Gd.Provider,{value:A,children:t})},"EndpointFormPreviewProvider"),mo=Ka(()=>{const t=pe.useContext(Gd);if(t===void 0)throw new Error("useEndpointFormPreview must be used within a EndpointFormPreviewProvider");return t},"useEndpointFormPreview");var Z2=Object.defineProperty,Vd=d((t,e)=>Z2(t,"name",{value:e,configurable:!0}),"c$b");const Q2=Vd(({setIsFormVisible:t})=>{const e=pe.useRef(null),{selectedSkill:n,callSkillMutation:s,setView:a,setLastFormValues:i,mode:r,agentSkillErrors:o}=mo(),c=Fg(n?.inputsTypes),l=Vd(async(p,{resetForm:g})=>{t(!1),Ia.track("app_form_preview_run_button_click",{}),s.mutate(p,{onSuccess:()=>{lc.track("app_workflow_test_completed",{status:"success",source:"form preview"}),i(p),a("home")},onError:()=>{lc.track("app_workflow_test_completed",{status:"failed",source:"form preview"}),i(p),a("home")}})},"handleSubmit");pe.useEffect(()=>{!s.isLoading&&o.length>0&&t(!0)},[s.isLoading,o]),pe.useEffect(()=>{e.current&&e.current.focus()},[e]);const u=n?.inputsTypes.reduce((p,g)=>({...p,[g.name]:n?.autoFillDataJson?.[g.name]||""}),{});return b.jsxs("div",{children:[b.jsx(uc,{initialValues:u,validationSchema:c,onSubmit:l,enableReinitialize:!0,children:({resetForm:p,isSubmitting:g,dirty:y,setFieldValue:w,isValid:S,values:m,errors:D,handleChange:A,handleBlur:j,touched:L})=>b.jsxs(cc,{className:"flex flex-col justify-between mt-2 gap-4",children:[n?.inputsTypes.map(k=>b.jsx($g,{placeholder:"value",input:k,error:D[k.name]&&L[k.name]&&(console.log(L,D)||!0)&&typeof D[k.name]=="string"&&D[k.name],value:m[k.name]||"",onChange:A,onBlur:j,onFocus:I=>{const v=m[k.name],T=n?.autoFillDataJson?.[k.name];v===T&&I.target.select()},fileOps:{inputVersion:"v2",onChange:I=>{w(k.name,I)}},...k},k.name)),b.jsx("div",{className:"flex gap-3 mt-4 ",children:b.jsx(At,{type:"submit",className:"justify-center flex-1",disabled:s.isLoading||o.length>0,btnRef:e,label:"Run",variant:"primary",fullWidth:!0,dataAttributes:{"data-test":"form-preview-run-button"}})})]})}),b.jsx("div",{className:"flex flex-col gap-2 mt-4",children:o.map(p=>b.jsx("div",{className:"text-gray-500",children:p.error_message},p.error_slug))})]})},"FormFill");var Wd=Object.defineProperty,ew=d((t,e,n)=>e in t?Wd(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,"g$6"),oa=d((t,e)=>Wd(t,"name",{value:e,configurable:!0}),"s$u"),tw=d((t,e,n)=>(ew(t,typeof e!="symbol"?e+"":e,n),n),"p$7");function Kd(t){return t?t.startsWith("image/")?"image":t.startsWith("audio/")?"audio":t.startsWith("video/")?"video":t.startsWith("text/")?"text":t.startsWith("application/")?"application":"other":"unknown"}d(Kd,"getFileCategory"),oa(Kd,"getFileCategory"),oa(t=>/^(https?:\/\/)([^\s.]+\.[^\s]{2,})(:[0-9]{1,5})?(\/[^\s]*)?(\?[^\s]*)?$/i.test(t),"isURL"),oa(t=>typeof t=="object"&&t!==null&&t?.url&&"size"in t&&"mimetype"in t,"isSmythFileObject");function Yd(t){try{const e=new URL(t).pathname,n=e.lastIndexOf(".");return n===-1||n===e.length-1?"":e.slice(n).toLowerCase()}catch(e){return console.error("Invalid URL:",e),""}}d(Yd,"c$a"),oa(Yd,"getFileExtension");const nw=oa(t=>{const e={".html":"text/html",".css":"text/css",".js":"application/javascript",".json":"application/json",".jpg":"image/jpeg",".jpeg":"image/jpeg",".png":"image/png",".gif":"image/gif",".svg":"image/svg+xml",".webp":"image/webp",".bmp":"image/bmp",".tif":"image/tiff",".tiff":"image/tiff",".ico":"image/vnd.microsoft.icon",".avif":"image/avif",".heif":"image/heif",".heic":"image/heic",".mp4":"video/mp4",".mp3":"audio/mpeg",".wav":"audio/wav",".pdf":"application/pdf",".txt":"text/plain",".xml":"application/xml",".zip":"application/zip",".tar":"application/x-tar",".gz":"application/gzip"},n=Yd(t);return n?{mimetype:e[n]}:{mimetype:""}},"getMimeTypeFromUrl"),sw=class{static{d(this,"o")}constructor(){tw(this,"events"),this.events={}}addEventListener(e,n){this.events[e]||(this.events[e]=[]),this.events[e].push(n)}removeEventListener(e,n){this.events[e]&&(this.events[e]=this.events[e].filter(s=>s!==n))}on(e,n){this.addEventListener(e,n)}off(e,n){this.removeEventListener(e,n)}emit(e,...n){this.events[e]&&this.events[e].forEach(s=>s.apply(this,n))}};oa(sw,"EventEmitter");var aw=Object.defineProperty,ul=d((t,e)=>aw(t,"name",{value:e,configurable:!0}),"l$a");const iw=ul(({asset:t})=>{const[e,n]=pe.useState({isContentLoaded:!1,fileType:""}),[s,a]=pe.useState(!1),i=ul(()=>{n({...e,isContentLoaded:!0})},"removeLoader");pe.useEffect(()=>{async function o(c){try{const l=nw(c.trim());if(!l.mimetype)return;let u=Kd(l.mimetype)||"";n(p=>({...p,fileType:u}))}catch(l){console.error(l)}}d(o,"u"),ul(o,"getFileType"),o(t)},[t]);let r;switch(e.fileType){case"image":r=b.jsx("div",{children:b.jsx("img",{src:t,className:"max-w-full m-auto rounded-lg",onError:i,onLoad:i})});break;case"audio":r=b.jsx("audio",{controls:!0,crossOrigin:"anonymous",src:t,className:"max-w-full m-auto",onError:i,onCanPlay:i});break;case"video":r=b.jsxs("video",{controls:!0,className:"max-w-full m-auto",onError:i,onCanPlay:i,children:[b.jsx("source",{src:t,type:"video/mp4"}),"Your browser does not support the video tag."]});break;case"pdf":r=b.jsx("embed",{src:t+"#toolbar=0",type:"application/pdf",className:"w-full h-[80vh]",onError:i,onLoad:i});break;default:r=b.jsx("div",{className:"text-center",children:b.jsx("a",{href:t,target:"_blank",download:!0,className:"btn btn-primary fallback-file-download-link font-medium text-blue-600 dark:text-blue-500 hover:underline",children:"Download File"})});break}return b.jsxs("div",{className:"mt-5 relative",children:[!e.isContentLoaded&&b.jsx("div",{className:"h-1 mt-1",children:b.jsx("div",{"data-role":"progress","data-type":"line","data-small":"true","data-cls-back":"bg-gray-300",className:"file-preloader h-1"})}),b.jsx("div",{className:_n("mt-4 transition-opacity duration-300",{"opacity-0":!e.isContentLoaded}),children:r}),b.jsxs("div",{className:"mt-5 relative",children:[b.jsx(dc,{name:"rawContent",type:"text",defaultValue:t,readOnly:!0,className:"text-gray-800"}),b.jsx("div",{className:_n("absolute right-2 flex gap-2 top-1/2 -translate-y-1/2"),children:b.jsx("span",{onClick:()=>{navigator.clipboard.writeText(t),a(!0)},onMouseLeave:()=>{a(!1)},className:"cursor-pointer rounded-lg p-2 h-full flex items-center text-sm border border-solid border-gray-200 bg-gray-50 text-gray-900",children:s?b.jsx(Rg,{}):b.jsx(qg,{})})})]})]})},"PreviewableAsset");var ow=Object.defineProperty,go=d((t,e)=>ow(t,"name",{value:e,configurable:!0}),"l$9");const rw=go(()=>{const{callSkillMutation:t,lastFormValues:e,abortController:n,lastResponse:s,mode:a,agentSkillErrors:i}=mo(),[r,o]=pe.useState(!1),c=pe.useRef(null),l=a.props.dbg_url;pe.useEffect(()=>{c.current&&(c.current.style.height="auto",c.current.style.height=Math.min(c.current.scrollHeight,400)+"px")},[c]);const u=go(w=>{const S=/\b(?:https?|ftp):\/\/[^\s/$.?#].[^\s]*(?:\.(?:jpg|jpeg|png|gif|bmp|webp|svg|mp3|wav|flac|aac|mp4|mkv|mov|avi|webm|ogg|m4a|m4v|m3u8|ts|wmv))(?:\?[^\s"']*)?\b|\bsmythfs:\/\/[^\s/$.?#].[^\s"']*\b/g,m=w.match(S)?.map(D=>D.trim())?.map(D=>D.startsWith("smythfs://")?`${l}/file-proxy?url=${D}`:D)||[];return[...new Set(m)]},"extractPreviewableAssets");function p(w){return typeof w=="string"?w:JSON.stringify(w,null,2)}d(p,"c"),go(p,"seralizeResponse");const g=pe.useMemo(()=>s?.response?u(p(s?.response)):[],[s]),y=go(()=>{const w=new Blob([s?.response],{type:"text/plain"}),S=URL.createObjectURL(w),m=document.createElement("a");m.href=S,m.download="output.txt",m.click()},"handleDownload");return b.jsxs("div",{children:[t.isLoading&&b.jsx("button",{onClick:()=>{n.current?.abort()},className:"bg-transparent font-bold border border-gray-300 text-gray-500 px-4 py-3 rounded-md w-full mt-4",children:"Stop Testing"}),i.length>0&&b.jsx("div",{className:"flex flex-col gap-2 mt-4",children:i.map(w=>b.jsx("div",{className:"text-gray-500",children:w.error_message},w.error_slug))}),b.jsxs("div",{className:"mt-8",children:[s&&b.jsxs("div",{children:[b.jsx("h3",{className:"font-semibold",children:"Agent Output"}),b.jsx("div",{className:"text-sm",children:b.jsxs("div",{children:[g.map(w=>b.jsx(iw,{asset:w},w)),b.jsxs("div",{className:"mt-5 relative",children:[b.jsx(pc,{ref:c,readOnly:!0,className:" text-gray-800 resize-none",defaultValue:p(s?.response),rows:10}),b.jsxs("div",{className:_n("absolute right-2 flex gap-2 top-2 [&:hover_actionicons]:opacity-100"),children:[b.jsx("span",{onClick:y,className:"cursor-pointer rounded-lg p-2 h-full flex items-center text-sm border border-solid border-gray-200 bg-gray-50 text-gray-900 opacity-50 hover:opacity-100",children:b.jsx(Bg,{})}),b.jsx("span",{onClick:()=>{navigator.clipboard.writeText(p(s?.response)),o(!0)},onMouseLeave:()=>{o(!1)},className:"cursor-pointer rounded-lg p-2 h-full flex items-center text-sm border border-solid border-gray-200 bg-gray-50 text-gray-900 opacity-50 hover:opacity-100",children:r?b.jsx(Qu,{}):b.jsx(Fi,{})})]})]})]})})]}),b.jsxs("div",{className:"py-4 text-gray-500",children:["Something went wrong? try"," ",b.jsx("span",{className:"font-semibold border-b border-solid pb-0.5 cursor-pointer text-blue-500 border-blue-500",onClick:()=>{const w=document.querySelector(".debug-switcher");w&&!w?.classList.contains("active")&&w.dispatchEvent(new Event("click",{bubbles:!0}))},children:"debugging"})," ","to fix errors."]}),t.isError&&b.jsxs("div",{children:[b.jsx("h3",{className:"font-semibold",children:"Error"}),b.jsx("div",{children:typeof t?.error?.error=="string"?t?.error?.error:"We encountered an error while processing your request. Please try again later."})]})]})]})},"ResponseView");function lw(t){return yr({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M134,32V64a6,6,0,0,1-12,0V32a6,6,0,0,1,12,0Zm39.25,56.75A6,6,0,0,0,177.5,87l22.62-22.63a6,6,0,0,0-8.48-8.48L169,78.5a6,6,0,0,0,4.24,10.25ZM224,122H192a6,6,0,0,0,0,12h32a6,6,0,0,0,0-12Zm-46.5,47A6,6,0,0,0,169,177.5l22.63,22.62a6,6,0,0,0,8.48-8.48ZM128,186a6,6,0,0,0-6,6v32a6,6,0,0,0,12,0V192A6,6,0,0,0,128,186ZM78.5,169,55.88,191.64a6,6,0,1,0,8.48,8.48L87,177.5A6,6,0,1,0,78.5,169ZM70,128a6,6,0,0,0-6-6H32a6,6,0,0,0,0,12H64A6,6,0,0,0,70,128ZM64.36,55.88a6,6,0,0,0-8.48,8.48L78.5,87A6,6,0,1,0,87,78.5Z"}}]})(t)}d(lw,"PiSpinnerLight");var uw=Object.defineProperty,cw=d((t,e)=>uw(t,"name",{value:e,configurable:!0}),"f$2");const dw=cw(({showBackButton:t=!0,onBackButtonClick:e})=>{const[n,s]=pe.useState(null),[a,i]=pe.useState(!0),[r,o]=pe.useState("auto"),c=pe.useRef(null),{selectedSkill:l,callSkillMutation:u,view:p,setView:g,abortController:y}=mo();return pe.useEffect(()=>{o(a?"auto":0)},[a,l?.inputsTypes]),pe.useEffect(()=>{(u.isSuccess||u.isError)&&g("view_response")},[u.isSuccess,u.isError]),b.jsxs("div",{className:"home-view",children:[t&&b.jsxs("button",{onClick:e,className:"mb-4 cursor-pointer flex items-center gap-2",children:[b.jsx(Ug,{className:"w-4 h-4 text-smythos-blue-500"})," Skills List"]}),b.jsxs("div",{className:_n("",p==="home"&&u.isLoading&&"hidden"),children:[b.jsxs("button",{onClick:()=>{p==="view_response"&&i(!a)},className:_n("flex items-center justify-between w-full",p!=="view_response"&&"cursor-default pointer-events-none"),children:[b.jsx("h3",{className:"font-semibold",children:"Inputs and Files"}),p==="view_response"&&b.jsx("svg",{className:`w-4 h-4 transition-transform duration-200 ${a?"rotate-180":""}`,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:b.jsx("path",{d:"M19 9l-7 7-7-7"})})]}),b.jsx("div",{ref:c,className:"transition-all duration-200 overflow-hidden",style:{height:typeof r=="number"?`${r}px`:r},children:l?.inputsTypes&&b.jsx(Q2,{setIsFormVisible:i})})]}),p==="home"&&b.jsxs("div",{children:[b.jsxs("button",{ref:s,className:_n("bg-slate-100 px-4 py-3 rounded-lg flex items-center justify-between w-full",(u.isSuccess||u.isError)&&"cursor-pointer"),onClick:()=>{(u.isSuccess||u.isError)&&g("view_response")},children:[b.jsxs("div",{className:"flex items-center",children:[b.jsx("span",{className:"icon svg-icon APIEndpoint w-6 mr-2"}),b.jsxs("div",{className:"flex flex-col",children:[b.jsx("h4",{className:"font-bold text-[#3E3E3E] text-sm",children:l.details.name}),b.jsx("p",{className:"text-gray-500 text-xs",children:l.details.description})]})]}),b.jsxs("div",{className:"flex flex-col",children:[u.isLoading&&b.jsxs("div",{className:" p-2 rounded-md flex items-center gap-2",children:[b.jsx("span",{children:"Processing..."}),b.jsx(lw,{className:"animate-spin",size:18})]}),u.isSuccess&&b.jsx("div",{className:"p-2 rounded-md flex items-center gap-2",children:b.jsx(zg,{className:"text-green-500",size:20})}),u.isError&&b.jsx("div",{className:"p-2 rounded-md flex items-center gap-2",children:b.jsx(Hg,{className:"text-red-500",size:20})})]})]},l.skillId),u.isLoading&&b.jsx("button",{onClick:()=>{y.current?.abort(),u.reset(),g("form"),i(!0)},className:"bg-transparent font-bold border border-gray-300 text-gray-500 px-4 py-3 rounded-md w-full mt-8",children:"Stop Testing"})]}),p==="view_response"&&b.jsx(rw,{})]})},"Processing");var pw=Object.defineProperty,Xd=d((t,e)=>pw(t,"name",{value:e,configurable:!0}),"u$7");const hw=Xd(({mode:t})=>{const e=mo(),n=t.props.defaultSkill,[s,a]=pe.useState([]),[i,r]=pe.useState(null),[o,c]=pe.useState(!1),[l,u]=pe.useState(!0),p=pe.useCallback(S=>{c(!0);try{const m=document.getElementById(S);if(!m)throw new Error("Component element not found");const D=m.querySelector(".form-preview-button");if(!D)throw new Error("Form preview button not found");D.click()}catch(m){c(!1),console.error("Failed to trigger form preview:",m)}},[]),g=pe.useCallback(S=>{try{const m=s.find(A=>A.skillId===S)||null;r(m);const D=document.getElementById(S);if(!D)return;t.props.workspace?.scrollToComponent(D)}catch(m){console.error("Failed to scroll to skill:",m)}},[s,t.props.workspace]),y=pe.useCallback(()=>{const S=t.props.getAvailableSkills?.()||[];a(S)},[t.props.getAvailableSkills]),w=pe.useCallback(()=>{y()},[y]);return pe.useEffect(()=>{r(s?.[0]||null),s.length===1&&!e.selectedSkill&&l&&(p(s[0].skillId),u(!1))},[s,e.selectedSkill,l]),pe.useEffect(()=>(t.props.workspace?.addEventListener("AgentSaved",w),()=>{t.props.workspace?.removeEventListener("AgentSaved",w)}),[t]),pe.useEffect(()=>{e.setSelectedSkill(n?{skillId:n?.skillId,inputsTypes:n?.inputsTypes,formData:{},details:n?.details,autoFillDataJson:n?.autoFillDataJson}:null),y();const S=document.getElementById("embodiment-sidebar-title");S&&n?.details?.name&&(S.textContent=n.details.name)},[]),b.jsx("div",{className:"endpoint-form-preview-sidebar",children:o?b.jsx("div",{className:"flex justify-center items-center h-full",children:b.jsx(Gn,{})}):e.selectedSkill&&s.length>0?b.jsx(dw,{showBackButton:s.length>1,onBackButtonClick:()=>e.setSelectedSkill(null)}):s.length===0?b.jsx("div",{className:"text-gray-600 py-4",children:b.jsxs("p",{children:[b.jsx("b",{children:"No testable skills available."}),b.jsx("br",{}),"Please add skills to your agent and configure inputs to test."]})}):b.jsxs("div",{children:[b.jsx("p",{className:"pb-2",children:"Select one of your agent's skills from the list, then click Test."}),b.jsxs("div",{className:"flex gap-2",children:[b.jsx("select",{className:"h-9 w-full bg-white border text-gray-900 rounded block outline-none focus:outline-none focus:ring-0 focus:ring-offset-0 focus:ring-shadow-none text-sm font-normal placeholder:text-sm placeholder:font-normal px-[10px] border-gray-300 border-b-gray-500 focus:border-b-2 focus:border-b-blue-500 focus-visible:border-b-2 focus-visible:border-b-blue-500 appearance-none cursor-pointer",value:i?.skillId,onChange:S=>g(S.target.value),children:s.map(S=>b.jsx("option",{value:S.skillId,className:"py-2",children:S.details.name},S.skillId))}),b.jsx(At,{handleClick:()=>p(i?.skillId||""),disabled:!i,children:"Test"})]})]})})},"FormPreviewSidebar");function Jd({mode:t}){return b.jsx(J2,{mode:t,children:b.jsx(Gg,{initialEntries:["/home"],initialIndex:0,children:b.jsx(hw,{mode:t})})})}d(Jd,"A$7"),Xd(Jd,"EndpointFormPreviewSidebar");var fw=Object.defineProperty,Ya=d((t,e)=>fw(t,"name",{value:e,configurable:!0}),"a$q");const mw=Ya(t=>{if(!t)return{props:{},style:{}};const e=t.style?t.style.split(";").reduce((s,a)=>{const[i,r]=a.split(":").map(o=>o.trim());if(i&&r){const o=i.replace(/-([a-z])/g,c=>c[1].toUpperCase());s[o]=r}return s},{}):{},n={...t};return delete n.style,{props:n,style:e}},"processAttributes"),Zd=Ya(({fieldId:t,fieldConfig:e,formikProps:n})=>{const s=pe.useRef(null),{handleChange:a,handleBlur:i,setFieldValue:r,values:o,errors:c,touched:l}=n,{props:u,style:p}=mw(e.attributes),{events:g}=e;pe.useEffect(()=>{g&&s.current&&Object.entries(g).forEach(([D,A])=>{console.log("Adding event listener",D,A),s.current.addEventListener(D,A)})},[g]);const y={id:t,name:t,onChange:a,onBlur:i,color:l[t]&&c[t]?"failure":void 0,style:p,...u},w=Ya(()=>b.jsx("div",{className:_n("mb-2 block"),children:b.jsx(Vg,{htmlFor:t,value:e.label||t,children:e.help&&b.jsx("span",{className:"ml-1 text-sm text-gray-500",title:e.help,children:"\u24D8"})})}),"renderLabel"),S=Ya(()=>b.jsx(Wg,{name:t,component:"div",className:"mt-1 text-sm text-red-500"}),"renderError"),m=Ya(D=>b.jsxs("div",{className:_n("mb-4",e.class,"form-box"),"data-field-name":t,children:[w(),D,S()]},t),"renderInputWrapper");switch(e.type){case"textarea":return m(b.jsx(pc,{...y,value:o[t]?.toString()??"",rows:4,className:_n("resize-y"),ref:s}));case"select":return m(b.jsx(Yg,{...y,value:o[t]?.toString()??"",ref:s,children:e.options?.map(D=>b.jsx("option",{value:D.value,children:D.text},D.value))}));case"checkbox":return m(b.jsx(Kg,{...y,checked:!!o[t],onChange:D=>r(t,D.target.checked),ref:s}));case"color":return m(b.jsx("input",{type:"color",...y,value:o[t]?.toString()??"#000000",className:_n("h-[38px] w-full rounded-lg"),ref:s}));default:return m(b.jsx(dc,{...y,value:o[t]?.toString()??"",type:e.type,ref:s}))}},"RenderField");var gw=Object.defineProperty,ra=d((t,e)=>gw(t,"name",{value:e,configurable:!0}),"a$p");function Qd({config:t,onSubmit:e}){ra(c=>{if(!c)return{props:{},style:{}};const l=c.style?c.style.split(";").reduce((p,g)=>{const[y,w]=g.split(":").map(S=>S.trim());if(y&&w){const S=y.replace(/-([a-z])/g,m=>m[1].toUpperCase());p[S]=w}return p},{}):{},u={...c};return delete u.style,{props:u,style:l}},"processAttributes");const n=ra(c=>{const l={};return Object.entries(c).forEach(([u,p])=>{let g=Xg();switch((p.validate==="required"||p.required)&&(g=g.required(p.validateMessage||`${p.label||u} is required`)),p.type){case"checkbox":g=Jg();break;case"color":g=zi().matches(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,"Invalid color format");break;default:g=zi()}l[u]=g}),ac().shape(l)},"generateValidationSchema"),s=ra(c=>Object.entries(c).reduce((l,[u,p])=>({...l,[u]:p.value??""}),{}),"generateInitialValues"),a=ra(async(c,{setSubmitting:l})=>{try{e?.(c)}catch(u){console.error("Form submission error:",u),Xe("An error occurred while submitting the form")}finally{l(!1)}},"handleSubmit");if(ra((c,l,u)=>b.jsx(Zd,{fieldId:c,fieldConfig:l,formikProps:u}),"renderField"),!t.fields)return null;const i=n(t.fields),r=s(t.fields),o=Object.entries(t.fields).reduce((c,[l,u])=>{const p=u.section||"Default";return c[p]||(c[p]=[]),c[p].push({id:l,config:u}),c},{});return b.jsx(br,{onClose:()=>e?.(null),title:t.title,panelWrapperClasses:"lg:w-[35vw] md:w-[40vw]",applyMaxWidth:!1,children:b.jsxs("div",{className:"p-4",children:[t.content&&b.jsx("div",{className:"mb-4",children:t.content}),b.jsx(uc,{initialValues:r,validationSchema:i,onSubmit:a,children:c=>b.jsxs(cc,{className:"space-y-4",children:[Object.entries(o).map(([l,u])=>b.jsxs("div",{className:"space-y-4",children:[l!=="Default"&&b.jsx("h3",{className:"text-lg font-medium text-gray-900",children:l}),u.map(({id:p,config:g})=>b.jsx(Zd,{fieldId:p,fieldConfig:g,formikProps:c},p))]},l)),b.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[b.jsx(hc,{color:"gray",onClick:()=>e?.(null),type:"button",children:"Cancel"}),b.jsx(hc,{type:"submit",className:"bg-primary-100",disabled:c.isSubmitting||!c.isValid,children:t.btnSaveLabel||"Save"})]})]})})]})})}d(Qd,"ComponentInputEditor"),ra(Qd,"ComponentInputEditor");var bw=Object.defineProperty,ep=d((t,e)=>bw(t,"name",{value:e,configurable:!0}),"c$9");function tp(){const[t,e]=pe.useState(!1),[n,s]=pe.useState(!1),[a,i]=pe.useState("desktop");return pe.useEffect(()=>{const r=ep(()=>{const o=navigator.userAgent.toLowerCase(),c=window.innerWidth,l=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(o)||c<768,u=(/ipad/i.test(o)||c>=768&&c<1024)&&!/mobile/i.test(o);e(l&&!u),s(u),i(l&&!u?"mobile":u?"tablet":"desktop")},"checkDevice");return r(),window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),{isMobile:t,isTablet:n,deviceType:a}}d(tp,"useDeviceDetection"),ep(tp,"useDeviceDetection");var vw=Object.defineProperty,Xa=d((t,e)=>vw(t,"name",{value:e,configurable:!0}),"o$l");function np({platformName:t="AI Agent Builder",showDismissOption:e=!0}){const{isMobile:n,isTablet:s,deviceType:a}=tp(),[i,r]=pe.useState(!1),[o,c]=pe.useState(!1),l=Xa(()=>{o&&localStorage.setItem("mobile-warning-dismissed","true"),r(!0)},"handleContinueAnyway");if(pe.useEffect(()=>{localStorage.getItem("mobile-warning-dismissed")==="true"&&r(!0)},[]),!n&&!s||i)return null;const u=Xa(()=>{switch(a){case"mobile":return b.jsx(ny,{className:"h-8 w-8 text-[#3C89F9]"});case"tablet":return b.jsx(sy,{className:"h-8 w-8 text-[#3C89F9]"});default:return b.jsx(Hc,{className:"h-8 w-8 text-[#3C89F9]"})}},"getDeviceIcon"),p=Xa(()=>"Mobile Experience Limited","getTitle"),g=Xa(()=>"Our drag-and-drop AI agent builder works best on desktop. Mobile access is view-only.","getDescription");return b.jsx("div",{className:"fixed inset-0 z-[2000] bg-black/50 backdrop-blur-sm flex items-center justify-center p-4",children:b.jsxs(Zg,{className:"w-full max-w-md mx-auto shadow-2xl border-0 bg-white",children:[b.jsxs(Qg,{className:"text-center pb-4",children:[b.jsx("div",{className:"flex justify-center mb-4",children:u()}),b.jsx(eb,{className:"text-[18px] font-semibold text-gray-900 font-inter",children:p()}),b.jsx(tb,{className:"text-gray-600 leading-relaxed text-[14px] font-inter font-normal",children:g()})]}),b.jsxs(nb,{className:"space-y-4",children:[b.jsxs(sb,{className:"border-blue-200 bg-blue-50 flex gap-2",children:[b.jsx(mr,{color:"#1E40AF",className:"h-4 w-4"}),b.jsx(ab,{className:"text-[#1E40AF] text-[14px] font-inter font-normal",children:"For the best experience, we recommend using a desktop computer with a screen width of at least 1024px."})]}),b.jsxs("div",{className:"space-y-3",children:[b.jsxs(Ys,{className:"w-full bg-[#3C89F9] hover:bg-[#2B7CE9] text-white text-[14px] font-inter font-normal",onClick:()=>{navigator.clipboard.writeText(window.location.href).then(()=>{Bt("Link copied! Share this with your desktop device.","Success")}).catch(()=>{us("Please manually select and copy the link.","Failed to copy")})},children:[b.jsx(Hc,{className:"mr-2 h-4 w-4"}),"Copy Link for Desktop",b.jsx(ey,{className:"ml-2 h-4 w-4"})]}),b.jsxs(Ys,{variant:"outline",className:"w-full bg-white border border-gray-300 text-gray-700 hover:bg-gray-50 text-[14px] font-inter font-normal rounded-lg",onClick:()=>{const y=encodeURIComponent(`${t} - Open on Desktop`),w=encodeURIComponent(`Open this link on your desktop computer: ${window.location.href}`),S=`mailto:?subject=${y}&body=${w}`;window.open(S,"_self")||(window.location.href=S)},children:[b.jsx(ty,{className:"mr-2 h-4 w-4"}),"Email Link to Myself"]}),e&&b.jsx(Ys,{variant:"outline",className:"w-full bg-white border border-gray-300 text-gray-700 hover:bg-gray-50 text-[14px] font-inter font-normal rounded-lg",onClick:l,children:"Continue Anyway"})]}),b.jsxs("div",{className:"flex items-center space-x-2 pt-2",children:[b.jsx(ib,{id:"do-not-show-again",checked:o,onCheckedChange:y=>c(y),className:"data-[state=checked]:bg-[#3C89F9] data-[state=checked]:border-[#3C89F9] data-[state=checked]:text-[#FFFF]"}),b.jsx("label",{htmlFor:"do-not-show-again",className:"text-[14px] font-inter font-normal text-gray-600 cursor-pointer",children:"Do not show this message again"})]}),b.jsx("div",{className:"text-center",children:b.jsxs("p",{className:"text-xs text-gray-500 font-inter font-normal",children:["Need help? Visit our"," ",b.jsx("a",{href:Ut,className:"text-[#3C89F9] hover:underline",children:"documentation"})," ","or"," ",b.jsx("a",{href:"https://discord.gg/smythos",className:"text-[#3C89F9] hover:underline",children:"contact support"})]})})]})]})})}d(np,"MobileHandler"),Xa(np,"MobileHandler");var yw=Object.defineProperty,bo=d((t,e)=>yw(t,"name",{value:e,configurable:!0}),"r$n");const xw=bo(({iframeUrl:t,renderTrigger:e,iframeTitle:n="Tutorial"})=>{const s=pe.useRef(null),[a,i]=pe.useState(!1),[r,o]=pe.useState("100%");pe.useEffect(()=>{const u=bo(p=>{if(p.origin==="https://app.arcade.software")try{const g=typeof p.data=="string"?JSON.parse(p.data):p.data;g.context==="iframe.resize"&&g.height>0&&o(`${g.height}px`),g.event==="arcade-popout-close"&&i(!1),g.event==="arcade-popout-open"&&i(!0)}catch{}},"handleMessage");return window.addEventListener("message",u),()=>window.removeEventListener("message",u)},[]);const c=bo(()=>{i(!0);const u=s.current;u?.contentWindow&&u.contentWindow.postMessage({event:"request-popout-open"},"https://app.arcade.software")},"onClickArcadeTrigger"),l=bo(()=>{i(!1)},"handleClose");return b.jsxs(b.Fragment,{children:[e(c),a&&b.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.75)",zIndex:99999,display:"flex",justifyContent:"center",alignItems:"center"},onClick:l,children:b.jsxs("div",{style:{position:"relative",width:"90%",maxWidth:"1200px",height:"90vh",backgroundColor:"white",borderRadius:"8px",overflow:"hidden"},onClick:u=>u.stopPropagation(),children:[b.jsx("iframe",{ref:s,src:t,title:n,frameBorder:"0",loading:"lazy",allowFullScreen:!0,allow:"clipboard-write",style:{width:"100%",height:"100%",border:"none",colorScheme:"light"}}),b.jsx("button",{onClick:l,style:{position:"absolute",top:"10px",right:"10px",background:"white",border:"none",borderRadius:"50%",width:"30px",height:"30px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},children:"\u2715"})]})})]})},"ArcadeTutorial");var ww=Object.defineProperty,It=d((t,e)=>ww(t,"name",{value:e,configurable:!0}),"r$m");const Sw="modal-root";let sp;It(()=>{sp||(sp=On(document.getElementById(Sw)))},"ensureGlobalModalRoot");const Cw=It(t=>{const e=It((s="modal")=>`${s}-${Math.random().toString(36).substring(2,9)}`,"generateId"),n=document.createElement("div");return n.id=t||e(),document.body.appendChild(n),{root:On(n),id:n.id}},"createOneTimeRoot");function Ew({rootID:t}){const e=On(document.getElementById(t)),n=window.workspace;e.render(b.jsx(p2,{workspace:n}))}d(Ew,"renderDebugLogContainer"),It(Ew,"renderDebugLogContainer");function Aw({rootID:t}){const e=window.workspace;On(document.getElementById(t)).render(b.jsx(Ma,{client:Ks,children:b.jsx(nl,{children:b.jsx(fc,{children:b.jsx(Y2,{workspace:e})})})}))}d(Aw,"renderAgentDeploymentSidebar"),It(Aw,"renderAgentDeploymentSidebar");async function ap({config:t}){const{root:e,id:n}=Cw(),s=It(()=>{e.unmount();const a=document.getElementById(n);a&&a.remove()},"cleanup");return new Promise(a=>{e.render(b.jsx(Qd,{config:t,onSubmit:i=>{s(),console.log(i),a(i)}}))})}d(ap,"renderComponentInputEditor"),It(ap,"renderComponentInputEditor");function cl({rootID:t,skill:e}){const n=On(document.getElementById(t)),s=window.workspace;n.render(b.jsx(Ma,{client:Ks,children:b.jsx(Jd,{mode:{name:"in-builder",props:{defaultSkill:e,workspace:s,agentId:s.agent.id,dbg_url:s.serverData.dbgUrl,getAvailableSkills:()=>s.agent?.data?.components?.filter(a=>a.name==="APIEndpoint"&&a.inputs?.length>0)?.map(a=>({skillId:a.id,details:{name:a.title||""}}))||[]}}})}))}d(cl,"renderEndpointFormPreviewSidebar"),It(cl,"renderEndpointFormPreviewSidebar");function dl({rootID:t}){const e=window.workspace;On(document.getElementById(t)).render(b.jsx(Ma,{client:Ks,children:b.jsx(nl,{children:b.jsx(fc,{children:b.jsx(rc,{workspace:e,workspaceAgentId:e.agent.id,children:b.jsx(ob,{})})})})}))}d(dl,"renderAgentSettingsSidebar"),It(dl,"renderAgentSettingsSidebar");function _w({rootID:t}){const e=On(document.getElementById(t));function n(){const[s,a]=pe.useState(!1),i=pe.useRef(null),r=It(()=>{a(!1),i.current?.setAttribute("result","cancelled")},"cancelRestore");return b.jsxs(b.Fragment,{children:[b.jsx("button",{id:"self-contained-restore-modal-btn",className:"hidden",onClick:()=>a(!0),ref:i,children:"Restore"}),s&&b.jsx(mc,{label:"Restore Version",message:"Restore this version?",onClose:r,handleConfirm:It(()=>{a(!1),i.current?.setAttribute("result","confirmed")},"confirmRestore"),handleCancel:r,lowMsg:"Are you sure you want to restore this to a previous version? Any unsaved changes will be lost."})]})}d(n,"o"),It(n,"RestoreModal"),e.render(b.jsx(n,{}))}d(_w,"renderConfirmDialogModals"),It(_w,"renderConfirmDialogModals");function kw({rootID:t}){const e=window.workspace,n=document.getElementById(t);if(!n){console.error(`Root element with ID "${t}" not found`);return}function s(){const[r,o]=pe.useState(!1),c=Da(),l=sl(),u=document.getElementById("share-agent-button-topbar");return u&&(u.disabled=!c?.userInfo),pe.useEffect(()=>{const p=document.getElementById("share-agent-button-topbar");p&&(c?.userInfo?p.removeAttribute("disabled"):p.setAttribute("disabled","true"))},[c?.userInfo]),b.jsxs(b.Fragment,{children:[l.isShareAgentModalOpen&&!c?.userInfo&&b.jsx("div",{className:"fixed flex inset-0 bg-black bg-opacity-50 justify-center items-center w-full h-full",children:b.jsx(Gn,{})}),l?.isShareAgentModalOpen&&b.jsx("div",{className:"fixed inset-0",children:b.jsx(rb,{isShareAgent:!0,onClose:()=>l.toggleShareAgentModal(),agentId:e.agent.id,agentName:e.agent.name})}),r&&b.jsx("div",{className:"fixed inset-0",children:b.jsx(mc,{onClose:()=>o(!1),label:"Confirm",message:"Unauthorized",lowMsg:`You do not have permission to share this agent. Contact ${c?.userInfo?.teamMembers?.filter(p=>p.userTeamRole?.isTeamInitiator)[0]?.email||"your team admin"} to request access.`,handleConfirm:()=>o(!1),handleCancel:()=>o(!1),hideCancel:!0})})]})}d(s,"s"),It(s,"ShareButtonContent");function a(){const r=sl(),o=Da(),c=ho(),[l,u]=pe.useState(0);return pe.useEffect(()=>{r.isDeployModalOpen?!o?.userInfo||!c?.allDeployments?.data?u(1):r.isDeployModalOpen&&o?.userInfo&&c?.allDeployments?.data&&u(2):u(0)},[r.isDeployModalOpen,o?.userInfo,c?.allDeployments?.data]),b.jsxs(b.Fragment,{children:[l===1&&b.jsx("div",{className:"fixed flex inset-0 bg-black bg-opacity-50 justify-center items-center w-full h-full",children:b.jsx(Gn,{})}),l===2&&b.jsx(Fd,{userInfo:o.userInfo,deploymentSidebarCtx:c})]})}d(a,"i"),It(a,"ModalsContent");function i(){return b.jsx(Ma,{client:Ks,children:b.jsx(nl,{children:b.jsxs(Od,{workspace:e,children:[b.jsx(a,{}),b.jsx(s,{})]})})})}d(i,"l"),It(i,"ModalsContainer"),On(n).render(b.jsx(i,{}))}d(kw,"renderAgentModals"),It(kw,"renderAgentModals");let vo=null;function Pw(t,e){if(!document.getElementById("modal-root")){const n=document.createElement("div");n.id="modal-root",document.body.appendChild(n)}return vo||(vo=On(document.getElementById("modal-root")||document.createElement("div"))),vo.render(b.jsx(xw,{iframeUrl:t,iframeTitle:e,renderTrigger:n=>b.jsx("div",{style:{display:"none"},onClick:n})})),setTimeout(()=>{const n=document.querySelector('#modal-root div[style*="display: none"]');n&&n.click()},100),vo}d(Pw,"renderArcadeTutorial"),It(Pw,"renderArcadeTutorial");function Dw({rootID:t}){const e=document.getElementById(t);if(!e){console.error("Mobile handler container not found");return}On(e).render(b.jsx(np,{platformName:"AI Agent Builder",showDismissOption:!0}))}d(Dw,"renderMobileHandler"),It(Dw,"renderMobileHandler");function Iw(t){return yr({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"}},{tag:"path",attr:{d:"M12 16v-4"}},{tag:"path",attr:{d:"M12 8h.01"}}]})(t)}d(Iw,"LuInfo");var Lw=Object.defineProperty,pn=d((t,e)=>Lw(t,"name",{value:e,configurable:!0}),"r$l");const Tw=pn(({agentId:t,workspace:e})=>{const{getPageAccess:n,loading:s}=Da(),a=n("/builder",!1),[i,r]=pe.useState(!1),o=tc(),c=pe.useRef([]),l=pe.useRef(null),[u,p]=pe.useState([{key:"",value:""}]),[g,y]=pe.useState(null),[w,S]=pe.useState(null),[m,D]=pe.useState(!1),[A,j]=pe.useState({name:"",key:""}),[L,k]=pe.useState({}),[I,v]=pe.useState(!1),[T,P]=pe.useState(!1),[F,U]=pe.useState([]),[M,V]=pe.useState(!1),{data:W,isSuccess:K,isLoading:R}=os({queryKey:["agent_data_settings"],queryFn:()=>lb(t),cacheTime:0,staleTime:0,refetchInterval:!1,refetchOnWindowFocus:!1,refetchOnMount:!0,refetchOnReconnect:!1,retry:!1}),{data:X}=os({queryKey:["vaultKeys"],queryFn:async()=>(await fetch("/api/page/builder/keys?fields=name,scope&excludeScope=global,AgentLLM")).json(),staleTime:5*60*1e3,cacheTime:10*60*1e3,refetchOnWindowFocus:!1,refetchOnMount:!1,onError:()=>{Xe("Failed to load vault keys")}}),Q=X?.data||{},G=Ws({mutationFn:async fe=>{const be=await fetch("/api/page/builder/keys",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(fe)});if(!be.ok)throw new Error("Failed to save key");return be.json()},onSuccess:async()=>{await o.invalidateQueries({queryKey:["vaultKeys"]});const fe=A.name,be=w;if(D(!1),j({name:"",key:""}),be!==null){const ge=[...u];ge[be]={...ge[be],value:`{{KEY(${fe})}}`,error:!1},p(ge)}y(null)},onError:()=>{Xe("Failed to save key. Please try again.")},onSettled:()=>{P(!1)}}),J=Ws({mutationFn:async({variables:fe,lockId:be})=>{const ge=await fetch("/api/agent",{method:"POST",body:JSON.stringify({...W,data:{...W?.data,variables:fe},id:t,lockId:be}),headers:{"Content-Type":"application/json"}});if(!ge.ok)throw new Error("Failed to save variables");return ge.json()},onSuccess:()=>{o.invalidateQueries({queryKey:["agent",t]})},onError:()=>{Xe("Failed to update agent variables. Please try again.")},onSettled:async(fe,be,ge)=>{await ub(t,ge.lockId).catch(ye=>console.error(ye))}}),E=pn((fe,be,ge)=>{const ye=[...u];ye[fe]={...ye[fe],[be]:ge,error:!1},fe===u.length-1&&ge!==""&&(ye.push({key:"",value:""}),c.current=[...c.current,null]),p(ye),V(JSON.stringify(ye)!==JSON.stringify(F)),be==="value"&&te(c.current[fe],document.activeElement===c.current[fe])},"handleInputChange"),O=pn((fe,be)=>{fe?.stopPropagation();const ge=u.filter((ye,ke)=>ke!==be);ge.length===0&&ge.push({key:"",value:""}),p(ge),V(JSON.stringify(ge)!==JSON.stringify(F))},"handleDelete"),C=pn((fe,be)=>{E(fe,"value",`{{KEY(${be})}}`),y(null)},"handleVaultKeySelect"),B=pn(()=>{D(!0),j({name:"",key:""}),k({}),y(null);const fe=setTimeout(()=>{l.current&&l.current?.scrollIntoView({behavior:"smooth",block:"center"}),clearTimeout(fe)},0)},"handleAddKeyClick"),z=pn(()=>{const fe={};return A.name.trim()?Object.values(Q).some(be=>be.name===A.name.trim())&&(fe.name="Key name already exists"):fe.name="Name is required",A.key.trim()?A.key.length>1e4&&(fe.key="Key length cannot exceed 10,000 characters"):fe.key="Key is required",k(fe),Object.keys(fe).length===0},"validateNewKey"),Y=pn(async()=>{z()&&(P(!0),G.mutate({keyName:A.name,key:A.key,scope:["ALL_NON_GLOBAL_KEYS"]}))},"handleSaveKey"),se=pn(async fe=>{fe.stopPropagation();let be=!1;const ge=u.map((ye,ke)=>{if(ye.key===""&&ye.value==="")return ye;const Ie=ye.key===""&&ye.value!==""||ye.key!==""&&ye.value==="",_e=ye.key!==""&&u.some((Fe,xe)=>xe!==ke&&Fe.key===ye.key),Ue=Ie||_e;return be=be||Ue,console.log("error",Ue),{...ye,error:Ue}});if(p(ge),!be){v(!0);try{const ye=u.filter(Ie=>Ie.key!==""&&Ie.value!=="");let ke={};ye.forEach(Ie=>{ke[Ie.key]=Ie.value}),await le(ke),U(u),V(!1)}catch(ye){console.error(ye)}finally{v(!1)}}},"handleSave");async function le(fe){if(!(R||!K||!W||!W.data))try{if(e)try{e.agent.data.variables=fe,await e.saveAgent(void 0,void 0,e.agent.data),V(!1)}catch(be){console.error(be)}finally{}else{const be=await cb(t);await J.mutateAsync({variables:fe,lockId:be.lockId}),V(!1)}Bt("Variables saved successfully")}catch(be){be.errKey===db.AGENT_LOCK_FAIL?Xe("Failed to update agent variables as the agent is being edited by another user. Please try again later."):Xe("Failed to update agent variables. Please try again.")}}d(le,"me"),pn(le,"handleVariablesSave");const te=pn((fe,be)=>{if(fe){if(!be){fe.style.height="40px";return}fe.style.height="40px",fe.style.height=`${Math.max(40,fe.scrollHeight)}px`}},"adjustTextareaHeight"),he=pn(()=>{const fe=e.domElement.querySelector(".agent-settings-button");fe&&fe?.click()},"handleClose");return pe.useEffect(()=>{const fe=pn(be=>{const ge=be.target;ge.closest("#vault-key-button")||g!==null&&!ge.closest(".vault-keys-dropdown")&&y(null)},"handleClickOutside");return g!==null&&document.addEventListener("mousedown",fe,!0),()=>{document.removeEventListener("mousedown",fe,!0)}},[g]),pe.useEffect(()=>{if(K&&W?.data){const fe=W?.data,be=Object.entries(fe.variables||{}).map(([ge,ye])=>({key:ge,value:String(ye)})).concat([{key:"",value:""}]);p(be),U(be)}},[K,W?.data]),pe.useEffect(()=>{function fe(be){r(be.detail.writeAccess)}return d(fe,"e"),pn(fe,"handleWidgetAccess"),window.addEventListener("update-widget-access",fe),r(a?.write),document.querySelector("#workspace-container")?.classList.contains("locked")&&r(!1),()=>{window.removeEventListener("update-widget-access",fe)}},[a?.write]),s?b.jsx("div",{className:"bg-[#F3F4F6] mt-3 p-4 rounded-xl border border-solid border-gray-200 flex items-center justify-center",children:b.jsx(Gn,{})}):b.jsxs(pb,{title:"",isWriteAccess:i,hasBorder:!1,showOverflow:!0,children:[b.jsxs("div",{className:"bg-[#FFFF] text-[#5A5A5A] p-4 rounded-xl border border-solid border-gray-200",children:[b.jsxs("div",{className:"flex items-center justify-between mb-2",children:[b.jsxs("h2",{className:"text-base font-semibold flex items-center",children:[b.jsx(hb,{className:"mr-2"})," Global Variables"]}),b.jsxs("div",{id:"variables-widget-actions",className:`flex gap-3  ${i?"opacity-100":"opacity-0"}`,children:[b.jsx(ln,{content:b.jsx("div",{style:{minWidth:"300px"},children:"The Agent Variables you declare here can be accessed and used across all components. These variables act like global variables throughout your AI agent."}),placement:"top",children:b.jsx(Iw,{size:20})}),b.jsx(ln,{content:"Close",placement:"top",children:b.jsx(ec,{className:"cursor-pointer",size:22,onClick:fe=>{fe?.stopPropagation(),he()}})})]})]}),b.jsx("p",{className:"text-sm mb-4",children:"Define reusable values to use across your workflow."}),b.jsx("div",{className:"space-y-2",children:u.map((fe,be)=>b.jsxs("div",{className:"flex gap-2 group relative",children:[b.jsxs("div",{className:"relative flex-1",children:[b.jsx("input",{type:"text",placeholder:"Key",value:fe.key,onChange:ge=>E(be,"key",ge.target.value),className:`w-full bg-white border text-gray-900 rounded block outline-none focus:outline-none focus:ring-0 focus:ring-offset-0 focus:ring-shadow-none text-sm font-normal placeholder:text-sm placeholder:font-normal ${fe.error?"!border-smyth-red focus:border-smyth-red":"border-gray-300 border-b-gray-500 focus:border-b-2 focus:border-b-blue-500 focus-visible:border-b-2 focus-visible:border-b-blue-500"}`}),be<u.length-1&&b.jsx("button",{onClick:ge=>O(ge,be),className:"absolute right-2 top-3.5 opacity-0 group-hover:opacity-100 transition-opacity duration-200 text-gray-500 hover:text-red-500",type:"button","aria-label":"Delete variable",children:b.jsx(ln,{content:b.jsx("div",{style:{width:"120px"},children:"Delete Variable"}),placement:"top",children:b.jsx(fb,{className:"text-red-500"})})})]}),b.jsxs("div",{className:"relative w-1/2",children:[b.jsxs("div",{className:"relative",children:[b.jsx("textarea",{ref:ge=>c.current[be]=ge,placeholder:"Value",value:fe.value,onChange:ge=>E(be,"value",ge.target.value),onFocus:ge=>te(ge.target,!0),onBlur:ge=>te(ge.target,!1),className:`w-full bg-white border text-gray-900 rounded block outline-none focus:outline-none focus:ring-0 focus:ring-offset-0 focus:ring-shadow-none text-sm font-normal placeholder:text-sm placeholder:font-normal ${fe.error?"!border-smyth-red focus:border-smyth-red":"border-gray-300 border-b-gray-500 focus:border-b-2 focus:border-b-blue-500 focus-visible:border-b-2 focus-visible:border-b-blue-500"} pr-10`,style:{height:"40px",minHeight:"40px",lineHeight:"1.25rem"}}),b.jsx("button",{onClick:()=>{y(be),S(be)},className:"absolute right-2 top-0 bottom-0 my-auto h-7 w-7 hover:bg-gray-100 rounded flex items-center justify-center",type:"button",id:"vault-key-button",children:b.jsx(mb,{className:"text-[#424242]  scale-x-[-1]"})}),b.jsx("div",{className:"absolute bottom-[7px] left-2 w-[calc(100%-16px)] h-1 bg-white"})]}),g===be&&b.jsx("div",{className:"absolute z-50 mt-1 w-full bg-white border rounded-md shadow-lg vault-keys-dropdown",children:b.jsx("ul",{className:"max-h-[200px] overflow-y-auto",onWheel:ge=>{ge.stopPropagation()},children:Object.entries(Q).length>0?b.jsxs(b.Fragment,{children:[Object.entries(Q).map(([ge,ye])=>b.jsx("li",{className:"px-4 py-2 text-sm hover:bg-gray-100 cursor-pointer",onClick:()=>C(be,ye.name),children:ye.name},ge)),b.jsx("li",{className:"border-t",children:b.jsx("button",{className:"w-full text-left text-sm px-4 py-2 text-blue-500 hover:bg-gray-100",onClick:B,children:"Add Key"})})]}):b.jsx("li",{children:b.jsx("button",{className:"w-full text-left px-4 py-2 text-blue-500 hover:bg-gray-100",onClick:B,children:"Add Key"})})})})]})]},be))}),M&&b.jsx("div",{className:"flex justify-end mt-4",children:b.jsx(At,{label:"Save",variant:"primary",onMouseDown:se,disabled:I,addIcon:I,Icon:b.jsx(Gn,{classes:"w-4 h-4 mr-2"})})})]}),m&&b.jsx("div",{ref:l,className:"mt-4 flex items-center justify-center rounded-lg border border-solid border-gray-200",children:b.jsxs("div",{className:"bg-[#FFFF] text-[#5A5A5A] rounded-xl p-6 w-full max-w-md modal-content",children:[b.jsx("h2",{className:"text-base font-semibold mb-4",children:"Save Key to the Vault"}),b.jsx("div",{className:"mb-4",children:b.jsx(un,{label:"Name",required:!0,value:A.name,onChange:fe=>j({...A,name:fe.target.value}),error:!!L.name,errorMessage:L.name,fullWidth:!0})}),b.jsx("div",{className:"mb-4",children:b.jsx(un,{label:"Key",required:!0,value:A.key,onChange:fe=>j({...A,key:fe.target.value}),error:!!L.key,errorMessage:L.key,fullWidth:!0})}),b.jsxs("div",{className:"flex justify-end gap-3",children:[b.jsx(At,{label:"Cancel",variant:"secondary",handleClick:fe=>{fe?.stopPropagation(),D(!1)}}),b.jsx(At,{label:"Save",variant:"primary",handleClick:Y,disabled:T,addIcon:T,Icon:b.jsx(Gn,{classes:"w-4 h-4 mr-2"})})]})]})})]})},"VariablesWidget");var Mw=Object.defineProperty,yo=d((t,e)=>Mw(t,"name",{value:e,configurable:!0}),"g$4");const ip={},pl=class Ei extends Oa{static{d(this,"u")}constructor(e,n={data:{},top:"20px",left:"20px",width:"",height:"",uid:null},s={}){super(),this.workspace=e,this.properties=n,this.configuration=s,this.settings={},this.data={},this.drawSettings={cssClass:"agent-card",shortDescription:"",color:"#3B82F6"},this._destroyed=!1,this.variablesPlaceholder=null,this.variablesReactRoot=null,this.isVariablesComponentMounted=!1,this.skills=[],this._init_state_populated=!1,this._uid=this.properties.uid||"A"+Vn(),this.properties||(this.properties={top:"",left:""}),this.data=this.properties.data||{},this.prepare().then(this.init.bind(this)).then(()=>{this.redraw().then(()=>{this.handleSkillsConnections(this.configuration).then(()=>{this._init_state_populated=!0}),this.workspace.addEventListener("componentAdded",a=>{a.displayName==="APIEndpoint"&&this.handleCompConn(a.uid)})})}).catch(a=>{console.error("Error initializing agent card:",a)}),ip[this.uid]=this}get uid(){return this._uid}async prepare(){return Promise.resolve()}async init(){return Promise.resolve()}async redraw(){const e=this.workspace,n=document.createElement("div");n.className=`agent-card exclude-panzoom ${this.drawSettings.cssClass||""}`,n.id=`agent-card-${this._uid}`,n.style.position="absolute",n.style.left=this.properties.left||"20px",n.style.top=this.properties.top||"20px",this.properties.width&&(n.style.width=this.properties.width),this.properties.height&&(n.style.height=this.properties.height);let s=null;const a=document.querySelector("#agent-avatar");a?s=a.src:(s=window.sessionStorage.getItem(`agent-avatar-${this.workspace.agent?.id}`),window.sessionStorage.removeItem(`agent-avatar-${this.workspace.agent?.id}`));const i=document.createElement("div");i.className="agent-card-content";const r=document.createElement("div");r.className="agent-image-container";const o=document.createElement("img");o.src=s||"",o.alt="Agent",o.className=`agent-image ${s?"":"hidden"}`,o.id="agent-card-avatar",r.appendChild(o);const c=document.createElement("div");c.id="agent-card-avatar-placeholder",c.className=`h-full w-full flex items-center justify-center bg-uipink rounded-[7px]  w-8 h-8 flex items-center justify-center text-white font-medium truncate ${s?"hidden":""}`,c.style.fontSize="77px",setTimeout(()=>{c.textContent=this.workspace.agent?.data?.name?.charAt(0)||document.querySelector(".agent-avatar-placeholder-topbar")?.textContent||""},200),r.appendChild(c);const l=document.createElement("div");l.className="agent-info";const u=document.createElement("div");u.className="agent-header flex justify-between items-start";const p=document.createElement("div");p.className="flex-1 min-w-0";const g=document.createElement("h2");g.className="agent-name",setTimeout(()=>{g.textContent=this.workspace.agent?.data?.name||""},200),p.appendChild(g);const y=document.createElement("div");y.className="px-1 py-2 text-gray-500 hover:text-gray-700 hover:bg-gray-200 rounded transition-colors cursor-pointer menu-button",y.innerHTML=`
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="12" cy="12" r="1"></circle>
        <circle cx="12" cy="5" r="1"></circle>
        <circle cx="12" cy="19" r="1"></circle>
      </svg>
    `,new Br(y,{text:"Agent Setting",position:"top",showWhen:"hover"}),u.appendChild(p),u.appendChild(y),l.appendChild(u);const w=document.createElement("div");w.className="agent-actions py-2";const S=document.createElement("div");S.className="ep-control inputs justify-self-end flex items-center ";const m=document.createElement("span");m.className="text-[#5A5A5A] font-medium pr-2",m.textContent="Add skill",S.appendChild(m);const D=document.createElement("button");D.className="btn-add-endpoint button mini w-6 h-6 bg-smythos-blue-500 text-white rounded",D.id="add-skill-button",D.style.fontSize="20px",D.textContent="+",S.appendChild(D);const A=document.createElement("div");A.className="flex justify-self-end mt-2 agent-card-connection",A.setAttribute("smt-name","Skills"),A.setAttribute("smt-color","#3C89F9");const j=document.createElement("span");j.className="name",j.style.borderImage="linear-gradient(90deg, transparent 20%, rgb(60, 137, 249)) 1 / 1 / 0 stretch",j.innerHTML='<span class="label text-gray-500"># Skills</span>',A.appendChild(j);const L=document.createElement("span");L.className="block absolute ep w-[15px] h-[15px] rounded-full -right-[23px] float-left border-0 top-1/2 -translate-y-1/2",L.style.backgroundColor="#3C89F9",A.appendChild(L);const k=document.createElement("div");k.className="preview-button-container flex items-center gap-2 bg-[#F5F5F5] rounded-lg p-1 pl-2 border border-[#EDE8E8]";const I=document.createElement("button");I.className="agent-settings-button flex items-center justify-center hover:bg-[#D3D3D3] rounded-lg p-1",I.innerHTML=`
     <svg xmlns="http://www.w3.org/2000/svg" width="28" height="27" viewBox="0 0 17 16" fill="none">
      <path d="M5.41467 3.44531C2.1001 3.44531 5.41467 8.00267 2.1001 8.00267C5.41467 8.00267 2.1001 12.5601 5.41467 12.5601" stroke="#424242" stroke-linecap="round" stroke-linejoin="round"/>
      <path d="M7.13867 6.26562L9.43354 9.37743" stroke="#424242" stroke-linecap="round" stroke-linejoin="round"/>
      <path d="M9.43354 6.26562L7.13867 9.37743" stroke="#424242" stroke-linecap="round" stroke-linejoin="round"/>
      <path d="M10.7856 3.44531C14.1002 3.44531 10.7856 8.00267 14.1002 8.00267C10.7856 8.00267 14.1002 12.5601 10.7856 12.5601" stroke="#424242" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    `,new Br(I,{text:"Global Variables",position:"top",showWhen:"hover"});const v=document.createElement("button");v.className="preview-button w-full bg-white rounded border border-[#C7C7C7]",v.innerHTML=`
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 13 12" fill="none">
          <path fill-rule="evenodd" clip-rule="evenodd" d="M9.99811 9.27993C9.08886 10.3587 7.81286 10.8942 6.53776 10.8898C6.09116 10.8878 4.10195 10.8893 2.92807 10.8898C2.57878 10.8898 2.37251 10.4998 2.56662 10.2089C2.6751 10.0453 2.81424 9.84668 2.92418 9.69193C3.03364 9.53673 3.04337 9.33318 2.94851 9.16818C2.78164 8.87823 2.53354 8.43698 2.46883 8.27638C1.69825 6.60503 1.99549 4.56074 3.37077 3.1808C5.25248 1.29273 8.39416 1.42793 10.0949 3.58644C11.4016 5.24413 11.3583 7.66618 9.99811 9.27993Z" stroke="#3C89F9" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
      <span>Preview as Chatbot</span>
    `,k.appendChild(I),k.appendChild(v),w.appendChild(S),w.appendChild(A),l.appendChild(w),l.appendChild(k),i.appendChild(r),i.appendChild(l),await je(50);const T=this.workspace.jsPlumbInstance.addEndpoint(A,{paintStyle:{fill:"#ddddff00"},endpoint:["Rectangle",{height:10,width:40}],anchor:"Right",isSource:!0,maxConnections:-1,cssClass:"exclude-panzoom"});A.endpoint=T,T._domElement=A;const P=document.createElement("div");P.id=`agent-card-variables-placeholder-${this._uid}`,P.className="hidden agent-card-variables",n.appendChild(P),n.appendChild(i),this.domElement=n,this.variablesPlaceholder=P,n._control=this,e.domElement.appendChild(n),this.makeDraggable(),this.addEventListeners(),this.emit("AgentCardCreated")}makeDraggable(){const e=this.workspace,n=this;ds(this.domElement).draggable({allowFrom:".agent-card",ignoreFrom:".agent-name",listeners:{start(s){if(e?.locked)return!1;n.domElement.classList.add("dragging"),n.domElement.style.cursor="grabbing"},move(s){if(e?.locked)return!1;if(!s.target)return;let a=[s.target];for(let i of a){const r=(parseFloat(i.style.left)||0)+s.dx/e.scale,o=(parseFloat(i.style.top)||0)+s.dy/e.scale;i.style.left=r+"px",i.style.top=o+"px",i._control.repaint()}},end(s){if(e?.locked)return!1;n.repaint(!0),n.domElement.style.cursor="",setTimeout(()=>{n.workspace.saveAgent(),n.domElement.classList.remove("dragging")},200)}},inertia:!0}).styleCursor(!1)}mountVariablesComponent(){this.variablesPlaceholder&&(this.variablesPlaceholder.classList.remove("hidden"),this.variablesReactRoot=gb.createRoot(this.variablesPlaceholder),this.variablesReactRoot.render(at.createElement(Ma,{client:Ks},at.createElement(Tw,{agentId:this.workspace.agent?.id,workspace:this.workspace}))),this.isVariablesComponentMounted=!0)}unmountVariablesComponent(){this.variablesReactRoot&&(this.variablesReactRoot.unmount(),this.variablesReactRoot=null,this.variablesPlaceholder&&this.variablesPlaceholder.classList.add("hidden"),this.isVariablesComponentMounted=!1)}addEventListeners(){const e=this.domElement.querySelector("#add-skill-button");e&&e.addEventListener("click",async i=>{i.stopPropagation();const r=this.workspace.agent?.data?.components?.filter(p=>p.name==="APIEndpoint");if(r.length===0){const p=this.domElement.getBoundingClientRect(),g=await this.workspace.addComponent("APIEndpoint",{top:Number(this.properties.top.split("px")[0])+p.height+100+"px",left:Number(this.properties.left.split("px")[0])+p.width+450+"px"},!0);this.workspace.scrollToComponent(g),this.workspace.refreshComponentSelection(g);return}const o=r.reduce((p,g)=>Number(p.top.split("px")[0]||0)<Number(g.top.split("px")[0]||0)?g:p),c=document.querySelector(`#${o.id}`);let l;if(c){const p=c.getBoundingClientRect();l=Number(o.top.split("px")[0])+p.height+200+"px"}else l=Number(o.top.split("px")[0])+400+"px";const u=await this.workspace.addComponent("APIEndpoint",{top:l,left:o.left},!0);this.workspace.scrollToComponent(u),this.workspace.refreshComponentSelection(u)});const n=this.domElement.querySelector(".agent-settings-button");n&&n.addEventListener("click",i=>{i.stopPropagation(),this.isVariablesComponentMounted?this.variablesPlaceholder.classList.toggle("hidden"):this.mountVariablesComponent(),this.workspace.jsPlumbInstance.revalidate(this.domElement)}),this.domElement.addEventListener("click",i=>{i.stopPropagation();const r=i.target;r.closest(`#agent-card-variables-placeholder-${this._uid}`)||r.closest(".vault-keys-dropdown")||(bb(),dl({rootID:"agent-settings-in-right-sidebar-root"}))});const s=this.domElement.querySelector(".preview-button");s&&s.addEventListener("click",i=>{i.stopPropagation(),_t.track("app_preview_as_chatbot_click");const r=document.querySelector("#btn-emb-chatbot-main");!document.querySelector("#right-container.open #embodiment-sidebar:not(.hidden)")&&r&&r?.click();const o=document.querySelector("[data-embodiment-type='chat']");o&&o?.click()});const a=this.domElement.querySelector(".agent-name");this.domElement.addEventListener("mousedown",i=>{i.stopPropagation()}),this.workspace.addEventListener("AgentSaved",()=>{a&&this.workspace.agent?.data?.name!=a.textContent&&(a.textContent=this.workspace.agent?.data?.name||""),document.querySelector("#agent-card-avatar"),document.querySelector("#agent-card-avatar-placeholder")}),this.workspace.agent.addEventListener("AvatarUpdated",i=>{const r=document.querySelector("#agent-card-avatar");r&&(r.src=i)})}makeAgentNameEditable(e){}destroy(){this._destroyed||(this.isVariablesComponentMounted&&this.unmountVariablesComponent(),this.domElement&&this.domElement.parentNode&&this.domElement.parentNode.removeChild(this.domElement),delete ip[this.uid],this._destroyed=!0)}async repaint(e=!1){if(e){let n=[...this.domElement.querySelectorAll(".endpoint")].map(s=>s?.endpoint?.connections).flat(1/0);n=[...new Set(n)],n.forEach(s=>{this.workspace.updateConnectionStyle(s)})}this.workspace.jsPlumbInstance.repaint(this.domElement)}async handleSkillsConnections(e){const n=e?.components?.filter(s=>s.name==="APIEndpoint");if(n)for(const s of n)await this.handleCompConn(s.id)}async handleCompConn(e){const n=document.querySelector(".agent-card .agent-card-connection");if(!n)return;const s=document.querySelector(`#${e} `);if(!s)return;const a=yo(()=>{const c=s.querySelector(".agent-card-connection");c&&this.workspace.jsPlumbInstance.getConnections({source:n.id,target:c.id}).length===0&&this.workspace.jsPlumbInstance.connect({source:n.endpoint,target:c.endpoint,detachable:!0,cssClass:"exclude-panzoom",paintStyle:Ei.connPaintStyles})},"connect"),i=yo(()=>{const c=s.querySelector(".agent-card-connection");c&&this.workspace.jsPlumbInstance.getConnections({source:n.id,target:c.id}).forEach(l=>{this.workspace.jsPlumbInstance.deleteConnection(l)})},"disconnect");if(!s._control)return;const r=yo(c=>{c?.ai_exposed?a():i()},"handleSettingsChange").bind(this),o=i.bind(this);s._control.removeEventListener("settingsSaved",r),s._control.removeEventListener("settingsDraftUpdated",r),s._control.removeEventListener("beforeDelete",o),s._control.addEventListener("settingsSaved",r),s._control.addEventListener("settingsDraftUpdated",r),s._control.addEventListener("beforeDelete",o),s._control.data.ai_exposed?a():i(),s._control.addEventListener("connectionDetached",async(c,l,u)=>{this._init_state_populated&&u.source.classList.contains("agent-card-connection")&&(s._control.data.ai_exposed=!1,await je(100),this.workspace.saveAgent())}),s._control.addEventListener("connectionAttached",async(c,l,u)=>{this._init_state_populated&&u.source.classList.contains("agent-card-connection")&&(s._control.data.ai_exposed=!0,await je(100),this.workspace.saveAgent())})}static checkConnValidity(e){return!e.target.classList.contains("agent-card-connection")&&e.source.classList.contains("agent-card-connection")||!e.source.classList.contains("agent-card-connection")&&e.target.classList.contains("agent-card-connection")?(ls("Unsupported Connection",'You can only connect skill components directly to the agent. Please add a skill component first and then connect it to the agent card. <a href="https://smythos.com/documentation/#/" target="_blank" class="text-v2-blue underline hover:text-v2-blue/80">Read documentation</a>.',"OK","error"),!1):!0}static setConnPaintStyles(e){e.__smt_color=Ei.connPaintStyles.stroke,e.__smt_dashstyle=Ei.connPaintStyles.dashstyle,e.__smt_thickness=Ei.connPaintStyles.strokeWidth}static isCardConn(e){return e.source.classList.contains("agent-card-connection")}};yo(pl,"AgentCard"),pl.connPaintStyles={stroke:"#8F8F8F",strokeWidth:2,dashstyle:"4 4"};let Ja=pl;var Ow=Object.defineProperty,jw=d((t,e)=>Ow(t,"name",{value:e,configurable:!0}),"l$8");const Nw="same-as-parent",op=class extends Be{static{d(this,"n")}async prepare(){this.id=this.data?.id||this.properties.sender?.getAttribute("smt-id")||"",this.name=this.data?.name||this.properties.sender?.querySelector(".name")?.textContent||"",this.desc=this.data?.desc||this.properties.sender?.getAttribute("smt-desc")||"",this.descForModel=this.data?.descForModel||this.properties.sender?.getAttribute("smt-desc-for-model")||"",this.logoUrl=this.data?.logoUrl||this.properties.sender?.querySelector("img")?.src||"";const e=[{value:"same-as-parent",text:"Same as Parent"},{value:"dev-latest",text:"Dev"},{value:"prod-latest",text:"Prod Latest"}];this.versions=e;const n=lt.prepareModelSelectOptionsByFeatures(["tools"]);this.defaultModel=lt.getDefaultModel(n);const s=this.data?.model||this.data?.openAiModel||this.defaultModel;if(s&&![...n.map(a=>a?.value||a)].includes(s)){let a=Nt("Removed","text-smyth-red-500 border-smyth-red-500");s==="gpt-4-0613"&&(a+=Nt("alias of gpt-4","text-gray-500 border-gray-500")),n.push({text:s+"&nbsp;&nbsp",value:s,badge:a})}return this.modelOptions=n.filter(a=>a),!0}async init(){this.settings={model:{type:"select",label:"Model",options:this.modelOptions,value:this.defaultModel,dropdownHeight:350,actions:[{label:"Configure more models",icons:{left:{svg:ja,classes:"mr-2"},right:{svg:Na,classes:"absolute right-4"}},position:"after-dropdown",id:"configureMoreModelsBtn",classes:"custom_model_add_btn",events:{click:()=>{window.open("/vault","_blank")}}}]},version:{type:"select",label:"Version",options:this.versions,value:Nw},descForModel:{type:"textarea",label:"Description for Model",value:this.descForModel,attributes:{"data-template-vars":"true"}},agentId:{type:"hidden",value:this.id}};let e=["model","version","descForModel","agentId"];for(let n of e)typeof this.data[n]>"u"&&(this.data[n]=this.settings[n].value);this.drawSettings.addOutputButton="+ out",this.drawSettings.addInputButton="+ in",this.properties.defaultInputs=["Prompt"],this.properties.defaultOutputs=["Response"],this.drawSettings.displayName=this.name||this.constructor.name,this.drawSettings.shortDescription=this.desc||"",this.drawSettings.iconCSSClass="",this._ready=!0}async run(){this.addEventListener("settingsOpened",this.handleSettingsOpened.bind(this));const e=this.properties.data?.logoUrl;Wn.call(this,e)}async handleSettingsOpened(e,n){n===this&&(await je(200),await Ds(e,this),e.querySelector("#model"))}async handleElementClick(e){await Xs(e,this)}async saveApiKey(e,n,s){return await Is(e,n,s,this.workspace,this.refreshLLMModels.bind(this))}async refreshLLMModels(){await Ls(this.workspace,this.prepare.bind(this),this.init.bind(this),this.refreshSettingsSidebar.bind(this))}redraw(e=!0){const n=super.redraw(e),s=n.querySelector(".internal-name");return s.innerHTML=`<span class="internal-name-prefix agentplugin">Sub-agent </span>${this.drawSettings.displayName}`,this.domElement.querySelector(".title-bar img")?.remove(),this.data={...this.data,id:this.id,name:this.name,desc:this.desc,descForModel:this.descForModel,logoUrl:this.logoUrl},Wn.call(this,this.logoUrl),n}async updateVersions(){const e=fetch(`/api/page/builder/ai-agent/${this.id}/deployments`),n=fetch(`/api/page/builder/ai-agent/${this.workspace.agent.id}/deployments`),[s,a]=await Promise.all([e,n]),i=await s.json(),r=await a.json();let o=i.deployments.length>0;const c=r.deployments.length>0;let l=i.deployments.map(p=>p.version),u=[];l?.length&&(l=["prod-latest",...l],Fa.set(vb,{[this.id]:l}),u=l.map(p=>p==="prod-latest"?{value:p,text:"Prod Latest"}:{value:p,text:`Prod v${p}`})),u.unshift({value:"dev-latest",text:"Dev"}),c&&!o||u.unshift({value:"same-as-parent",text:"Same as Parent"}),this.settings.version.options=u,this.settings.version.loading=!1,this.settingsOpen&&this.refreshSettingsSidebar()}};jw(op,"AgentPlugin");let Fw=op;var $w=Object.defineProperty,xo=d((t,e)=>$w(t,"name",{value:e,configurable:!0}),"A$5");const Rw=8192,rp=class extends Be{static{d(this,"L")}constructor(){super(...arguments),this.templateSupport=!0,this.eventTriggersActually=!1,this.boundHandleAuthMessage=this.handleAuthMessage.bind(this),this.boundHandleFocusAfterAuth=this.handleFocusAfterAuth.bind(this)}async init(){this.settings={method:{type:"select",label:"Method",options:["GET","POST","PUT","PATCH","DELETE","HEAD","OPTIONS"],value:"GET",validate:"required",help:`The Method field defines the type of HTTP request your API call will use\u2014such as GET to retrieve data, POST to create, or DELETE to remove. <br /><a style="color: #3b82f6;text-decoration: underline;" href="${Ut}/agent-studio/components/advanced/api-call" target="_blank">See full method guide \u2192</a>`,hintPosition:"bottom",tooltipClasses:"w-64",arrowClasses:"-ml-11"},url:{type:"input",label:"URL",validate:`required maxlength=${Rw} custom=isUrlValid`,validateMessage:"Provide a valid URL",attributes:{"data-template-vars":"true"},cls:"pr-4",help:`Configure the URL field using static or dynamic values for flexibility. Use query (?key={{value}}) and path parameters ({{url}}/segment) to adapt endpoints. <br /><a style="color: #3b82f6;text-decoration: underline;" href="${Ut}/agent-studio/components/advanced/api-call" target="_blank">See URL configuration guide \u2192</a>`,hintPosition:"bottom",tooltipClasses:"w-64",arrowClasses:"-ml-15",actions:[{label:"",icon:"fa-regular fa-pen-to-square",id:"editQueryParams",events:{click:yb.bind(this,{showVault:!0,vaultScope:Yt.apiCall})}}]},headers:{type:"textarea",label:"Headers",readonly:!0,help:`Headers pass essential metadata like Content-Type and authentication details. <br />Edit them in the API component settings to match your API\u2019s requirements. <br /><a style="color: #3b82f6;text-decoration: underline;" href="${Ut}/agent-studio/components/advanced/api-call" target="_blank">See headers guide \u2192</a>`,tooltipClasses:"w-64",arrowClasses:"-ml-13",validate:"custom=isValidJson",validateMessage:"Provide a Valid JSON with non-empty keys",actions:[{label:"",icon:"fa-regular fa-pen-to-square",id:"editHeaders",events:{click:wr.bind(this,"headers",{showVault:!0,vaultScope:Yt.apiCall})}}]},contentType:{type:"select",label:"Content-Type",help:`The Content-Type header specifies the format of the data in the request body\u2014e.g., application/json, multipart/form-data, or text/plain. Choose the type that matches your API's requirements. <br /><a style="color: #3b82f6;text-decoration: underline;" href="${Ut}/agent-studio/components/advanced/api-call" target="_blank">See Content-Type guide \u2192</a>`,tooltipClasses:"w-64",arrowClasses:"-ml-5",options:["none","application/json","multipart/form-data","binary","application/x-www-form-urlencoded","text/plain","application/xml"],value:"none",events:{change:a=>this.handleBodyEditButtons()}},body:{type:"textarea",label:"Body",attributes:{"data-template-vars":"true","data-vault":`${Yt.apiCall},All`},help:`Body contains data sent to the server. SmythOS dynamically adapts content based on selected Content-Type and allows integration of variables from other components. <br /><a style="color: #3b82f6;text-decoration: underline;" href="${Ut}/agent-studio/components/advanced/api-call" target="_blank">See Body guide \u2192</a>`,tooltipClasses:"w-64",arrowClasses:"-ml-17",actions:[{label:"",icon:"fa-regular fa-pen-to-square",id:"bodyEditBtn",events:{click:wr.bind(this,"body",{showVault:!0,vaultScope:Yt.apiCall})}}]},oauthService:{type:"select",label:"Authentication Service",section:"OAuth",sectionHelp:"SmythOS supports OAuth 2.0 with OpenID Connect (OIDC) for secure user authentication and authorization.",sectionTooltipClasses:"w-64 ml-12",sectionArrowClasses:"-ml-11",options:["None","Google","Twitter","LinkedIn","Custom OAuth2.0","Custom OAuth1.0","OAuth2 Client Credentials"],value:"None",events:{change:a=>this.handleServiceChange(a.target.value)}},scope:{type:"textarea",label:"Scopes *",section:"OAuth",value:""},authorizationURL:{type:"input",label:"Authorization URL (OAuth2.0) *",section:"OAuth",value:""},tokenURL:{type:"input",label:"Token URL (OAuth2.0) *",section:"OAuth",value:""},clientID:{type:"input",label:"Client ID *",section:"OAuth",value:"",attributes:{"data-vault":`${Yt.apiCall},All`}},clientSecret:{type:"input",label:"Client Secret *",section:"OAuth",value:"",attributes:{"data-vault":`${Yt.apiCall},All`}},oauth2CallbackURL:{type:"div",html:"Callback URL (OAuth2.0)<br /><br /><span></span>",label:"Callback URL (OAuth2.0)",section:"OAuth"},requestTokenURL:{type:"input",label:"Request Token URL (OAuth1.0) *",section:"OAuth",value:""},accessTokenURL:{type:"input",label:"Access Token URL (OAuth1.0) *",section:"OAuth",value:""},userAuthorizationURL:{type:"input",label:"User Authorization URL (OAuth1.0) *",section:"OAuth",value:""},consumerKey:{type:"input",label:"Consumer Key (OAuth1.0) *",section:"OAuth",value:"",attributes:{"data-vault":`${Yt.apiCall},All`}},consumerSecret:{type:"input",label:"Consumer Secret (OAuth1.0) *",section:"OAuth",value:"",attributes:{"data-vault":`${Yt.apiCall},All`}},oauth1CallbackURL:{type:"div",html:"Callback URL (OAuth1.0)<br /><br /><span></span>",label:"Callback URL (OAuth1.0)",section:"OAuth"},authenticate:{type:"button",label:"Authenticate",section:"OAuth",attributes:{},events:{click:a=>a.target.innerText==="Sign Out"?this.signOutFunction(a.target):this.collectAndConsoleOAuthValues(a)}},proxy:{type:"textarea",label:"Proxy URLs",section:"Advanced",validateMessage:`Enter your proxy URLs in the following format:<br/>
                [scheme]://[username]:[password]@[host]:[port]<br/><br/>
                For multiple URLs, place each one in a new line.<br/><br/>
                Example:<br/>
                http://user:pass@proxyserver-one.com:8080<br/>
                socks5://proxyserver-two.com:1080`,hintPosition:"left",attributes:{"data-template-vars":"true","data-vault":`${Yt.apiCall},All`}}};for(let a of xb)typeof this.data[a]>"u"&&(this.data[a]=this.settings[a]?.value);this.properties.template&&!this.data._templateVars&&(this.data._templateVars={}),this.inputSettings={...this.inputSettings,isFile:{type:"boolean",editConfig:{type:"checkbox",label:"Binary Input",value:!1,cls:"hidden"}}},this.properties.defaultInputs=[],this.properties.defaultOutputs=["Response","Headers"],this.drawSettings.componentDescription="Effortlessly Connect to Any API Endpoint";const e=this.properties.template?.templateInfo?.icon||"",n=this.properties.template?.templateInfo?.color||"#000000",s=e&&e.startsWith("<svg");this.drawSettings.iconCSSClass=e?`tpl-fa-icon ${e}`:`svg-icon ${this.constructor.name}`,s&&(this.drawSettings.iconCSSClass=e),this.drawSettings.color=e?n:"#00BCD4",this.drawSettings.showSettings=!0}exportTemplate(){let e=JSON.parse(JSON.stringify(this.data));const n=e.url?e.url.replace(/\+/g," "):"";let s=decodeURIComponent(n);const a={};s=this.parseTemplateString(s,a),e.url=s;let i=JSON.parse(e.headers||"{}");for(let c in i){let l=i[c];typeof l=="string"&&(l=this.parseTemplateString(l,a)),i[c]=l}e.headers=JSON.stringify(i),e.body=e.body||"",e.body=this.parseTemplateString(e.body,a),e.proxy=this.parseTemplateString(e.proxy,a);const r=this.properties.inputProps,o=this.properties.outputProps;return{name:this.title,componentName:this.constructor.name,description:this.description,settings:a,data:e,inputs:r,outputs:o}}handleServiceChange(e){const n=this.getSettingsSidebar();if(!n)return"";let s=["authorizationURL","tokenURL","clientID","clientSecret","oauth2CallbackURL","scope"],a=["requestTokenURL","accessTokenURL","userAuthorizationURL","consumerKey","consumerSecret","oauth1CallbackURL"];function i(y){y.forEach(w=>{const S=n.querySelector(`[data-field-name="${w}"] input`),m=n.querySelector(`[data-field-name="${w}"] textarea`);S&&(S.value=""),m&&(m.value="")})}d(i,"n"),xo(i,"clearFieldsForNewSelection");function r(y,w){y.forEach(S=>{const m=n.querySelector(`[data-field-name="${S}"]`);m&&(m.style.display=w?"block":"none")})}d(r,"i"),xo(r,"toggleFieldsVisibility");function o(y,w,S){y.forEach(m=>{const D=n.querySelector(`[data-field-name="${m}"] input`),A=n.querySelector(`[data-field-name="${m}"] textarea`);D&&(S||D.value==="")&&(D.value=w[m]??""),A&&(S||A.value==="")&&(A.value=w[m]??"")})}d(o,"l"),xo(o,"prefillFields");const c=["Google","LinkedIn","Custom OAuth2.0","OAuth2 Client Credentials"].includes(e);let l=c?[...s]:a;e==="OAuth2 Client Credentials"&&(l=l.filter(y=>!["authorizationURL","oauth2CallbackURL","scope"].includes(y)),s=l,a=["authorizationURL","oauth2CallbackURL","scope",...a]);const u=this.data.oauthService!==e;u&&i([...a,...s]);const p=!c&&e!=="None";if(r(s,c),r(a,p),!this.eventTriggersActually&&this.data.oauthService===e)o(l,this.data,!1);else if(this.eventTriggersActually&&this.data.oauthService===e)o(l,this.data,u);else if(u){let y=this.updateConfiguration(e,n);y&&o(Object.keys(y),y,!0)}this.eventTriggersActually=!0;const g=n?.querySelector('[data-field-name="authenticate"] button');g&&g.innerText==="Sign Out"?setTimeout(async()=>{this.activateSpinner(g),await this.signOutFunction(g)},0):g.innerHTML="Authenticate"}mapSelectedService(e){return{"OAuth2 Client Credentials":"oauth2_client_credentials","Custom OAuth1.0":"oauth1","Custom OAuth2.0":"oauth2",Google:"google",LinkedIn:"linkedin",Twitter:"twitter"}[e]||e.toLowerCase()}async collectAndConsoleOAuthValues(e){const n=this.data.oauthService;if(n==="None")return Xe("You did not select any Authentication Service"),console.log("No OAuth service selected.");const{isValid:s,missingFields:a}=await this.validateOAuthConfiguration();if(!s){const S=/([a-z])([A-Z])/g,m=a.map(D=>D.replace(S,"$1 $2").toLowerCase()).join(", ");Xe(`Please configure the following fields: ${m}`);return}const{cbUrl:i,service:r,key:o,isOAuth1:c}=this.getOAuthCallbackDetails(n);let l=[...c?["requestTokenURL","accessTokenURL","userAuthorizationURL","consumerKey","consumerSecret","oauth1CallbackURL"]:[],...c?[]:["authorizationURL","tokenURL","clientID","clientSecret","oauth2CallbackURL"],"scope"];n==="OAuth2 Client Credentials"&&(l=l.filter(S=>!["authorizationURL","oauth2CallbackURL","scope"].includes(S)));let u=[],p=[],g=l?.reduce((S,m)=>{const D=this.data[m];return D||u?.push(m),["requestTokenURL","accessTokenURL","userAuthorizationURL","authorizationURL"].includes(m)&&D&&!this.isValidUrl(D)&&p.push(m),{...S,[m]:D}},{});if(u.length>0){const S=c&&u.length===1&&u[0]==="scope",m=u.length===1&&(u.includes("oauth2CallbackURL")||u.includes("oauth1CallbackURL"));if(!S&&!m){const D=["oauth2CallbackURL","oauth1CallbackURL",...c?["scope"]:[]],A=u.filter(j=>!D.includes(j)).join(", ");if(A)return Xe(`Please fill in the following fields: ${A}`),console.log(`Error: The following fields are empty: ${A}`)}}if(p.length>0){const S=p.join(", ");return Xe(`The following fields do not contain valid URLs: ${S}`),console.log(`Error: The following fields have invalid URLs: ${S}`)}n!=="OAuth2 Client Credentials"&&(g[o]=i);const y=`${this.workspace.server}/oauth/${n==="OAuth2 Client Credentials"?"client_credentials":"init"}`,w={oauth_keys_prefix:`OAUTH_${this.uid}`,service:r,...g};this.activateSpinner(e.target),document.addEventListener("visibilitychange",this.boundHandleFocusAfterAuth);try{const S=await(await fetch(y,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(w)})).json();S.authUrl?(window.open(S.authUrl,"_blank"),window.addEventListener("message",this.boundHandleAuthMessage,!1)):"success"in S?(S.success?Bt(S.message):Xe(S.message),S.success&&this.updateSidebarForOAuth(),await this.updateButtonAndRemoveFocusListener()):(console.error("Authentication URL was not returned from the server."),Xe("Authentication URL was not returned from the server."),await this.updateButtonAndRemoveFocusListener())}catch(S){Xe(`Authentication Failed: ${S?.message||S}`),console.error("Error:",S),await this.updateButtonAndRemoveFocusListener()}}handleAuthMessage(e){if(e?.origin!==window?.location?.origin)return Xe("Message origin does not match the current origin."),console.error("Message origin does not match the current origin.");switch(e.data?.type){case"oauth2":case"oauth":console.log("Authentication was successful"),Bt(`${e.data.type} authentication was successful`),this.updateSidebarForOAuth(),window.removeEventListener("message",this.boundHandleAuthMessage);break;case"error":e.data?.data?.message&&Xe(`Authentication failed. Recheck your configuration. ${e?.data?.data?.message}`);break;default:console.warn("Unhandled message type:",e.data?.type);break}}isValidUrl(e){try{return new URL(e),!0}catch{return!1}}async checkAuthentication(){const e=this.data.oauthService;if(e==="None")return!0;const{cbUrl:n,key:s,service:a,isOAuth1:i}=this.getOAuthCallbackDetails(e);let r=[...i?["requestTokenURL","accessTokenURL","userAuthorizationURL","consumerKey","consumerSecret","oauth1CallbackURL"]:[],...i?[]:["authorizationURL","tokenURL","clientID","clientSecret","oauth2CallbackURL"],"scope"];e==="OAuth2 Client Credentials"&&(r=r.filter(l=>!["authorizationURL","oauth2CallbackURL","scope"].includes(l)));let o=r.reduce((l,u)=>{const p=this.data[u];return{...l,[u]:p}},{});e==="OAuth2 Client Credentials"?o.service="oauth2_client_credentials":o[s]=n;const c={oauth_keys_prefix:`OAUTH_${this.uid}`,...o};try{const l=await fetch(`${this.workspace.server}/oauth/checkAuth`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});if(!l.ok)throw new Error(`HTTP error! status: ${l.status}`);try{return(await l.json()).success}catch(u){return console.error("Failed to parse JSON response:",u),!1}}catch(l){return console.error("Error during fetching or network issue:",l),!1}}updateConfiguration(e,n){if(e==="OAuth2 Client Credentials")return null;const{cbUrl:s,key:a}=this.getOAuthCallbackDetails(e);return n.querySelector(`[data-field-name="${a}"] span`).innerHTML=s,{Google:{authorizationURL:"https://accounts.google.com/o/oauth2/v2/auth",tokenURL:"https://oauth2.googleapis.com/token",scope:"https://www.googleapis.com/auth/gmail.readonly",oauth2CallbackURL:s},Twitter:{requestTokenURL:"https://api.twitter.com/oauth/request_token",accessTokenURL:"https://api.twitter.com/oauth/access_token",userAuthorizationURL:"https://api.twitter.com/oauth/authorize",oauth1CallbackURL:s},LinkedIn:{authorizationURL:"https://www.linkedin.com/oauth/v2/authorization",tokenURL:"https://www.linkedin.com/oauth/v2/accessToken",scope:"r_liteprofile r_emailaddress",oauth2CallbackURL:s}}[e]}isOAuth1(e){const n=["twitter"],s=e?.toLowerCase();return n.includes(s)||s.includes("oauth1.0")}getOAuthCallbackDetails(e){const n=this.workspace.serverData.frontUrl,s=this.isOAuth1(e),a=this.mapSelectedService(e);return{cbUrl:`${n}/oauth/${a}/callback`,key:s?"oauth1CallbackURL":"oauth2CallbackURL",isOAuth1:s,service:a}}async run(){this.addEventListener("settingsOpened",async(e,n)=>{n==this&&(this.eventTriggersActually=!1,this.handleBodyEditButtons(e),await this.addRightSidebarFunction(e))})}async handleBodyEditButtons(e){e||(e=this.getSettingsSidebar()),await je(50);const n=e.querySelector("#body"),s=n?.closest(".form-group"),a=s?.lastElementChild;a&&a.classList.contains("template-var-buttons")&&a.remove();const i=s?.querySelector("#bodyEditBtn"),r=s?.querySelector(".vault-action-btn"),o=e.querySelector("#contentType"),c=o?.value||this.data.contentType,l=o?.closest(".select.smt-input-select");i&&(c==="multipart/form-data"||c==="application/x-www-form-urlencoded"?(i.style.display="inline-block",n.setAttribute("readonly","")):(i.style.display="none",n.removeAttribute("readonly"),n.focus())),r&&(c==="application/json"?r.style.display="inline-block":r.style.display="none"),setTimeout(()=>{if(c==="application/json"){gc(n,!0);const u=e?.querySelector("#ace-editor-styles");u&&(u.style.minHeight="80px !important"),c!==this.data.contentType&&(n.value="",this.data.body="")}else gc(n,!1),wb(n),n.classList.remove("hidden");l&&l.classList.contains("focused")&&c!==this.data.contentType&&(n.value="",n?._editor?.setValue(""),this.data.body=""),this.data.contentType=c},150)}async addRightSidebarFunction(e){this.setCallbackUrl(e)}async setCallbackUrl(e){if(e?.querySelector('div[data-name="OAuth"]')){const n=this?.data?.oauthService;if(n&&this.data.oauthService!=="None"){if(this.data.oauthService!=="OAuth2 Client Credentials"){const{cbUrl:s,key:a}=this.getOAuthCallbackDetails(n),i=e.querySelector(`[data-field-name="${a}"] span`);i&&(i.innerHTML=s)}if(await this.checkAuthentication()){const s=e?.querySelector('[data-field-name="authenticate"] button');s&&(s.innerHTML="Sign Out")}}}else setTimeout(this.setCallbackUrl,20)}validateOAuth2Fields(e){const n=["authorizationURL","tokenURL","clientID","clientSecret","scope"].filter(a=>!e[a]),s=["authorizationURL","tokenURL"].filter(a=>e[a]&&!this.isValidUrl(e[a])).map(a=>`${a} (invalid URL)`);return{isValid:n.length===0&&s.length===0,missingFields:[...n,...s]}}validateOAuth1Fields(e){const n=["requestTokenURL","accessTokenURL","userAuthorizationURL","consumerKey","consumerSecret"].filter(a=>!e[a]),s=["requestTokenURL","accessTokenURL","userAuthorizationURL"].filter(a=>e[a]&&!this.isValidUrl(e[a])).map(a=>`${a} (invalid URL)`);return{isValid:n.length===0&&s.length===0,missingFields:[...n,...s]}}validateOAuth2ClientCredentialsFields(e){const n=["tokenURL","clientID","clientSecret"].filter(a=>!e[a]),s=["tokenURL"].filter(a=>e[a]&&!this.isValidUrl(e[a])).map(a=>`${a} (invalid URL)`);return{isValid:n.length===0&&s.length===0,missingFields:[...n,...s]}}async validateOAuthConfiguration(){const e=this.data.oauthService;if(e==="None")return{isValid:!0,missingFields:[]};const n={...this.data},s=["clientID","clientSecret","consumerKey","consumerSecret"];let a=!1;const{data:i}=await bc({scope:void 0}),r=Object.values(i);for(const o of s){const c=n[o];if((await this.checkVaultKeys(c,r))?.missingKeys?.size>0){a=!0;break}}return a?{isValid:!1,missingFields:[]}:["Google","LinkedIn"].includes(e)&&!n.scope?{isValid:!1,missingFields:["scope"]}:e==="OAuth2 Client Credentials"?this.validateOAuth2ClientCredentialsFields(n):this.isOAuth1(e)?this.validateOAuth1Fields(n):this.validateOAuth2Fields(n)}async checkSettings(){this.clearComponentMessages(),this.addComponentMessage("Checking Auth Info...","info text-center");const e=await this.checkAuthentication();await super.checkSettings();const{isValid:n}=await this.validateOAuthConfiguration(),s=this.domElement?.querySelector("button.oauthButton");!e&&n&&this.data.oauthService!=="None"&&!s&&this.addComponentButton('<div class="fa-solid fa-user-shield"></div><p class="">Authenticate</p>',"warning",{class:"oauthButton"},this.collectAndConsoleOAuthValues.bind(this))}async signOutFunction(e){this.activateSpinner(e);const n=this.getSettingsSidebar();if(!n)return"";const s=n?.querySelector('[data-field-name="authenticate"] button'),a={oauth_keys_prefix:`OAUTH_${this.uid}_TOKENS`,invalidateAuthentication:!0};try{const i=await fetch(`${this.workspace.server}/oauth/signOut`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);const r=await i.json();if(s)if(e.disabled=!1,r.invalidate){if(s.innerHTML="Authenticate",n?.querySelector('div[data-field-name="body"]')){let o=n?.querySelector("#oauthMessageSpan");o&&o.remove()}r.message&&r.message!==""&&Bt(`${r.message}`)}else s.innerHTML="Sign Out",Xe(`${r.error}`)}catch(i){Xe("Error during fetching or network issue"),console.error("Error during fetching or network issue:",i),s.innerHTML="Sign Out",e.disabled=!1}}updateSidebarForOAuth(){this.checkSettings();const e=this.getSettingsSidebar();if(!e)return"";const n=e?.querySelector('div[data-field-name="body"]'),s=e?.querySelector('[data-field-name="authenticate"] button');if(s&&(s.innerHTML="Sign Out"),n){const a="oauthMessageSpan";let i=e?.querySelector(`#${a}`);i&&i.remove();const r=document.createElement("small");r.id=a,r.className="p-2 mt-1 mb-0 text-green-500",r.textContent="OAuth Enabled, Authentication headers will be injected at runtime.",n.parentNode.insertBefore(r,n.nextSibling)}}async updateAuthenticationButton(){const e=this.getSettingsSidebar(),n=await this.checkAuthentication();if(e){const a=e?.querySelector('[data-field-name="authenticate"] button');a&&(a.disabled=!1,n?a.innerHTML="Sign Out":a.innerHTML="Authenticate")}const s=this.domElement?.querySelector("button.oauthButton");s&&(s.disabled=!1,n||(s.innerHTML='<div class="fa-solid fa-user-shield"></div><p class="">Authenticate</p>'))}async handleFocusAfterAuth(){document.visibilityState==="visible"&&this.updateButtonAndRemoveFocusListener()}async updateButtonAndRemoveFocusListener(){await this.updateAuthenticationButton(),document.removeEventListener("visibilitychange",this.boundHandleFocusAfterAuth)}activateSpinner(e){e.innerHTML='<span class="oauth-spinner smyth-spinner"></span>&nbsp;&nbsp;In Progress ...',e.disabled=!0}};xo(rp,"APICall");let qw=rp;var Bw=Object.defineProperty,$s=d((t,e)=>Bw(t,"name",{value:e,configurable:!0}),"m$3");const hl=$s(t=>`<strong>Internal Name:</strong> <span style="word-break: break-all; font-size: 12px; font-weight: normal; text-transform: none;">${t}</span>`,"getEndpointFinalURL"),wo=$s(t=>t?t.trim().replace(/\s+/g,"_"):"","getValidEndpoint"),lp=class extends Be{static{d(this,"w")}constructor(){super(...arguments),this.isOnAdvancedMode=!1,this.isNewComponent=!1,this.cachedAutoFillDataJson=null,this.formPreviewButton=null}async init(){this.isNewComponent=Object.keys(this.data).length===0,this.isOnAdvancedMode=this.isNewComponent?!1:typeof this.data.advancedModeEnabled=="boolean"?this.data.advancedModeEnabled:!0,this.settings={method:{type:"select",label:"Method",value:"POST",options:["POST","GET"],help:"Select available methods for this endpoint",hintPosition:"bottom",tooltipClasses:"w-48 ",arrowClasses:"-ml-11"},endpoint:{type:"input",label:"Skill Name",value:"",validate:"required maxlength=50 custom=isValidEndpoint",validateMessage:"Provide a valid endpoint that only contains 'a-z', 'A-Z', '0-9', '-', '_' , without leading or trailing spaces. Length should be less than 50 characters.",events:{input:n=>{const s=document.querySelector('label[for="endpointLabel"]'),a=document.querySelector('input[name="endpointLabel"]');let i=wo(n.target.value||"");s.style.display=n.target.value.trim()&&i!=n.target.value.trim()?"flex":"none";let r=hl(i);s&&(s.innerHTML=r||"",a.value=i,n.stopPropagation())},keyup:n=>{const s=n.target;window.Metro&&window.Metro.validator&&setTimeout(()=>{window.Metro.validator.validate(s)},100),n.stopPropagation()}}},endpointLabel:{type:"input",label:"Internal Name",value:"",events:{input:n=>{n.stopPropagation()}},onLoad:n=>{setTimeout(()=>{const s=document.querySelector('input[name="endpoint"]'),a=document.querySelector('input[name="endpointLabel"]'),i=document.querySelector('label[for="endpointLabel"]');i.style.marginTop="-20px",i.style.backgroundColor="transparent !important",i.style.justifyContent="flex-start",i.style.gap="8px",a.parentElement.style.display="none";let r=wo(s.value||"");if(i.style.display=s.value&&r!=s.value.trim()?"flex":"none",s.value){let o=hl(wo(s.value));i.innerHTML=o}},100)}},description:{type:"textarea",label:"Instructions",value:"",help:"Instructions for AI Agent, Describes how to use this endpoint when exposed to an LLM",tooltipClasses:"w-56 ",arrowClasses:"-ml-11",validate:"maxlength=5000",validateMessage:"Your text exceeds the 5,000 character limit."},ai_exposed:{type:"toggle",label:"Expose to AI",value:!0,help:"If enabled, the endpoint can be discovered and used as a skill by AI (E.g. ChatGPT, chatbot, AgentLLM ...)",tooltipClasses:"w-64 ",arrowClasses:"-ml-11",display:"inline",events:{change:this.exposeIAChangeHandler.bind(this)},section:"Advanced"},summary:{type:"textarea",label:"Description",value:"",help:"Short description of the endpoint, used for documentation",tooltipClasses:"w-56 ",arrowClasses:"-ml-11",validate:"maxlength=1000",validateMessage:"Your text exceeds the 1,000 character limit.",section:"Advanced"},advancedModeEnabled:{type:"toggle",label:"Advanced Request Parts",value:this.isOnAdvancedMode||!1,display:"inline",help:"Enabling this option will permanently expose HTTP headers, request body, and query parameters. This cannot be undone.",tooltipClasses:"w-56 ",arrowClasses:"-ml-11",section:"Advanced",events:{click:async n=>{const s=n.target.checked;if(this.isOnAdvancedMode==!0&&s==!1){n.target.checked=!0,n.preventDefault();return}},change:async n=>{const s=n.target.checked;if(this.isOnAdvancedMode==!0&&s==!1){n.target.checked=!0,n.preventDefault();return}if(await Mn("Are you sure?","Enabling Advanced Request Parts will permanently expose headers, body, and query parameters. This setting cannot be disabled once enabled.",{btnNoLabel:"Cancel",btnYesLabel:"Enable",btnNoClass:"hidden",btnYesClass:"h-[48px] rounded-lg px-8"}))this.isOnAdvancedMode=!0,this.advancedModeActions(this.isOnAdvancedMode,n);else{n.target.checked=!1,n.preventDefault();return}}}}},this.inputSettings={...this.inputSettings,description:{type:"string",label:"Description",class:"",default:"",editConfig:{label:"Behavior",type:"textarea",section:"Advanced_Options",hint:"Describe how this input should be handled. For example, if the input is a user question, specify how to handle long or ambiguous queries (e.g., \u201Csummarize if over 10 words\u201D). Clearly state any rules, transformations, or validations the input must follow.",hintPosition:"after_label",attributes:{placeholder:"Describe input behavior, formatting (e.g., MM-DD-YY), and requirements"}}}};const e=["method","endpoint","endpointLabel","description","ai_exposed","summary","advancedModeEnabled"];for(let n of e)typeof this.data[n]>"u"&&(this.data[n]=this.settings[n].value);this.drawSettings.iconCSSClass="svg-icon "+this.constructor.name,this.drawSettings.showSettings=!0,this.drawSettings.inputMaxConnections=0,this.drawSettings.shortDescription="An API Endpoint with input parameters for your AI agent.",this.properties.title||(this.properties.title="Agent Skill"),this.drawSettings.color="#b700f1",this.properties.defaultOutputs=["headers","body","query"],this._ready=!0}async exposeIAChangeHandler(e){const n=e.target.closest("form");if(!n)return;const s=n.querySelector('.form-box[data-field-name="description"]');s&&(e.target.checked?s.classList.remove("hidden"):s.classList.add("hidden"))}updateFormPreviewButton(){const e=this.domElement.querySelector(".messages-container");if(e){const s=e.querySelector(".form-preview-button");s&&(s.closest(".message")?.remove(),this.formPreviewButton=null)}let n=[];for(let s in this.settings){const a=this.settings[s];a.validate?.includes("required")&&n.push({id:s,name:a.label||s})}n.filter(s=>!this.data[s.id]).length===0&&this.properties?.inputProps?.length>0&&(_t.track("app_form_preview_impression",{}),this.formPreviewButton=this.addComponentButton('<div class="fa-solid fa-play" id="form-preview-button-icon"></div><p class="ml-2 font-semibold">Form Preview</p>'," ",{class:"form-preview-button",customStyle:"secondary"},async s=>{this.workspace.refreshComponentSelection(this.domElement),await this.handleFormPreviewBtnClick()}))}async checkSettings(){await super.checkSettings(),this.updateFormPreviewButton()}async run(){this.addEventListener("settingsOpened",async e=>{await je(50);const n=e.querySelector('.form-box[data-field-name="description"]');if(!n)return;this.data.ai_exposed?n.classList.remove("hidden"):n.classList.add("hidden");const s=e.querySelector('.form-box[data-field-name="method"]');s&&(this.isOnAdvancedMode?s.classList.remove("hidden"):s.classList.add("hidden"))}),this.addEventListener("settingsSaved",e=>{if(e.endpoint){this.data.endpoint=wo(e.endpoint),this.data.endpointLabel=this.data.endpoint;const n=document.querySelector('div[name="endpointLabel"]');if(n){const s=hl(this.data.endpoint);n.innerHTML=s}setTimeout(()=>{this.workspace.saveAgent()},100)}}),this.addEventListener("endpointChanged",(e,n,s,a)=>{if(this.isOnAdvancedMode||e!="name")return;const i=n.classList.contains("input-endpoint")?n:n._inputDivElement,r=n.classList.contains("output-endpoint")?n:n._outputDivElement,o=i.getAttribute("smt-name"),c=r.getAttribute("smt-name");if(o!=a&&(i.setAttribute("smt-name",a),i.querySelector(".name").innerText=a),c!=a&&(r.setAttribute("smt-name",a),r.querySelector(".name").innerText=a,r?.hasAttribute("smt-expression")&&r?.getAttribute("smt-expression")===`body.${s}`)){const l=`body.${a}`;r.setAttribute("smt-expression",l)}}),await je(50),this.advancedModeActions(this.isOnAdvancedMode)}async addInput(e,n,s={}){if(this.isOnAdvancedMode){const o=await super.addInput(e,n,s);return this.updateFormPreviewButton(),o}if(this.properties.defaultOutputs.includes(n))return super.addInput(e,n);const a=await super.addInput(e,n,s),i=e.parentElement.querySelector(".output-container");this.properties.inputProps?.find(o=>o.name===n);const r=await super.addOutput(i,n,{expression:`body.${n}`},{onEditBtnClick:o=>{if(this.isOnAdvancedMode)return!0;if(r.querySelector(".btn-edit-endpoint")){const c=a.querySelector(".btn-edit-endpoint");c&&c.click()}return!1}});return s?.optional?r.classList.add("marked-optional"):r.classList.remove("marked-optional"),a.querySelector(".ep").setAttribute("smt-con-thickness","8"),a.querySelector(".ep").setAttribute("smt-con-hide-overlays","true"),a._outputDivElement=r,r._inputDivElement=a,this.repaint(),this.updateFormPreviewButton(),await je(10),this.advancedModeActions(this.isOnAdvancedMode),a}async addOutput(e,n,s={}){return this.isOnAdvancedMode?super.addOutput(e,n,s):this.properties.defaultOutputs.includes(n)?super.addOutput(e,n,s):null}async deleteEndpoint(e){if(this.isOnAdvancedMode){const s=await super.deleteEndpoint(e);return this.updateFormPreviewButton(),s}super.deleteEndpoint(e);const n=e._outputDivElement||e._inputDivElement;e._outputDivElement&&(e.outputDivElement=null),e._inputDivElement&&(e.inputDivElement=null),n&&super.deleteEndpoint(n),this.updateFormPreviewButton()}advancedModeActions(e,n=null){const s=document.querySelector(`#${this.uid} .input-container`),a=document.querySelector(`#${this.uid} .ep-control.outputs`),i=document.querySelectorAll(`#${this.uid} .output-container .output-endpoint.default`),r=[s,a,...i].filter(o=>o!=null);if(e)r.forEach(o=>o.classList.remove("hidden")),document.querySelectorAll(`#${this.uid} .output-container .output-endpoint.marked-optional`).forEach(o=>o.classList.remove("marked-optional"));else{r.forEach(c=>c.classList.add("hidden"));const o=document.querySelector(`#${this.uid} .output-container`);o&&o.querySelectorAll(".output-endpoint").forEach(c=>{const l=c._inputDivElement;l&&this.properties.inputProps?.find(u=>u.name===l.getAttribute("smt-name"))?.optional&&c.classList.add("marked-optional")})}if(n){const o=n.target.closest("form");if(!o)return;[o.querySelector('.form-box[data-field-name="method"]')].filter(c=>c!=null).forEach(c=>{c&&(n.target.checked?c.classList.remove("hidden"):c.classList.add("hidden"))})}else{const o=document.querySelector('.form-box[data-field-name="method"]');o&&(e?o.classList.remove("hidden"):o.classList.add("hidden"))}}async handleFormPreviewBtnClick(){_t.track("app_form_preview_click",{});let e=this.cachedAutoFillDataJson;const n=this.domElement.querySelector(".form-preview-button"),s=this.domElement.querySelector("#form-preview-button-icon");if(s&&n&&(n.disabled=!0,n.classList.add("disabled"),s.classList.remove("fa-play"),s.classList.add("fa-circle-notch"),s.classList.add("animate-spin")),!e){const o=await fetch("/api/page/builder/data/generate-form-data",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({agentId:this.workspace.agent.id,componentId:this.uid})}).catch(c=>(console.error("Error generating form data:",c),null));if(o&&o.ok){const c=await o.json();c.success||console.error("Error generating form data:",c.error),e=c.data,typeof e!="object"&&(e={})}}const a="skill-preview-sidebar-root",i=`
      <div class="p-4 h-full">
        <div id="${a}"></div>
      </div>`;await Ht(i,{},mt.agent_skill.title,mt.agent_skill.tooltipTitle);const r=this.getSkillErrors();setTimeout(()=>{cl({rootID:a,skill:{skillId:this.uid,details:{name:this.title,description:this.data.description,endpoint:this.data.endpoint,method:this.data.method,skillErrors:r},inputsTypes:this.properties.inputProps,autoFillDataJson:e}})},1e3),s&&(n.disabled=!1,n.classList.remove("disabled"),s.classList.remove("fa-circle-notch"),s.classList.remove("animate-spin"),s.classList.add("fa-play"))}getSkillErrors(){const e=class extends Oa{static{d(this,"d")}constructor(){super(),this.errors=[],this.errors=[]}setErrors(o){this.errors=o,this.emit("changed",this.errors)}addError(o){const c=this.errors.find(l=>l.error_slug===o.error_slug);c?c.error_message=o.error_message:this.errors.push(o),this.emit("changed",this.errors)}removeError(o){let c=this.errors.filter(l=>l.error_slug!==o);this.errors=c,this.emit("changed",this.errors)}};$s(e,"SkillError");let n=e;const s=new n,a=$s(()=>{this.workspace.jsPlumbInstance.getAllConnections().map(r=>{const o=r.source,c=r.target,l=o.closest(".component"),u=c.closest(".component");return!l||!u?null:{sourceId:o.closest(".component").id,sourceIndex:[...o.parentElement.querySelectorAll(".output-endpoint")].findIndex(p=>p===o),targetId:c.closest(".component").id,targetIndex:[...c.parentElement.querySelectorAll(".input-endpoint")].findIndex(p=>p===c)}}).filter(r=>r).filter(r=>r.sourceId===this.uid).length===0?s.addError({error_slug:"missing_connection",error_message:"Tip: Add or connect components to bring your workflow to life. Components work together seamlessly to create a powerful, intuitive agent experience."}):s.removeError("missing_connection")},"checkConnections");this.workspace.jsPlumbInstance.bind("connection",vc(a,100)),this.workspace.jsPlumbInstance.bind("connectionDetached",vc(a,100)),a();const i=$s(()=>{let r=this.workspace.jsPlumbInstance.getAllConnections().map(u=>{const p=u.source,g=u.target,y=p.closest(".component"),w=g.closest(".component");return!y||!w?null:{sourceId:p.closest(".component").id,sourceIndex:[...p.parentElement.querySelectorAll(".output-endpoint")].findIndex(S=>S===p),targetId:g.closest(".component").id,targetIndex:[...g.parentElement.querySelectorAll(".input-endpoint")].findIndex(S=>S===g)}}).filter(u=>u),o=!1,c=[this.uid],l=[];for(;c.length>0;){let u=c.shift();l.push(u);const p=document.querySelector(`.component#${u}`)?._control;if(!p)continue;let g=[];for(let w in p.settings){const S=p.settings[w];S.validate?.includes("required")&&g.push({id:w,name:S.label||w})}if(g.filter(w=>!p.data[w.id]).length>0){o=!0;const w=$s(()=>{i(),p.off("settingsSaved",w)},"listener");p.on("settingsSaved",w);break}const y=r.filter(w=>w.sourceId===u&&!l.includes(w.targetId)).map(w=>w.targetId);c.push(...y)}o?s.addError({error_slug:"connected_components_settings_err",error_message:"Tip: resolve missing information from components (the red boxes) first, otherwise the agent will get stuck at that step and not return anything useful."}):s.removeError("connected_components_settings_err")},"checkSettingsErr");return i(),s}redraw(e){super.redraw(e);const n=this.domElement.querySelector(".title-bar-top"),s=this.workspace.jsPlumbInstance.addEndpoint(n,{endpoint:["Rectangle",{height:10,width:40}],anchor:"Left",isTarget:!0,maxConnections:-1,cssClass:"exclude-panzoom"});n.classList.add("agent-card-connection"),n.endpoint=s,s._domElement=n;const a=document.createElement("span");a.className="block absolute ep w-[15px] h-[15px] rounded-full -left-[17px] float-left border-0 top-1/2 -translate-y-1/2",a.style.backgroundColor="rgb(60, 137, 249)",n.appendChild(a)}};$s(lp,"APIEndpoint");let Uw=lp;var zw=Object.defineProperty,Hw=d((t,e)=>zw(t,"name",{value:e,configurable:!0}),"i$w");const up=class extends Be{static{d(this,"s")}async init(){this.settings={format:{type:"select",label:"Output Format",value:"full",options:["full","minimal","raw"],help:"API Output component refines and standardizes output data, ensuring relevance and clarity for user requirements.",tooltipClasses:"w-64",arrowClasses:"-ml-11",hintPosition:"bottom",events:{}}};const e=["format"];for(let n of e)typeof this.data[n]>"u"&&(this.data[n]=this.settings[n].value);this.properties.defaultOutputs=["Output"],this.properties.defaultInputs=[],this.drawSettings.iconCSSClass="svg-icon "+this.constructor.name,this.drawSettings.addOutputButton=null,this.drawSettings.outputMaxConnections=0,this.drawSettings.addOutputButtonLabel=" ",this.drawSettings.color="#8600f1"}};Hw(up,"APIOutput");let Gw=up;var Vw=Object.defineProperty,Ww=d((t,e)=>Vw(t,"name",{value:e,configurable:!0}),"o$k");const cp=class extends Be{static{d(this,"r")}async init(){this.settings={};const e=[];for(let n of e)typeof this.data[n]>"u"&&(this.data[n]=this.settings[n].value);this.outputSettings={...this.outputSettings,description:{type:"string",default:"",editConfig:{type:"textarea"}}},this.properties.defaultInputs=[],this.properties.defaultOutputs=["JobID"],this.drawSettings.displayName="Async",this.drawSettings.iconCSSClass="svg-icon "+this.constructor.name,this.drawSettings.componentDescription="Runs workflow asynchronously",this.drawSettings.shortDescription="Runs workflow asynchronously",this.drawSettings.color="#4fd581",this.drawSettings.addOutputButton=null,this.drawSettings.addInputButtonLabel="in/out",this.drawSettings.addOutputButtonLabel=" ",this.drawSettings.showSettings=!1,this._ready=!0}inputNameExists(e){return!!(this.inputContainer.querySelector(`.input-endpoint[smt-name="${e}"]`)||this.outputContainer.querySelector(`.output-endpoint[smt-name="${e}"]`))}async addInput(e,n){if(this.properties.defaultOutputs.includes(n))return super.addInput(e,n);const s=await super.addInput(e,n),a=e.parentElement.querySelector(".output-container"),i=await super.addOutput(a,n);return s.querySelector(".ep").setAttribute("smt-con-thickness","8"),s.querySelector(".ep").setAttribute("smt-con-hide-overlays","true"),s._outputDivElement=i,i._inputDivElement=s,this.repaint(),s}async addOutput(e,n){return this.properties.defaultOutputs.includes(n)?super.addOutput(e,n):null}async deleteEndpoint(e){console.log("deleting"),super.deleteEndpoint(e);const n=e._outputDivElement||e._inputDivElement;e._outputDivElement&&(e.outputDivElement=null),e._inputDivElement&&(e.inputDivElement=null),n&&super.deleteEndpoint(n)}async run(){return this.addEventListener("endpointChanged",(e,n,s,a)=>{if(e!="name")return;console.log("endpointNameChanged",n,s,a);const i=n.classList.contains("input-endpoint")?n:n._inputDivElement,r=n.classList.contains("output-endpoint")?n:n._outputDivElement,o=i.getAttribute("smt-name"),c=r.getAttribute("smt-name");o!=a&&(i.setAttribute("smt-name",a),i.querySelector(".name").innerText=a),c!=a&&(r.setAttribute("smt-name",a),r.querySelector(".name").innerText=a)}),!0}};Ww(cp,"Async");let Kw=cp;var Yw=Object.defineProperty,Xw=d((t,e)=>Yw(t,"name",{value:e,configurable:!0}),"s$s");const dp=class extends Be{static{d(this,"i")}async init(){this.settings={html:{type:"div",html:"The first met condition will interrupt Await and continue the workflow."},jobs_count:{type:"range",label:"Minimum Jobs Count",min:1,max:100,value:1,step:1,validate:"min=1 max=100",validateMessage:"Allowed range 1 to 100"},max_time:{type:"range",label:"Maximum wait time in seconds",min:1,max:10800,value:1,step:1,validate:"min=1 max=10800",validateMessage:"Allowed range 1 to 10800"}};const e=["jobs_count","max_time"];for(let n of e)typeof this.data[n]>"u"&&(this.data[n]=this.settings[n].value);this.outputSettings={...this.outputSettings,description:{type:"string",default:"",editConfig:{type:"textarea"}}},this.properties.defaultInputs=["Jobs"],this.properties.defaultOutputs=["Results"],this.drawSettings.displayName="Await",this.drawSettings.iconCSSClass="svg-icon "+this.constructor.name,this.drawSettings.componentDescription="Wait for asynchronous jobs",this.drawSettings.shortDescription="Wait for asynchronous jobs",this.drawSettings.color="#4fd581",this.drawSettings.addOutputButton=null,this.drawSettings.addOutputButtonLabel=" ",this.drawSettings.showSettings=!0,this._ready=!0}};Xw(dp,"Await");let Jw=dp;var Zw=Object.defineProperty,Qw=d((t,e)=>Zw(t,"name",{value:e,configurable:!0}),"i$u");const pp=class extends Be{static{d(this,"s")}async init(){this.settings={mime:{type:"select",label:"MIME type",hint:"Model name",value:"default",options:["default","image/jpeg","image/png"]}};const e=["mime"];for(let n of e)typeof this.data[n]>"u"&&(this.data[n]=this.settings[n].value);this.properties.defaultOutputs=["Output"],this.properties.defaultInputs=["Data"],this.drawSettings.showSettings=!1,this.drawSettings.cssClass="",this.drawSettings.iconCSSClass="svg-icon "+this.constructor.name,this.drawSettings.addOutputButton=null,this.drawSettings.addInputButton=" + Input",this.drawSettings.componentDescription="Converts a raw data string to base64 encoded string or url"}};Qw(pp,"Base64Encoder");let eS=pp;var tS=Object.defineProperty,nS=d((t,e)=>tS(t,"name",{value:e,configurable:!0}),"i$t");const hp=class extends Be{static{d(this,"o")}async prepare(){const e=lt.prepareModelSelectOptionsByFeatures(["text"]);this.defaultModel=lt.getDefaultModel(e);const n=this.data?.model;return n&&![...e.map(s=>s?.value||s)].includes(n)&&e.push({text:n+"&nbsp;&nbsp",value:n,badge:Nt("Removed","text-smyth-red-500 border-smyth-red-500")}),this.modelOptions=e.filter(s=>s),!0}async init(){this.settings={model:{type:"select",label:"Select a model",help:"Choose an AI model to process the prompt.",tooltipClasses:"w-56",arrowClasses:"-ml-11",value:this.defaultModel,options:this.modelOptions,actions:[{label:"Configure more models",icons:{left:{svg:ja,classes:"mr-2"},right:{svg:Na,classes:"absolute right-4"}},position:"after-dropdown",id:"configureMoreModelsBtn",classes:"custom_model_add_btn",events:{click:()=>{window.open("/vault","_blank")}}}]},prompt:{type:"textarea",label:"Prompt",validate:"required maxlength=30000",validateMessage:"The prompt should be a non empty text of less than 30,000 characters",value:`Classify the input content to one of the categories.
Set the selected category to true and the others to empty value`,attributes:{"data-template-vars":"true"}}};const e=["prompt","model"];for(let n of e)typeof this.data[n]>"u"&&(this.data[n]=this.settings[n].value);this.outputSettings={...this.outputSettings,description:{type:"string",default:"",editConfig:{type:"textarea"}}},this.properties.defaultOutputs=[],this.properties.defaultInputs=["Input"],this.drawSettings.iconCSSClass="svg-icon "+this.constructor.name,this.drawSettings.addOutputButton="Categories",this.drawSettings.addInputButton="Inputs",this.drawSettings.componentDescription=`Classify the input content to one of the categories.
Can use a prompt to customize the output format, classification behavior, categories extraction and more`,this.drawSettings.shortDescription="Classifies content to one of the categories",this.drawSettings.color="#ff00f2"}async run(){this.addEventListener("settingsOpened",this.handleSettingsOpened.bind(this))}async handleSettingsOpened(e,n){n===this&&(await je(200),await Ds(e,this))}async handleElementClick(e){await Xs(e,this)}async saveApiKey(e,n,s){return await Is(e,n,s,this.workspace,this.refreshLLMModels.bind(this))}async refreshLLMModels(){await Ls(this.workspace,this.prepare.bind(this),this.init.bind(this),this.refreshSettingsSidebar.bind(this))}};nS(hp,"Classifier");let sS=hp;var aS=Object.defineProperty,iS=d((t,e)=>aS(t,"name",{value:e,configurable:!0}),"d$i");const fp=class extends Be{static{d(this,"a")}constructor(){super(...arguments),this.templateSupport=!0}async init(){const e=`
//This is a simple example of how to use the code component.
let result = _A + _B;
let message = \`The sum of \${_A} and \${_B} is \${result}\`;
_output = {result, message};

//_output variable is bound to component Output endpoint
//  _output can be a json object or a primitive value
 

`;this.settings={code_vars:{type:"textarea",code:{mode:"javascript",theme:"chrome"},label:"Variables",value:"",validate:"",validateMessage:"",help:"A variable stores data that can be used and modified in your code, such as numbers, text, or objects.",tooltipClasses:"w-56",arrowClasses:"-ml-11",attributes:{readonly:"readonly"}},code_body:{type:"textarea",code:{mode:"javascript",theme:"chrome"},label:"Code",help:"Code to process inputs.",value:e,validate:"maxlength=500000",validateMessage:"The code length is limitted to 500,000 characters",attributes:{}}};const n=["code_vars","code_body"];for(let r of n)typeof this.data[r]>"u"&&(this.data[r]=this.settings[r].value);this.properties.template&&!this.data._templateVars&&(this.data._templateVars={}),this.properties.defaultInputs=[],this.properties.inputs.length==0&&(this.properties.inputs=["A","B"]),this.properties.defaultOutputs=["Output"],this.properties.outputs.length==0&&(this.properties.outputs=["Output","_error"]),this.data.code_vars=this.generateCodeVars(JSON.parse(JSON.stringify(this.properties.inputs))),this.drawSettings.displayName="Code";const s=this.properties.template?.templateInfo?.icon||"",a=this.properties.template?.templateInfo?.color||"#000000",i=s&&s.startsWith("<svg");this.drawSettings.iconCSSClass=s?`tpl-fa-icon ${s}`:`svg-icon ${this.constructor.name}`,this.drawSettings.color=s?a:"#00BCD4",i&&(this.drawSettings.iconCSSClass=s),this.drawSettings.componentDescription="Process inputs with code",this.drawSettings.shortDescription="Process inputs with code",this._ready=!0}async run(){this.addEventListener("endpointAdded",this.updateCodeVars.bind(this)),this.addEventListener("endpointRemoved",this.updateCodeVars.bind(this)),this.addEventListener("endpointChanged",this.updateCodeVars.bind(this)),this.addEventListener("settingsOpened",async(e,n)=>{if(n!==this)return;console.log("settingsOpened");const s=e.querySelector("#code_vars");if(s){s.classList.add("hidden");const i=s._editor;i&&(i.session.setOption("useWorker",!1),i.clearSelection())}const a=e.querySelector("#code_body");if(a){a.classList.add("hidden");const i=a._editor;i&&i.clearSelection()}})}updateCodeVars(){const e=[...this.domElement.querySelectorAll(".input-container .input-endpoint")].map(s=>s.getAttribute("smt-name"));this.data.code_vars=this.generateCodeVars(e);const n=this.getSettingsSidebar();if(n){const s=n.querySelector("#code_vars");s&&(s.value=this.data.code_vars),s&&s._editor&&s._editor.setValue(this.data.code_vars)}}generateCodeVars(e){let n="";return e.length>=1&&(n=`//Use these variables to access your input values.
`,e.push(""),n+=e.reduce((s,a)=>!a&&!s.startsWith("const ")?`const _${s}={{${s}}};`:a?s.startsWith("const ")?`${s}
const _${a}={{${a}}};`:`const _${s}={{${s}}};
const _${a}={{${a}}};`:s)),n+=`

//This variable determines the output of your component.
let _output=undefined;`,n+=`
`,n}exportTemplate(){let e=JSON.parse(JSON.stringify(this.data));const n={};e.code_body=e.code_body||"",e.code_body=this.parseTemplateString(e.code_body,n);const s=this.properties.inputProps,a=this.properties.outputProps;return{name:this.title,componentName:this.constructor.name,description:this.description,settings:n,data:e,inputs:s,outputs:a}}};iS(fp,"Code");let oS=fp;var rS=Object.defineProperty,lS=d((t,e)=>rS(t,"name",{value:e,configurable:!0}),"o$i");const mp=class extends Be{static{d(this,"a")}async prepare(){return!0}async init(){this.settings=this.generateSettings();const e=["prompt"];for(let n of e)typeof this.data[n]>"u"&&(this.data[n]=this.settings[n].value);this.properties.defaultOutputs=["Output"],this.properties.defaultInputs=["Prompt"],this.drawSettings.displayName="Computer Use",this.drawSettings.iconCSSClass="svg-icon "+this.constructor.name,this.drawSettings.componentDescription="Control a virtual computer to perform tasks using natural language commands",this.drawSettings.shortDescription="AI-powered computer automation",this.drawSettings.color="#65a698",this._ready=!0}generateSettings(){return{prompt:{type:"textarea",label:"Prompt",validate:"required minlength=2",validateMessage:"Please provide a prompt with at least 2 characters",value:"{{Prompt}}",attributes:{"data-template-vars":"true",placeholder:'Describe what you want the computer to do. For example: "Go to google.com and search for SmythOS"'},help:"Natural language instructions for what you want the computer to do"}}}async run(){this.addEventListener("settingsOpened",this.handleSettingsOpened.bind(this))}async handleSettingsOpened(e,n){}redraw(e){super.redraw(e);const n=document.createElement("div");n.className="computer-state-container mt-4 p-1 border border-gray-300 rounded-lg shadow-sm bg-white";const s=document.createElement("img");return s.className="computer-state-img w-full h-auto rounded-md object-contain max-h-[400px]",s.src="/img/builder/computer-use-ui-placeholder.png",s.onerror=()=>{s.src="/img/builder/computer-use-ui-placeholder.png"},n.appendChild(s),this.domElement.appendChild(n),this.domElement}};lS(mp,"ComputerUse");let uS=mp;var cS=Object.defineProperty,dS=d((t,e)=>cS(t,"name",{value:e,configurable:!0}),"n$f");const gp=class extends Be{static{d(this,"s")}constructor(){super(...arguments),this.namespaces=[]}async prepare(){this.updateSettings()}async updateSettings(){const e=await(await fetch(`${this.workspace.server}/api/component/DataSourceCleaner/namespaces`)).json();this.namespaces=e.map(n=>({value:n.id,text:n.name})),this.settings.namespaceId.options=this.namespaces,this.settingsOpen&&this.refreshSettingsSidebar()}async init(){this.settings={namespaceId:{type:"select",label:"namespace",hint:"Select namespace",options:this.namespaces},id:{type:"input",label:"source identifier",hint:"Accepted characters: 'a-z', 'A-Z', '0-9', '-', '_', '.'",validate:"custom=isValidId",validateMessage:"It should contain only 'a-z', 'A-Z', '0-9', '-', '_', '.', ",attributes:{"data-template-vars":"true"}}};const e=[];for(let n of e)typeof this.data[n]>"u"&&(this.data[n]=this.settings[n].value);this.properties.defaultInputs=[],this.properties.defaultOutputs=["Success"],this.drawSettings.iconCSSClass="svg-icon "+this.constructor.name,this.drawSettings.displayName="Source Cleaner",this.drawSettings.shortDescription="Delete data sources from data pool",this.drawSettings.color="#fb3464",this.drawSettings.showSettings=!0}async checkSettings(){super.checkSettings(),(!this.namespaces||this.namespaces.length==0)&&await je(3e3);const e={};if(this.namespaces.forEach(n=>{e[n.value]=n.text}),this.data.namespace){const n=this.data.namespace;e[n]||(console.log("Namespace Missing",n),this.addComponentMessage('Missing Namespace<br /><a href="/data" target="_blank" style="color:#33b;text-decoration:underline">Create one</a> then configure it for this component',"alert"))}}};dS(gp,"DataSourceCleaner");let pS=gp;var hS=Object.defineProperty,fS=d((t,e)=>hS(t,"name",{value:e,configurable:!0}),"i$s");const bp=class extends Be{static{d(this,"a")}constructor(){super(...arguments),this.namespaces=[]}async prepare(){this.updateSettings()}async updateSettings(){const e=await(await fetch(`${this.workspace.server}/api/component/DataSourceIndexer/namespaces`)).json();this.namespaces=e.map(n=>({value:n.id,text:n.name})),this.settings.namespace.options=this.namespaces,this.settingsOpen&&this.refreshSettingsSidebar()}async init(){this.settings={namespace:{type:"select",label:"namespace",hint:"Select namespace",options:this.namespaces},id:{type:"input",label:"source identifier",hint:"Accepted characters: 'a-z', 'A-Z', '0-9', '-', '_', '.'",attributes:{"data-template-vars":"true"},validate:"custom=isValidId",validateMessage:"It should contain only 'a-z', 'A-Z', '0-9', '-', '_', '.' "},name:{type:"input",label:"label",hint:"a human readable label for the data source",attributes:{"data-template-vars":"true"},validate:"maxlength=50",validateMessage:"Enter a non-empty label, not more than 50 characters."},metadata:{type:"textarea",label:"Metadata",value:"",validate:"maxlength=10000",hint:"Enter the source metadata, not more than 10000 characters.",attributes:{"data-template-vars":"true"}}};const e=["namespace"];for(let n of e)typeof this.data[n]>"u"&&(this.data[n]=this.settings[n].value);this.properties.defaultInputs=["Source"],this.properties.defaultOutputs=["Success"],this.drawSettings.iconCSSClass="svg-icon "+this.constructor.name,this.drawSettings.displayName="Source Indexer",this.drawSettings.shortDescription="Index data sources to data pool",this.drawSettings.color="#fb3464",this.drawSettings.showSettings=!0}async checkSettings(){super.checkSettings(),(!this.namespaces||this.namespaces.length==0)&&await je(3e3);const e={};if(this.namespaces.forEach(n=>{e[n.value]=n.text}),this.data.namespace){const n=this.data.namespace;e[n]||(console.log("Namespace Missing",n),this.addComponentMessage('Missing Namespace<br /><a href="/data" target="_blank" style="color:#33b;text-decoration:underline">Create one</a> then configure it for this component',"alert"))}}};fS(bp,"DataSourceIndexer");let mS=bp;var gS=Object.defineProperty,bS=d((t,e)=>gS(t,"name",{value:e,configurable:!0}),"n$e");const vp=class extends Be{static{d(this,"s")}constructor(){super(...arguments),this.namespaces=[]}async prepare(){this.updateSettings()}async updateSettings(){const e=await(await fetch(`${this.workspace.server}/api/component/DataSourceLookup/namespaces`)).json();this.namespaces=e.map(n=>({value:n.id,text:n.name})),this.settings.namespace.options=this.namespaces,this.settingsOpen&&this.refreshSettingsSidebar()}async init(){this.settings={namespace:{type:"select",label:"namespace",hint:"Select namespace",options:this.namespaces},topK:{type:"number",label:"Results count",hint:"Number of results to return",value:3,validate:"required min=0 custom=isValidInteger",validateMessage:"Please enter a positive number"},includeMetadata:{type:"checkbox",label:"Include metadata",value:!1},scoreThreshold:{type:"range",label:"Score threshold",hint:"Score threshold",value:.5,min:0,max:1,step:.01,help:"Score threshold for filtering results \u2014 the higher the threshold, the more restrictive the filtering."},includeScore:{type:"checkbox",label:"Include score",value:!1}};const e=["namespace","topK","scoreThreshold","includeScore"];for(let n of e)typeof this.data[n]>"u"&&(this.data[n]=this.settings[n].value);this.properties.defaultInputs=["Query"],this.properties.defaultOutputs=["Results"],this.drawSettings.iconCSSClass="svg-icon "+this.constructor.name,this.drawSettings.displayName="Data Lookup",this.drawSettings.shortDescription="Lookup data from data pool",this.drawSettings.color="#fb3464",this.drawSettings.showSettings=!0}async checkSettings(){super.checkSettings(),(!this.namespaces||this.namespaces.length==0)&&await je(3e3);const e={};if(this.namespaces.forEach(n=>{e[n.value]=n.text}),this.data.namespace){const n=this.data.namespace;e[n]||(console.log("Namespace Missing",n),this.addComponentMessage('Missing Namespace<br /><a href="/data" target="_blank" style="color:#33b;text-decoration:underline">Create one</a> then configure it for this component',"alert"))}}};bS(vp,"DataSourceLookup");let vS=vp;var yS=Object.defineProperty,xS=d((t,e)=>yS(t,"name",{value:e,configurable:!0}),"a$l");const yp=class extends Be{static{d(this,"i")}async init(){this.settings={db:{type:"input",label:"DB Connection",hint:"Database Connection string",value:""},table:{type:"input",label:"Table",hint:"Table name",value:""}};const e=["db","table"];for(let n of e)typeof this.data[n]>"u"&&(this.data[n]=this.settings[n].value);this.properties.outputs=[],this.drawSettings.iconCSSClass="svg-icon "+this.constructor.name,this._ready=!0}};xS(yp,"DBInsert");let wS=yp;var SS=Object.defineProperty,CS=d((t,e)=>SS(t,"name",{value:e,configurable:!0}),"i$q");const xp=class extends Be{static{d(this,"e")}async init(){this.settings={email:{type:"input",label:"Email",value:"",hint:"customer@email.com"}};const e=["email"];for(let n of e)typeof this.data[n]>"u"&&(this.data[n]=this.settings[n].value);this.properties.outputs=["Success","Error"],this.properties.inputs.length==0&&(this.properties.inputs=["Input"]),this.drawSettings.iconCSSClass="svg-icon "+this.constructor.name,this._ready=!0}};CS(xp,"EmailSender");let ES=xp;var AS=Object.defineProperty,_S=d((t,e)=>AS(t,"name",{value:e,configurable:!0}),"a$k");const wp=class extends Be{static{d(this,"d")}redraw(e=!0){this.drawSettings.addOutputButton=null,this.drawSettings.addOutputButtonLabel=" ",this.drawSettings.addInputButton="Input",this.drawSettings.addInputButtonLabel="Input",super.redraw(e);const n=this.domElement;return n.classList.add("Function"),n}};_S(wp,"FunctionComponent");let la=wp;var kS=Object.defineProperty,PS=d((t,e)=>kS(t,"name",{value:e,configurable:!0}),"n$d");const Sp=class extends la{static{d(this,"i")}async init(){this.settings={action:{type:"select",label:"Action",hint:"Action to perform",value:"Encode",options:["Encode","Decode"]},function:{type:"select",label:"Function",hint:"Function name",value:"BASE64",options:["BASE64","MD5","SHA1","SHA256","SHA512","HMACHex","HMACBase64","HMACBase64URL","HMACBase64URLNoPadding"]}};const e=["action","function"];for(let n of e)typeof this.data[n]>"u"&&(this.data[n]=this.settings[n].value);this.outputSettings={...this.outputSettings,description:{type:"string",default:"",editConfig:{type:"textarea"}}},this.properties.defaultOutputs=["Output"],this.properties.defaultInputs=["Input"],this.drawSettings.iconCSSClass="svg-icon "+this.constructor.name,this.drawSettings.color="#329bff",this.properties.title=`${this.data.function} ${this.data.action}`,this.drawSettings.displayName="F:Crypto"}async run(){this.domElement.style.width||(this.domElement.style.width="130px"),this.addEventListener("settingsSaved",async()=>{this.title=`${this.data.function} ${this.data.action}`,this.domElement.querySelector(".title .text").textContent=this.title})}};PS(Sp,"FCrypto");let DS=Sp;var IS=Object.defineProperty,LS=d((t,e)=>IS(t,"name",{value:e,configurable:!0}),"s$m");const TS=["hex","base64","base64url","latin1"],Cp=class extends la{static{d(this,"i")}async init(){this.settings={action:{type:"select",label:"Action",hint:"Action to perform",value:"Encode",options:["Encode","Decode"]},encoding:{type:"select",label:"encoding",value:"hex",options:TS}};const e=["action","encoding"];for(let n of e)typeof this.data[n]>"u"&&(this.data[n]=this.settings[n].value);this.outputSettings={...this.outputSettings,description:{type:"string",default:"",editConfig:{type:"textarea"}}},this.properties.defaultOutputs=["Output"],this.properties.defaultInputs=["Data"],this.drawSettings.iconCSSClass="svg-icon "+this.constructor.name,this.drawSettings.color="#329bff",this.properties.title=`${this.data.encoding} ${this.data.action}`,this.drawSettings.displayName="F:Encode/Decode"}async run(){this.domElement.style.width||(this.domElement.style.width="130px"),this.addEventListener("settingsSaved",async()=>{this.title=`${this.data.encoding} ${this.data.action}`,this.domElement.querySelector(".title .text").textContent=this.title})}};LS(Cp,"FEncDec");let MS=Cp;var OS=Object.defineProperty,jS=d((t,e)=>OS(t,"name",{value:e,configurable:!0}),"i$n");const NS=["md5","sha1","sha224","sha256","sha384","sha512","sha3-224","sha3-256","sha3-384","sha3-512","shake128","shake256","blake2b512","blake2s256"],FS=["hex","base64","base64url","latin1"],Ep=class extends la{static{d(this,"s")}async init(){this.settings={algorithm:{type:"select",label:"Hash Algorithm",value:"md5",options:NS},encoding:{type:"select",label:"Output encoding",value:"hex",options:FS}};const e=["algorithm","encoding"];for(let n of e)typeof this.data[n]>"u"&&(this.data[n]=this.settings[n].value);this.properties.defaultOutputs=["Hash"],this.properties.defaultInputs=["Data"],this.drawSettings.iconCSSClass="svg-icon "+this.constructor.name,this.drawSettings.color="#0083ff",this.properties.title=`${this.data.algorithm.toUpperCase()} :: ${this.data.encoding}`,this.drawSettings.displayName="F:Hash"}async run(){this.domElement.style.width||(this.domElement.style.width="130px"),this.addEventListener("settingsSaved",async()=>{this.title=`${this.data.algorithm.toUpperCase()} :: ${this.data.encoding}`,this.domElement.querySelector(".title .text").textContent=this.title})}};jS(Ep,"FHash");let $S=Ep;var RS=Object.defineProperty,qS=d((t,e)=>RS(t,"name",{value:e,configurable:!0}),"i$m");const Ap=class extends Be{static{d(this,"r")}async init(){const e=this.properties.sender?.getAttribute("smt-export-format")||"";this.settings={format:{type:"input",label:"Format",value:e,attributes:{readonly:"readonly"}}};const n=["format"];for(let s of n)typeof this.data[s]>"u"&&(this.data[s]=this.settings[s].value);this.properties.inputs.length==0&&(this.properties.inputs=["Source"]),this.properties.outputs=["Output"],this.drawSettings.iconCSSClass="svg-icon "+this.constructor.name,this.drawSettings.addInputButton=null,this.drawSettings.addOutputButton=null,this._ready=!0}redraw(e=!0){const n=super.redraw(e),s=this.properties.sender?.querySelector(".icon").className||"icon mif-file-empty",a=this.domElement.querySelector(".title-bar").querySelector(".icon");return a.className=s,n}};qS(Ap,"FileExport");let BS=Ap;var US=Object.defineProperty,zS=d((t,e)=>US(t,"name",{value:e,configurable:!0}),"e$8");const _p=class extends Be{static{d(this,"t")}async init(){this.settings={name:{type:"input",label:"File Name",validate:"maxlength=50 custom=isValidS3FileName",validateMessage:"Only alphanumeric characters, '-', '_' and '.' are allowed.",value:"",attributes:{"data-template-vars":"true"}},ttl:{type:"select",label:"TTL",help:"Time to live",options:[{value:"86400",text:"1 day"},{value:"259200",text:"3 days"},{value:"604800",text:"1 week"},{value:"1209600",text:"2 weeks"},{value:"2592000",text:"1 month"}]}},this.properties.defaultOutputs=["Url"],this.properties.defaultInputs=["Data"],this.drawSettings.displayName="File Store",this.drawSettings.iconCSSClass="svg-icon "+this.constructor.name,this.drawSettings.componentDescription="Store a file or data permanently",this.drawSettings.shortDescription="Store a file or data permanently",this.drawSettings.color="#65a698",this._ready=!0}};zS(_p,"FileStore");let HS=_p;var GS=Object.defineProperty,VS=d((t,e)=>GS(t,"name",{value:e,configurable:!0}),"i$k");const kp=class extends Be{static{d(this,"s")}async init(){this.settings={format:{type:"select",label:"Output Format",value:"full",options:[{text:"Full",value:"full"},{text:"Minimal",value:"minimal"},{text:"Array Of Results",value:"results-array"}]}};const e=["format"];for(let n of e)typeof this.data[n]>"u"&&(this.data[n]=this.settings[n].value);this.outputSettings={...this.outputSettings,description:{type:"string",default:"",editConfig:{type:"textarea"}}},this.properties.defaultInputs=["Input"],this.properties.defaultOutputs=["Loop","Result"],this.drawSettings.displayName="For Each",this.drawSettings.iconCSSClass="svg-icon "+this.constructor.name,this.drawSettings.componentDescription="Performs a for each loop on an array",this.drawSettings.shortDescription="Performs a for each loop on an array",this.drawSettings.color="#4f81d5",this.drawSettings.addInputButton=null,this.drawSettings.addOutputButton=null,this.drawSettings.addInputButtonLabel=" ",this.drawSettings.addOutputButtonLabel=" ",this.drawSettings.showSettings=!0,this._ready=!0}};VS(kp,"ForEach");let WS=kp;var KS=Object.defineProperty,YS=d((t,e)=>KS(t,"name",{value:e,configurable:!0}),"o$b");const Pp=class extends la{static{d(this,"d")}async init(){this.settings={signMethod:{type:"select",label:"Signature Method",value:"HMAC",options:["HMAC","RSA"]},dataTransform:{type:"select",label:"Data Transform",help:"If the provided data is not a string, it will be transformed using the selected method before signing",value:"Stringify",options:["Stringify","Querystring"]},key:{type:"textarea",label:"Key / Secret",attributes:{"data-template-vars":"true","data-vault":"APICall,ALL_NON_GLOBAL_KEYS"},hint:"This will be used if the input key is not supplied as input",value:""},keyMessage:{type:"div",class:"hidden",html:"<b>The Key will be read from input</b>"},hashType:{type:"select",label:"Hash Type",value:"md5",options:["md5","sha1","sha256","sha512"]},RSA_padding:{type:"select",class:"hidden",label:"RSA Options",value:"RSA_PKCS1_PADDING",options:["RSA_PKCS1_PADDING","RSA_PKCS1_PSS_PADDING","RSA_NO_PADDING"]},RSA_saltLength:{type:"number",class:"hidden",label:"RSA Salt Length",value:["RSA_PSS_SALTLEN_DIGEST","RSA_PSS_SALTLEN_MAX_SIGN"]},encoding:{type:"select",label:"Output encoding",value:"hex",options:["hex","base64","base64url","latin1","utf8"]}};const e=["signMethod","dataTransform","key","hashType","RSA_padding","RSA_saltLength","encoding"];for(let n of e)typeof this.data[n]>"u"&&(this.data[n]=this.settings[n].value);this.properties.defaultOutputs=["Signature"],this.properties.defaultInputs=["Data","Key"],this.drawSettings.iconCSSClass="svg-icon "+this.constructor.name,this.drawSettings.color="#0083ff",this.properties.title=`${this.data.signMethod.toUpperCase()}-${this.data.hashType.toUpperCase()} :: ${this.data.encoding}`,this.drawSettings.displayName="F:Sign"}async run(){this.domElement.style.width||(this.domElement.style.width="130px"),this.addEventListener("settingsSaved",async()=>{this.title=`${this.data.signMethod.toUpperCase()}-${this.data.hashType.toUpperCase()} :: ${this.data.encoding}`,this.domElement.querySelector(".title .text").textContent=this.title}),this.addEventListener("settingsOpened",async e=>{await je(100);const n=e.querySelector('.form-box[data-field-name="key"]'),s=e.querySelector('.form-box[data-field-name="keyMessage"]');this.workspace.jsPlumbInstance.getConnections({target:this.domElement.querySelector('.endpoint[smt-name="Key"]')}).length>0?(n.classList.add("hidden"),s.classList.remove("hidden")):(n.classList.remove("hidden"),s.classList.add("hidden"))}),this.addEventListener("connectionDetached",async(e,n,s)=>{if(e==="Key"){const a=this.getSettingsSidebar();if(!a)return;const i=a.querySelector('.form-box[data-field-name="key"]'),r=a.querySelector('.form-box[data-field-name="keyMessage"]');i.classList.remove("hidden"),r.classList.add("hidden")}}),this.addEventListener("connectionAttached",async(e,n,s)=>{if(e==="Key"){const a=this.getSettingsSidebar();if(!a)return;const i=a.querySelector('.form-box[data-field-name="key"]'),r=a.querySelector('.form-box[data-field-name="keyMessage"]');i.classList.add("hidden"),r.classList.remove("hidden")}})}};YS(Pp,"FSign");let XS=Pp;var JS=Object.defineProperty,ZS=d((t,e)=>JS(t,"name",{value:e,configurable:!0}),"s$j");const Dp=class extends la{static{d(this,"i")}async init(){this.settings={delay:{type:"range",label:"Delay",hint:"Delay in seconds",help:"Wait for the specified number of seconds before continuing.The provided input will be passed to the output without any changes.",min:1,max:3600,value:1,step:1,validate:"min=1 max=3600",validateMessage:"Allowed range 1 to 3600"}};const e=["delay"];for(let n of e)typeof this.data[n]>"u"&&(this.data[n]=this.settings[n].value);this.outputSettings={...this.outputSettings,description:{type:"string",default:"",editConfig:{type:"textarea"}}},this.properties.defaultOutputs=["Output"],this.properties.defaultInputs=["Input"],this.drawSettings.iconCSSClass="svg-icon "+this.constructor.name,this.drawSettings.color="#329bff",this.properties.title=`Sleep for ${this.data.delay}s`,this.drawSettings.displayName="F:Sleep"}async run(){this.domElement.style.width||(this.domElement.style.width="130px"),this.addEventListener("settingsSaved",async()=>{this.title=`Sleep for ${this.data.delay}s`,this.domElement.querySelector(".title .text").textContent=this.title})}};ZS(Dp,"FSleep");let QS=Dp;var eC=Object.defineProperty,tC=d((t,e)=>eC(t,"name",{value:e,configurable:!0}),"s$i");const Ip=class extends la{static{d(this,"i")}async init(){this.settings={};const e=[];for(let n of e)typeof this.data[n]>"u"&&(this.data[n]=this.settings[n].value);this.outputSettings={...this.outputSettings,description:{type:"string",default:"",editConfig:{type:"textarea"}}},this.properties.defaultOutputs=["Timestamp"],this.properties.defaultInputs=["Trigger"],this.drawSettings.showSettings=!1,this.drawSettings.iconCSSClass="svg-icon "+this.constructor.name,this.drawSettings.color="#329bff",this.properties.title="Timestamp",this.drawSettings.displayName="F:Timestamp"}async run(){this.domElement.style.width||(this.domElement.style.width="140px"),this.addEventListener("settingsSaved",async()=>{this.title="Timestamp",this.domElement.querySelector(".title .text").textContent=this.title})}};tC(Ip,"FTimestamp");let nC=Ip;var sC=["Africa/Abidjan","Africa/Accra","Africa/Addis_Ababa","Africa/Algiers","Africa/Asmara","Africa/Asmera","Africa/Bamako","Africa/Bangui","Africa/Banjul","Africa/Blantyre","Africa/Brazzaville","Africa/Bujumbura","Africa/Cairo","Africa/Casablanca","Africa/Ceuta","Africa/Conakry","Africa/Dakar","Africa/Dar_es_Salaam","Africa/Djibouti","Africa/Douala","Africa/El_Aaiun","Africa/Freetown","Africa/Gaborone","Africa/Harare","Africa/Johannesburg","Africa/Juba","Africa/Kampala","Africa/Khartoum","Africa/Kigali","Africa/Kinshasa","Africa/Lagos","Africa/Libreville","Africa/Lome","Africa/Luanda","Africa/Lubumbashi","Africa/Lusaka","Africa/Malabo","Africa/Maputo","Africa/Maseru","Africa/Mbabane","Africa/Mogadishu","Africa/Monrovia","Africa/Nairobi","Africa/Ndjamena","Africa/Niamey","Africa/Nouakchott","Africa/Ouagadougou","Africa/Porto-Novo","Africa/Sao_Tome","Africa/Timbuktu","Africa/Tripoli","Africa/Tunis","Africa/Windhoek","America/Adak","America/Anchorage","America/Anguilla","America/Antigua","America/Araguaina","America/Argentina/Buenos_Aires","America/Argentina/Catamarca","America/Argentina/ComodRivadavia","America/Argentina/Cordoba","America/Argentina/Jujuy","America/Argentina/La_Rioja","America/Argentina/Mendoza","America/Argentina/Rio_Gallegos","America/Argentina/Salta","America/Argentina/San_Juan","America/Argentina/San_Luis","America/Argentina/Tucuman","America/Argentina/Ushuaia","America/Aruba","America/Asuncion","America/Atikokan","America/Atka","America/Bahia","America/Bahia_Banderas","America/Barbados","America/Belem","America/Belize","America/Blanc-Sablon","America/Boa_Vista","America/Bogota","America/Boise","America/Buenos_Aires","America/Cambridge_Bay","America/Campo_Grande","America/Cancun","America/Caracas","America/Catamarca","America/Cayenne","America/Cayman","America/Chicago","America/Chihuahua","America/Coral_Harbour","America/Cordoba","America/Costa_Rica","America/Creston","America/Cuiaba","America/Curacao","America/Danmarkshavn","America/Dawson","America/Dawson_Creek","America/Denver","America/Detroit","America/Dominica","America/Edmonton","America/Eirunepe","America/El_Salvador","America/Ensenada","America/Fort_Wayne","America/Fortaleza","America/Glace_Bay","America/Godthab","America/Goose_Bay","America/Grand_Turk","America/Grenada","America/Guadeloupe","America/Guatemala","America/Guayaquil","America/Guyana","America/Halifax","America/Havana","America/Hermosillo","America/Indiana/Indianapolis","America/Indiana/Knox","America/Indiana/Marengo","America/Indiana/Petersburg","America/Indiana/Tell_City","America/Indiana/Valparaiso","America/Indiana/Vevay","America/Indiana/Vincennes","America/Indiana/Winamac","America/Indianapolis","America/Inuvik","America/Iqaluit","America/Jamaica","America/Jujuy","America/Juneau","America/Kentucky/Louisville","America/Kentucky/Monticello","America/Knox_IN","America/Kralendijk","America/La_Paz","America/Lima","America/Los_Angeles","America/Louisville","America/Lower_Princes","America/Maceio","America/Managua","America/Manaus","America/Marigot","America/Martinique","America/Matamoros","America/Mazatlan","America/Mendoza","America/Menominee","America/Merida","America/Metlakatla","America/Mexico_City","America/Miquelon","America/Moncton","America/Monterrey","America/Montevideo","America/Montreal","America/Montserrat","America/Nassau","America/New_York","America/Nipigon","America/Nome","America/Noronha","America/North_Dakota/Beulah","America/North_Dakota/Center","America/North_Dakota/New_Salem","America/Ojinaga","America/Panama","America/Pangnirtung","America/Paramaribo","America/Phoenix","America/Port_of_Spain","America/Port-au-Prince","America/Porto_Acre","America/Porto_Velho","America/Puerto_Rico","America/Rainy_River","America/Rankin_Inlet","America/Recife","America/Regina","America/Resolute","America/Rio_Branco","America/Rosario","America/Santa_Isabel","America/Santarem","America/Santiago","America/Santo_Domingo","America/Sao_Paulo","America/Scoresbysund","America/Shiprock","America/Sitka","America/St_Barthelemy","America/St_Johns","America/St_Kitts","America/St_Lucia","America/St_Thomas","America/St_Vincent","America/Swift_Current","America/Tegucigalpa","America/Thule","America/Thunder_Bay","America/Tijuana","America/Toronto","America/Tortola","America/Vancouver","America/Virgin","America/Whitehorse","America/Winnipeg","America/Yakutat","America/Yellowknife","Antarctica/Casey","Antarctica/Davis","Antarctica/DumontDUrville","Antarctica/Macquarie","Antarctica/Mawson","Antarctica/McMurdo","Antarctica/Palmer","Antarctica/Rothera","Antarctica/South_Pole","Antarctica/Syowa","Antarctica/Troll","Antarctica/Vostok","Arctic/Longyearbyen","Asia/Aden","Asia/Almaty","Asia/Amman","Asia/Anadyr","Asia/Aqtau","Asia/Aqtobe","Asia/Ashgabat","Asia/Ashkhabad","Asia/Baghdad","Asia/Bahrain","Asia/Baku","Asia/Bangkok","Asia/Beirut","Asia/Bishkek","Asia/Brunei","Asia/Calcutta","Asia/Choibalsan","Asia/Chongqing","Asia/Chungking","Asia/Colombo","Asia/Dacca","Asia/Damascus","Asia/Dhaka","Asia/Dili","Asia/Dubai","Asia/Dushanbe","Asia/Gaza","Asia/Harbin","Asia/Hebron","Asia/Ho_Chi_Minh","Asia/Hong_Kong","Asia/Hovd","Asia/Irkutsk","Asia/Istanbul","Asia/Jakarta","Asia/Jayapura","Asia/Jerusalem","Asia/Kabul","Asia/Kamchatka","Asia/Karachi","Asia/Kashgar","Asia/Kathmandu","Asia/Katmandu","Asia/Khandyga","Asia/Kolkata","Asia/Krasnoyarsk","Asia/Kuala_Lumpur","Asia/Kuching","Asia/Kuwait","Asia/Macao","Asia/Macau","Asia/Magadan","Asia/Makassar","Asia/Manila","Asia/Muscat","Asia/Nicosia","Asia/Novokuznetsk","Asia/Novosibirsk","Asia/Omsk","Asia/Oral","Asia/Phnom_Penh","Asia/Pontianak","Asia/Pyongyang","Asia/Qatar","Asia/Qyzylorda","Asia/Rangoon","Asia/Riyadh","Asia/Saigon","Asia/Sakhalin","Asia/Samarkand","Asia/Seoul","Asia/Shanghai","Asia/Singapore","Asia/Taipei","Asia/Tashkent","Asia/Tbilisi","Asia/Tehran","Asia/Tel_Aviv","Asia/Thimbu","Asia/Thimphu","Asia/Tokyo","Asia/Ujung_Pandang","Asia/Ulaanbaatar","Asia/Ulan_Bator","Asia/Urumqi","Asia/Ust-Nera","Asia/Vientiane","Asia/Vladivostok","Asia/Yakutsk","Asia/Yekaterinburg","Asia/Yerevan","Atlantic/Azores","Atlantic/Bermuda","Atlantic/Canary","Atlantic/Cape_Verde","Atlantic/Faeroe","Atlantic/Faroe","Atlantic/Jan_Mayen","Atlantic/Madeira","Atlantic/Reykjavik","Atlantic/South_Georgia","Atlantic/St_Helena","Atlantic/Stanley","Australia/ACT","Australia/Adelaide","Australia/Brisbane","Australia/Broken_Hill","Australia/Canberra","Australia/Currie","Australia/Darwin","Australia/Eucla","Australia/Hobart","Australia/LHI","Australia/Lindeman","Australia/Lord_Howe","Australia/Melbourne","Australia/North","Australia/NSW","Australia/Perth","Australia/Queensland","Australia/South","Australia/Sydney","Australia/Tasmania","Australia/Victoria","Australia/West","Australia/Yancowinna","Brazil/Acre","Brazil/DeNoronha","Brazil/East","Brazil/West","Canada/Atlantic","Canada/Central","Canada/Eastern","Canada/East-Saskatchewan","Canada/Mountain","Canada/Newfoundland","Canada/Pacific","Canada/Saskatchewan","Canada/Yukon","Chile/Continental","Chile/EasterIsland","Cuba","Egypt","Eire","Etc/GMT","Etc/GMT+0","Etc/UCT","Etc/Universal","Etc/UTC","Etc/Zulu","Europe/Amsterdam","Europe/Andorra","Europe/Athens","Europe/Belfast","Europe/Belgrade","Europe/Berlin","Europe/Bratislava","Europe/Brussels","Europe/Bucharest","Europe/Budapest","Europe/Busingen","Europe/Chisinau","Europe/Copenhagen","Europe/Dublin","Europe/Gibraltar","Europe/Guernsey","Europe/Helsinki","Europe/Isle_of_Man","Europe/Istanbul","Europe/Jersey","Europe/Kaliningrad","Europe/Kiev","Europe/Lisbon","Europe/Ljubljana","Europe/London","Europe/Luxembourg","Europe/Madrid","Europe/Malta","Europe/Mariehamn","Europe/Minsk","Europe/Monaco","Europe/Moscow","Europe/Nicosia","Europe/Oslo","Europe/Paris","Europe/Podgorica","Europe/Prague","Europe/Riga","Europe/Rome","Europe/Samara","Europe/San_Marino","Europe/Sarajevo","Europe/Simferopol","Europe/Skopje","Europe/Sofia","Europe/Stockholm","Europe/Tallinn","Europe/Tirane","Europe/Tiraspol","Europe/Uzhgorod","Europe/Vaduz","Europe/Vatican","Europe/Vienna","Europe/Vilnius","Europe/Volgograd","Europe/Warsaw","Europe/Zagreb","Europe/Zaporozhye","Europe/Zurich","GB","GB-Eire","GMT","GMT+0","GMT0","GMT-0","Greenwich","Hongkong","Iceland","Indian/Antananarivo","Indian/Chagos","Indian/Christmas","Indian/Cocos","Indian/Comoro","Indian/Kerguelen","Indian/Mahe","Indian/Maldives","Indian/Mauritius","Indian/Mayotte","Indian/Reunion","Iran","Israel","Jamaica","Japan","Kwajalein","Libya","Mexico/BajaNorte","Mexico/BajaSur","Mexico/General","Navajo","NZ","NZ-CHAT","Pacific/Apia","Pacific/Auckland","Pacific/Chatham","Pacific/Chuuk","Pacific/Easter","Pacific/Efate","Pacific/Enderbury","Pacific/Fakaofo","Pacific/Fiji","Pacific/Funafuti","Pacific/Galapagos","Pacific/Gambier","Pacific/Guadalcanal","Pacific/Guam","Pacific/Honolulu","Pacific/Johnston","Pacific/Kiritimati","Pacific/Kosrae","Pacific/Kwajalein","Pacific/Majuro","Pacific/Marquesas","Pacific/Midway","Pacific/Nauru","Pacific/Niue","Pacific/Norfolk","Pacific/Noumea","Pacific/Pago_Pago","Pacific/Palau","Pacific/Pitcairn","Pacific/Pohnpei","Pacific/Ponape","Pacific/Port_Moresby","Pacific/Rarotonga","Pacific/Saipan","Pacific/Samoa","Pacific/Tahiti","Pacific/Tarawa","Pacific/Tongatapu","Pacific/Truk","Pacific/Wake","Pacific/Wallis","Pacific/Yap","Poland","Portugal","PRC","ROC","ROK","Singapore","Turkey","UCT","Universal","US/Alaska","US/Aleutian","US/Arizona","US/Central","US/Eastern","US/East-Indiana","US/Hawaii","US/Indiana-Starke","US/Michigan","US/Mountain","US/Pacific","US/Samoa","UTC","W-SU","Zulu"],aC=[{text:"Afghanistan",value:"AF"},{text:"Albania",value:"AL"},{text:"Algeria",value:"DZ"},{text:"American Samoa",value:"AS"},{text:"Andorra",value:"AD"},{text:"Angola",value:"AO"},{text:"Anguilla",value:"AI"},{text:"Antarctica",value:"AQ"},{text:"Antigua and Barbuda",value:"AG"},{text:"Argentina",value:"AR"},{text:"Armenia",value:"AM"},{text:"Aruba",value:"AW"},{text:"Australia",value:"AU"},{text:"Austria",value:"AT"},{text:"Azerbaijan",value:"AZ"},{text:"Bahamas",value:"BS"},{text:"Bahrain",value:"BH"},{text:"Bangladesh",value:"BD"},{text:"Barbados",value:"BB"},{text:"Belarus",value:"BY"},{text:"Belgium",value:"BE"},{text:"Belize",value:"BZ"},{text:"Benin",value:"BJ"},{text:"Bermuda",value:"BM"},{text:"Bhutan",value:"BT"},{text:"Bolivia",value:"BO"},{text:"Bosnia and Herzegovina",value:"BA"},{text:"Botswana",value:"BW"},{text:"Bouvet Island",value:"BV"},{text:"Brazil",value:"BR"},{text:"British Indian Ocean Territory",value:"IO"},{text:"Brunei Darussalam",value:"BN"},{text:"Bulgaria",value:"BG"},{text:"Burkina Faso",value:"BF"},{text:"Burundi",value:"BI"},{text:"Cambodia",value:"KH"},{text:"Cameroon",value:"CM"},{text:"Canada",value:"CA"},{text:"Cape Verde",value:"CV"},{text:"Cayman Islands",value:"KY"},{text:"Central African Republic",value:"CF"},{text:"Chad",value:"TD"},{text:"Chile",value:"CL"},{text:"China",value:"CN"},{text:"Christmas Island",value:"CX"},{text:"Cocos (Keeling) Islands",value:"CC"},{text:"Colombia",value:"CO"},{text:"Comoros",value:"KM"},{text:"Congo",value:"CG"},{text:"Congo, the Democratic Republic of the",value:"CD"},{text:"Cook Islands",value:"CK"},{text:"Costa Rica",value:"CR"},{text:"C\xF4te d'Ivoire",value:"CI"},{text:"Croatia",value:"HR"},{text:"Cuba",value:"CU"},{text:"Cyprus",value:"CY"},{text:"Czech Republic",value:"CZ"},{text:"Denmark",value:"DK"},{text:"Djibouti",value:"DJ"},{text:"Dominica",value:"DM"},{text:"Dominican Republic",value:"DO"},{text:"Ecuador",value:"EC"},{text:"Egypt",value:"EG"},{text:"El Salvador",value:"SV"},{text:"Equatorial Guinea",value:"GQ"},{text:"Eritrea",value:"ER"},{text:"Estonia",value:"EE"},{text:"Ethiopia",value:"ET"},{text:"Falkland Islands (Malvinas)",value:"FK"},{text:"Faroe Islands",value:"FO"},{text:"Fiji",value:"FJ"},{text:"Finland",value:"FI"},{text:"France",value:"FR"},{text:"French Guiana",value:"GF"},{text:"French Polynesia",value:"PF"},{text:"French Southern Territories",value:"TF"},{text:"Gabon",value:"GA"},{text:"Gambia",value:"GM"},{text:"Georgia",value:"GE"},{text:"Germany",value:"DE"},{text:"Ghana",value:"GH"},{text:"Gibraltar",value:"GI"},{text:"Greece",value:"GR"},{text:"Greenland",value:"GL"},{text:"Grenada",value:"GD"},{text:"Guadeloupe",value:"GP"},{text:"Guam",value:"GU"},{text:"Guatemala",value:"GT"},{text:"Guernsey",value:"GG"},{text:"Guinea",value:"GN"},{text:"Guinea-Bissau",value:"GW"},{text:"Guyana",value:"GY"},{text:"Haiti",value:"HT"},{text:"Heard Island and McDonald Islands",value:"HM"},{text:"Holy See (Vatican City State)",value:"VA"},{text:"Honduras",value:"HN"},{text:"Hong Kong",value:"HK"},{text:"Hungary",value:"HU"},{text:"Iceland",value:"IS"},{text:"India",value:"IN"},{text:"Indonesia",value:"ID"},{text:"Iran, Islamic Republic of",value:"IR"},{text:"Iraq",value:"IQ"},{text:"Ireland",value:"IE"},{text:"Isle of Man",value:"IM"},{text:"Israel",value:"IL"},{text:"Italy",value:"IT"},{text:"Jamaica",value:"JM"},{text:"Japan",value:"JP"},{text:"Jersey",value:"JE"},{text:"Jordan",value:"JO"},{text:"Kazakhstan",value:"KZ"},{text:"Kenya",value:"KE"},{text:"Kiribati",value:"KI"},{text:"Korea, Democratic People's Republic of",value:"KP"},{text:"Korea, Republic of",value:"KR"},{text:"Kuwait",value:"KW"},{text:"Kyrgyzstan",value:"KG"},{text:"Lao People's Democratic Republic",value:"LA"},{text:"Latvia",value:"LV"},{text:"Lebanon",value:"LB"},{text:"Lesotho",value:"LS"},{text:"Liberia",value:"LR"},{text:"Libya",value:"LY"},{text:"Liechtenstein",value:"LI"},{text:"Lithuania",value:"LT"},{text:"Luxembourg",value:"LU"},{text:"Macao",value:"MO"},{text:"North Macedonia",value:"MK"},{text:"Madagascar",value:"MG"},{text:"Malawi",value:"MW"},{text:"Malaysia",value:"MY"},{text:"Maldives",value:"MV"},{text:"Mali",value:"ML"},{text:"Malta",value:"MT"},{text:"Marshall Islands",value:"MH"},{text:"Martinique",value:"MQ"},{text:"Mauritania",value:"MR"},{text:"Mauritius",value:"MU"},{text:"Mayotte",value:"YT"},{text:"Mexico",value:"MX"},{text:"Micronesia, Federated States of",value:"FM"},{text:"Moldova, Republic of",value:"MD"},{text:"Monaco",value:"MC"},{text:"Mongolia",value:"MN"},{text:"Montenegro",value:"ME"},{text:"Montserrat",value:"MS"},{text:"Morocco",value:"MA"},{text:"Mozambique",value:"MZ"},{text:"Myanmar",value:"MM"},{text:"Namibia",value:"NA"},{text:"Nauru",value:"NR"},{text:"Nepal",value:"NP"},{text:"Netherlands",value:"NL"},{text:"New Caledonia",value:"NC"},{text:"New Zealand",value:"NZ"},{text:"Nicaragua",value:"NI"},{text:"Niger",value:"NE"},{text:"Nigeria",value:"NG"},{text:"Niue",value:"NU"},{text:"Norfolk Island",value:"NF"},{text:"Northern Mariana Islands",value:"MP"},{text:"Norway",value:"NO"},{text:"Oman",value:"OM"},{text:"Pakistan",value:"PK"},{text:"Palau",value:"PW"},{text:"Palestine, State of",value:"PS"},{text:"Panama",value:"PA"},{text:"Papua New Guinea",value:"PG"},{text:"Paraguay",value:"PY"},{text:"Peru",value:"PE"},{text:"Philippines",value:"PH"},{text:"Pitcairn",value:"PN"},{text:"Poland",value:"PL"},{text:"Portugal",value:"PT"},{text:"Puerto Rico",value:"PR"},{text:"Qatar",value:"QA"},{text:"R\xE9union",value:"RE"},{text:"Romania",value:"RO"},{text:"Russian Federation",value:"RU"},{text:"Rwanda",value:"RW"},{text:"Saint Barth\xE9lemy",value:"BL"},{text:"Saint Helena, Ascension and Tristan da Cunha",value:"SH"},{text:"Saint Kitts and Nevis",value:"KN"},{text:"Saint Lucia",value:"LC"},{text:"Saint Martin (French part)",value:"MF"},{text:"Saint Pierre and Miquelon",value:"PM"},{text:"Saint Vincent and the Grenadines",value:"VC"},{text:"Samoa",value:"WS"},{text:"San Marino",value:"SM"},{text:"Sao Tome and Principe",value:"ST"},{text:"Saudi Arabia",value:"SA"},{text:"Senegal",value:"SN"},{text:"Serbia",value:"RS"},{text:"Seychelles",value:"SC"},{text:"Sierra Leone",value:"SL"},{text:"Singapore",value:"SG"},{text:"Sint Maarten (Dutch part)",value:"SX"},{text:"Slovakia",value:"SK"},{text:"Slovenia",value:"SI"},{text:"Solomon Islands",value:"SB"},{text:"Somalia",value:"SO"},{text:"South Africa",value:"ZA"},{text:"South Georgia and the South Sandwich Islands",value:"GS"},{text:"South Sudan",value:"SS"},{text:"Spain",value:"ES"},{text:"Sri Lanka",value:"LK"},{text:"Sudan",value:"SD"},{text:"Suriname",value:"SR"},{text:"Svalbard and Jan Mayen",value:"SJ"},{text:"Eswatini",value:"SZ"},{text:"Sweden",value:"SE"},{text:"Switzerland",value:"CH"},{text:"Syrian Arab Republic",value:"SY"},{text:"Taiwan, Province of China",value:"TW"},{text:"Tajikistan",value:"TJ"},{text:"Tanzania, United Republic of",value:"TZ"},{text:"Thailand",value:"TH"},{text:"Timor-Leste",value:"TL"},{text:"Togo",value:"TG"},{text:"Tokelau",value:"TK"},{text:"Tonga",value:"TO"},{text:"Trinidad and Tobago",value:"TT"},{text:"Tunisia",value:"TN"},{text:"Turkey",value:"TR"},{text:"Turkmenistan",value:"TM"},{text:"Turks and Caicos Islands",value:"TC"},{text:"Tuvalu",value:"TV"},{text:"Uganda",value:"UG"},{text:"Ukraine",value:"UA"},{text:"United Arab Emirates",value:"AE"},{text:"United Kingdom",value:"GB"},{text:"United States",value:"US"},{text:"United States Minor Outlying Islands",value:"UM"},{text:"Uruguay",value:"UY"},{text:"Uzbekistan",value:"UZ"},{text:"Vanuatu",value:"VU"},{text:"Venezuela",value:"VE"},{text:"Viet Nam",value:"VN"},{text:"Virgin Islands, British",value:"VG"},{text:"Virgin Islands, U.S.",value:"VI"},{text:"Wallis and Futuna",value:"WF"},{text:"Western Sahara",value:"EH"},{text:"Yemen",value:"YE"},{text:"Zambia",value:"ZM"},{text:"Zimbabwe",value:"ZW"}],iC=Object.defineProperty,Za=d((t,e)=>iC(t,"name",{value:e,configurable:!0}),"b$5");const Lp=class extends Be{static{d(this,"C")}async prepare(){const e=lt.prepareModelSelectOptionsByFeatures(["text","image","audio","video","document","tools","search","reasoning"]);this.defaultModel=lt.getDefaultModel(e),this.anthropicThinkingModels=kn.getSortedModelsByFeatures("reasoning","anthropic").map(s=>s.entryId),this.openaiReasoningModels=kn.getModelsByFeatures("reasoning","openai").map(s=>s.entryId),this.searchModels=kn.getModelsByFeatures("search").map(s=>s.entryId),e.unshift("Echo");const n=this.data.model||this.defaultModel;return n&&![...e.map(s=>s?.value||s)].includes(n)&&e.push({text:n+"&nbsp;&nbsp",value:n,badge:Nt("Removed","text-smyth-red-500 border-smyth-red-500")}),this.modelOptions=e.filter(s=>s),this.setModelParams(n),!0}async init(){this.settings=await this.generateSettings();const e=["model","prompt","temperature","maxTokens","stopSequences","topP","topK","frequencyPenalty","presencePenalty","passthrough","useSystemPrompt","useContextWindow","maxContextWindowLength","useWebSearch","webSearchContextSize","webSearchCity","webSearchCountry","webSearchRegion","webSearchTimezone","useSearch","searchMode","returnCitations","maxSearchResults","searchDataSources","searchCountry","excludedWebsites","allowedWebsites","includedXHandles","excludedXHandles","postFavoriteCount","postViewCount","rssLinks","safeSearch","fromDate","toDate","useReasoning","maxThinkingTokens"];for(let s of e){const a=typeof this.data[s]>"u",i=Array.isArray(this.settings[s].value)&&(!this.data[s]||Array.isArray(this.data[s])&&this.data[s].length===0);(a||i)&&(this.data[s]=this.settings[s].value)}this.outputSettings={...this.outputSettings,description:{type:"string",default:"",editConfig:{type:"textarea"}}},this.properties.defaultInputs=[],this.properties.inputs.length==0&&(this.properties.inputs=["Input","Attachment"]);const n=this.properties.inputProps?.find(s=>s.name==="Attachment");n?(n.optional=!0,n.type="Binary"):this.properties.inputProps.push({name:"Attachment",type:"Binary",optional:!0}),this.properties.defaultOutputs=["Reply"],this.drawSettings.displayName="GenAI LLM",this.drawSettings.iconCSSClass="svg-icon "+this.constructor.name,this.drawSettings.componentDescription="Make a GenAI request to an AI model. Works with many input file types.",this.drawSettings.shortDescription="Make a GenAI request to an AI model. Works with many input file types.",this.drawSettings.color="#65a698",this._ready=!0}async run(){this.addEventListener("settingsOpened",this.handleSettingsOpened.bind(this))}async handleSettingsOpened(e,n){if(n!==this)return;const s=e.querySelector("form"),a=s?.querySelector("#useContextWindow"),i=s?.querySelector('[data-field-name="maxContextWindowLength"]');a.checked?i.classList.remove("hidden"):i.classList.add("hidden"),await je(200),await Ds(e,this);const r=s?.querySelector("#useWebSearch");r&&this.toggleWebSearchNestedFields(r,s);const o=s?.querySelector("#useSearch");o&&this.toggleSearchNestedFields(o,s);const c=s?.querySelector("#useReasoning");c&&this.toggleReasoningNestedFields(c,s)}async saveApiKey(e,n,s){return await Is(e,n,s,this.workspace,this.refreshLLMModels.bind(this))}async refreshLLMModels(){await Ls(this.workspace,this.prepare.bind(this),this.init.bind(this),this.refreshSettingsSidebar.bind(this))}async modelChangeHandler(e){lt.updateFieldsInfo(e),lt.updateMaxTokens(e),lt.updateContextSize(e),lt.updateMaxThinkingTokens(e),this.setModelParams(e.value),this.settings=await this.generateSettings(),lt.toggleFields(e)}setModelParams(e){const n=window.__LLM_MODELS__?.[e]?.provider?.toLowerCase()||window.__LLM_MODELS__?.[e]?.llm?.toLowerCase(),s=cs[n]||cs.default;this.modelParams={allowedContextTokens:kn.getAllowedContextTokens(e),allowedCompletionTokens:kn.getAllowedCompletionTokens(e),allowedWebSearchContextTokens:kn.getWebSearchContextTokens(e),allowedReasoningTokens:kn.getMaxReasoningTokens(e),minMaxTokens:s?.minMaxTokens,maxTemperature:s?.maxTemperature,maxStopSequences:s?.maxStopSequences,maxTopP:s?.maxTopP,maxTopK:s?.maxTopK,defaultFrequencyPenalty:s?.defaultFrequencyPenalty,defaultPresencePenalty:s?.defaultPresencePenalty,maxFrequencyPenalty:s?.maxFrequencyPenalty,maxPresencePenalty:s?.maxPresencePenalty,minTopP:s?.minTopP,minTopK:s?.minTopK,defaultTemperature:s?.defaultTemperature,defaultMaxTokens:s?.defaultMaxTokens,defaultTopP:s?.defaultTopP,defaultTopK:s?.defaultTopK,hint:s.hint}}async generateSettings(){const{allowedContextTokens:e,allowedCompletionTokens:n,allowedWebSearchContextTokens:s,allowedReasoningTokens:a,maxTemperature:i,maxStopSequences:r,maxTopP:o,maxTopK:c,defaultFrequencyPenalty:l,defaultPresencePenalty:u,maxFrequencyPenalty:p,maxPresencePenalty:g,minTopP:y,minTopK:w,defaultTemperature:S,minMaxTokens:m,defaultMaxTokens:D,defaultThinkingTokens:A,defaultTopP:j,defaultTopK:L,hint:k}=this.modelParams,I="Summarize {{Input}} in one paragraph.";return{model:{type:"select",label:"Select a Model",help:"Choose an AI model to process the prompt.",hintPosition:"after_label",tooltipClasses:"w-56 ",arrowClasses:"-ml-11",value:this.defaultModel,options:this.modelOptions,class:"mt-1",dropdownHeight:350,attributes:{"data-supported-models":"all"},events:{change:async v=>{const T=v.target;await this.modelChangeHandler(T);const P=T.closest(".form-group")?.querySelector(".field-action-btn._model_pricing_link");T.value.startsWith("smythos/")?P?.classList?.remove("hidden"):P?.classList?.add("hidden");const F=T.closest("form"),U=F?.querySelector("#useWebSearch");U&&this.toggleWebSearchNestedFields(U,F);const M=F?.querySelector("#useSearch");M&&this.toggleSearchNestedFields(M,F);const V=kn.getModelProvider(T.value);V.toLowerCase()!=="xai"&&this.hideXAISpecificFields(F),V.toLowerCase()!=="openai"&&this.hideOpenAIWebSearchFields(F);const W=F?.querySelector("#useReasoning");W&&this.toggleReasoningNestedFields(W,F)}},actions:[{label:"Configure more models",icons:{left:{svg:ja,classes:"mr-2"},right:{svg:Na,classes:"absolute right-4"}},position:"after-dropdown",id:"configureMoreModelsBtn",classes:"custom_model_add_btn",events:{click:()=>{window.open("/vault","_blank")}}},{label:"$ View Pricing",icon:"dollar-sign",classes:"text-gray-600 top-[-8px] right-2 hover:underline _model_pricing_link hidden",tooltip:"SmythOS charges based on input and output tokens",events:{click:()=>{window.open(`${this.workspace.serverData.docUrl}/account-management/model-rates/#model-pricing`,"_blank")}}}]},prompt:{type:"textarea",label:"Prompt",validate:"required",validateMessage:"Please provide a prompt. It's required!",value:I,hint:`Your prompt is aware of any files you add to the Attachment or Binary type input.
See <a href="${Ut}/agent-studio/components/base/gen-ai-llm" class="underline" target="_blank">documentation</a>.`,hintPosition:"after_label",attributes:{"data-template-vars":"true","data-template-excluded-vars":"Attachment","data-template-excluded-var-types":"Binary","data-supported-models":"all",placeholder:`Write your AI prompt using the custom {{Input}} tags to dynamically reference the provided input and generate an LLM response. 
Ex: Please convert...`},events:{focus:v=>{const T=v.target;T.value===I&&T.select()}}},maxContextTokens:{type:"div",html:`<strong class="px-2">Context window size: <span class="tokens_num">${e?e.toLocaleString():"Unknown"}</span> tokens</strong>`,cls:"mb-0",attributes:{"data-supported-models":"OpenAI,Anthropic,GoogleAI,Groq,xAI,TogetherAI,VertexAI,Bedrock,Perplexity,cohere"},section:"Advanced",help:"The total context window size includes both the request prompt length and output completion length.",class:"px-4 mb-0 bg-gray-50",tooltipIconClasses:"-ml-1 -mt-1 float-none",tooltipClasses:"w-56 ",arrowClasses:"-ml-11"},webSearchContextSizeInfo:{type:"div",html:`<strong class="px-2">Search Context Size: <span class="tokens_num">${s?s.toLocaleString():"Unknown"}</span> tokens</strong>`,attributes:{"data-supported-models":[...this.searchModels].join(",")},section:"Advanced",help:"Web search is limited to a context window size of 128000",class:"px-4 bg-gray-50",tooltipIconClasses:"-ml-1 -mt-1 float-none",tooltipClasses:"w-56 ",arrowClasses:"-ml-11"},temperature:{type:"range",label:"Temperature",min:0,max:i,value:S,step:.01,validate:`min=0 max=${i}`,validateMessage:`Allowed range 0 to ${i}`,attributes:{"data-supported-models":"OpenAI,Anthropic,GoogleAI,Groq,xAI,TogetherAI,VertexAI,Bedrock,Perplexity,cohere","data-excluded-models":this.anthropicThinkingModels.join(",")},section:"Advanced",help:k.temperature,tooltipClasses:"w-56 ",arrowClasses:"-ml-11"},maxTokens:{type:"range",label:"Maximum Output Tokens",min:m,max:n,value:D,step:4,validate:`min=${m} max=${n}`,validateMessage:`Allowed range ${m} to ${n}`,attributes:{"data-supported-models":"OpenAI,Anthropic,GoogleAI,Groq,xAI,TogetherAI,VertexAI,Bedrock,Perplexity,cohere"},section:"Advanced",help:k.maxTokens,tooltipClasses:"w-56 ",arrowClasses:"-ml-11"},stopSequences:{type:"tag",label:"Stop Sequence",maxTags:r,value:"",attributes:{"data-supported-models":"OpenAI,Anthropic,GoogleAI,Groq,TogetherAI,VertexAI,Bedrock,cohere"},section:"Advanced",help:k.stopSequences,tooltipClasses:"w-56 ",arrowClasses:"-ml-11",hint:"Input a sequence and press Enter, Space, or Comma to add it to the list.",hintPosition:"after_label"},topP:{type:"range",label:"Top P",min:y,max:o,value:j,step:.01,validate:`min=${y} max=${o}`,validateMessage:`Allowed range ${y} to ${o}`,attributes:{"data-supported-models":"OpenAI,Anthropic,GoogleAI,Groq,xAI,TogetherAI,VertexAI,Bedrock,Perplexity,cohere","data-excluded-models":[...this.anthropicThinkingModels,...this.openaiReasoningModels].join(",")},section:"Advanced",help:k.topP,tooltipClasses:"w-56 ",arrowClasses:"-ml-11"},topK:{type:"range",label:"Top K",min:w,max:c,value:L,step:1,validate:`min=${w} max=${c}`,validateMessage:`Allowed range ${w} to ${c}`,attributes:{"data-supported-models":"GoogleAI,VertexAI,Anthropic,TogetherAI,Perplexity,cohere","data-excluded-models":this.anthropicThinkingModels.join(",")},section:"Advanced",help:k.topK,tooltipClasses:"w-56 ",arrowClasses:"-ml-11"},frequencyPenalty:{type:"range",label:"Frequency Penalty",min:0,max:p,value:l,step:.01,validate:`min=0 max=${p}`,validateMessage:`Allowed range 0 to ${p}`,attributes:{"data-supported-models":"OpenAI,TogetherAI,Perplexity,cohere"},section:"Advanced",help:k.frequencyPenalty,tooltipClasses:"w-56 ",arrowClasses:"-ml-11"},presencePenalty:{type:"range",label:"Presence Penalty",min:0,max:g,value:u,step:.01,validate:`min=0 max=${g}`,validateMessage:`Allowed range 0 to ${g}`,attributes:{"data-supported-models":"OpenAI,Perplexity,cohere"},section:"Advanced",help:k.presencePenalty,tooltipClasses:"w-56 ",arrowClasses:"-ml-11"},passthrough:{type:"checkbox",label:"Passthrough",value:!1,attributes:{"data-supported-models":"OpenAI,Anthropic,GoogleAI,Groq,xAI,TogetherAI,VertexAI,Bedrock,cohere,Echo"},help:"If the component is running under a chatbot or agentLLM, The generated output will be directly streamed to the chat output",section:"Advanced",tooltipClasses:"w-56 ",arrowClasses:"-ml-11"},useSystemPrompt:{type:"checkbox",label:"Use Agent System Prompt",value:!1,attributes:{"data-supported-models":"OpenAI,Anthropic,GoogleAI,Groq,xAI,TogetherAI,VertexAI,Bedrock,cohere"},help:"The running Agent system prompt will be passed as a system prompt to this component",section:"Advanced",tooltipClasses:"w-56 ",arrowClasses:"-ml-11"},useContextWindow:{type:"checkbox",label:"Use Context Window",value:!1,attributes:{"data-supported-models":"OpenAI,Anthropic,GoogleAI,Groq,xAI,TogetherAI,VertexAI,Bedrock,cohere"},help:"The running Agent context window will be passed as a context window to this component",section:"Advanced",tooltipClasses:"w-56 ",arrowClasses:"-ml-11",events:{change:v=>{const T=v.target,P=T.closest("form")?.querySelector('[data-field-name="maxContextWindowLength"]');T.checked?P.classList.remove("hidden"):P.classList.add("hidden")}}},maxContextWindowLength:{type:"range",label:"Max Context Window Length",min:0,max:e,step:1,value:4096,attributes:{},help:"The maximum length of the agent context window to share with the component",tooltipClasses:"w-56 ",arrowClasses:"-ml-11",section:"Advanced",class:"hidden"},useReasoning:{type:"checkbox",label:"Use Reasoning",value:!1,attributes:{"data-supported-models":this.anthropicThinkingModels.join(",")},help:"Enable thinking capabilities to allow the model to break down complex problems into steps and think through solutions methodically",tooltipClasses:"w-56 ",arrowClasses:"-ml-11",section:"Advanced",events:{change:v=>{const T=v.target,P=T.closest("form");this.toggleReasoningNestedFields(T,P)}}},maxThinkingTokens:{type:"range",label:"Max Thinking Tokens",min:m,max:a,value:A,step:4,help:k.maxThinkingTokens,tooltipClasses:"w-56 ",arrowClasses:"-ml-11",section:"Advanced",fieldsGroup:"Max Thinking Tokens"},...await this.getWebSearchFields()}}async getWebSearchFields(){const e=[{text:"Select a Country",value:""},...aC],n=[{text:"Select a Timezone",value:""},...sC];[...this.searchModels].join(",");const s=this.searchModels.filter(o=>kn.getModelProvider(o).toLowerCase()!=="xai").join(","),a=this.searchModels.filter(o=>kn.getModelProvider(o).toLowerCase()==="xai").join(","),i={"data-supported-models":s},r={"data-supported-models":a};return{useWebSearch:{type:"checkbox",label:"Use Web Search",value:!1,attributes:i,help:"Allow models to search the web for the latest information before generating a response.",section:"Advanced",events:{change:o=>{const c=o.target,l=c.closest("form");this.toggleWebSearchNestedFields(c,l)}}},webSearchContextSize:{type:"select",label:"Web Search Context Size",value:"medium",attributes:i,class:"hidden",options:[{text:"High",value:"high"},{text:"Medium",value:"medium"},{text:"Low",value:"low"}],help:"Controls how much context is retrieved from the web to help the tool formulate a response.",section:"Advanced",fieldsGroup:"Search Context Size"},locationTitle:{type:"div",html:'<h3 class="font-bold text-md __fields_group_title">User Location</h3>',value:"",attributes:i,class:"mb-0 hidden",help:"To refine search results based on geography, you can specify an approximate user location using country, city, region, and/or timezone.",section:"Advanced",fieldsGroup:"Location"},webSearchCity:{type:"text",label:"City",value:"",attributes:i,class:"hidden",help:"The city: free text strings, like 'Minneapolis'.",validate:"maxlength=100",validateMessage:"City name cannot exceed 100 characters",section:"Advanced",fieldsGroup:"Location"},webSearchCountry:{type:"select",label:"Country",value:"",attributes:i,class:"hidden",options:e,help:"Country: a two-letter ISO country code, like 'US'.",section:"Advanced",fieldsGroup:"Location"},webSearchRegion:{type:"text",label:"Region",value:"",attributes:i,class:"hidden",help:"Region: free text strings, like 'Minnesota'.",validate:"maxlength=100",validateMessage:"Region name cannot exceed 100 characters",section:"Advanced",fieldsGroup:"Location"},webSearchTimezone:{type:"select",label:"Timezone",value:"",attributes:i,class:"hidden",options:n,help:"Timezone: an IANA timezone like America/Chicago.",section:"Advanced",fieldsGroup:"Location"},useSearch:{type:"checkbox",label:"Use Search",value:!1,attributes:r,help:"Enable live search capabilities that allow the model to access real-time information from multiple data sources, including Web, X, News, and RSS feeds.",section:"Advanced",events:{change:o=>{const c=o.target,l=c.closest("form");this.toggleSearchNestedFields(c,l)}}},returnCitations:{type:"checkbox",label:"Return Citations",value:!1,attributes:r,class:"hidden",help:"Include citations and sources in the response for transparency and verification.",section:"Advanced",fieldsGroup:"Search Control"},searchMode:{type:"select",label:"Search Mode",value:"auto",attributes:r,class:"hidden",options:[{text:"Auto",value:"auto"},{text:"On",value:"on"},{text:"Off",value:"off"}],help:"Controls when the model should perform web search. &quot;Auto&quot; lets the model decide, &quot;On&quot; forces search, &quot;Off&quot; disables search.",section:"Advanced",fieldsGroup:"Search Control"},fromDate:{type:"date",label:"From Date",value:"",attributes:r,class:"hidden",help:"Filter search results starting from this date. When only &quot;From Date&quot; is specified, data will be searched from the &quot;From Date&quot; to today.",section:"Advanced",fieldsGroup:"Date Filtering"},toDate:{type:"date",label:"To Date",value:"",attributes:r,class:"hidden",help:"Filter search results ending at this date. When only &quot;To Date&quot; is specified, all data up to the &quot;To Date&quot; will be searched.",section:"Advanced",fieldsGroup:"Date Filtering"},maxSearchResults:{type:"range",label:"Max Search Results",min:1,max:100,value:10,step:1,validate:"min=1 max=50",validateMessage:"Allowed range 1 to 50",attributes:r,class:"hidden",help:"Maximum number of search results to retrieve from the web.",section:"Advanced",fieldsGroup:"Search Results"},searchDataSources:{type:"checkbox-group",label:"Data Sources",value:["web","x"],attributes:r,class:"hidden",options:[{text:"Web",value:"web"},{text:"X Platform",value:"x"},{text:"News",value:"news"},{text:"RSS Feeds",value:"rss"}],help:"Select which data sources to search. Leave empty to search all available sources.",section:"Advanced",fieldsGroup:"Data Sources",events:{change:o=>{const c=o.target.closest("form");this.toggleCountryFieldBasedOnDataSources(c),this.toggleWebsiteFieldsBasedOnDataSources(c),this.toggleXHandlesFieldBasedOnDataSources(c),this.toggleEngagementFieldsBasedOnDataSources(c),this.toggleRSSFieldsBasedOnDataSources(c),this.toggleSafeSearchFieldBasedOnDataSources(c)}}},safeSearch:{type:"checkbox",label:"Safe Search",value:!1,attributes:r,class:"hidden",help:"Enable safe search filtering to exclude explicit and potentially inappropriate content from web and news results.",section:"Advanced",fieldsGroup:"Data Sources"},searchCountry:{type:"select",label:"Country",value:"",attributes:r,class:"hidden",options:e,help:"Select a country to limit search results to.",section:"Advanced",fieldsGroup:"Data Sources"},excludedWebsites:{type:"tag",label:"Excluded Websites",maxTags:5,value:"",attributes:r,class:"hidden",help:"Specify up to 5 websites to exclude from search results (e.g., example.com, badsite.org). This cannot be used with &quot;Allowed Websites&quot;.",section:"Advanced",fieldsGroup:"Data Sources",hint:"Enter a website domain and press Enter, Space, or Comma to add it to the list.",hintPosition:"after_label",events:{change:o=>{const c=o.target.closest("form");this.toggleWebsiteFieldsMutualExclusivity(c,"excludedWebsites")}}},allowedWebsites:{type:"tag",label:"Allowed Websites",maxTags:5,value:"",attributes:r,class:"hidden",help:"Specify up to 5 websites to limit search results to (e.g., wikipedia.org, github.com). This cannot be used with &quot;Excluded Websites&quot;.",section:"Advanced",fieldsGroup:"Data Sources",hint:"Enter a website domain and press Enter, Space, or Comma to add it to the list.",hintPosition:"after_label",events:{change:o=>{const c=o.target.closest("form");this.toggleWebsiteFieldsMutualExclusivity(c,"allowedWebsites")}}},includedXHandles:{type:"tag",label:"Included X Handles",maxTags:10,value:"",attributes:r,class:"hidden",help:"Specify up to 10 X handles to include in search results (e.g., elonmusk, xai). This parameter cannot be set together with &quot;Excluded X Handles&quot; parameter.",section:"Advanced",fieldsGroup:"Data Sources",hint:"Enter X handle without @ symbol and press Enter, Space, or Comma to add it to the list. ",hintPosition:"after_label",events:{change:o=>{const c=o.target.closest("form");this.toggleXHandlesMutualExclusivity(c,"includedXHandles")}}},excludedXHandles:{type:"tag",label:"Excluded X Handles",maxTags:10,value:"",attributes:r,class:"hidden",help:"Specify up to 10 X handles to exclude from search results (e.g., spamaccount, botuser). This parameter cannot be set together with &quot;Included X Handles&quot; parameter.",section:"Advanced",fieldsGroup:"Data Sources",hint:"Enter X handle without @ symbol and press Enter, Space, or Comma to add it to the list.",hintPosition:"after_label",events:{change:o=>{const c=o.target.closest("form");this.toggleXHandlesMutualExclusivity(c,"excludedXHandles")}}},postFavoriteCount:{type:"number",label:"Min Post Favorites",min:0,max:1e9,value:0,step:1,validate:"min=0 max=1000000000",validateMessage:"Must be between 0 and 1,000,000,000",attributes:r,class:"hidden",help:"Minimum number of favorites/likes a post must have to be included in search results.",section:"Advanced",fieldsGroup:"Engagement Filtering"},postViewCount:{type:"number",label:"Min Post Views",min:0,max:1e9,value:0,step:1,validate:"min=0 max=1000000000",validateMessage:"Must be between 0 and 1,000,000,000",attributes:r,class:"hidden",help:"Minimum number of views a post must have to be included in search results.",section:"Advanced",fieldsGroup:"Engagement Filtering"},rssLinks:{type:"tag",label:"RSS Links",maxTags:10,value:"",attributes:r,class:"hidden",help:"Specify a specific RSS feed URL to search within. Leave empty to search all available RSS feeds.",section:"Advanced",fieldsGroup:"RSS Filtering",placeholder:"https://example.com/rss.xml",hint:"Enter a RSS feed URL and press Enter, Space, or Comma to add it to the list.",hintPosition:"after_label"}}}toggleNestedFields(e,n,s){s.forEach(a=>{const i=n?.querySelector(`[data-field-name="${a}"]`),r=e.closest(".form-group");!i||!r||(r.classList.contains("hidden")?i.classList.add("hidden"):i.classList.toggle("hidden",!e.checked))})}getProviderWebSearchFields(e){return{openai:["webSearchContextSize","locationTitle","webSearchCity","webSearchCountry","webSearchRegion","webSearchTimezone"],xai:["searchMode","returnCitations","maxSearchResults","searchDataSources","searchCountry","excludedWebsites","allowedWebsites","includedXHandles","excludedXHandles","postFavoriteCount","postViewCount","rssLinks","safeSearch","fromDate","toDate"]}[e.toLowerCase()]||[]}toggleWebSearchNestedFields(e,n){const s=n?.querySelector("#model")?.value,a=kn.getModelProvider(s),i=this.getProviderWebSearchFields(a.toLowerCase());this.toggleNestedFields(e,n,i)}toggleSearchNestedFields(e,n){const s=["searchMode","returnCitations","maxSearchResults","searchDataSources","searchCountry","excludedWebsites","allowedWebsites","includedXHandles","excludedXHandles","postFavoriteCount","postViewCount","rssLinks","safeSearch","fromDate","toDate"];this.toggleNestedFields(e,n,s),e.checked&&(this.toggleCountryFieldBasedOnDataSources(n),this.toggleWebsiteFieldsBasedOnDataSources(n),this.toggleXHandlesFieldBasedOnDataSources(n),this.toggleEngagementFieldsBasedOnDataSources(n),this.toggleRSSFieldsBasedOnDataSources(n),this.toggleSafeSearchFieldBasedOnDataSources(n))}toggleReasoningNestedFields(e,n){const s=["maxThinkingTokens"];this.toggleNestedFields(e,n,s)}toggleCountryFieldBasedOnDataSources(e){const n=e?.querySelectorAll('[data-field-name="searchDataSources"] input[type="checkbox"]'),s=e?.querySelector('[data-field-name="searchCountry"]');if(!n||!s)return;let a=!1;n.forEach(i=>{i.checked&&(i.value==="web"||i.value==="news")&&(a=!0)}),s.classList.toggle("hidden",!a)}toggleWebsiteFieldsBasedOnDataSources(e){const n=e?.querySelectorAll('[data-field-name="searchDataSources"] input[type="checkbox"]'),s=e?.querySelector('[data-field-name="excludedWebsites"]'),a=e?.querySelector('[data-field-name="allowedWebsites"]');if(!n||!s||!a)return;let i=!1;if(n.forEach(r=>{r.checked&&(r.value==="web"||r.value==="news")&&(i=!0)}),s.classList.toggle("hidden",!i),a.classList.toggle("hidden",!i),!i){const r=s.querySelector("input"),o=a.querySelector("input");r&&(r.value=""),o&&(o.value="")}}toggleWebsiteFieldsMutualExclusivity(e,n){const s=e?.querySelector('[data-field-name="excludedWebsites"]'),a=e?.querySelector('[data-field-name="allowedWebsites"]');if(!s||!a)return;const i=s.querySelector("input"),r=a.querySelector("input");if(!i||!r)return;const o=Za(l=>{try{const u=Metro.getPlugin(l,"taginput");if(u&&u.val){const p=u.val();return Array.isArray(p)?p:p?[p]:[]}return l.value?l.value.split(",").map(p=>p.trim()).filter(p=>p):[]}catch(u){return console.warn("Error getting tag input value:",u),l.value?l.value.split(",").map(p=>p.trim()).filter(p=>p):[]}},"getTagInputValue"),c=Za(l=>{try{const u=Metro.getPlugin(l,"taginput");u&&u.clear?u.clear():l.value=""}catch(u){console.warn("Error clearing tag input:",u),l.value=""}},"clearTagInput");if(n==="excludedWebsites")if(o(i).length>0){r.setAttribute("disabled","disabled"),c(r);let l=a.querySelector(".mutual-exclusion-hint");l||(l=document.createElement("div"),l.className="mutual-exclusion-hint field-hint text-orange-600 text-sm mt-1",l.innerHTML='\u26A0\uFE0F Disabled because "Excluded Websites" is in use. Clear excluded websites to enable this field.',a.appendChild(l))}else{r.removeAttribute("disabled");const l=a.querySelector(".mutual-exclusion-hint");l&&l.remove()}else if(n==="allowedWebsites")if(o(r).length>0){i.setAttribute("disabled","disabled"),c(i);let l=s.querySelector(".mutual-exclusion-hint");l||(l=document.createElement("div"),l.className="mutual-exclusion-hint field-hint text-orange-600 text-sm mt-1",l.innerHTML='\u26A0\uFE0F Disabled because "Allowed Websites" is in use. Clear allowed websites to enable this field.',s.appendChild(l))}else{i.removeAttribute("disabled");const l=s.querySelector(".mutual-exclusion-hint");l&&l.remove()}}toggleXHandlesFieldBasedOnDataSources(e){const n=e?.querySelectorAll('[data-field-name="searchDataSources"] input[type="checkbox"]'),s=e?.querySelector('[data-field-name="includedXHandles"]'),a=e?.querySelector('[data-field-name="excludedXHandles"]');if(!n||!s||!a)return;let i=!1;if(n.forEach(r=>{r.checked&&r.value==="x"&&(i=!0)}),s.classList.toggle("hidden",!i),a.classList.toggle("hidden",!i),!i){const r=s.querySelector("input"),o=a.querySelector("input");r&&(r.value=""),o&&(o.value="")}}toggleEngagementFieldsBasedOnDataSources(e){const n=e?.querySelectorAll('[data-field-name="searchDataSources"] input[type="checkbox"]'),s=e?.querySelector('[data-field-name="postFavoriteCount"]'),a=e?.querySelector('[data-field-name="postViewCount"]');if(!n||!s||!a)return;let i=!1;if(n.forEach(r=>{r.checked&&r.value==="x"&&(i=!0)}),s.classList.toggle("hidden",!i),a.classList.toggle("hidden",!i),!i){const r=s.querySelector("input"),o=a.querySelector("input");r&&(r.value="0"),o&&(o.value="0")}}toggleRSSFieldsBasedOnDataSources(e){const n=e?.querySelectorAll('[data-field-name="searchDataSources"] input[type="checkbox"]'),s=e?.querySelector('[data-field-name="rssLinks"]');if(!n||!s)return;let a=!1;if(n.forEach(i=>{i.checked&&i.value==="rss"&&(a=!0)}),s.classList.toggle("hidden",!a),!a){const i=s.querySelector("textarea");i&&(i.value="")}}toggleSafeSearchFieldBasedOnDataSources(e){const n=e?.querySelectorAll('[data-field-name="searchDataSources"] input[type="checkbox"]'),s=e?.querySelector('[data-field-name="safeSearch"]');if(!n||!s)return;let a=!1;if(n.forEach(i=>{i.checked&&(i.value==="web"||i.value==="news")&&(a=!0)}),s.classList.toggle("hidden",!a),!a){const i=s.querySelector('input[type="checkbox"]');i&&(i.checked=!1)}}toggleXHandlesMutualExclusivity(e,n){const s=e?.querySelector('[data-field-name="includedXHandles"]'),a=e?.querySelector('[data-field-name="excludedXHandles"]');if(!s||!a)return;const i=s.querySelector("input"),r=a.querySelector("input");if(!i||!r)return;const o=Za(l=>{try{const u=Metro.getPlugin(l,"taginput");if(u&&u.val){const p=u.val();return Array.isArray(p)?p:p?[p]:[]}return l.value?l.value.split(",").map(p=>p.trim()).filter(p=>p):[]}catch(u){return console.warn("Error getting tag input value:",u),l.value?l.value.split(",").map(p=>p.trim()).filter(p=>p):[]}},"getTagInputValue"),c=Za(l=>{try{const u=Metro.getPlugin(l,"taginput");u&&u.clear?u.clear():l.value=""}catch(u){console.warn("Error clearing tag input:",u),l.value=""}},"clearTagInput");if(n==="includedXHandles")if(o(i).length>0){r.setAttribute("disabled","disabled"),c(r);let l=a.querySelector(".mutual-exclusion-hint");l||(l=document.createElement("div"),l.className="mutual-exclusion-hint field-hint text-orange-600 text-sm mt-1",l.innerHTML='\u26A0\uFE0F Disabled because "Included X Handles" is in use. Clear included handles to enable this field.',a.appendChild(l))}else{r.removeAttribute("disabled");const l=a.querySelector(".mutual-exclusion-hint");l&&l.remove()}else if(n==="excludedXHandles")if(o(r).length>0){i.setAttribute("disabled","disabled"),c(i);let l=s.querySelector(".mutual-exclusion-hint");l||(l=document.createElement("div"),l.className="mutual-exclusion-hint field-hint text-orange-600 text-sm mt-1",l.innerHTML='\u26A0\uFE0F Disabled because "Excluded X Handles" is in use. Clear excluded handles to enable this field.',s.appendChild(l))}else{i.removeAttribute("disabled");const l=s.querySelector(".mutual-exclusion-hint");l&&l.remove()}}hideXAISpecificFields(e){["searchMode","returnCitations","maxSearchResults","searchDataSources","searchCountry","excludedWebsites","allowedWebsites","includedXHandles","excludedXHandles","postFavoriteCount","postViewCount","rssLinks","safeSearch","fromDate","toDate"].forEach(n=>{const s=e?.querySelector(`[data-field-name="${n}"]`);s&&s.classList.add("hidden")})}hideOpenAIWebSearchFields(e){["webSearchContextSize","locationTitle","webSearchCity","webSearchCountry","webSearchRegion","webSearchTimezone"].forEach(n=>{const s=e?.querySelector(`[data-field-name="${n}"]`);s&&s.classList.add("hidden")})}};Za(Lp,"GenAILLM");let oC=Lp;var rC=Object.defineProperty,lC=d((t,e)=>rC(t,"name",{value:e,configurable:!0}),"i$h");const Tp=class extends Be{static{d(this,"r")}async prepare(){this.name=this.data?.name||this.properties.sender?.querySelector(".name")?.textContent||"",this.desc=this.data?.desc||this.properties.sender?.getAttribute("smt-desc")||"",this.descForModel=this.data?.descForModel||this.properties.sender?.getAttribute("smt-desc-for-model")||"",this.specUrl=this.data?.specUrl||this.properties.sender?.getAttribute("smt-spec-url")||"",this.logoUrl=this.data?.logoUrl||this.properties.sender?.querySelector("img")?.src||"";const e=lt.prepareModelSelectOptionsByFeatures(["tools"]);this.defaultModel=lt.getDefaultModel(e);const n=this.data?.model||this.data?.openAiModel||this.defaultModel;if(n&&![...e.map(s=>s?.value||s)].includes(n)){let s=Nt("Removed","text-smyth-red-500 border-smyth-red-500");n==="gpt-4-0613"&&(s+=Nt("alias of gpt-4","text-gray-500 border-gray-500")),e.push({text:n+"&nbsp;&nbsp",value:n,badge:s})}return this.modelOptions=e.filter(s=>s),!0}async init(){this.settings={model:{type:"select",label:"Model",value:this.defaultModel,options:this.modelOptions},specUrl:{type:"hidden",value:this.specUrl},descForModel:{type:"textarea",label:"Description for Model",value:this.descForModel,validate:"maxlength=5000",validateMessage:"Your text exceeds the 5,000 character limit."}};const e=["model","specUrl","descForModel"];for(let n of e)typeof this.data[n]>"u"&&(this.data[n]=this.settings[n].value);this.properties.defaultInputs=["Query"],this.properties.defaultOutputs=["Output"],this.drawSettings.iconCSSClass="svg-icon "+this.constructor.name,this.drawSettings.addOutputButton="+ out",this.drawSettings.addInputButton="+ in",this.drawSettings.displayName=this.name||this.constructor.name,this.drawSettings.shortDescription=this.desc||"",this._ready=!0}async run(){const e=this.properties.data?.logoUrl;Wn.call(this,e)}redraw(e=!0){const n=super.redraw(e),s=n.querySelector(".internal-name");return s.innerHTML=`<span class="internal-name-prefix gptplugin">OpenAPI</span>${this.drawSettings.displayName}`,this.data={...this.data,name:this.name,desc:this.desc,descForModel:this.descForModel,logoUrl:this.logoUrl,specUrl:this.specUrl},Wn.call(this,this.logoUrl),n}};lC(Tp,"GPTPlugin");let uC=Tp;var cC={inputs:{Text:{type:"string",desc:"(required) a string to be translated in the original languages",request_parameter_name:"inputs",request_parameter_type:"string"}},formatRequest:'inputs: "{{text}}"'},dC={inputs:{Text:{type:"string",desc:"(required) a string to be summarized",request_parameter_name:"inputs",request_parameter_type:"string"}},parameters:{min_length:{type:"number",default:"None",desc:"(Default: None). Integer to define the minimum length in tokens of the output summary."},max_length:{type:"number",default:"None",desc:"(Default: None). Integer to define the maximum length in tokens of the output summary."},top_k:{type:"number",default:"None",desc:"(Default: None). Integer to define the top tokens considered within the sample operation to create new text."},top_p:{type:"number",default:"None",desc:"(Default: None). Float to define the tokens that are within the sample operation of text generation. Add tokens in the sample for more probable to least probable until the sum of the probabilities is greater than top_p."},temperature:{type:"number",default:1,desc:"(Default: 1.0). Float (0.0-100.0). The temperature of the sampling operation. 1 means regular sampling, 0 means always take the highest score, 100.0 is getting closer to uniform probability."},repetition_penalty:{type:"number",default:"None",desc:"(Default: None). Float (0.0-100.0). The more a token is used within generation the more it is penalized to not be picked in successive generation passes."},max_time:{type:"number",default:"None",desc:"(Default: None). Float (0-120.0). The amount of time in seconds that the query should take maximum. Network can cause some overhead so it will be a soft limit."}},formatRequest:'inputs: "{{text}}"'},pC={inputs:{Text:{type:"string",desc:"(required) The last input from the user in the conversation.",request_parameter_name:"text",request_parameter_type:"string"},Generated_responses:{type:"string[]",desc:"A list of strings corresponding to the earlier replies from the model.",request_parameter_name:"generated_responses",request_parameter_type:"string[]"},Past_user_inputs:{type:"string[]",desc:"A list of strings corresponding to the earlier replies from the user. Should be of the same length of generated_responses.",request_parameter_name:"past_user_inputs",request_parameter_type:"string[]"}},parameters:{min_length:{type:"number",default:"None",desc:"(Default: None). Integer to define the minimum length in tokens of the output summary."},max_length:{type:"number",default:"None",desc:"(Default: None). Integer to define the maximum length in tokens of the output summary."},top_k:{type:"number",default:"None",desc:"(Default: None). Integer to define the top tokens considered within the sample operation to create new text."},top_p:{type:"number",default:"None",desc:"(Default: None). Float to define the tokens that are within the sample operation of text generation. Add tokens in the sample for more probable to least probable until the sum of the probabilities is greater than top_p."},temperature:{type:"number",default:1,desc:"(Default: 1.0). Float (0.0-100.0). The temperature of the sampling operation. 1 means regular sampling, 0 means always take the highest score, 100.0 is getting closer to uniform probability."},repetition_penalty:{type:"number",default:"None",desc:"(Default: None). Float (0.0-100.0). The more a token is used within generation the more it is penalized to not be picked in successive generation passes."},max_time:{type:"number",default:"None",desc:"(Default: None). Float (0-120.0). The amount of time in seconds that the query should take maximum. Network can cause some overhead so it will be a soft limit."}},formatRequest:'inputs: "{{text}}", past_user_inputs: [{{past_user_inputs}}], generated_responses: [{{generated_responses}}] }'},fl={"text-classification":{inputs:{Text:{type:"string",desc:"(required) a string to be classified",request_parameter_name:"inputs",request_parameter_type:"string"}},formatRequest:'inputs: "{{text}}"'},"token-classification":{inputs:{Text:{type:"string",desc:"(required) a string to be classified",request_parameter_name:"inputs",request_parameter_type:"string"}},parameters:{aggregation_strategy:{type:"string",default:"simple",desc:"(Default: simple). There are several aggregation strategies:",supportedValues:[{value:"none",desc:"Every token gets classified without further aggregation."},{value:"simple",desc:"Entities are grouped according to the default schema (B-, I- tags get merged when the tag is similar)."},{value:"first",desc:"Same as the simple strategy except words cannot end up with different tags. Words will use the tag of the first token when there is ambiguity."},{value:"average",desc:"Same as the simple strategy except words cannot end up with different tags. Scores are averaged across tokens and then the maximum label is applied."},{value:"max",desc:"Same as the simple strategy except words cannot end up with different tags. Word entity will be the token with the maximum score."}]}},formatRequest:'inputs: "{{text}}"'},"table-question-answering":{inputs:{Query:{type:"string",desc:"(required) The query in plain text that you want to ask the table",request_parameter_name:"query",request_parameter_type:"string"},Table:{type:"string",desc:"(required) A table of data represented as a dict of list where entries are headers and the lists are all the values, all lists must have the same size.",request_parameter_name:"table",request_parameter_type:"Record<string, string[]>"}},formatRequest:'inputs: { query: "{{query}}", table: {{table}} }'},"question-answering":{inputs:{Question:{type:"string",request_parameter_name:"question",request_parameter_type:"string"},Context:{type:"string",request_parameter_name:"context",request_parameter_type:"string"}},formatRequest:'inputs: { context: "{{context}}", question: "{{question}}" }'},"document-question-answering":{inputs:{Image:{type:"URL | base64 | file | SmythFileObject",desc:"(required) image URL, base64 string, uploaded image, or linked image output",request_parameter_name:"image",request_parameter_type:"Blob | ArrayBuffer"},Question:{type:"string",desc:"(required) Question about document image.",request_parameter_name:"question",request_parameter_type:"string"}},formatRequest:'inputs: { image: {{image}}, question: "{{question}}" }'},"visual-question-answering":{inputs:{Image:{type:"URL | base64 | file | SmythFileObject",desc:"(required) image URL, base64 string, uploaded image, or linked image output",request_parameter_name:"image",request_parameter_type:"Blob | ArrayBuffer"},Question:{type:"string",desc:"(required) Question about visual image.",request_parameter_name:"question",request_parameter_type:"string"}},formatRequest:'inputs: { image: {{image}}, question: "{{question}}" }'},"zero-shot-classification":{inputs:{Text:{type:"string",desc:"(required) a string or list of strings",request_parameter_name:"inputs",request_parameter_type:"string | string[]"}},parameters:{candidate_labels:{type:"string[]",default:[],desc:"(required) a list of strings that are potential classes for inputs. (max 10 candidate_labels, for more, simply run multiple requests, results are going to be misleading if using too many candidate_labels anyway. If you want to keep the exact same, you can simply run multi_label=true and do the scaling on your end. )"},multi_label:{type:"boolean",default:!1,desc:"(Default: false) Boolean that is set to True if classes can overlap"}},formatRequest:'inputs: "{{text}}", parameters: { candidate_labels: [{{candidate_labels}}] }'},translation:cC,summarization:dC,conversational:pC,"text-generation":{inputs:{Text:{type:"string",desc:"(required) a string to be generated from",request_parameter_name:"inputs",request_parameter_type:"string"}},parameters:{do_sample:{type:"boolean",default:!0,desc:"(Optional: true). Bool. Whether or not to use sampling, use greedy decoding otherwise."},max_time:{type:"number",default:"None",desc:"(Default: None). Float (0-120.0). The amount of time in seconds that the query should take maximum. Network can cause some overhead so it will be a soft limit."},num_return_sequences:{type:"number",default:1,desc:"(Default: 1). Integer. The number of proposition you want to be returned."},repetition_penalty:{type:"number",default:"None",desc:"(Default: None). Float (0.0-100.0). The more a token is used within generation the more it is penalized to not be picked in successive generation passes."},return_full_text:{type:"boolean",default:!0,desc:"(Default: true). Bool. If set to False, the return results will not contain the original query making it easier for prompting."},temperature:{type:"number",default:1,desc:"(Default: 1.0). Float (0.0-100.0). The temperature of the sampling operation. 1 means regular sampling, 0 means always take the highest score, 100.0 is getting closer to uniform probability."},max_new_tokens:{type:"number",default:"None",desc:"(Default: None). Int (0-250). The amount of new tokens to be generated, this does not include the input length it is a estimate of the size of generated text you want. Each new tokens slows down the request, so look for balance between response times and length of text generated."},top_k:{type:"number",default:"None",desc:"(Default: None). Integer to define the top tokens considered within the sample operation to create new text."},top_p:{type:"number",default:"None",desc:"(Default: None). Float to define the tokens that are within the sample operation of text generation. Add tokens in the sample for more probable to least probable until the sum of the probabilities is greater than top_p."},truncate:{type:"number",default:"None",desc:"(Default: None). Integer. The maximum number of tokens from the input."}},formatRequest:'inputs: "{{text}}"'},"text2text-generation":{inputs:{Text:{type:"string",desc:"(required) a string to be generated from",request_parameter_name:"inputs",request_parameter_type:"string"}},parameters:{max_time:{type:"number",default:"None",desc:"(Default: None). Float (0-120.0). The amount of time in seconds that the query should take maximum. Network can cause some overhead so it will be a soft limit."},num_return_sequences:{type:"number",default:1,desc:"(Default: 1). Integer. The number of proposition you want to be returned."},repetition_penalty:{type:"number",default:"None",desc:"(Default: None). Float (0.0-100.0). The more a token is used within generation the more it is penalized to not be picked in successive generation passes."},temperature:{type:"number",default:1,desc:"(Default: 1.0). Float (0.0-100.0). The temperature of the sampling operation. 1 means regular sampling, 0 means always take the highest score, 100.0 is getting closer to uniform probability."},max_new_tokens:{type:"number",default:"None",desc:"(Default: None). Int (0-250). The amount of new tokens to be generated, this does not include the input length it is a estimate of the size of generated text you want. Each new tokens slows down the request, so look for balance between response times and length of text generated."},top_k:{type:"number",default:"None",desc:"(Default: None). Integer to define the top tokens considered within the sample operation to create new text."},top_p:{type:"number",default:"None",desc:"(Default: None). Float to define the tokens that are within the sample operation of text generation. Add tokens in the sample for more probable to least probable until the sum of the probabilities is greater than top_p."}},formatRequest:'inputs: "{{text}}"'},"fill-mask":{inputs:{Text:{type:"string",desc:"(required) a string to be filled from, must contain the [MASK] token (check model card for exact name of the mask)",request_parameter_name:"inputs",request_parameter_type:"string"}},formatRequest:'inputs: "{{text}}"'},"sentence-similarity":{inputs:{Source_sentence:{type:"string",desc:"(required) The string that you wish to compare the other strings with. This can be a phrase, sentence, or longer passage, depending on the model being used.",request_parameter_name:"source_sentence",request_parameter_type:"string"},Sentences:{type:"string[]",desc:"(required) A list of strings which will be compared against the source_sentence.",request_parameter_name:"sentences",request_parameter_type:"string[]"}},formatRequest:'inputs: { source_sentence: "{{source_sentence}}", sentences: [{{sentences}}] }'},"text-to-image":{inputs:{Text:{type:"string",desc:"(required) prompt to generate image from",request_parameter_name:"inputs",request_parameter_type:"string"}},formatRequest:'inputs: "{{text}}"'},"image-to-text":{inputs:{Image:{type:"URL | base64 | file | SmythFileObject",desc:"(required) image URL, base64 string, uploaded image, or linked image output",request_parameter_name:"data",request_parameter_type:"Blob | ArrayBuffer"}},formatRequest:"data: {{image}} "},"image-classification":{inputs:{Image:{type:"URL | base64 | file | SmythFileObject",desc:"(required) image URL, base64 string, uploaded image, or linked image output",request_parameter_name:"data",request_parameter_type:"Blob | ArrayBuffer"}},formatRequest:"data: {{image}}"},"object-detection":{inputs:{Image:{type:"URL | base64 | file | SmythFileObject",desc:"(required) image URL, base64 string, uploaded image, or linked image output",request_parameter_name:"data",request_parameter_type:"Blob | ArrayBuffer"}},formatRequest:"data: {{image}}"},"image-segmentation":{inputs:{Image:{type:"URL | base64 | file | SmythFileObject",desc:"(required) image URL, base64 string, uploaded image, or linked image output",request_parameter_name:"data",request_parameter_type:"Blob | ArrayBuffer"}},formatRequest:"data: {{image}}"},"zero-shot-image-classification":{inputs:{Image:{type:"URL | base64 | file | SmythFileObject",desc:"(required) image URL, base64 string, uploaded image, or linked image output",request_parameter_name:"image",request_parameter_type:"Blob | ArrayBuffer"}},parameters:{candidate_labels:{type:"string[]",desc:"A list of strings that are potential classes for inputs. (max 10)"}},formatRequest:"inputs: { image: {{image}}, parameters: { candidate_labels: [{{candidate_labels}}] } }"},"image-to-image":{inputs:{Image:{type:"URL | base64 | file | SmythFileObject",desc:"(required) image URL, base64 string, uploaded image, or linked image output",request_parameter_name:"inputs",request_parameter_type:"Blob | ArrayBuffer"}},parameters:{prompt:{type:"string",desc:"(Optional) The text prompt to guide the image generation",default:"None"},strength:{type:"number",default:0,desc:"(Optional) The 'strength' parameter is effective only for SD img2img and alt diffusion img2img models. It conceptually indicates the extent of transformation applied to the reference 'image,' with values between 0 and 1. A higher 'strength' adds more noise to the initial 'image,' and the denoising process runs for the specified number of iterations in 'num_inference_steps.' A 'strength' of 1 ignores the 'image,' applying maximum added noise and running denoising for the full set of iterations."},negative_prompt:{type:"string",default:"None",desc:"(Optional) A negative prompt for the image generation"},height:{type:"number",default:"None",desc:"(Optional) The height in pixels of the generated image"},width:{type:"number",default:"None",desc:"(Optional) The width in pixels of the generated image"},num_inference_steps:{type:"number",default:"None",desc:"(Optional) The number of denoising steps. More denoising steps usually lead to a higher quality image at the expense of slower inference."},guidance_scale:{type:"number",default:"None",desc:"(Optional) Guidance scale: Higher guidance scale encourages to generate images that are closely linked to the text `prompt`, usually at the expense of lower image quality."},guess_mode:{type:"boolean",default:"None",desc:"(Optional) guess_mode only works for ControlNet models, defaults to False In this mode, the ControlNet encoder will try best to recognize the content of the input image even if you remove all prompts. The `guidance_scale` between 3.0 and 5.0 is recommended."}},formatRequest:"inputs: {{image}}"},"text-to-speech":{inputs:{Text:{type:"string",desc:"(required) a string to be converted to speech",request_parameter_name:"inputs",request_parameter_type:"string"}},formatRequest:'inputs: "{{text}}"'},"automatic-speech-recognition":{inputs:{Audio:{type:"URL | base64 | SmythFileObject",desc:"(required) audio URL, base64 string, SmythFileObject",request_parameter_name:"data",request_parameter_type:"Blob | ArrayBuffer"}},formatRequest:"data: {{audio}}"},"audio-to-audio":{inputs:{Audio:{type:"URL | base64 | SmythFileObject",desc:"(required) audio URL, base64 string, SmythFileObject",request_parameter_name:"data",request_parameter_type:"Blob | ArrayBuffer"}},formatRequest:"data: {{audio}}"},"audio-classification":{inputs:{Audio:{type:"URL | base64 | SmythFileObject",desc:"(required) audio URL, base64 string, SmythFileObject",request_parameter_name:"data",request_parameter_type:"Blob | ArrayBuffer"}},formatRequest:"data: {{audio}}"},"feature-extraction":{inputs:{Text:{type:"string | string[]",desc:"(required) a string or a list of strings to get the features from.",request_parameter_name:"inputs",request_parameter_type:"string | string[]"}},formatRequest:'inputs: "{{text}}"'}},hC=Object.defineProperty,fC=d((t,e)=>hC(t,"name",{value:e,configurable:!0}),"p$6");const Mp=class extends Be{static{d(this,"d")}async prepare(){this.name=this.data?.name||this.properties.sender?.getAttribute("smt-name")||"",this._displayName=this.data?.displayName||this.properties.sender?.querySelector(".name")?.textContent||"",this.desc=this.data?.desc||this.properties.sender?.getAttribute("smt-desc")||"",this.modelTask=this.data?.modelTask||this.properties.sender?.getAttribute("smt-model-task")||"",this.parametersInfo="",this.defaultParameters={},this.inputInfoHtml="";const e=fl?.[this.modelTask]?.parameters;if(e)for(const s in e){const a=e[s];if(this.defaultParameters[s]=a.default,this.parametersInfo+=`<div class="comp-config-info">
                    <h6 class="info__title">${s}</h6>
                    <div class="info_item">${a?.desc}</div>
                `,a?.supportedValues?.length>0)for(const i of a.supportedValues)this.parametersInfo+=`
                            <div class="info_item">
                                <strong>${i?.value}:</strong>
                                <span>${i?.desc||""}</span>
                            </div>
                        `;this.parametersInfo+="</div>"}fl?.[this.modelTask]?.formatRequest;const n=fl?.[this.modelTask]?.inputs;if(n&&Object.keys(n).length>0){this.inputInfoHtml+=`
                <div class="comp-config-info">
                    <h5 class="info__title">Inputs: </h5>
            `;for(const s in n){this.properties.defaultInputs.push(s);const a=n[s];this.inputInfoHtml+=`
                    <div class="info_item">
                        <strong>${s}: </strong>
                        <span>${a?.desc||""}</span>
                    </div>
                `}this.inputInfoHtml+="<div>"}return!0}async init(){this.settings={modelNameInfo:{type:"div",html:`<div class="comp-config-info"><span><strong>Model: </strong> ${this.name}</span></div>`},modelName:{type:"hidden",value:this.name},modelTaskInfo:{type:"div",html:`<div class="comp-config-info"><span><strong>Task: </strong> ${Sb(this.modelTask)}</span></div>`},modelTask:{type:"hidden",value:this.modelTask},inputsInfo:{type:"div",html:this.inputInfoHtml},accessToken:{type:"password",label:"Access Token",value:"",validate:"required maxlength=350",validateMessage:"Ensure a non-empty access token and limit text to 50 characters",attributes:{placeholder:"hf_...","data-vault":`${this.constructor.name},All`},events:{input:Ts,focus:Ts}},disableCache:{type:"checkbox",label:"Disable Cache",hint:"Hugging Face models automatically fetch cached responses. For a new response each time, you can Disable Cache.",value:!1}};let e=["accessToken","modelName","modelTask"];Object.keys(this.defaultParameters||{}).length>0&&(this.settings.parameters={type:"textarea",label:"Parameters",validate:"custom=isValidJsonWithoutEmptyField",validateMessage:"Provide a Valid JSON with non-empty keys/values",readonly:!0,value:JSON.stringify(this.defaultParameters,null,2),actions:[{label:"edit",events:{click:wr.bind(this,"parameters")}}]},this.settings.parametersInfo={type:"div",html:this.parametersInfo},e.push("parameters"));for(let n of e)typeof this.data[n]>"u"&&(this.data[n]=this.settings[n].value);this.drawSettings.iconCSSClass="svg-icon "+this.constructor.name,this.drawSettings.addOutputButton="+ out",this.drawSettings.addInputButton="+ in",this.drawSettings.displayName=this._displayName||this.constructor.name,this.drawSettings.shortDescription=this.desc,this.properties.defaultOutputs=["Output"],this._ready=!0}async run(){const e=this.properties.data?.logoUrl;Wn.call(this,e),this.addEventListener("settingsOpened",n=>{const s=n?.querySelector("#accessToken");Ts({target:s})})}redraw(e=!0){const n=super.redraw(e),s=this.properties.sender?.getAttribute("smt-name")||"",a=this.properties.sender?.querySelector(".name")?.textContent||"",i=this.properties.sender?.getAttribute("smt-desc")||"",r=this.properties.sender?.getAttribute("smt-model-task")||"",o=this.properties.sender?.querySelector("img")?.src||"",c=n.querySelector(".internal-name");return c.innerHTML=`<span class="internal-name-prefix huggingface">HuggingFace </span>${this.drawSettings.displayName}`,this.data={...this.data,name:s,displayName:a,desc:i,modelTask:r,logoUrl:o},Wn.call(this,o),n}};fC(Mp,"HuggingFace");let mC=Mp;const He={model({modelOptions:t,defaultModel:e,docUrl:n}){return{type:"select",label:"Model",hint:"Model name",value:e,options:t,events:{change:async s=>{const a=s?.target,i=a.closest(".form-group")?.querySelector(".field-action-btn._model_pricing_link");a.value.startsWith("smythos/")?i?.classList?.remove("hidden"):i?.classList?.add("hidden")}},actions:[{label:"$ View Pricing",icon:"dollar-sign",classes:"text-gray-600 top-[-8px] right-2 hover:underline _model_pricing_link hidden",tooltip:"SmythOS charges based on input and output tokens",events:{click:()=>{window.open(`${n}/#/account_management/modelRates?id=image-generation`,"_blank")}}}]}},positivePrompt(){return{type:"textarea",label:"Prompt",validate:"required minlength=2 maxlength=2000",validateMessage:"The length of the prompt must be between 2 and 2000 characters.",class:"mt-1",value:"{{InputText}}",attributes:{"data-template-vars":"true","data-supported-models":"all"}}},negativePrompt({section:t}={}){return{type:"textarea",label:"Negative Prompt",validate:"maxlength=2000",validateMessage:"The length of the negative prompt must be less than 2000 characters.",value:"",hint:`A negative prompt is a text instruction to guide the model on generating the image. It is usually a sentence or a paragraph that provides negative guidance for the task. This parameter helps to avoid certain undesired results.
For example, if the negative prompt is "red dragon, cup", the model will follow the positive prompt but will avoid generating an image of a red dragon or including a cup. The more detailed the prompt, the more accurate the results.`,hintPosition:"left",section:t}},width({section:t}={}){return{type:"number",label:"Width",value:1024,validate:"min=128 max=2048 custom=isValidImageDimension",validateMessage:"Width must be between 128 and 2048 pixels and divisible by 64 (eg: 128...512, 576, 640...2048).",section:t}},height({section:t}={}){return{type:"number",label:"Height",value:1024,validate:"min=128 max=2048 custom=isValidImageDimension",validateMessage:"Height must be between 128 and 2048 pixels and divisible by 64 (eg: 128...512, 576, 640...2048).",section:t}},outputFormat({section:t}={}){return{type:"select",label:"Output Format",hint:"Image output format",value:"JPG",options:["JPG","PNG","WEBP"],section:t}},outputQuality({section:t}={}){return{type:"range",label:"Output Quality",value:95,min:20,max:99,step:1,hint:"Sets the compression quality of the output image. Higher values preserve more quality but increase file size, lower values reduce file size but decrease quality.",hintPosition:"left",section:t}},numberResults({section:t}={}){return{type:"range",label:"Number of Results",value:1,min:1,max:20,step:1,section:t}},strength({section:t}={}){return{type:"range",label:"Strength",value:.5,min:0,max:1,step:.1,help:"If the input includes an image attachment, a lower value results in more influence from the given image, while a higher value allows more creative deviation.",tooltipClasses:"w-56 ",arrowClasses:"-ml-11",attributes:{"data-supported-models":jn.RUNWARE},section:t}},steps({section:t}={}){return{type:"range",label:"Steps",value:20,min:1,max:100,step:1,help:`The number of steps is the number of iterations the model will perform to generate the image. The higher the number of steps, the more detailed the image will be. However, increasing the number of steps will also increase the time it takes to generate the image and may not always result in a better image (some schedulers work differently).
When using your own models you can specify a new default value for the number of steps.`,tooltipClasses:"w-56 ",arrowClasses:"-ml-11",section:t}},backgroundColor({section:t}={}){return{type:"color",label:"Background Color",value:"rgba(255, 255, 255, 0)",help:"The background color of the image. The default value is white (rgba(255, 255, 255, 0)).",tooltipClasses:"w-56 ",arrowClasses:"-ml-11",section:t}},upscaleFactor({section:t}={}){return{type:"range",label:"Upscale Factor",helper:"Upscale factor",tooltipClasses:"w-36 ",arrowClasses:"-ml-11",value:2,min:2,max:4,step:1,section:t}},confidence({section:t}={}){return{type:"range",label:"Confidence",value:.25,min:0,max:1,step:.1,section:t}},maxDetections({section:t}={}){return{type:"range",label:"Max Detections",value:6,min:1,max:20,step:1,section:t}},maskPadding({section:t}={}){return{type:"range",label:"Mask Padding",value:4,min:0,max:100,step:1,section:t}},maskBlur({section:t}={}){return{type:"range",label:"Mask Blur",value:4,min:0,max:100,step:1,section:t}},preProcessorType({section:t}={}){return{type:"select",label:"Pre Processor Type",options:[{text:"Canny",value:"canny"},{text:"Depth",value:"depth"},{text:"Mlsd",value:"mlsd"},{text:"Normalbae",value:"normalbae"},{text:"Openpose",value:"openpose"},{text:"Tile",value:"tile"},{text:"Seg",value:"seg"},{text:"Lineart",value:"lineart"},{text:"Lineart Anime",value:"lineart_anime"},{text:"Shuffle",value:"shuffle"},{text:"Scribble",value:"scribble"},{text:"Softedge",value:"softedge"}],value:"none",section:t}},ipAdapters({section:t}={}){return{type:"textarea",label:"IP Adapters",value:"",hint:"IP Adapters",hintPosition:"left",section:t}},ctaButton(){return{type:"button",label:"Generate",cls:"rounded-lg px-4 py-1 h-[40px] text-white block ml-auto _image_comps_cta_btn",events:{click:async()=>{const t=document.querySelector(".debug-switcher");document.getElementById("debug-menu-tgl")?.checked||t?.click(),await je(100),document.querySelector(".component.active").querySelector(".btn-debug")?.click()}}}}};var gC=Object.defineProperty,bC=d((t,e)=>gC(t,"name",{value:e,configurable:!0}),"a$h");const Op=class extends Be{static{d(this,"s")}async init(){this.settings={outputFormat:He.outputFormat(),outputQuality:He.outputQuality(),backgroundColor:He.backgroundColor(),ctaButton:He.ctaButton()};const e=["outputFormat","outputQuality","backgroundColor"];for(let s of e)typeof this.data[s]>"u"&&(this.data[s]=this.settings[s].value);this.properties.defaultOutputs=["Output"],this.properties.defaultInputs=["InputImage"];const n=this.properties.inputProps?.find(s=>s.name==="InputImage");n?(n.optional=!1,n.type="Binary"):this.properties.inputProps.push({name:"InputImage",type:"Binary",optional:!1}),this.drawSettings.displayName="Background Removal",this.drawSettings.iconCSSClass="svg-icon "+this.constructor.name,this.drawSettings.componentDescription="Removes background from image to isolate subject.",this.drawSettings.shortDescription="Removes background from image to isolate subject.",this.drawSettings.color="#65a698",this._ready=!0}};bC(Op,"BackgroundRemoval");let vC=Op;var yC=Object.defineProperty,xC=d((t,e)=>yC(t,"name",{value:e,configurable:!0}),"n$a");const jp=class extends Be{static{d(this,"s")}async prepare(){const e=lt.prepareModelSelectOptionsByFeatures(["image-to-image"]);this.defaultModel=lt.getDefaultModel(e);const n=this.data.model||this.defaultModel;return n&&![...e.map(s=>s?.value||s)].includes(n)&&e.push({text:n+"&nbsp;&nbsp",value:n,badge:Nt("Removed","text-smyth-red-500 border-smyth-red-500")}),this.modelOptions=e.filter(s=>s),!0}async init(){this.settings={positivePrompt:He.positivePrompt(),model:He.model({modelOptions:this.modelOptions,defaultModel:this.defaultModel,docUrl:this.workspace.serverData.docUrl}),negativePrompt:He.negativePrompt({section:"Advanced"}),width:He.width({section:"Advanced"}),height:He.height({section:"Advanced"}),outputFormat:He.outputFormat({section:"Advanced"}),outputQuality:He.outputQuality({section:"Advanced"}),numberResults:He.numberResults({section:"Advanced"}),strength:He.strength({section:"Advanced"}),ctaButton:He.ctaButton()};const e=["model","positivePrompt","negativePrompt","width","height","outputFormat","outputQuality","numberResults","strength"];for(let s of e)typeof this.data[s]>"u"&&(this.data[s]=this.settings[s].value);this.properties.defaultOutputs=["Output"],this.properties.defaultInputs=["InputText","SeedImage"];const n=this.properties.inputProps?.find(s=>s.name==="SeedImage");n?(n.optional=!1,n.type="Binary"):this.properties.inputProps.push({name:"SeedImage",type:"Binary",optional:!1}),this.drawSettings.displayName="Image to Image",this.drawSettings.iconCSSClass="svg-icon "+this.constructor.name,this.drawSettings.componentDescription="Blend two images into a new creation.",this.drawSettings.shortDescription="Blend two images into a new creation.",this.drawSettings.color="#65a698",this._ready=!0}};xC(jp,"ImageToImage");let wC=jp;var SC=Object.defineProperty,CC=d((t,e)=>SC(t,"name",{value:e,configurable:!0}),"n$9");const Np=class extends Be{static{d(this,"s")}async init(){this.settings={ctaButton:He.ctaButton()};const e=[];for(let s of e)typeof this.data[s]>"u"&&(this.data[s]=this.settings[s].value);this.properties.defaultOutputs=["Output"],this.properties.defaultInputs=["InputImage"];const n=this.properties.inputProps?.find(s=>s.name==="InputImage");n?(n.optional=!1,n.type="Binary"):this.properties.inputProps.push({name:"InputImage",type:"Binary",optional:!1}),this.drawSettings.displayName="Image To Text",this.drawSettings.iconCSSClass="svg-icon "+this.constructor.name,this.drawSettings.componentDescription="Convert images into text.",this.drawSettings.shortDescription="Convert images into text.",this.drawSettings.color="#65a698",this._ready=!0}};CC(Np,"ImageToText");let EC=Np;var AC=Object.defineProperty,_C=d((t,e)=>AC(t,"name",{value:e,configurable:!0}),"o$9");const Fp=class extends Be{static{d(this,"a")}async init(){this.settings={upscaleFactor:He.upscaleFactor({section:"Advanced"}),outputFormat:He.outputFormat(),outputQuality:He.outputQuality(),ctaButton:He.ctaButton()};const e=["outputFormat","outputQuality","upscaleFactor"];for(let s of e)typeof this.data[s]>"u"&&(this.data[s]=this.settings[s].value);this.properties.defaultOutputs=["Output"],this.properties.defaultInputs=["InputImage"];const n=this.properties.inputProps?.find(s=>s.name==="InputImage");n?(n.optional=!1,n.type="Binary"):this.properties.inputProps.push({name:"InputImage",type:"Binary",optional:!1}),this.drawSettings.displayName="Image Upscaling",this.drawSettings.iconCSSClass="svg-icon "+this.constructor.name,this.drawSettings.componentDescription="Enhances image resolution, improving quality and sharpness.",this.drawSettings.shortDescription="Enhances image resolution, improving quality and sharpness.",this.drawSettings.color="#65a698",this._ready=!0}};_C(Fp,"ImageUpscaling");let kC=Fp;var PC=Object.defineProperty,DC=d((t,e)=>PC(t,"name",{value:e,configurable:!0}),"a$e");const $p=class extends Be{static{d(this,"s")}async prepare(){const e=lt.prepareModelSelectOptionsByFeatures(["image-inpainting"]);this.defaultModel=lt.getDefaultModel(e);const n=this.data.model||this.defaultModel;return n&&![...e.map(s=>s?.value||s)].includes(n)&&e.push({text:n+"&nbsp;&nbsp",value:n,badge:Nt("Removed","text-smyth-red-500 border-smyth-red-500")}),this.modelOptions=e.filter(s=>s),!0}async init(){this.settings={model:He.model({modelOptions:this.modelOptions,defaultModel:this.defaultModel,docUrl:this.workspace.serverData.docUrl}),outputFormat:He.outputFormat(),outputQuality:He.outputQuality(),confidence:He.confidence({section:"Advanced"}),maxDetections:He.maxDetections({section:"Advanced"}),maskPadding:He.maskPadding({section:"Advanced"}),maskBlur:He.maskBlur({section:"Advanced"}),ctaButton:He.ctaButton()};const e=["model","outputFormat","outputQuality","confidence","maxDetections","maskPadding","maskBlur"];for(let s of e)typeof this.data[s]>"u"&&(this.data[s]=this.settings[s].value);this.properties.defaultOutputs=["Output"],this.properties.defaultInputs=["InputImage"];const n=this.properties.inputProps?.find(s=>s.name==="InputImage");n?(n.optional=!1,n.type="Binary"):this.properties.inputProps.push({name:"InputImage",type:"Binary",optional:!1}),this.drawSettings.displayName="Inpainting",this.drawSettings.iconCSSClass="svg-icon "+this.constructor.name,this.drawSettings.componentDescription="Blend two images into a new creation.",this.drawSettings.shortDescription="Blend two images into a new creation.",this.drawSettings.color="#65a698",this._ready=!0}};DC($p,"Inpainting");let IC=$p;var LC=Object.defineProperty,TC=d((t,e)=>LC(t,"name",{value:e,configurable:!0}),"r$d");const Rp=class extends Be{static{d(this,"i")}async prepare(){const e=lt.prepareModelSelectOptionsByFeatures(["image-to-image"]);this.defaultModel=lt.getDefaultModel(e);const n=this.data.model||this.defaultModel;return n&&![...e.map(s=>s?.value||s)].includes(n)&&e.push({text:n+"&nbsp;&nbsp",value:n,badge:Nt("Removed","text-smyth-red-500 border-smyth-red-500")}),this.modelOptions=e.filter(s=>s),!0}async init(){this.settings={positivePrompt:He.positivePrompt(),model:He.model({modelOptions:this.modelOptions,defaultModel:this.defaultModel,docUrl:this.workspace.serverData.docUrl}),negativePrompt:He.negativePrompt({section:"Advanced"}),width:He.width({section:"Advanced"}),height:He.height({section:"Advanced"}),outputFormat:He.outputFormat({section:"Advanced"}),numberResults:He.numberResults({section:"Advanced"}),strength:He.strength({section:"Advanced"}),ctaButton:He.ctaButton()};const e=["model","positivePrompt","negativePrompt","width","height","outputFormat","numberResults","strength"];for(let s of e)typeof this.data[s]>"u"&&(this.data[s]=this.settings[s].value);this.properties.defaultOutputs=["Output"],this.properties.defaultInputs=["InputText","SeedImage"];const n=this.properties.inputProps?.find(s=>s.name==="SeedImage");n?(n.optional=!1,n.type="Binary"):this.properties.inputProps.push({name:"SeedImage",type:"Binary",optional:!1}),this.drawSettings.displayName="Outpainting",this.drawSettings.iconCSSClass="svg-icon "+this.constructor.name,this.drawSettings.componentDescription="Extend your image beyond its original borders.",this.drawSettings.shortDescription="Extend your image beyond its original borders.",this.drawSettings.color="#65a698",this._ready=!0}};TC(Rp,"Outpainting");let MC=Rp;var OC=Object.defineProperty,jC=d((t,e)=>OC(t,"name",{value:e,configurable:!0}),"o$8");const qp=class extends Be{static{d(this,"n")}async init(){this.settings={preProcessorType:He.preProcessorType(),width:He.width({section:"Advanced"}),height:He.height({section:"Advanced"}),outputFormat:He.outputFormat({section:"Advanced"}),outputQuality:He.outputQuality({section:"Advanced"}),ctaButton:He.ctaButton()};const e=["width","height","outputFormat","outputQuality","preProcessorType"];for(let s of e)typeof this.data[s]>"u"&&(this.data[s]=this.settings[s].value);this.properties.defaultOutputs=["Output"],this.properties.defaultInputs=["InputImage"];const n=this.properties.inputProps?.find(s=>s.name==="InputImage");n?(n.optional=!1,n.type="Binary"):this.properties.inputProps.push({name:"InputImage",type:"Binary",optional:!1}),this.drawSettings.displayName="Restyle (ControlNet)",this.drawSettings.iconCSSClass="svg-icon "+this.constructor.name,this.drawSettings.componentDescription="Generate images with precise control using a reference image and specific conditions.",this.drawSettings.shortDescription="Generate images with precise control using a reference image and specific conditions.",this.drawSettings.color="#65a698",this._ready=!0}};jC(qp,"RestyleControlNet");let NC=qp;var FC=Object.defineProperty,$C=d((t,e)=>FC(t,"name",{value:e,configurable:!0}),"r$b");const Bp=class extends Be{static{d(this,"s")}async prepare(){const e=lt.prepareModelSelectOptionsByFeatures(["image-to-image"]);this.defaultModel=lt.getDefaultModel(e);const n=this.data.model||this.defaultModel;return n&&![...e.map(s=>s?.value||s)].includes(n)&&e.push({text:n+"&nbsp;&nbsp",value:n,badge:Nt("Removed","text-smyth-red-500 border-smyth-red-500")}),this.modelOptions=e.filter(s=>s),!0}async init(){this.settings={positivePrompt:He.positivePrompt(),model:He.model({modelOptions:this.modelOptions,defaultModel:this.defaultModel,docUrl:this.workspace.serverData.docUrl}),negativePrompt:He.negativePrompt({section:"Advanced"}),width:He.width({section:"Advanced"}),height:He.height({section:"Advanced"}),outputFormat:He.outputFormat({section:"Advanced"}),outputQuality:He.outputQuality({section:"Advanced"}),numberResults:He.numberResults({section:"Advanced"}),strength:He.strength({section:"Advanced"}),ipAdapters:He.ipAdapters({section:"Advanced"}),ctaButton:He.ctaButton()};const e=["model","positivePrompt","negativePrompt","width","height","outputFormat","outputQuality","numberResults","strength","ipAdapters"];for(let n of e)typeof this.data[n]>"u"&&(this.data[n]=this.settings[n].value);this.properties.defaultOutputs=["Output"],this.properties.defaultInputs=["Prompt","Image"],this.drawSettings.displayName="Restyle (IP Adapter)",this.drawSettings.iconCSSClass="svg-icon "+this.constructor.name,this.drawSettings.componentDescription="Generate images by guiding the AI with a reference image.",this.drawSettings.shortDescription="Generate images by guiding the AI with a reference image.",this.drawSettings.color="#65a698",this._ready=!0}};$C(Bp,"RestyleIPAdapter");let RC=Bp;var qC=Object.defineProperty,BC=d((t,e)=>qC(t,"name",{value:e,configurable:!0}),"r$a");const Up=class extends Be{static{d(this,"i")}async prepare(){const e=lt.prepareModelSelectOptionsByFeatures(["text-to-image"]);this.defaultModel=lt.getDefaultModel(e);const n=this.data.model||this.defaultModel;return n&&![...e.map(s=>s?.value||s)].includes(n)&&e.push({text:n+"&nbsp;&nbsp",value:n,badge:Nt("Removed","text-smyth-red-500 border-smyth-red-500")}),this.modelOptions=e.filter(s=>s),!0}async init(){this.settings={positivePrompt:He.positivePrompt(),model:He.model({modelOptions:this.modelOptions,defaultModel:this.defaultModel,docUrl:this.workspace.serverData.docUrl}),negativePrompt:He.negativePrompt({section:"Advanced"}),width:He.width({section:"Advanced"}),height:He.height({section:"Advanced"}),outputFormat:He.outputFormat({section:"Advanced"}),outputQuality:He.outputQuality({section:"Advanced"}),numberResults:He.numberResults({section:"Advanced"}),steps:He.steps({section:"Advanced"}),ctaButton:He.ctaButton()};const e=["model","positivePrompt","negativePrompt","width","height","outputFormat","outputQuality","numberResults","steps"];for(let s of e)typeof this.data[s]>"u"&&(this.data[s]=this.settings[s].value);this.properties.defaultOutputs=["Output"],this.properties.defaultInputs=["InputText"];const n=this.properties.inputProps?.find(s=>s.name==="SeedImage");n?(n.optional=!1,n.type="Binary"):this.properties.inputProps.push({name:"SeedImage",type:"Binary",optional:!1}),this.drawSettings.displayName="Text to Image",this.drawSettings.iconCSSClass="svg-icon "+this.constructor.name,this.drawSettings.componentDescription="Generate images from text descriptions.",this.drawSettings.shortDescription="Generate images from text descriptions.",this.drawSettings.color="#65a698",this._ready=!0}};BC(Up,"TextToImage");let UC=Up;var zC=Object.defineProperty,hn=d((t,e)=>zC(t,"name",{value:e,configurable:!0}),"s$c"),HC=(t=>(t.DALL_E_2="dall-e-2",t.DALL_E_3="dall-e-3",t))(HC||{});const zp=class extends Be{static{d(this,"c")}async prepare(){const e=lt.prepareModelSelectOptionsByFeatures(["image-generation"]);this.defaultModel=lt.getDefaultModel(e);const n=this.data.model||this.defaultModel;return n&&![...e.map(s=>s?.value||s)].includes(n)&&e.push({text:n+"&nbsp;&nbsp",value:n,badge:Nt("Removed","text-smyth-red-500 border-smyth-red-500")}),this.modelOptions=e.filter(s=>s),!0}async init(){this.settings=this.generateSettings();const e=["model","prompt","sizeDalle2","sizeDalle3","quality","style","isRawInputPrompt","negativePrompt","width","height","outputFormat","size","aspectRatio","personGeneration"];for(let s of e)typeof this.data[s]>"u"&&(this.data[s]=this.settings?.[s]?.value);this.properties.inputs.length==0&&(this.properties.inputs=["Prompt","Attachment"]);const n=this.properties.inputProps?.find(s=>s.name==="Attachment");n?(n.optional=!0,n.type="Binary"):this.properties.inputProps.push({name:"Attachment",type:"Binary",optional:!0}),this.properties.defaultOutputs=["Output"],this.drawSettings.displayName="Image Generator",this.drawSettings.iconCSSClass="svg-icon "+this.constructor.name,this.drawSettings.componentDescription="Generate image from text descriptions using various AI image generation models",this.drawSettings.shortDescription="AI-powered text-to-image generation",this.drawSettings.color="#65a698",this._ready=!0}generateSettings(){return{model:{type:"select",withoutSearch:!0,label:"Select a model",help:"Choose an AI model to process the prompt.",tooltipClasses:"w-56 ",arrowClasses:"-ml-11",value:this.defaultModel,options:this.modelOptions,class:"mb-6",actions:[{label:"$ View Pricing",icon:"dollar-sign",classes:"text-gray-600 top-[-8px] right-2 hover:underline _model_pricing_link hidden",tooltip:"SmythOS charges based on input and output tokens",events:{click:()=>{window.open(`${this.workspace.serverData.docUrl}/account-management/model-rates/#image-generation`,"_blank")}}}],events:{change:async e=>{this.modelChangeHandler(e.target)}}},prompt:{type:"textarea",label:"Prompt",validate:"required minlength=2 maxlength=2000",validateMessage:"The length of the prompt must be between 2 and 2000 characters.",class:"mt-1",value:"{{Prompt}}",hint:`Your prompt is aware of any files you add to the Attachment or Binary type input.
See <a href="${Ut}/agent-studio/components/base/image-generator" class="underline" target="_blank">documentation</a>.`,hintPosition:"after_label",attributes:{"data-template-vars":"true","data-template-excluded-vars":"Attachment","data-template-excluded-var-types":"Binary","data-supported-models":"all"}},quality:{type:"select",withoutSearch:!0,label:"Quality",help:"Choose the image quality\u2014high for best clarity, medium for a balance between quality and size, or low for faster processing and smaller file size.",tooltipClasses:"w-56 ",arrowClasses:"-ml-15",value:"",options:[{text:"Standard",value:"standard"},{text:"HD",value:"hd"}],section:"Advanced",attributes:{"data-supported-models":`dall-e-3, ${So().join(",")}`}},outputFormat:{type:"select",withoutSearch:!0,label:"Output Format",help:"Select the output format: JPEG for smaller size, PNG for transparency support, or WebP for modern compression with good quality. ",tooltipClasses:"w-56 ",arrowClasses:"-ml-11",value:"JPEG",options:["JPEG","PNG","WEBP"],section:"Advanced",attributes:{"data-supported-models":`${jn.RUNWARE}, ${So().join(",")}`}},...Vp(this.data),...Gp(this.data),...Hp(this.data),...Wp(this.data)}}modelChangeHandler(e){this.settings=this.generateSettings(),lt.toggleFields(e),je(100).then(()=>{const n=e.value;Kp(n,this.data)})}};hn(zp,"ImageGenerator");let GC=zp;function Hp(t){return{size:{type:"select",label:"Size",help:"Choose the image size: 1024\xD71024 for square (1:1), 1536\xD71024 for landscape, or 1024\xD71536 for portrait orientation.",tooltipClasses:"w-56 ",withoutSearch:!0,arrowClasses:"-ml-15",value:t.size||"auto",options:[{text:"Auto",value:"auto"},{text:"1024x1024",value:"1024x1024"},{text:"1536x1024 (landscape)",value:"1536x1024"},{text:"1024x1536 (portrait)",value:"1024x1536"}],section:"Advanced",attributes:{"data-supported-models":So().join(",")}}}}d(Hp,"b$4"),hn(Hp,"getGPTSettings");function Gp(t){return{strength:He.strength({section:"Advanced"}),negativePrompt:{type:"textarea",label:"Negative Prompt",validate:"maxlength=2000",validateMessage:"The length of the negative prompt must be less than 2000 characters.",value:t.negativePrompt||"",section:"Advanced",attributes:{"data-supported-models":jn.RUNWARE},help:`A negative prompt is a text instruction to guide the model on generating the image. It is usually a sentence or a paragraph that provides negative guidance for the task. This parameter helps to avoid certain undesired results.
For example, if the negative prompt is &#34;red dragon, cup&#34;, the model will follow the positive prompt but will avoid generating an image of a red dragon or including a cup. The more detailed the prompt, the more accurate the results.`,tooltipClasses:"w-56 ",arrowClasses:"-ml-11"},width:{type:"number",label:"Width",value:t.width||1024,section:"Advanced",attributes:{"data-supported-models":jn.RUNWARE},validate:"min=128 max=2048 custom=isValidImageDimension",validateMessage:"Width must be between 128 and 2048 pixels and divisible by 64 (eg: 128...512, 576, 640...2048)."},height:{type:"number",label:"Height",value:t.height||1024,section:"Advanced",attributes:{"data-supported-models":jn.RUNWARE},validate:"min=128 max=2048 custom=isValidImageDimension",validateMessage:"Height must be between 128 and 2048 pixels and divisible by 64 (eg: 128...512, 576, 640...2048)."}}}d(Gp,"E$3"),hn(Gp,"getRunwareSettings");function Vp(t){return{sizeDalle2:{type:"select",label:"Size",withoutSearch:!0,help:"Pick the image size based on aspect ratio: 1024\xD71024 for square (1:1), 1536\xD71024 for landscape, or 1024\xD71536 for portrait orientation.",tooltipClasses:"w-56 ",arrowClasses:"-ml-11",value:t.sizeDalle2||"256x256",options:["256x256","512x512","1024x1024"],section:"Advanced",attributes:{"data-supported-models":"dall-e-2"}},sizeDalle3:{type:"select",withoutSearch:!0,label:"Size",help:"Pick the image size based on aspect ratio: 1024\xD71024 for square (1:1), 1792\xD71024 for landscape, or 1024\xD71792 for portrait orientation.",tooltipClasses:"w-56 ",arrowClasses:"-ml-11",value:t.sizeDalle3||"1024x1024",options:["1024x1024","1792x1024","1024x1792"],section:"Advanced",attributes:{"data-supported-models":"dall-e-3"}},style:{type:"select",withoutSearch:!0,label:"Style",help:"Image style",value:t.style||"vivid",options:["vivid","natural"],section:"Advanced",attributes:{"data-supported-models":"dall-e-3"}},isRawInputPrompt:{type:"checkbox",label:"Keep the Prompt as it is",value:t.isRawInputPrompt||!1,help:"I NEED to test how the tool works with extremely simple prompts. DO NOT add any detail, just use it AS-IS.",tooltipClasses:"w-56 ",arrowClasses:"-ml-11",section:"Advanced",attributes:{"data-supported-models":"dall-e-3, dall-e-2"}}}}d(Vp,"_$2"),hn(Vp,"getDallESettings");function Wp(t){return{aspectRatio:{type:"select",withoutSearch:!0,label:"Aspect Ratio",help:"Choose the aspect ratio for the generated images.",tooltipClasses:"w-56",arrowClasses:"-ml-11",value:t.aspectRatio||"1:1",options:[{text:"Square (1:1)",value:"1:1"},{text:"Portrait (9:16)",value:"9:16"},{text:"Landscape (16:9)",value:"16:9"},{text:"Wide (3:4)",value:"3:4"},{text:"Tall (4:3)",value:"4:3"}],section:"Advanced",attributes:{"data-supported-models":jn.GOOGLEAI}},personGeneration:{type:"select",withoutSearch:!0,label:"Person Generation",help:"Allow the model to generate images of people. &quot;Don't Allow&quot; blocks generation of images of people. &quot;Allow Adult&quot; generates images of adults, but not children (default). &quot;Allow All&quot; generates images that include adults and children.",tooltipClasses:"w-56",arrowClasses:"-ml-11",value:t.personGeneration||"dont_allow",options:[{text:"Don't Allow",value:"dont_allow"},{text:"Allow Adult",value:"allow_adult"},{text:"Allow All",value:"allow_all"}],section:"Advanced",attributes:{"data-supported-models":jn.GOOGLEAI}}}}d(Wp,"S$1"),hn(Wp,"getGoogleAISettings");var VC=(t=>(t.GPT="gpt",t.RUNWARE="runware",t.DALL_E="dall-e",t.GOOGLE_AI="googleai",t))(VC||{});const ml=window.__LLM_MODELS__||{};function Kp(t,e){const n=Xp(t);if(!n)return;const s=WC[n];if(!s)return;const a=Object.keys(s);for(const i of a){const r=s[i];r&&Yp({name:i,options:r.options,value:e[i]||r.defaultValue})}}d(Kp,"O"),hn(Kp,"redrawSelectBoxesByModel");function Yp({name:t,options:e,value:n}){const s=document.getElementById(t);if(!s)return;const a=Metro.getPlugin(s,"select");a.removeOptions([...a?.elem?.options].map(i=>i.value)),e.forEach(i=>{const r=i?.text||i,o=i?.value||i,c=n==o;a.addOption(o,r,c)})}d(Yp,"D"),hn(Yp,"redrawSelectBox");const WC={gpt:{quality:{options:[{text:"Auto",value:"auto"},{text:"High",value:"high"},{text:"Medium",value:"medium"},{text:"Low",value:"low"}],defaultValue:"auto"},outputFormat:{options:[{text:"JPEG",value:"jpeg"},{text:"PNG",value:"png"},{text:"WEBP",value:"webp"}],defaultValue:"png"}},runware:{outputFormat:{options:["JPEG","PNG","WEBP"],defaultValue:"JPEG"}},"dall-e":{quality:{options:[{text:"Standard",value:"standard"},{text:"HD",value:"hd"}],defaultValue:"standard"}},googleai:{}};function Xp(t){return gl(t)?"gpt":Jp(t)?"runware":Zp(t)?"dall-e":Qp(t)?"googleai":null}d(Xp,"C$4"),hn(Xp,"getModelFamily");function gl(t){return t?.replace("smythos/","")?.startsWith("gpt")}d(gl,"g$2"),hn(gl,"isGPTModel");function Jp(t){return Object.entries(ml).some(([e,n])=>e===t&&n.provider===jn.RUNWARE)}d(Jp,"G"),hn(Jp,"isRunwareModel");function Zp(t){return t?.replace("smythos/","")?.startsWith("dall-e")}d(Zp,"R$1"),hn(Zp,"isDallEModel");function Qp(t){return Object.entries(ml).some(([e,n])=>e===t&&(n.provider===jn.GOOGLEAI||n.llm===jn.GOOGLEAI))}d(Qp,"I$1"),hn(Qp,"isGoogleAIModel");function So(){return Object.keys(ml).filter(t=>gl(t))}d(So,"p$4"),hn(So,"getGPTModels");var KC=Object.defineProperty,YC=d((t,e)=>KC(t,"name",{value:e,configurable:!0}),"s$b");const eh=class extends Be{static{d(this,"r")}async init(){this.settings={inputs:{type:"textarea",label:"Inputs",value:"",hint:"Comma separated list of inputs to wait for before triggering the outputs"}};const e=["inputs"];for(let n of e)typeof this.data[n]>"u"&&(this.data[n]=this.settings[n].value);this.properties.inputs.length==0&&(this.properties.inputs=["Input"]),this.properties.outputs=[],this._ready=!0}redraw(e=!0){const n=super.redraw(e);n.classList.add(this.constructor.name);const s=this.domElement.querySelector(".title-bar").querySelector(".icon");return s.className="icon mif-share",this.domElement.querySelector(".btn-add-output").remove(),n}async addInput(e,n){const s=await super.addInput(e,n);return await super.addOutput(e.parentElement.querySelector(".output-container"),n),s}};YC(eh,"InputSync");let XC=eh;var JC=Object.defineProperty,ZC=d((t,e)=>JC(t,"name",{value:e,configurable:!0}),"i$e");const th=class extends Be{static{d(this,"s")}async init(){this.settings={fields:{type:"textarea",label:"Fields",value:"",validate:"maxlength=1000",validateMessage:"Maximun 1000 characters",hint:"Comma separated json fields to keep",attributes:{"data-template-vars":""}}};const e=["fields"];for(let n of e)typeof this.data[n]>"u"&&(this.data[n]=this.settings[n].value);this.outputSettings={...this.outputSettings,description:{type:"string",default:"",editConfig:{type:"textarea"}}},this.properties.defaultInputs=["Input"],this.properties.defaultOutputs=["Output"],this.drawSettings.displayName="JSON Filter",this.drawSettings.iconCSSClass="svg-icon "+this.constructor.name,this.drawSettings.componentDescription="Filters a JSON object based on the fields provided",this.drawSettings.shortDescription="Filters a JSON object based on the fields provided",this.drawSettings.color="#65a698",this.drawSettings.addInputButton=null,this.drawSettings.addInputButtonLabel="Inputs",this._ready=!0}};ZC(th,"JSONFilter");let QC=th;var eE=Object.defineProperty,nh=d((t,e)=>eE(t,"name",{value:e,configurable:!0}),"i$d");const sh=class extends Be{static{d(this,"c")}constructor(){super(...arguments),this.authUrl="",this._state="",this._conCheckInterval=null}async prepare(){const e=this._uid+"::"+Date.now(),n=this.workspace.server+"/oauth2/linkedin/authUrl?state="+e;console.log("fetching authUrlReq = "+n);const s=await fetch(n,{method:"GET",headers:{"Content-Type":"application/json"}}).then(a=>{if(a.ok)return a.json();throw new Error("Something went wrong")}).catch(a=>{console.log(a)});return console.log({data:s}),this.authUrl=s.authUrl,this._state=e,!0}async init(){this.settings={account:{type:"input",label:"Account",value:"",attributes:{readonly:!0}},id:{type:"input",label:"Id",value:"",attributes:{readonly:!0}},token:{type:"password",label:"Token  ",value:"",attributes:{readonly:!0}},connect:{type:"button",label:"Connect",attributes:{},events:{click:e=>{window.open(this.authUrl,"_blank");const n=e.currentTarget;this._conCheckFunction=()=>this.linkedInConnectClick(n,this._state),window.addEventListener("focus",this._conCheckFunction)}}}},this.dataFields=["account","token","id"];for(let e of this.dataFields)typeof this.data[e]>"u"&&(this.data[e]=this.settings[e].value);this.properties.defaultOutputs=["Success","Error"],this.properties.defaultInputs=["Post"],this.drawSettings.iconCSSClass="svg-icon "+this.constructor.name,this.drawSettings.addOutputButton=null,this.drawSettings.addInputButton=null,this.drawSettings.showSettings=!0,this._ready=!0}async run(){return this.addEventListener("settingsClosed",()=>{this.cancelLinkedInConnect(),(!this.data.account||!this.data.token)&&this.domElement.classList.add("missing-config")}),this.addEventListener("settingsSaved",()=>{this.data.account&&this.data.token&&this.domElement.classList.remove("missing-config")}),!this.data.account||!this.data.token?this.domElement.classList.add("missing-config"):this.domElement.classList.remove("missing-config"),!0}async cancelLinkedInConnect(){clearInterval(this._conCheckInterval)}async linkedInConnectClick(e,n){const s=e.closest("form");console.log("start checking linkedIn auth state"),window.removeEventListener("focus",this._conCheckFunction);const a=`${this.workspace.server}/oauth2/linkedin/authState?state=${n}&scope=r_liteprofile r_emailaddress w_member_social`;let i=5;const r=nh(async()=>{console.log("checking linkedIn auth state");const o=await fetch(a,{method:"GET",headers:{"Content-Type":"application/json"}}).then(c=>{if(c.ok)return c.json();throw new Error("Something went wrong")}).catch(c=>{console.log(c)});o&&o.access_token&&o.account&&o.id&&(clearInterval(this._conCheckInterval),s.querySelector('[name="account"]').value=o.account,s.querySelector('[name="id"]').value=o.id,s.querySelector('[name="token"]').value=o.access_token),i--,i==0&&clearInterval(this._conCheckInterval)},"checkAuth");this._conCheckInterval=setInterval(r,5e3),r()}};nh(sh,"LinkedIn");let tE=sh;var nE=Object.defineProperty,sE=d((t,e)=>nE(t,"name",{value:e,configurable:!0}),"n$5");const ah=class extends Be{static{d(this,"i")}async prepare(){const e=lt.prepareModelSelectOptionsByFeatures(["text"]);this.defaultModel=lt.getDefaultModel(e);const n=this.data.model||this.defaultModel;return n&&![...e.map(s=>s?.value||s)].includes(n)&&e.push({text:n+"&nbsp;&nbsp",value:n,badge:Nt("Removed","text-smyth-red-500 border-smyth-red-500")}),this.modelOptions=e.filter(s=>s),!0}async init(){this.settings={model:{type:"select",label:"Select a Model",help:"Primary language model<br />Used for chat and chatbot interactions<br />Affects response quality and capabilities",hintPosition:"bottom",tooltipClasses:"w-56 ",arrowClasses:"-ml-11",value:this.defaultModel,options:this.modelOptions,dropdownHeight:350,events:{change:a=>{if(!a.target.value)return;const i=document.querySelector("#right-sidebar #modelInfo");i.innerHTML=this.renderModelInfo(a.target.value)}},actions:[{label:"Configure more models",icons:{left:{svg:ja,classes:"mr-2"},right:{svg:Na,classes:"absolute right-4"}},position:"after-dropdown",id:"configureMoreModelsBtn",classes:"custom_model_add_btn",events:{click:()=>{window.open("/vault","_blank")}}}]},modelInfo:{type:"div",cls:"model-info",label:"Model Info",html:this.renderModelInfo.bind(this)},behavior:{type:"textarea",label:"Behavior",class:"",validate:"required maxlength=30000",validateMessage:"The behavior prompt should be a non empty text of less than 30,000 characters",value:"You are a helpful assistant that helps people with their questions",attributes:{"data-template-vars":"true"},help:"Describe how the agent should behave\u2014include tone, decision-making style, or specific actions it should take when responding.",tooltipClasses:"w-56 ",arrowClasses:"-ml-11"},passthrough:{type:"checkbox",label:"Passthrough",value:!1,attributes:{"data-supported-models":"all"},section:"Advanced",help:`Passthrough mode gives you control over what gets streamed to users. Enable it to manually handle assistant outputs before they're shown\u2014ideal for custom logic or post-processing.<br /><a href="${Ut}/agent-studio/components/advanced/llm-assistant" target="_blank">See LLM Assistant guide \u2192</a>`,tooltipClasses:"w-56 ",arrowClasses:"-ml-11"}};const e=["model","behavior"];for(let a of e)typeof this.data[a]>"u"&&(this.data[a]=this.settings[a].value);this.outputSettings={...this.outputSettings,description:{type:"string",default:"",editConfig:{type:"textarea"}}},this.properties.defaultInputs=["UserId","ConversationId","UserInput"],this.properties.inputs.length==0&&(this.properties.inputs=["UserId","ConversationId","UserInput"]),this.properties.inputProps||(this.properties.inputProps=[]);const n=this.properties.inputProps?.find(a=>a.name==="ConversationId");n?n.optional=!0:this.properties.inputProps.push({name:"ConversationId",optional:!0});const s=this.properties.inputProps?.find(a=>a.name==="UserId");s?s.optional=!0:this.properties.inputProps.push({name:"UserId",optional:!0}),this.properties.defaultOutputs=["Response"],this.drawSettings.displayName="LLM Assistant",this.drawSettings.iconCSSClass="svg-icon "+this.constructor.name,this.drawSettings.componentDescription="Use LLM to handle a chat conversation",this.drawSettings.shortDescription="LLM Assistant - Handles a chat conversation",this.drawSettings.color="#65a698",this._ready=!0}renderModelInfo(e=this.data.model){let n="";const s=window.__LLM_MODELS__;if(s){const a=s[e];a&&(n+="<ul>",n+=`<li><b>Provider: </b> ${a?.llm?a.llm:"Unknown"}</li>`,n+=`<li><b>Context Window Size: </b> ${a?.tokens?a.tokens:"Unknown"}</li>`,n+=`<li><b>Maximum Output Tokens: </b> ${a?.completionTokens?a.completionTokens:"Unknown"}</li>`,n+="</ul>",!a.hasKey&&!a.isCustomLLM&&(n+="<hr/><p>The capabilities of this model are limited, enter an API Key to raise the limits</p>"))}return n}async run(){this.addEventListener("settingsOpened",this.handleSettingsOpened.bind(this))}async handleSettingsOpened(e,n){n===this&&(await je(200),await Ds(e,this),e.querySelector("#model"))}async handleElementClick(e){await Xs(e,this)}async saveApiKey(e,n,s){return await Is(e,n,s,this.workspace,this.refreshLLMModels.bind(this))}async refreshLLMModels(){await Ls(this.workspace,this.prepare.bind(this),this.init.bind(this),this.refreshSettingsSidebar.bind(this))}};sE(ah,"LLMAssistant");let aE=ah;var iE=Object.defineProperty,oE=d((t,e)=>iE(t,"name",{value:e,configurable:!0}),"i$b");const ih=class extends Be{static{d(this,"e")}async init(){this.settings={};const e=[];for(let n of e)typeof this.data[n]>"u"&&(this.data[n]=this.settings[n].value);this.properties.defaultOutputs=["Verified","Unverified"],this.properties.defaultInputs=[],this.drawSettings.showSettings=!1,this.drawSettings.cssClass="logic-component",this.drawSettings.iconCSSClass="svg-icon "+this.constructor.name,this.drawSettings.color="#333",this.drawSettings.addOutputButton=null,this.drawSettings.addOutputButtonLabel=" ",this.drawSettings.addInputButton="Input",this.drawSettings.componentDescription="Set the output to true if all the inputs are set, otherwise set it to false"}};oE(ih,"LogicAND");let rE=ih;var lE=Object.defineProperty,uE=d((t,e)=>lE(t,"name",{value:e,configurable:!0}),"s$9");const oh=class extends Be{static{d(this,"i")}async init(){this.settings={minSetInputs:{type:"number",label:"Minimum Inputs",hint:"Minimum number of set inputs to trigger output",value:"",validate:"required max=9 min=0 custom=isValidInteger",validateMessage:"Please enter a positive number between 0 and 9."}};const e=["minSetInputs"];for(let n of e)typeof this.data[n]>"u"&&(this.data[n]=this.settings[n].value);this.properties.defaultOutputs=["Verified","Unverified"],this.properties.defaultInputs=[],this.drawSettings.showSettings=!0,this.drawSettings.cssClass="logic-component",this.drawSettings.iconCSSClass="svg-icon "+this.constructor.name,this.drawSettings.color="#333",this.drawSettings.addOutputButton=null,this.drawSettings.addOutputButtonLabel=" ",this.drawSettings.addInputButton="Input",this.drawSettings.componentDescription="Set the output to true if minimumn number of inputs are set, otherwise set it to false"}};uE(oh,"LogicAtLeast");let cE=oh;var dE=Object.defineProperty,pE=d((t,e)=>dE(t,"name",{value:e,configurable:!0}),"s$8");const rh=class extends Be{static{d(this,"i")}async init(){this.settings={maxSetInputs:{type:"number",label:"Maximum Inputs",hint:"Maximum number of set inputs to trigger output",value:"",validate:"required max=9 min=0 custom=isValidInteger",validateMessage:"Please enter a positive number between 0 and 9."}};const e=["maxSetInputs"];for(let n of e)typeof this.data[n]>"u"&&(this.data[n]=this.settings[n].value);this.properties.defaultOutputs=["Verified","Unverified"],this.properties.defaultInputs=[],this.drawSettings.showSettings=!0,this.drawSettings.cssClass="logic-component",this.drawSettings.iconCSSClass="svg-icon "+this.constructor.name,this.drawSettings.color="#333",this.drawSettings.addOutputButton=null,this.drawSettings.addOutputButtonLabel=" ",this.drawSettings.addInputButton="Input",this.drawSettings.componentDescription="Set the output to true if a maximum number of inputs are set, if the maximum is exceeded, output does not trigger"}};pE(rh,"LogicAtMost");let hE=rh;var fE=Object.defineProperty,mE=d((t,e)=>fE(t,"name",{value:e,configurable:!0}),"i$8");const lh=class extends Be{static{d(this,"s")}async init(){this.settings={};const e=[];for(let n of e)typeof this.data[n]>"u"&&(this.data[n]=this.settings[n].value);this.properties.defaultOutputs=["Verified","Unverified"],this.properties.defaultInputs=[],this.drawSettings.showSettings=!1,this.drawSettings.cssClass="logic-component",this.drawSettings.iconCSSClass="svg-icon "+this.constructor.name,this.drawSettings.color="#333",this.drawSettings.addOutputButton=null,this.drawSettings.addOutputButtonLabel=" ",this.drawSettings.addInputButton="Input",this.drawSettings.componentDescription="Set the output to true if one or more inputs are set, otherwise the output is not set"}};mE(lh,"LogicOR");let gE=lh;var bE=Object.defineProperty,vE=d((t,e)=>bE(t,"name",{value:e,configurable:!0}),"i$7");const uh=class extends Be{static{d(this,"s")}async init(){this.settings={};const e=[];for(let n of e)typeof this.data[n]>"u"&&(this.data[n]=this.settings[n].value);this.properties.defaultOutputs=["Verified","Unverified"],this.properties.defaultInputs=[],this.drawSettings.showSettings=!1,this.drawSettings.cssClass="logic-component",this.drawSettings.iconCSSClass="svg-icon "+this.constructor.name,this.drawSettings.color="#333",this.drawSettings.addOutputButton=null,this.drawSettings.addOutputButtonLabel=" ",this.drawSettings.addInputButton="Input",this.drawSettings.componentDescription="Set the output true if a single inputs is set, if an even number of inputs are set the output does not take a value"}};vE(uh,"LogicXOR");let yE=uh;var xE=Object.defineProperty,wE=d((t,e)=>xE(t,"name",{value:e,configurable:!0}),"i$6");const ch=class extends Be{static{d(this,"r")}async prepare(){this.name=this.data?.name||this.properties.sender?.querySelector(".name")?.textContent||"",this.desc=this.data?.desc||this.properties.sender?.getAttribute("smt-desc")||"",this.descForModel=this.data?.descForModel||this.properties.sender?.getAttribute("smt-desc-for-model")||"",this.mcpUrl=this.data?.mcpUrl||this.properties.sender?.getAttribute("smt-mcp-url")||"",this.logoUrl=this.data?.logoUrl||this.properties.sender?.querySelector("img")?.src||"";const e=lt.prepareModelSelectOptionsByFeatures(["tools"]);this.defaultModel=lt.getDefaultModel(e);const n=this.data?.model||this.data?.openAiModel||this.defaultModel;return n&&![...e.map(s=>s?.value||s)].includes(n)&&e.push({text:n+"&nbsp;&nbsp",value:n,badge:Nt("Removed","text-smyth-red-500 border-smyth-red-500")}),this.modelOptions=e.filter(s=>s),!0}async init(){this.settings={mcpUrl:{type:"textarea",value:"",validate:"required",label:"MCP URL",validateMessage:"MCP URL is required"},prompt:{type:"textarea",label:"Prompt",value:"{{Prompt}}",validate:"required",validateMessage:"Prompt is required",attributes:{"data-template-vars":"true","data-template-excluded-vars":"Attachment","data-template-excluded-var-types":"Binary","data-supported-models":"all"}},model:{type:"select",label:"Model",value:this.defaultModel,options:this.modelOptions},descForModel:{type:"textarea",label:"System Prompt",hint:"The system prompt can be used to customize the behavior of your MCP",section:"Advanced",value:this.descForModel,validate:"maxlength=5000",validateMessage:"Your text exceeds the 5,000 character limit."}};const e=["model","mcpUrl","descForModel","prompt"];for(let n of e)typeof this.data[n]>"u"&&(this.data[n]=this.settings[n].value);this.properties.inputs.length==0&&(this.properties.inputs=["Prompt"]),this.properties.defaultOutputs=["Output"],this.drawSettings.iconCSSClass="svg-icon "+this.constructor.name,this.drawSettings.addOutputButton="Outputs",this.drawSettings.addInputButton="Inputs",this.drawSettings.displayName=this.name||this.constructor.name,this.drawSettings.shortDescription=this.desc||"",this._ready=!0}async run(){const e=this.properties.data?.logoUrl;Wn.call(this,e)}redraw(e=!0){const n=super.redraw(e);return this.data={...this.data,name:this.name,desc:this.desc,descForModel:this.descForModel,logoUrl:this.logoUrl,mcpUrl:this.mcpUrl},Wn.call(this,this.logoUrl),n}};wE(ch,"MCPClient");let SE=ch;var CE=Object.defineProperty,EE=d((t,e)=>CE(t,"name",{value:e,configurable:!0}),"r$6");const dh=class extends Be{static{d(this,"s")}async init(){this.settings={name:{type:"input",label:"name",value:"",hint:"Enter memory name"},scope:{type:"select",label:"Scope",hint:"Memory Scope",value:"Session",options:["Session"]}},this.data={},this.properties.defaultOutputs=["_list"],this.properties.defaultInputs=["_reset"],this.drawSettings.showSettings=!1,this.drawSettings.iconCSSClass="svg-icon "+this.constructor.name,this.drawSettings.addInputButton=null,this.drawSettings.addOutputButton=" + Mem Entry"}outputNameExists(e){return!!(this.outputContainer.querySelector(`.output-endpoint[smt-name="${e}"]`)||this.inputContainer.querySelector(`.input-endpoint[smt-name="${e}"]`))}async addOutput(e,n){if(this.properties.defaultInputs.includes(n))return super.addOutput(e,n);const s=await super.addOutput(e,n),a=e.parentElement.querySelector(".input-container"),i=await super.addInput(a,n);return s.querySelector(".ep").setAttribute("smt-con-thickness","8"),s.querySelector(".ep").setAttribute("smt-con-hide-overlays","true"),s._inputDivElement=i,i._outputDivElement=s,this.repaint(),s}async addInput(e,n){return this.properties.defaultInputs.includes(n)?super.addInput(e,n):null}async deleteEndpoint(e){console.log("deleting"),super.deleteEndpoint(e);const n=e._inputDivElement||e._outputDivElement;e._inputDivElement&&(e.inputDivElement=null),e._outputDivElement&&(e.outputDivElement=null),n&&super.deleteEndpoint(n)}async run(){return this.addEventListener("endpointNameChanged",(e,n,s)=>{console.log("endpointNameChanged",e,n,s);const a=e.classList.contains("input-endpoint")?e:e._inputDivElement,i=e.classList.contains("output-endpoint")?e:e._outputDivElement,r=a.getAttribute("smt-name"),o=i.getAttribute("smt-name");r!=s&&(a.setAttribute("smt-name",s),a.querySelector(".name").innerText=s),o!=s&&(i.setAttribute("smt-name",s),i.querySelector(".name").innerText=s)}),!0}};EE(dh,"Memory");let AE=dh;var _E=Object.defineProperty,kE=d((t,e)=>_E(t,"name",{value:e,configurable:!0}),"e$6");const ph=class extends Be{static{d(this,"t")}async init(){this.settings={name:{type:"input",label:"name",value:"",hint:"Enter memory name",validate:"maxlength=50",validateMessage:"Enter a non-empty name, not more than 50 characters."},scope:{type:"select",label:"Scope",hint:"Memory Scope",value:"Session",options:["Session"]}},this.data={},this.properties.defaultOutputs=[],this.properties.defaultInputs=["Key"],this.drawSettings.iconCSSClass="svg-icon Memory "+this.constructor.name,this.drawSettings.addOutputButton=null,this.drawSettings.addInputButton="Mem Entry",this.drawSettings.addOutputButtonLabel=" "}};kE(ph,"MemoryDeleteKey");let PE=ph;var DE=Object.defineProperty,IE=d((t,e)=>DE(t,"name",{value:e,configurable:!0}),"e$5");const hh=class extends Be{static{d(this,"t")}async init(){this.settings={name:{type:"input",label:"name",value:"",hint:"Enter memory name",validate:"maxlength=50",validateMessage:"Enter a non-empty name, not more than 50 characters."},scope:{type:"select",label:"Scope",hint:"Memory Scope",value:"Session",options:["Session"]}},this.data={},this.properties.defaultOutputs=["Value"],this.properties.defaultInputs=["Key"],this.drawSettings.iconCSSClass="svg-icon Memory "+this.constructor.name,this.drawSettings.addOutputButton=null,this.drawSettings.addInputButton=null,this.drawSettings.addInputButtonLabel=" "}};IE(hh,"MemoryReadKeyVal");let LE=hh;var TE=Object.defineProperty,ME=d((t,e)=>TE(t,"name",{value:e,configurable:!0}),"e$4");const fh=class extends Be{static{d(this,"t")}async init(){this.settings={name:{type:"input",label:"name",value:"",hint:"Enter memory name",validate:"maxlength=50",validateMessage:"Enter a non-empty name, not more than 50 characters."},scope:{type:"select",label:"Scope",hint:"Memory Scope",value:"Session",options:["Session"]}},this.data={},this.properties.defaultOutputs=[],this.properties.defaultInputs=[],this.drawSettings.showSettings=!1,this.drawSettings.iconCSSClass="svg-icon Memory "+this.constructor.name,this.drawSettings.addInputButton=null,this.drawSettings.addOutputButton="Mem Slot",this.drawSettings.addInputButtonLabel=" "}};ME(fh,"MemoryReadOutput");let OE=fh;var jE=Object.defineProperty,NE=d((t,e)=>jE(t,"name",{value:e,configurable:!0}),"e$3");const mh=class extends Be{static{d(this,"t")}async init(){this.settings={name:{type:"input",label:"name",value:"",hint:"Enter memory name",validate:"maxlength=50",validateMessage:"Enter a non-empty name, not more than 50 characters."},scope:{type:"select",label:"Scope",hint:"Memory Scope",value:"Session",options:["Session"]}},this.data={},this.properties.defaultOutputs=[],this.properties.defaultInputs=[],this.drawSettings.displayName="Memory Slot Write",this.drawSettings.shortDescription="Write to memory by slot name",this.drawSettings.showSettings=!1,this.drawSettings.iconCSSClass="svg-icon Memory "+this.constructor.name,this.drawSettings.addOutputButton=null,this.drawSettings.addInputButton="Mem Slot",this.drawSettings.addOutputButtonLabel=" "}};NE(mh,"MemoryWriteInput");let FE=mh;var $E=Object.defineProperty,RE=d((t,e)=>$E(t,"name",{value:e,configurable:!0}),"s$4");const gh=class extends Be{static{d(this,"a")}async init(){this.settings={memoryName:{type:"input",label:"Memory Name",value:"",hint:"Enter memory name",validate:"maxlength=50",validateMessage:"Enter a non-empty name, not more than 50 characters."},key:{type:"textarea",label:"Key",value:"{{key}}",hint:"Enter key",validate:"maxlength=50",attributes:{"data-template-vars":"true"}},value:{type:"textarea",label:"Value",value:"{{value}}",hint:"Enter value",attributes:{"data-template-vars":"true"}},scope:{type:"select",label:"Scope",hint:"Memory Scope",value:"Session",options:["Session"]}};const e=["key","value"];for(let n of e)typeof this.data[n]>"u"&&(this.data[n]=this.settings[n].value);this.data={},this.properties.defaultOutputs=["Key","Value"],this.properties.defaultInputs=[],this.properties.inputs.length==0&&(this.properties.inputs=["Key","Value"]),this.drawSettings.iconCSSClass="svg-icon Memory "+this.constructor.name,this.drawSettings.addOutputButton=" ",this.drawSettings.addInputButton="Mem Entry",this.drawSettings.addOutputButtonLabel=" "}};RE(gh,"MemoryWriteKeyVal");let qE=gh;var BE=Object.defineProperty,UE=d((t,e)=>BE(t,"name",{value:e,configurable:!0}),"o$6");const bh=class extends Be{static{d(this,"a")}async prepare(){const e=lt.prepareModelSelectOptionsByFeatures(["image","audio","video","document"]);this.defaultModel=lt.getDefaultModel(e);const n=this.data?.model||this.defaultModel;return n&&![...e.map(s=>s?.value||s)].includes(n)&&e.push({text:n+"&nbsp;&nbsp",value:n,badge:Nt("Removed","text-smyth-red-500 border-smyth-red-500")}),this.modelOptions=e.filter(s=>s),this.setModelParams(n),!0}async init(){this.settings=this.generateSettings();const e=["model","prompt","maxTokens"];for(let n of e)typeof this.data[n]>"u"&&(this.data[n]=this.settings[n].value);this.properties.defaultInputs=["Input"],this.properties.defaultOutputs=["Reply"],this.drawSettings.displayName="Multimodal LLM",this.drawSettings.iconCSSClass="svg-icon "+this.constructor.name,this.drawSettings.componentDescription="The Multimodal component processes information from different modalities, including images, videos, and text, using LLMs to generate context-aware outputs based on prompts and input variables.",this.drawSettings.shortDescription="Processes multimodal inputs (images, videos, text) to generate context-aware outputs.",this.drawSettings.color="#65a698",this._ready=!0}modelChangeHandler(e){const n=e.target;n.closest(".select.smt-input-select").classList.contains("focused")&&(Hi.updateMaxTokens(e),this.setModelParams(n.value||this.defaultModel),this.settings=this.generateSettings()),Hi.toggleFields(e)}setModelParams(e){const n=window.__LLM_MODELS__?.[e]?.provider?.toLowerCase()||window.__LLM_MODELS__?.[e]?.llm?.toLowerCase(),s=cs[n]||cs.default;this.modelParams={allowedContextTokens:Sr(e),allowedCompletionTokens:Cr(e),hint:s?.hint}}generateSettings(){const{allowedContextTokens:e,allowedCompletionTokens:n,hint:s}=this.modelParams;return{model:{type:"select",label:"Model",hint:"Model name",value:this.defaultModel,options:this.modelOptions,events:{change:this.modelChangeHandler.bind(this)},attributes:{"data-supported-models":"all"}},prompt:{type:"textarea",label:"Prompt",class:"mb-6",validate:"required",validateMessage:"Please provide a prompt. It's required!",value:"What is the video about?",attributes:{"data-template-vars":"true"}},maxContextTokens:{type:"div",html:`<strong class="px-2">Context window size: <span class="tokens_num">${e?e.toLocaleString():"Unknown"}</span> tokens</strong><br/>`,attributes:{"data-supported-models":"OpenAI,Anthropic,GoogleAI,Groq,xAI,TogetherAI,VertexAI,Bedrock,cohere"},section:"Advanced",hint:"The total context window size includes both the request prompt length and output completion length.",hintPosition:"left",class:"p-4"},maxTokens:{type:"range",label:"Maximum Output Tokens",min:1,max:n,value:300,step:1,validate:`min=1 max=${n}`,validateMessage:`Allowed range 1 to ${n}`,attributes:{"data-supported-models":"OpenAI,Anthropic,GoogleAI,Groq,xAI,TogetherAI,VertexAI,Bedrock,cohere"},section:"Advanced",hint:s.maxTokens,hintPosition:"left"},passthrough:{type:"checkbox",label:"Passthrough",value:!1,attributes:{"data-supported-models":"all"},section:"Advanced"}}}async run(){this.addEventListener("settingsOpened",this.handleSettingsOpened.bind(this))}async handleSettingsOpened(e,n){n===this&&(await je(200),await Ds(e,this))}async handleElementClick(e){await Xs(e,this)}async saveApiKey(e,n,s){return await Is(e,n,s,this.workspace,this.refreshLLMModels.bind(this))}async refreshLLMModels(){await Ls(this.workspace,this.prepare.bind(this),this.init.bind(this),this.refreshSettingsSidebar.bind(this))}};UE(bh,"MultimodalLLM");let zE=bh;const vh={};function HE(t){let e=vh[t];if(e)return e;e=vh[t]=[];for(let n=0;n<128;n++){const s=String.fromCharCode(n);e.push(s)}for(let n=0;n<t.length;n++){const s=t.charCodeAt(n);e[s]="%"+("0"+s.toString(16).toUpperCase()).slice(-2)}return e}d(HE,"getDecodeCache");function ua(t,e){typeof e!="string"&&(e=ua.defaultChars);const n=HE(e);return t.replace(/(%[a-f0-9]{2})+/gi,function(s){let a="";for(let i=0,r=s.length;i<r;i+=3){const o=parseInt(s.slice(i+1,i+3),16);if(o<128){a+=n[o];continue}if((o&224)===192&&i+3<r){const c=parseInt(s.slice(i+4,i+6),16);if((c&192)===128){const l=o<<6&1984|c&63;l<128?a+="\uFFFD\uFFFD":a+=String.fromCharCode(l),i+=3;continue}}if((o&240)===224&&i+6<r){const c=parseInt(s.slice(i+4,i+6),16),l=parseInt(s.slice(i+7,i+9),16);if((c&192)===128&&(l&192)===128){const u=o<<12&61440|c<<6&4032|l&63;u<2048||u>=55296&&u<=57343?a+="\uFFFD\uFFFD\uFFFD":a+=String.fromCharCode(u),i+=6;continue}}if((o&248)===240&&i+9<r){const c=parseInt(s.slice(i+4,i+6),16),l=parseInt(s.slice(i+7,i+9),16),u=parseInt(s.slice(i+10,i+12),16);if((c&192)===128&&(l&192)===128&&(u&192)===128){let p=o<<18&1835008|c<<12&258048|l<<6&4032|u&63;p<65536||p>1114111?a+="\uFFFD\uFFFD\uFFFD\uFFFD":(p-=65536,a+=String.fromCharCode(55296+(p>>10),56320+(p&1023))),i+=9;continue}}a+="\uFFFD"}return a})}d(ua,"decode$1"),ua.defaultChars=";/?:@&=+$,#",ua.componentChars="";const yh={};function GE(t){let e=yh[t];if(e)return e;e=yh[t]=[];for(let n=0;n<128;n++){const s=String.fromCharCode(n);/^[0-9a-z]$/i.test(s)?e.push(s):e.push("%"+("0"+n.toString(16).toUpperCase()).slice(-2))}for(let n=0;n<t.length;n++)e[t.charCodeAt(n)]=t[n];return e}d(GE,"getEncodeCache");function Qa(t,e,n){typeof e!="string"&&(n=e,e=Qa.defaultChars),typeof n>"u"&&(n=!0);const s=GE(e);let a="";for(let i=0,r=t.length;i<r;i++){const o=t.charCodeAt(i);if(n&&o===37&&i+2<r&&/^[0-9a-f]{2}$/i.test(t.slice(i+1,i+3))){a+=t.slice(i,i+3),i+=2;continue}if(o<128){a+=s[o];continue}if(o>=55296&&o<=57343){if(o>=55296&&o<=56319&&i+1<r){const c=t.charCodeAt(i+1);if(c>=56320&&c<=57343){a+=encodeURIComponent(t[i]+t[i+1]),i++;continue}}a+="%EF%BF%BD";continue}a+=encodeURIComponent(t[i])}return a}d(Qa,"encode$1"),Qa.defaultChars=";/?:@&=+$,-_.!~*'()#",Qa.componentChars="-_.!~*'()";function bl(t){let e="";return e+=t.protocol||"",e+=t.slashes?"//":"",e+=t.auth?t.auth+"@":"",t.hostname&&t.hostname.indexOf(":")!==-1?e+="["+t.hostname+"]":e+=t.hostname||"",e+=t.port?":"+t.port:"",e+=t.pathname||"",e+=t.search||"",e+=t.hash||"",e}d(bl,"format");function Co(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}d(Co,"Url");const VE=/^([a-z0-9.+-]+:)/i,WE=/:[0-9]*$/,KE=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,YE=["<",">",'"',"`"," ","\r",`
`,"	"],XE=["{","}","|","\\","^","`"].concat(YE),JE=["'"].concat(XE),xh=["%","/","?",";","#"].concat(JE),wh=["/","?","#"],ZE=255,Sh=/^[+a-z0-9A-Z_-]{0,63}$/,QE=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Ch={javascript:!0,"javascript:":!0},Eh={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function vl(t,e){if(t&&t instanceof Co)return t;const n=new Co;return n.parse(t,e),n}d(vl,"urlParse"),Co.prototype.parse=function(t,e){let n,s,a,i=t;if(i=i.trim(),!e&&t.split("#").length===1){const l=KE.exec(i);if(l)return this.pathname=l[1],l[2]&&(this.search=l[2]),this}let r=VE.exec(i);if(r&&(r=r[0],n=r.toLowerCase(),this.protocol=r,i=i.substr(r.length)),(e||r||i.match(/^\/\/[^@\/]+@[^@\/]+/))&&(a=i.substr(0,2)==="//",a&&!(r&&Ch[r])&&(i=i.substr(2),this.slashes=!0)),!Ch[r]&&(a||r&&!Eh[r])){let l=-1;for(let w=0;w<wh.length;w++)s=i.indexOf(wh[w]),s!==-1&&(l===-1||s<l)&&(l=s);let u,p;l===-1?p=i.lastIndexOf("@"):p=i.lastIndexOf("@",l),p!==-1&&(u=i.slice(0,p),i=i.slice(p+1),this.auth=u),l=-1;for(let w=0;w<xh.length;w++)s=i.indexOf(xh[w]),s!==-1&&(l===-1||s<l)&&(l=s);l===-1&&(l=i.length),i[l-1]===":"&&l--;const g=i.slice(0,l);i=i.slice(l),this.parseHost(g),this.hostname=this.hostname||"";const y=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!y){const w=this.hostname.split(/\./);for(let S=0,m=w.length;S<m;S++){const D=w[S];if(D&&!D.match(Sh)){let A="";for(let j=0,L=D.length;j<L;j++)D.charCodeAt(j)>127?A+="x":A+=D[j];if(!A.match(Sh)){const j=w.slice(0,S),L=w.slice(S+1),k=D.match(QE);k&&(j.push(k[1]),L.unshift(k[2])),L.length&&(i=L.join(".")+i),this.hostname=j.join(".");break}}}}this.hostname.length>ZE&&(this.hostname=""),y&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}const o=i.indexOf("#");o!==-1&&(this.hash=i.substr(o),i=i.slice(0,o));const c=i.indexOf("?");return c!==-1&&(this.search=i.substr(c),i=i.slice(0,c)),i&&(this.pathname=i),Eh[n]&&this.hostname&&!this.pathname&&(this.pathname=""),this},Co.prototype.parseHost=function(t){let e=WE.exec(t);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};var eA=Object.freeze({__proto__:null,decode:ua,encode:Qa,format:bl,parse:vl}),Ah=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,_h=/[\0-\x1F\x7F-\x9F]/,tA=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,yl=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,kh=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA]/,Ph=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,nA=Object.freeze({__proto__:null,Any:Ah,Cc:_h,Cf:tA,P:yl,S:kh,Z:Ph}),sA=new Uint16Array('\u1D41<\xD5\u0131\u028A\u049D\u057B\u05D0\u0675\u06DE\u07A2\u07D6\u080F\u0A4A\u0A91\u0DA1\u0E6D\u0F09\u0F26\u10CA\u1228\u12E1\u1415\u149D\u14C3\u14DF\u1525\0\0\0\0\0\0\u156B\u16CD\u198D\u1C12\u1DDD\u1F7E\u2060\u21B0\u228D\u23C0\u23FB\u2442\u2824\u2912\u2D08\u2E48\u2FCE\u3016\u32BA\u3639\u37AC\u38FE\u3A28\u3A71\u3AE0\u3B2E\u0800EMabcfglmnoprstu\\bfms\x7F\x84\x8B\x90\x95\x98\xA6\xB3\xB9\xC8\xCFlig\u803B\xC6\u40C6P\u803B&\u4026cute\u803B\xC1\u40C1reve;\u4102\u0100iyx}rc\u803B\xC2\u40C2;\u4410r;\uC000\u{1D504}rave\u803B\xC0\u40C0pha;\u4391acr;\u4100d;\u6A53\u0100gp\x9D\xA1on;\u4104f;\uC000\u{1D538}plyFunction;\u6061ing\u803B\xC5\u40C5\u0100cs\xBE\xC3r;\uC000\u{1D49C}ign;\u6254ilde\u803B\xC3\u40C3ml\u803B\xC4\u40C4\u0400aceforsu\xE5\xFB\xFE\u0117\u011C\u0122\u0127\u012A\u0100cr\xEA\xF2kslash;\u6216\u0176\xF6\xF8;\u6AE7ed;\u6306y;\u4411\u0180crt\u0105\u010B\u0114ause;\u6235noullis;\u612Ca;\u4392r;\uC000\u{1D505}pf;\uC000\u{1D539}eve;\u42D8c\xF2\u0113mpeq;\u624E\u0700HOacdefhilorsu\u014D\u0151\u0156\u0180\u019E\u01A2\u01B5\u01B7\u01BA\u01DC\u0215\u0273\u0278\u027Ecy;\u4427PY\u803B\xA9\u40A9\u0180cpy\u015D\u0162\u017Aute;\u4106\u0100;i\u0167\u0168\u62D2talDifferentialD;\u6145leys;\u612D\u0200aeio\u0189\u018E\u0194\u0198ron;\u410Cdil\u803B\xC7\u40C7rc;\u4108nint;\u6230ot;\u410A\u0100dn\u01A7\u01ADilla;\u40B8terDot;\u40B7\xF2\u017Fi;\u43A7rcle\u0200DMPT\u01C7\u01CB\u01D1\u01D6ot;\u6299inus;\u6296lus;\u6295imes;\u6297o\u0100cs\u01E2\u01F8kwiseContourIntegral;\u6232eCurly\u0100DQ\u0203\u020FoubleQuote;\u601Duote;\u6019\u0200lnpu\u021E\u0228\u0247\u0255on\u0100;e\u0225\u0226\u6237;\u6A74\u0180git\u022F\u0236\u023Aruent;\u6261nt;\u622FourIntegral;\u622E\u0100fr\u024C\u024E;\u6102oduct;\u6210nterClockwiseContourIntegral;\u6233oss;\u6A2Fcr;\uC000\u{1D49E}p\u0100;C\u0284\u0285\u62D3ap;\u624D\u0580DJSZacefios\u02A0\u02AC\u02B0\u02B4\u02B8\u02CB\u02D7\u02E1\u02E6\u0333\u048D\u0100;o\u0179\u02A5trahd;\u6911cy;\u4402cy;\u4405cy;\u440F\u0180grs\u02BF\u02C4\u02C7ger;\u6021r;\u61A1hv;\u6AE4\u0100ay\u02D0\u02D5ron;\u410E;\u4414l\u0100;t\u02DD\u02DE\u6207a;\u4394r;\uC000\u{1D507}\u0100af\u02EB\u0327\u0100cm\u02F0\u0322ritical\u0200ADGT\u0300\u0306\u0316\u031Ccute;\u40B4o\u0174\u030B\u030D;\u42D9bleAcute;\u42DDrave;\u4060ilde;\u42DCond;\u62C4ferentialD;\u6146\u0470\u033D\0\0\0\u0342\u0354\0\u0405f;\uC000\u{1D53B}\u0180;DE\u0348\u0349\u034D\u40A8ot;\u60DCqual;\u6250ble\u0300CDLRUV\u0363\u0372\u0382\u03CF\u03E2\u03F8ontourIntegra\xEC\u0239o\u0274\u0379\0\0\u037B\xBB\u0349nArrow;\u61D3\u0100eo\u0387\u03A4ft\u0180ART\u0390\u0396\u03A1rrow;\u61D0ightArrow;\u61D4e\xE5\u02CAng\u0100LR\u03AB\u03C4eft\u0100AR\u03B3\u03B9rrow;\u67F8ightArrow;\u67FAightArrow;\u67F9ight\u0100AT\u03D8\u03DErrow;\u61D2ee;\u62A8p\u0241\u03E9\0\0\u03EFrrow;\u61D1ownArrow;\u61D5erticalBar;\u6225n\u0300ABLRTa\u0412\u042A\u0430\u045E\u047F\u037Crrow\u0180;BU\u041D\u041E\u0422\u6193ar;\u6913pArrow;\u61F5reve;\u4311eft\u02D2\u043A\0\u0446\0\u0450ightVector;\u6950eeVector;\u695Eector\u0100;B\u0459\u045A\u61BDar;\u6956ight\u01D4\u0467\0\u0471eeVector;\u695Fector\u0100;B\u047A\u047B\u61C1ar;\u6957ee\u0100;A\u0486\u0487\u62A4rrow;\u61A7\u0100ct\u0492\u0497r;\uC000\u{1D49F}rok;\u4110\u0800NTacdfglmopqstux\u04BD\u04C0\u04C4\u04CB\u04DE\u04E2\u04E7\u04EE\u04F5\u0521\u052F\u0536\u0552\u055D\u0560\u0565G;\u414AH\u803B\xD0\u40D0cute\u803B\xC9\u40C9\u0180aiy\u04D2\u04D7\u04DCron;\u411Arc\u803B\xCA\u40CA;\u442Dot;\u4116r;\uC000\u{1D508}rave\u803B\xC8\u40C8ement;\u6208\u0100ap\u04FA\u04FEcr;\u4112ty\u0253\u0506\0\0\u0512mallSquare;\u65FBerySmallSquare;\u65AB\u0100gp\u0526\u052Aon;\u4118f;\uC000\u{1D53C}silon;\u4395u\u0100ai\u053C\u0549l\u0100;T\u0542\u0543\u6A75ilde;\u6242librium;\u61CC\u0100ci\u0557\u055Ar;\u6130m;\u6A73a;\u4397ml\u803B\xCB\u40CB\u0100ip\u056A\u056Fsts;\u6203onentialE;\u6147\u0280cfios\u0585\u0588\u058D\u05B2\u05CCy;\u4424r;\uC000\u{1D509}lled\u0253\u0597\0\0\u05A3mallSquare;\u65FCerySmallSquare;\u65AA\u0370\u05BA\0\u05BF\0\0\u05C4f;\uC000\u{1D53D}All;\u6200riertrf;\u6131c\xF2\u05CB\u0600JTabcdfgorst\u05E8\u05EC\u05EF\u05FA\u0600\u0612\u0616\u061B\u061D\u0623\u066C\u0672cy;\u4403\u803B>\u403Emma\u0100;d\u05F7\u05F8\u4393;\u43DCreve;\u411E\u0180eiy\u0607\u060C\u0610dil;\u4122rc;\u411C;\u4413ot;\u4120r;\uC000\u{1D50A};\u62D9pf;\uC000\u{1D53E}eater\u0300EFGLST\u0635\u0644\u064E\u0656\u065B\u0666qual\u0100;L\u063E\u063F\u6265ess;\u62DBullEqual;\u6267reater;\u6AA2ess;\u6277lantEqual;\u6A7Eilde;\u6273cr;\uC000\u{1D4A2};\u626B\u0400Aacfiosu\u0685\u068B\u0696\u069B\u069E\u06AA\u06BE\u06CARDcy;\u442A\u0100ct\u0690\u0694ek;\u42C7;\u405Eirc;\u4124r;\u610ClbertSpace;\u610B\u01F0\u06AF\0\u06B2f;\u610DizontalLine;\u6500\u0100ct\u06C3\u06C5\xF2\u06A9rok;\u4126mp\u0144\u06D0\u06D8ownHum\xF0\u012Fqual;\u624F\u0700EJOacdfgmnostu\u06FA\u06FE\u0703\u0707\u070E\u071A\u071E\u0721\u0728\u0744\u0778\u078B\u078F\u0795cy;\u4415lig;\u4132cy;\u4401cute\u803B\xCD\u40CD\u0100iy\u0713\u0718rc\u803B\xCE\u40CE;\u4418ot;\u4130r;\u6111rave\u803B\xCC\u40CC\u0180;ap\u0720\u072F\u073F\u0100cg\u0734\u0737r;\u412AinaryI;\u6148lie\xF3\u03DD\u01F4\u0749\0\u0762\u0100;e\u074D\u074E\u622C\u0100gr\u0753\u0758ral;\u622Bsection;\u62C2isible\u0100CT\u076C\u0772omma;\u6063imes;\u6062\u0180gpt\u077F\u0783\u0788on;\u412Ef;\uC000\u{1D540}a;\u4399cr;\u6110ilde;\u4128\u01EB\u079A\0\u079Ecy;\u4406l\u803B\xCF\u40CF\u0280cfosu\u07AC\u07B7\u07BC\u07C2\u07D0\u0100iy\u07B1\u07B5rc;\u4134;\u4419r;\uC000\u{1D50D}pf;\uC000\u{1D541}\u01E3\u07C7\0\u07CCr;\uC000\u{1D4A5}rcy;\u4408kcy;\u4404\u0380HJacfos\u07E4\u07E8\u07EC\u07F1\u07FD\u0802\u0808cy;\u4425cy;\u440Cppa;\u439A\u0100ey\u07F6\u07FBdil;\u4136;\u441Ar;\uC000\u{1D50E}pf;\uC000\u{1D542}cr;\uC000\u{1D4A6}\u0580JTaceflmost\u0825\u0829\u082C\u0850\u0863\u09B3\u09B8\u09C7\u09CD\u0A37\u0A47cy;\u4409\u803B<\u403C\u0280cmnpr\u0837\u083C\u0841\u0844\u084Dute;\u4139bda;\u439Bg;\u67EAlacetrf;\u6112r;\u619E\u0180aey\u0857\u085C\u0861ron;\u413Ddil;\u413B;\u441B\u0100fs\u0868\u0970t\u0500ACDFRTUVar\u087E\u08A9\u08B1\u08E0\u08E6\u08FC\u092F\u095B\u0390\u096A\u0100nr\u0883\u088FgleBracket;\u67E8row\u0180;BR\u0899\u089A\u089E\u6190ar;\u61E4ightArrow;\u61C6eiling;\u6308o\u01F5\u08B7\0\u08C3bleBracket;\u67E6n\u01D4\u08C8\0\u08D2eeVector;\u6961ector\u0100;B\u08DB\u08DC\u61C3ar;\u6959loor;\u630Aight\u0100AV\u08EF\u08F5rrow;\u6194ector;\u694E\u0100er\u0901\u0917e\u0180;AV\u0909\u090A\u0910\u62A3rrow;\u61A4ector;\u695Aiangle\u0180;BE\u0924\u0925\u0929\u62B2ar;\u69CFqual;\u62B4p\u0180DTV\u0937\u0942\u094CownVector;\u6951eeVector;\u6960ector\u0100;B\u0956\u0957\u61BFar;\u6958ector\u0100;B\u0965\u0966\u61BCar;\u6952ight\xE1\u039Cs\u0300EFGLST\u097E\u098B\u0995\u099D\u09A2\u09ADqualGreater;\u62DAullEqual;\u6266reater;\u6276ess;\u6AA1lantEqual;\u6A7Dilde;\u6272r;\uC000\u{1D50F}\u0100;e\u09BD\u09BE\u62D8ftarrow;\u61DAidot;\u413F\u0180npw\u09D4\u0A16\u0A1Bg\u0200LRlr\u09DE\u09F7\u0A02\u0A10eft\u0100AR\u09E6\u09ECrrow;\u67F5ightArrow;\u67F7ightArrow;\u67F6eft\u0100ar\u03B3\u0A0Aight\xE1\u03BFight\xE1\u03CAf;\uC000\u{1D543}er\u0100LR\u0A22\u0A2CeftArrow;\u6199ightArrow;\u6198\u0180cht\u0A3E\u0A40\u0A42\xF2\u084C;\u61B0rok;\u4141;\u626A\u0400acefiosu\u0A5A\u0A5D\u0A60\u0A77\u0A7C\u0A85\u0A8B\u0A8Ep;\u6905y;\u441C\u0100dl\u0A65\u0A6FiumSpace;\u605Flintrf;\u6133r;\uC000\u{1D510}nusPlus;\u6213pf;\uC000\u{1D544}c\xF2\u0A76;\u439C\u0480Jacefostu\u0AA3\u0AA7\u0AAD\u0AC0\u0B14\u0B19\u0D91\u0D97\u0D9Ecy;\u440Acute;\u4143\u0180aey\u0AB4\u0AB9\u0ABEron;\u4147dil;\u4145;\u441D\u0180gsw\u0AC7\u0AF0\u0B0Eative\u0180MTV\u0AD3\u0ADF\u0AE8ediumSpace;\u600Bhi\u0100cn\u0AE6\u0AD8\xEB\u0AD9eryThi\xEE\u0AD9ted\u0100GL\u0AF8\u0B06reaterGreate\xF2\u0673essLes\xF3\u0A48Line;\u400Ar;\uC000\u{1D511}\u0200Bnpt\u0B22\u0B28\u0B37\u0B3Areak;\u6060BreakingSpace;\u40A0f;\u6115\u0680;CDEGHLNPRSTV\u0B55\u0B56\u0B6A\u0B7C\u0BA1\u0BEB\u0C04\u0C5E\u0C84\u0CA6\u0CD8\u0D61\u0D85\u6AEC\u0100ou\u0B5B\u0B64ngruent;\u6262pCap;\u626DoubleVerticalBar;\u6226\u0180lqx\u0B83\u0B8A\u0B9Bement;\u6209ual\u0100;T\u0B92\u0B93\u6260ilde;\uC000\u2242\u0338ists;\u6204reater\u0380;EFGLST\u0BB6\u0BB7\u0BBD\u0BC9\u0BD3\u0BD8\u0BE5\u626Fqual;\u6271ullEqual;\uC000\u2267\u0338reater;\uC000\u226B\u0338ess;\u6279lantEqual;\uC000\u2A7E\u0338ilde;\u6275ump\u0144\u0BF2\u0BFDownHump;\uC000\u224E\u0338qual;\uC000\u224F\u0338e\u0100fs\u0C0A\u0C27tTriangle\u0180;BE\u0C1A\u0C1B\u0C21\u62EAar;\uC000\u29CF\u0338qual;\u62ECs\u0300;EGLST\u0C35\u0C36\u0C3C\u0C44\u0C4B\u0C58\u626Equal;\u6270reater;\u6278ess;\uC000\u226A\u0338lantEqual;\uC000\u2A7D\u0338ilde;\u6274ested\u0100GL\u0C68\u0C79reaterGreater;\uC000\u2AA2\u0338essLess;\uC000\u2AA1\u0338recedes\u0180;ES\u0C92\u0C93\u0C9B\u6280qual;\uC000\u2AAF\u0338lantEqual;\u62E0\u0100ei\u0CAB\u0CB9verseElement;\u620CghtTriangle\u0180;BE\u0CCB\u0CCC\u0CD2\u62EBar;\uC000\u29D0\u0338qual;\u62ED\u0100qu\u0CDD\u0D0CuareSu\u0100bp\u0CE8\u0CF9set\u0100;E\u0CF0\u0CF3\uC000\u228F\u0338qual;\u62E2erset\u0100;E\u0D03\u0D06\uC000\u2290\u0338qual;\u62E3\u0180bcp\u0D13\u0D24\u0D4Eset\u0100;E\u0D1B\u0D1E\uC000\u2282\u20D2qual;\u6288ceeds\u0200;EST\u0D32\u0D33\u0D3B\u0D46\u6281qual;\uC000\u2AB0\u0338lantEqual;\u62E1ilde;\uC000\u227F\u0338erset\u0100;E\u0D58\u0D5B\uC000\u2283\u20D2qual;\u6289ilde\u0200;EFT\u0D6E\u0D6F\u0D75\u0D7F\u6241qual;\u6244ullEqual;\u6247ilde;\u6249erticalBar;\u6224cr;\uC000\u{1D4A9}ilde\u803B\xD1\u40D1;\u439D\u0700Eacdfgmoprstuv\u0DBD\u0DC2\u0DC9\u0DD5\u0DDB\u0DE0\u0DE7\u0DFC\u0E02\u0E20\u0E22\u0E32\u0E3F\u0E44lig;\u4152cute\u803B\xD3\u40D3\u0100iy\u0DCE\u0DD3rc\u803B\xD4\u40D4;\u441Eblac;\u4150r;\uC000\u{1D512}rave\u803B\xD2\u40D2\u0180aei\u0DEE\u0DF2\u0DF6cr;\u414Cga;\u43A9cron;\u439Fpf;\uC000\u{1D546}enCurly\u0100DQ\u0E0E\u0E1AoubleQuote;\u601Cuote;\u6018;\u6A54\u0100cl\u0E27\u0E2Cr;\uC000\u{1D4AA}ash\u803B\xD8\u40D8i\u016C\u0E37\u0E3Cde\u803B\xD5\u40D5es;\u6A37ml\u803B\xD6\u40D6er\u0100BP\u0E4B\u0E60\u0100ar\u0E50\u0E53r;\u603Eac\u0100ek\u0E5A\u0E5C;\u63DEet;\u63B4arenthesis;\u63DC\u0480acfhilors\u0E7F\u0E87\u0E8A\u0E8F\u0E92\u0E94\u0E9D\u0EB0\u0EFCrtialD;\u6202y;\u441Fr;\uC000\u{1D513}i;\u43A6;\u43A0usMinus;\u40B1\u0100ip\u0EA2\u0EADncareplan\xE5\u069Df;\u6119\u0200;eio\u0EB9\u0EBA\u0EE0\u0EE4\u6ABBcedes\u0200;EST\u0EC8\u0EC9\u0ECF\u0EDA\u627Aqual;\u6AAFlantEqual;\u627Cilde;\u627Eme;\u6033\u0100dp\u0EE9\u0EEEuct;\u620Fortion\u0100;a\u0225\u0EF9l;\u621D\u0100ci\u0F01\u0F06r;\uC000\u{1D4AB};\u43A8\u0200Ufos\u0F11\u0F16\u0F1B\u0F1FOT\u803B"\u4022r;\uC000\u{1D514}pf;\u611Acr;\uC000\u{1D4AC}\u0600BEacefhiorsu\u0F3E\u0F43\u0F47\u0F60\u0F73\u0FA7\u0FAA\u0FAD\u1096\u10A9\u10B4\u10BEarr;\u6910G\u803B\xAE\u40AE\u0180cnr\u0F4E\u0F53\u0F56ute;\u4154g;\u67EBr\u0100;t\u0F5C\u0F5D\u61A0l;\u6916\u0180aey\u0F67\u0F6C\u0F71ron;\u4158dil;\u4156;\u4420\u0100;v\u0F78\u0F79\u611Cerse\u0100EU\u0F82\u0F99\u0100lq\u0F87\u0F8Eement;\u620Builibrium;\u61CBpEquilibrium;\u696Fr\xBB\u0F79o;\u43A1ght\u0400ACDFTUVa\u0FC1\u0FEB\u0FF3\u1022\u1028\u105B\u1087\u03D8\u0100nr\u0FC6\u0FD2gleBracket;\u67E9row\u0180;BL\u0FDC\u0FDD\u0FE1\u6192ar;\u61E5eftArrow;\u61C4eiling;\u6309o\u01F5\u0FF9\0\u1005bleBracket;\u67E7n\u01D4\u100A\0\u1014eeVector;\u695Dector\u0100;B\u101D\u101E\u61C2ar;\u6955loor;\u630B\u0100er\u102D\u1043e\u0180;AV\u1035\u1036\u103C\u62A2rrow;\u61A6ector;\u695Biangle\u0180;BE\u1050\u1051\u1055\u62B3ar;\u69D0qual;\u62B5p\u0180DTV\u1063\u106E\u1078ownVector;\u694FeeVector;\u695Cector\u0100;B\u1082\u1083\u61BEar;\u6954ector\u0100;B\u1091\u1092\u61C0ar;\u6953\u0100pu\u109B\u109Ef;\u611DndImplies;\u6970ightarrow;\u61DB\u0100ch\u10B9\u10BCr;\u611B;\u61B1leDelayed;\u69F4\u0680HOacfhimoqstu\u10E4\u10F1\u10F7\u10FD\u1119\u111E\u1151\u1156\u1161\u1167\u11B5\u11BB\u11BF\u0100Cc\u10E9\u10EEHcy;\u4429y;\u4428FTcy;\u442Ccute;\u415A\u0280;aeiy\u1108\u1109\u110E\u1113\u1117\u6ABCron;\u4160dil;\u415Erc;\u415C;\u4421r;\uC000\u{1D516}ort\u0200DLRU\u112A\u1134\u113E\u1149ownArrow\xBB\u041EeftArrow\xBB\u089AightArrow\xBB\u0FDDpArrow;\u6191gma;\u43A3allCircle;\u6218pf;\uC000\u{1D54A}\u0272\u116D\0\0\u1170t;\u621Aare\u0200;ISU\u117B\u117C\u1189\u11AF\u65A1ntersection;\u6293u\u0100bp\u118F\u119Eset\u0100;E\u1197\u1198\u628Fqual;\u6291erset\u0100;E\u11A8\u11A9\u6290qual;\u6292nion;\u6294cr;\uC000\u{1D4AE}ar;\u62C6\u0200bcmp\u11C8\u11DB\u1209\u120B\u0100;s\u11CD\u11CE\u62D0et\u0100;E\u11CD\u11D5qual;\u6286\u0100ch\u11E0\u1205eeds\u0200;EST\u11ED\u11EE\u11F4\u11FF\u627Bqual;\u6AB0lantEqual;\u627Dilde;\u627FTh\xE1\u0F8C;\u6211\u0180;es\u1212\u1213\u1223\u62D1rset\u0100;E\u121C\u121D\u6283qual;\u6287et\xBB\u1213\u0580HRSacfhiors\u123E\u1244\u1249\u1255\u125E\u1271\u1276\u129F\u12C2\u12C8\u12D1ORN\u803B\xDE\u40DEADE;\u6122\u0100Hc\u124E\u1252cy;\u440By;\u4426\u0100bu\u125A\u125C;\u4009;\u43A4\u0180aey\u1265\u126A\u126Fron;\u4164dil;\u4162;\u4422r;\uC000\u{1D517}\u0100ei\u127B\u1289\u01F2\u1280\0\u1287efore;\u6234a;\u4398\u0100cn\u128E\u1298kSpace;\uC000\u205F\u200ASpace;\u6009lde\u0200;EFT\u12AB\u12AC\u12B2\u12BC\u623Cqual;\u6243ullEqual;\u6245ilde;\u6248pf;\uC000\u{1D54B}ipleDot;\u60DB\u0100ct\u12D6\u12DBr;\uC000\u{1D4AF}rok;\u4166\u0AE1\u12F7\u130E\u131A\u1326\0\u132C\u1331\0\0\0\0\0\u1338\u133D\u1377\u1385\0\u13FF\u1404\u140A\u1410\u0100cr\u12FB\u1301ute\u803B\xDA\u40DAr\u0100;o\u1307\u1308\u619Fcir;\u6949r\u01E3\u1313\0\u1316y;\u440Eve;\u416C\u0100iy\u131E\u1323rc\u803B\xDB\u40DB;\u4423blac;\u4170r;\uC000\u{1D518}rave\u803B\xD9\u40D9acr;\u416A\u0100di\u1341\u1369er\u0100BP\u1348\u135D\u0100ar\u134D\u1350r;\u405Fac\u0100ek\u1357\u1359;\u63DFet;\u63B5arenthesis;\u63DDon\u0100;P\u1370\u1371\u62C3lus;\u628E\u0100gp\u137B\u137Fon;\u4172f;\uC000\u{1D54C}\u0400ADETadps\u1395\u13AE\u13B8\u13C4\u03E8\u13D2\u13D7\u13F3rrow\u0180;BD\u1150\u13A0\u13A4ar;\u6912ownArrow;\u61C5ownArrow;\u6195quilibrium;\u696Eee\u0100;A\u13CB\u13CC\u62A5rrow;\u61A5own\xE1\u03F3er\u0100LR\u13DE\u13E8eftArrow;\u6196ightArrow;\u6197i\u0100;l\u13F9\u13FA\u43D2on;\u43A5ing;\u416Ecr;\uC000\u{1D4B0}ilde;\u4168ml\u803B\xDC\u40DC\u0480Dbcdefosv\u1427\u142C\u1430\u1433\u143E\u1485\u148A\u1490\u1496ash;\u62ABar;\u6AEBy;\u4412ash\u0100;l\u143B\u143C\u62A9;\u6AE6\u0100er\u1443\u1445;\u62C1\u0180bty\u144C\u1450\u147Aar;\u6016\u0100;i\u144F\u1455cal\u0200BLST\u1461\u1465\u146A\u1474ar;\u6223ine;\u407Ceparator;\u6758ilde;\u6240ThinSpace;\u600Ar;\uC000\u{1D519}pf;\uC000\u{1D54D}cr;\uC000\u{1D4B1}dash;\u62AA\u0280cefos\u14A7\u14AC\u14B1\u14B6\u14BCirc;\u4174dge;\u62C0r;\uC000\u{1D51A}pf;\uC000\u{1D54E}cr;\uC000\u{1D4B2}\u0200fios\u14CB\u14D0\u14D2\u14D8r;\uC000\u{1D51B};\u439Epf;\uC000\u{1D54F}cr;\uC000\u{1D4B3}\u0480AIUacfosu\u14F1\u14F5\u14F9\u14FD\u1504\u150F\u1514\u151A\u1520cy;\u442Fcy;\u4407cy;\u442Ecute\u803B\xDD\u40DD\u0100iy\u1509\u150Drc;\u4176;\u442Br;\uC000\u{1D51C}pf;\uC000\u{1D550}cr;\uC000\u{1D4B4}ml;\u4178\u0400Hacdefos\u1535\u1539\u153F\u154B\u154F\u155D\u1560\u1564cy;\u4416cute;\u4179\u0100ay\u1544\u1549ron;\u417D;\u4417ot;\u417B\u01F2\u1554\0\u155BoWidt\xE8\u0AD9a;\u4396r;\u6128pf;\u6124cr;\uC000\u{1D4B5}\u0BE1\u1583\u158A\u1590\0\u15B0\u15B6\u15BF\0\0\0\0\u15C6\u15DB\u15EB\u165F\u166D\0\u1695\u169B\u16B2\u16B9\0\u16BEcute\u803B\xE1\u40E1reve;\u4103\u0300;Ediuy\u159C\u159D\u15A1\u15A3\u15A8\u15AD\u623E;\uC000\u223E\u0333;\u623Frc\u803B\xE2\u40E2te\u80BB\xB4\u0306;\u4430lig\u803B\xE6\u40E6\u0100;r\xB2\u15BA;\uC000\u{1D51E}rave\u803B\xE0\u40E0\u0100ep\u15CA\u15D6\u0100fp\u15CF\u15D4sym;\u6135\xE8\u15D3ha;\u43B1\u0100ap\u15DFc\u0100cl\u15E4\u15E7r;\u4101g;\u6A3F\u0264\u15F0\0\0\u160A\u0280;adsv\u15FA\u15FB\u15FF\u1601\u1607\u6227nd;\u6A55;\u6A5Clope;\u6A58;\u6A5A\u0380;elmrsz\u1618\u1619\u161B\u161E\u163F\u164F\u1659\u6220;\u69A4e\xBB\u1619sd\u0100;a\u1625\u1626\u6221\u0461\u1630\u1632\u1634\u1636\u1638\u163A\u163C\u163E;\u69A8;\u69A9;\u69AA;\u69AB;\u69AC;\u69AD;\u69AE;\u69AFt\u0100;v\u1645\u1646\u621Fb\u0100;d\u164C\u164D\u62BE;\u699D\u0100pt\u1654\u1657h;\u6222\xBB\xB9arr;\u637C\u0100gp\u1663\u1667on;\u4105f;\uC000\u{1D552}\u0380;Eaeiop\u12C1\u167B\u167D\u1682\u1684\u1687\u168A;\u6A70cir;\u6A6F;\u624Ad;\u624Bs;\u4027rox\u0100;e\u12C1\u1692\xF1\u1683ing\u803B\xE5\u40E5\u0180cty\u16A1\u16A6\u16A8r;\uC000\u{1D4B6};\u402Amp\u0100;e\u12C1\u16AF\xF1\u0288ilde\u803B\xE3\u40E3ml\u803B\xE4\u40E4\u0100ci\u16C2\u16C8onin\xF4\u0272nt;\u6A11\u0800Nabcdefiklnoprsu\u16ED\u16F1\u1730\u173C\u1743\u1748\u1778\u177D\u17E0\u17E6\u1839\u1850\u170D\u193D\u1948\u1970ot;\u6AED\u0100cr\u16F6\u171Ek\u0200ceps\u1700\u1705\u170D\u1713ong;\u624Cpsilon;\u43F6rime;\u6035im\u0100;e\u171A\u171B\u623Dq;\u62CD\u0176\u1722\u1726ee;\u62BDed\u0100;g\u172C\u172D\u6305e\xBB\u172Drk\u0100;t\u135C\u1737brk;\u63B6\u0100oy\u1701\u1741;\u4431quo;\u601E\u0280cmprt\u1753\u175B\u1761\u1764\u1768aus\u0100;e\u010A\u0109ptyv;\u69B0s\xE9\u170Cno\xF5\u0113\u0180ahw\u176F\u1771\u1773;\u43B2;\u6136een;\u626Cr;\uC000\u{1D51F}g\u0380costuvw\u178D\u179D\u17B3\u17C1\u17D5\u17DB\u17DE\u0180aiu\u1794\u1796\u179A\xF0\u0760rc;\u65EFp\xBB\u1371\u0180dpt\u17A4\u17A8\u17ADot;\u6A00lus;\u6A01imes;\u6A02\u0271\u17B9\0\0\u17BEcup;\u6A06ar;\u6605riangle\u0100du\u17CD\u17D2own;\u65BDp;\u65B3plus;\u6A04e\xE5\u1444\xE5\u14ADarow;\u690D\u0180ako\u17ED\u1826\u1835\u0100cn\u17F2\u1823k\u0180lst\u17FA\u05AB\u1802ozenge;\u69EBriangle\u0200;dlr\u1812\u1813\u1818\u181D\u65B4own;\u65BEeft;\u65C2ight;\u65B8k;\u6423\u01B1\u182B\0\u1833\u01B2\u182F\0\u1831;\u6592;\u65914;\u6593ck;\u6588\u0100eo\u183E\u184D\u0100;q\u1843\u1846\uC000=\u20E5uiv;\uC000\u2261\u20E5t;\u6310\u0200ptwx\u1859\u185E\u1867\u186Cf;\uC000\u{1D553}\u0100;t\u13CB\u1863om\xBB\u13CCtie;\u62C8\u0600DHUVbdhmptuv\u1885\u1896\u18AA\u18BB\u18D7\u18DB\u18EC\u18FF\u1905\u190A\u1910\u1921\u0200LRlr\u188E\u1890\u1892\u1894;\u6557;\u6554;\u6556;\u6553\u0280;DUdu\u18A1\u18A2\u18A4\u18A6\u18A8\u6550;\u6566;\u6569;\u6564;\u6567\u0200LRlr\u18B3\u18B5\u18B7\u18B9;\u655D;\u655A;\u655C;\u6559\u0380;HLRhlr\u18CA\u18CB\u18CD\u18CF\u18D1\u18D3\u18D5\u6551;\u656C;\u6563;\u6560;\u656B;\u6562;\u655Fox;\u69C9\u0200LRlr\u18E4\u18E6\u18E8\u18EA;\u6555;\u6552;\u6510;\u650C\u0280;DUdu\u06BD\u18F7\u18F9\u18FB\u18FD;\u6565;\u6568;\u652C;\u6534inus;\u629Flus;\u629Eimes;\u62A0\u0200LRlr\u1919\u191B\u191D\u191F;\u655B;\u6558;\u6518;\u6514\u0380;HLRhlr\u1930\u1931\u1933\u1935\u1937\u1939\u193B\u6502;\u656A;\u6561;\u655E;\u653C;\u6524;\u651C\u0100ev\u0123\u1942bar\u803B\xA6\u40A6\u0200ceio\u1951\u1956\u195A\u1960r;\uC000\u{1D4B7}mi;\u604Fm\u0100;e\u171A\u171Cl\u0180;bh\u1968\u1969\u196B\u405C;\u69C5sub;\u67C8\u016C\u1974\u197El\u0100;e\u1979\u197A\u6022t\xBB\u197Ap\u0180;Ee\u012F\u1985\u1987;\u6AAE\u0100;q\u06DC\u06DB\u0CE1\u19A7\0\u19E8\u1A11\u1A15\u1A32\0\u1A37\u1A50\0\0\u1AB4\0\0\u1AC1\0\0\u1B21\u1B2E\u1B4D\u1B52\0\u1BFD\0\u1C0C\u0180cpr\u19AD\u19B2\u19DDute;\u4107\u0300;abcds\u19BF\u19C0\u19C4\u19CA\u19D5\u19D9\u6229nd;\u6A44rcup;\u6A49\u0100au\u19CF\u19D2p;\u6A4Bp;\u6A47ot;\u6A40;\uC000\u2229\uFE00\u0100eo\u19E2\u19E5t;\u6041\xEE\u0693\u0200aeiu\u19F0\u19FB\u1A01\u1A05\u01F0\u19F5\0\u19F8s;\u6A4Don;\u410Ddil\u803B\xE7\u40E7rc;\u4109ps\u0100;s\u1A0C\u1A0D\u6A4Cm;\u6A50ot;\u410B\u0180dmn\u1A1B\u1A20\u1A26il\u80BB\xB8\u01ADptyv;\u69B2t\u8100\xA2;e\u1A2D\u1A2E\u40A2r\xE4\u01B2r;\uC000\u{1D520}\u0180cei\u1A3D\u1A40\u1A4Dy;\u4447ck\u0100;m\u1A47\u1A48\u6713ark\xBB\u1A48;\u43C7r\u0380;Ecefms\u1A5F\u1A60\u1A62\u1A6B\u1AA4\u1AAA\u1AAE\u65CB;\u69C3\u0180;el\u1A69\u1A6A\u1A6D\u42C6q;\u6257e\u0261\u1A74\0\0\u1A88rrow\u0100lr\u1A7C\u1A81eft;\u61BAight;\u61BB\u0280RSacd\u1A92\u1A94\u1A96\u1A9A\u1A9F\xBB\u0F47;\u64C8st;\u629Birc;\u629Aash;\u629Dnint;\u6A10id;\u6AEFcir;\u69C2ubs\u0100;u\u1ABB\u1ABC\u6663it\xBB\u1ABC\u02EC\u1AC7\u1AD4\u1AFA\0\u1B0Aon\u0100;e\u1ACD\u1ACE\u403A\u0100;q\xC7\xC6\u026D\u1AD9\0\0\u1AE2a\u0100;t\u1ADE\u1ADF\u402C;\u4040\u0180;fl\u1AE8\u1AE9\u1AEB\u6201\xEE\u1160e\u0100mx\u1AF1\u1AF6ent\xBB\u1AE9e\xF3\u024D\u01E7\u1AFE\0\u1B07\u0100;d\u12BB\u1B02ot;\u6A6Dn\xF4\u0246\u0180fry\u1B10\u1B14\u1B17;\uC000\u{1D554}o\xE4\u0254\u8100\xA9;s\u0155\u1B1Dr;\u6117\u0100ao\u1B25\u1B29rr;\u61B5ss;\u6717\u0100cu\u1B32\u1B37r;\uC000\u{1D4B8}\u0100bp\u1B3C\u1B44\u0100;e\u1B41\u1B42\u6ACF;\u6AD1\u0100;e\u1B49\u1B4A\u6AD0;\u6AD2dot;\u62EF\u0380delprvw\u1B60\u1B6C\u1B77\u1B82\u1BAC\u1BD4\u1BF9arr\u0100lr\u1B68\u1B6A;\u6938;\u6935\u0270\u1B72\0\0\u1B75r;\u62DEc;\u62DFarr\u0100;p\u1B7F\u1B80\u61B6;\u693D\u0300;bcdos\u1B8F\u1B90\u1B96\u1BA1\u1BA5\u1BA8\u622Arcap;\u6A48\u0100au\u1B9B\u1B9Ep;\u6A46p;\u6A4Aot;\u628Dr;\u6A45;\uC000\u222A\uFE00\u0200alrv\u1BB5\u1BBF\u1BDE\u1BE3rr\u0100;m\u1BBC\u1BBD\u61B7;\u693Cy\u0180evw\u1BC7\u1BD4\u1BD8q\u0270\u1BCE\0\0\u1BD2re\xE3\u1B73u\xE3\u1B75ee;\u62CEedge;\u62CFen\u803B\xA4\u40A4earrow\u0100lr\u1BEE\u1BF3eft\xBB\u1B80ight\xBB\u1BBDe\xE4\u1BDD\u0100ci\u1C01\u1C07onin\xF4\u01F7nt;\u6231lcty;\u632D\u0980AHabcdefhijlorstuwz\u1C38\u1C3B\u1C3F\u1C5D\u1C69\u1C75\u1C8A\u1C9E\u1CAC\u1CB7\u1CFB\u1CFF\u1D0D\u1D7B\u1D91\u1DAB\u1DBB\u1DC6\u1DCDr\xF2\u0381ar;\u6965\u0200glrs\u1C48\u1C4D\u1C52\u1C54ger;\u6020eth;\u6138\xF2\u1133h\u0100;v\u1C5A\u1C5B\u6010\xBB\u090A\u016B\u1C61\u1C67arow;\u690Fa\xE3\u0315\u0100ay\u1C6E\u1C73ron;\u410F;\u4434\u0180;ao\u0332\u1C7C\u1C84\u0100gr\u02BF\u1C81r;\u61CAtseq;\u6A77\u0180glm\u1C91\u1C94\u1C98\u803B\xB0\u40B0ta;\u43B4ptyv;\u69B1\u0100ir\u1CA3\u1CA8sht;\u697F;\uC000\u{1D521}ar\u0100lr\u1CB3\u1CB5\xBB\u08DC\xBB\u101E\u0280aegsv\u1CC2\u0378\u1CD6\u1CDC\u1CE0m\u0180;os\u0326\u1CCA\u1CD4nd\u0100;s\u0326\u1CD1uit;\u6666amma;\u43DDin;\u62F2\u0180;io\u1CE7\u1CE8\u1CF8\u40F7de\u8100\xF7;o\u1CE7\u1CF0ntimes;\u62C7n\xF8\u1CF7cy;\u4452c\u026F\u1D06\0\0\u1D0Arn;\u631Eop;\u630D\u0280lptuw\u1D18\u1D1D\u1D22\u1D49\u1D55lar;\u4024f;\uC000\u{1D555}\u0280;emps\u030B\u1D2D\u1D37\u1D3D\u1D42q\u0100;d\u0352\u1D33ot;\u6251inus;\u6238lus;\u6214quare;\u62A1blebarwedg\xE5\xFAn\u0180adh\u112E\u1D5D\u1D67ownarrow\xF3\u1C83arpoon\u0100lr\u1D72\u1D76ef\xF4\u1CB4igh\xF4\u1CB6\u0162\u1D7F\u1D85karo\xF7\u0F42\u026F\u1D8A\0\0\u1D8Ern;\u631Fop;\u630C\u0180cot\u1D98\u1DA3\u1DA6\u0100ry\u1D9D\u1DA1;\uC000\u{1D4B9};\u4455l;\u69F6rok;\u4111\u0100dr\u1DB0\u1DB4ot;\u62F1i\u0100;f\u1DBA\u1816\u65BF\u0100ah\u1DC0\u1DC3r\xF2\u0429a\xF2\u0FA6angle;\u69A6\u0100ci\u1DD2\u1DD5y;\u445Fgrarr;\u67FF\u0900Dacdefglmnopqrstux\u1E01\u1E09\u1E19\u1E38\u0578\u1E3C\u1E49\u1E61\u1E7E\u1EA5\u1EAF\u1EBD\u1EE1\u1F2A\u1F37\u1F44\u1F4E\u1F5A\u0100Do\u1E06\u1D34o\xF4\u1C89\u0100cs\u1E0E\u1E14ute\u803B\xE9\u40E9ter;\u6A6E\u0200aioy\u1E22\u1E27\u1E31\u1E36ron;\u411Br\u0100;c\u1E2D\u1E2E\u6256\u803B\xEA\u40EAlon;\u6255;\u444Dot;\u4117\u0100Dr\u1E41\u1E45ot;\u6252;\uC000\u{1D522}\u0180;rs\u1E50\u1E51\u1E57\u6A9Aave\u803B\xE8\u40E8\u0100;d\u1E5C\u1E5D\u6A96ot;\u6A98\u0200;ils\u1E6A\u1E6B\u1E72\u1E74\u6A99nters;\u63E7;\u6113\u0100;d\u1E79\u1E7A\u6A95ot;\u6A97\u0180aps\u1E85\u1E89\u1E97cr;\u4113ty\u0180;sv\u1E92\u1E93\u1E95\u6205et\xBB\u1E93p\u01001;\u1E9D\u1EA4\u0133\u1EA1\u1EA3;\u6004;\u6005\u6003\u0100gs\u1EAA\u1EAC;\u414Bp;\u6002\u0100gp\u1EB4\u1EB8on;\u4119f;\uC000\u{1D556}\u0180als\u1EC4\u1ECE\u1ED2r\u0100;s\u1ECA\u1ECB\u62D5l;\u69E3us;\u6A71i\u0180;lv\u1EDA\u1EDB\u1EDF\u43B5on\xBB\u1EDB;\u43F5\u0200csuv\u1EEA\u1EF3\u1F0B\u1F23\u0100io\u1EEF\u1E31rc\xBB\u1E2E\u0269\u1EF9\0\0\u1EFB\xED\u0548ant\u0100gl\u1F02\u1F06tr\xBB\u1E5Dess\xBB\u1E7A\u0180aei\u1F12\u1F16\u1F1Als;\u403Dst;\u625Fv\u0100;D\u0235\u1F20D;\u6A78parsl;\u69E5\u0100Da\u1F2F\u1F33ot;\u6253rr;\u6971\u0180cdi\u1F3E\u1F41\u1EF8r;\u612Fo\xF4\u0352\u0100ah\u1F49\u1F4B;\u43B7\u803B\xF0\u40F0\u0100mr\u1F53\u1F57l\u803B\xEB\u40EBo;\u60AC\u0180cip\u1F61\u1F64\u1F67l;\u4021s\xF4\u056E\u0100eo\u1F6C\u1F74ctatio\xEE\u0559nential\xE5\u0579\u09E1\u1F92\0\u1F9E\0\u1FA1\u1FA7\0\0\u1FC6\u1FCC\0\u1FD3\0\u1FE6\u1FEA\u2000\0\u2008\u205Allingdotse\xF1\u1E44y;\u4444male;\u6640\u0180ilr\u1FAD\u1FB3\u1FC1lig;\u8000\uFB03\u0269\u1FB9\0\0\u1FBDg;\u8000\uFB00ig;\u8000\uFB04;\uC000\u{1D523}lig;\u8000\uFB01lig;\uC000fj\u0180alt\u1FD9\u1FDC\u1FE1t;\u666Dig;\u8000\uFB02ns;\u65B1of;\u4192\u01F0\u1FEE\0\u1FF3f;\uC000\u{1D557}\u0100ak\u05BF\u1FF7\u0100;v\u1FFC\u1FFD\u62D4;\u6AD9artint;\u6A0D\u0100ao\u200C\u2055\u0100cs\u2011\u2052\u03B1\u201A\u2030\u2038\u2045\u2048\0\u2050\u03B2\u2022\u2025\u2027\u202A\u202C\0\u202E\u803B\xBD\u40BD;\u6153\u803B\xBC\u40BC;\u6155;\u6159;\u615B\u01B3\u2034\0\u2036;\u6154;\u6156\u02B4\u203E\u2041\0\0\u2043\u803B\xBE\u40BE;\u6157;\u615C5;\u6158\u01B6\u204C\0\u204E;\u615A;\u615D8;\u615El;\u6044wn;\u6322cr;\uC000\u{1D4BB}\u0880Eabcdefgijlnorstv\u2082\u2089\u209F\u20A5\u20B0\u20B4\u20F0\u20F5\u20FA\u20FF\u2103\u2112\u2138\u0317\u213E\u2152\u219E\u0100;l\u064D\u2087;\u6A8C\u0180cmp\u2090\u2095\u209Dute;\u41F5ma\u0100;d\u209C\u1CDA\u43B3;\u6A86reve;\u411F\u0100iy\u20AA\u20AErc;\u411D;\u4433ot;\u4121\u0200;lqs\u063E\u0642\u20BD\u20C9\u0180;qs\u063E\u064C\u20C4lan\xF4\u0665\u0200;cdl\u0665\u20D2\u20D5\u20E5c;\u6AA9ot\u0100;o\u20DC\u20DD\u6A80\u0100;l\u20E2\u20E3\u6A82;\u6A84\u0100;e\u20EA\u20ED\uC000\u22DB\uFE00s;\u6A94r;\uC000\u{1D524}\u0100;g\u0673\u061Bmel;\u6137cy;\u4453\u0200;Eaj\u065A\u210C\u210E\u2110;\u6A92;\u6AA5;\u6AA4\u0200Eaes\u211B\u211D\u2129\u2134;\u6269p\u0100;p\u2123\u2124\u6A8Arox\xBB\u2124\u0100;q\u212E\u212F\u6A88\u0100;q\u212E\u211Bim;\u62E7pf;\uC000\u{1D558}\u0100ci\u2143\u2146r;\u610Am\u0180;el\u066B\u214E\u2150;\u6A8E;\u6A90\u8300>;cdlqr\u05EE\u2160\u216A\u216E\u2173\u2179\u0100ci\u2165\u2167;\u6AA7r;\u6A7Aot;\u62D7Par;\u6995uest;\u6A7C\u0280adels\u2184\u216A\u2190\u0656\u219B\u01F0\u2189\0\u218Epro\xF8\u209Er;\u6978q\u0100lq\u063F\u2196les\xF3\u2088i\xED\u066B\u0100en\u21A3\u21ADrtneqq;\uC000\u2269\uFE00\xC5\u21AA\u0500Aabcefkosy\u21C4\u21C7\u21F1\u21F5\u21FA\u2218\u221D\u222F\u2268\u227Dr\xF2\u03A0\u0200ilmr\u21D0\u21D4\u21D7\u21DBrs\xF0\u1484f\xBB\u2024il\xF4\u06A9\u0100dr\u21E0\u21E4cy;\u444A\u0180;cw\u08F4\u21EB\u21EFir;\u6948;\u61ADar;\u610Firc;\u4125\u0180alr\u2201\u220E\u2213rts\u0100;u\u2209\u220A\u6665it\xBB\u220Alip;\u6026con;\u62B9r;\uC000\u{1D525}s\u0100ew\u2223\u2229arow;\u6925arow;\u6926\u0280amopr\u223A\u223E\u2243\u225E\u2263rr;\u61FFtht;\u623Bk\u0100lr\u2249\u2253eftarrow;\u61A9ightarrow;\u61AAf;\uC000\u{1D559}bar;\u6015\u0180clt\u226F\u2274\u2278r;\uC000\u{1D4BD}as\xE8\u21F4rok;\u4127\u0100bp\u2282\u2287ull;\u6043hen\xBB\u1C5B\u0AE1\u22A3\0\u22AA\0\u22B8\u22C5\u22CE\0\u22D5\u22F3\0\0\u22F8\u2322\u2367\u2362\u237F\0\u2386\u23AA\u23B4cute\u803B\xED\u40ED\u0180;iy\u0771\u22B0\u22B5rc\u803B\xEE\u40EE;\u4438\u0100cx\u22BC\u22BFy;\u4435cl\u803B\xA1\u40A1\u0100fr\u039F\u22C9;\uC000\u{1D526}rave\u803B\xEC\u40EC\u0200;ino\u073E\u22DD\u22E9\u22EE\u0100in\u22E2\u22E6nt;\u6A0Ct;\u622Dfin;\u69DCta;\u6129lig;\u4133\u0180aop\u22FE\u231A\u231D\u0180cgt\u2305\u2308\u2317r;\u412B\u0180elp\u071F\u230F\u2313in\xE5\u078Ear\xF4\u0720h;\u4131f;\u62B7ed;\u41B5\u0280;cfot\u04F4\u232C\u2331\u233D\u2341are;\u6105in\u0100;t\u2338\u2339\u621Eie;\u69DDdo\xF4\u2319\u0280;celp\u0757\u234C\u2350\u235B\u2361al;\u62BA\u0100gr\u2355\u2359er\xF3\u1563\xE3\u234Darhk;\u6A17rod;\u6A3C\u0200cgpt\u236F\u2372\u2376\u237By;\u4451on;\u412Ff;\uC000\u{1D55A}a;\u43B9uest\u803B\xBF\u40BF\u0100ci\u238A\u238Fr;\uC000\u{1D4BE}n\u0280;Edsv\u04F4\u239B\u239D\u23A1\u04F3;\u62F9ot;\u62F5\u0100;v\u23A6\u23A7\u62F4;\u62F3\u0100;i\u0777\u23AElde;\u4129\u01EB\u23B8\0\u23BCcy;\u4456l\u803B\xEF\u40EF\u0300cfmosu\u23CC\u23D7\u23DC\u23E1\u23E7\u23F5\u0100iy\u23D1\u23D5rc;\u4135;\u4439r;\uC000\u{1D527}ath;\u4237pf;\uC000\u{1D55B}\u01E3\u23EC\0\u23F1r;\uC000\u{1D4BF}rcy;\u4458kcy;\u4454\u0400acfghjos\u240B\u2416\u2422\u2427\u242D\u2431\u2435\u243Bppa\u0100;v\u2413\u2414\u43BA;\u43F0\u0100ey\u241B\u2420dil;\u4137;\u443Ar;\uC000\u{1D528}reen;\u4138cy;\u4445cy;\u445Cpf;\uC000\u{1D55C}cr;\uC000\u{1D4C0}\u0B80ABEHabcdefghjlmnoprstuv\u2470\u2481\u2486\u248D\u2491\u250E\u253D\u255A\u2580\u264E\u265E\u2665\u2679\u267D\u269A\u26B2\u26D8\u275D\u2768\u278B\u27C0\u2801\u2812\u0180art\u2477\u247A\u247Cr\xF2\u09C6\xF2\u0395ail;\u691Barr;\u690E\u0100;g\u0994\u248B;\u6A8Bar;\u6962\u0963\u24A5\0\u24AA\0\u24B1\0\0\0\0\0\u24B5\u24BA\0\u24C6\u24C8\u24CD\0\u24F9ute;\u413Amptyv;\u69B4ra\xEE\u084Cbda;\u43BBg\u0180;dl\u088E\u24C1\u24C3;\u6991\xE5\u088E;\u6A85uo\u803B\xAB\u40ABr\u0400;bfhlpst\u0899\u24DE\u24E6\u24E9\u24EB\u24EE\u24F1\u24F5\u0100;f\u089D\u24E3s;\u691Fs;\u691D\xEB\u2252p;\u61ABl;\u6939im;\u6973l;\u61A2\u0180;ae\u24FF\u2500\u2504\u6AABil;\u6919\u0100;s\u2509\u250A\u6AAD;\uC000\u2AAD\uFE00\u0180abr\u2515\u2519\u251Drr;\u690Crk;\u6772\u0100ak\u2522\u252Cc\u0100ek\u2528\u252A;\u407B;\u405B\u0100es\u2531\u2533;\u698Bl\u0100du\u2539\u253B;\u698F;\u698D\u0200aeuy\u2546\u254B\u2556\u2558ron;\u413E\u0100di\u2550\u2554il;\u413C\xEC\u08B0\xE2\u2529;\u443B\u0200cqrs\u2563\u2566\u256D\u257Da;\u6936uo\u0100;r\u0E19\u1746\u0100du\u2572\u2577har;\u6967shar;\u694Bh;\u61B2\u0280;fgqs\u258B\u258C\u0989\u25F3\u25FF\u6264t\u0280ahlrt\u2598\u25A4\u25B7\u25C2\u25E8rrow\u0100;t\u0899\u25A1a\xE9\u24F6arpoon\u0100du\u25AF\u25B4own\xBB\u045Ap\xBB\u0966eftarrows;\u61C7ight\u0180ahs\u25CD\u25D6\u25DErrow\u0100;s\u08F4\u08A7arpoon\xF3\u0F98quigarro\xF7\u21F0hreetimes;\u62CB\u0180;qs\u258B\u0993\u25FAlan\xF4\u09AC\u0280;cdgs\u09AC\u260A\u260D\u261D\u2628c;\u6AA8ot\u0100;o\u2614\u2615\u6A7F\u0100;r\u261A\u261B\u6A81;\u6A83\u0100;e\u2622\u2625\uC000\u22DA\uFE00s;\u6A93\u0280adegs\u2633\u2639\u263D\u2649\u264Bppro\xF8\u24C6ot;\u62D6q\u0100gq\u2643\u2645\xF4\u0989gt\xF2\u248C\xF4\u099Bi\xED\u09B2\u0180ilr\u2655\u08E1\u265Asht;\u697C;\uC000\u{1D529}\u0100;E\u099C\u2663;\u6A91\u0161\u2669\u2676r\u0100du\u25B2\u266E\u0100;l\u0965\u2673;\u696Alk;\u6584cy;\u4459\u0280;acht\u0A48\u2688\u268B\u2691\u2696r\xF2\u25C1orne\xF2\u1D08ard;\u696Bri;\u65FA\u0100io\u269F\u26A4dot;\u4140ust\u0100;a\u26AC\u26AD\u63B0che\xBB\u26AD\u0200Eaes\u26BB\u26BD\u26C9\u26D4;\u6268p\u0100;p\u26C3\u26C4\u6A89rox\xBB\u26C4\u0100;q\u26CE\u26CF\u6A87\u0100;q\u26CE\u26BBim;\u62E6\u0400abnoptwz\u26E9\u26F4\u26F7\u271A\u272F\u2741\u2747\u2750\u0100nr\u26EE\u26F1g;\u67ECr;\u61FDr\xEB\u08C1g\u0180lmr\u26FF\u270D\u2714eft\u0100ar\u09E6\u2707ight\xE1\u09F2apsto;\u67FCight\xE1\u09FDparrow\u0100lr\u2725\u2729ef\xF4\u24EDight;\u61AC\u0180afl\u2736\u2739\u273Dr;\u6985;\uC000\u{1D55D}us;\u6A2Dimes;\u6A34\u0161\u274B\u274Fst;\u6217\xE1\u134E\u0180;ef\u2757\u2758\u1800\u65CAnge\xBB\u2758ar\u0100;l\u2764\u2765\u4028t;\u6993\u0280achmt\u2773\u2776\u277C\u2785\u2787r\xF2\u08A8orne\xF2\u1D8Car\u0100;d\u0F98\u2783;\u696D;\u600Eri;\u62BF\u0300achiqt\u2798\u279D\u0A40\u27A2\u27AE\u27BBquo;\u6039r;\uC000\u{1D4C1}m\u0180;eg\u09B2\u27AA\u27AC;\u6A8D;\u6A8F\u0100bu\u252A\u27B3o\u0100;r\u0E1F\u27B9;\u601Arok;\u4142\u8400<;cdhilqr\u082B\u27D2\u2639\u27DC\u27E0\u27E5\u27EA\u27F0\u0100ci\u27D7\u27D9;\u6AA6r;\u6A79re\xE5\u25F2mes;\u62C9arr;\u6976uest;\u6A7B\u0100Pi\u27F5\u27F9ar;\u6996\u0180;ef\u2800\u092D\u181B\u65C3r\u0100du\u2807\u280Dshar;\u694Ahar;\u6966\u0100en\u2817\u2821rtneqq;\uC000\u2268\uFE00\xC5\u281E\u0700Dacdefhilnopsu\u2840\u2845\u2882\u288E\u2893\u28A0\u28A5\u28A8\u28DA\u28E2\u28E4\u0A83\u28F3\u2902Dot;\u623A\u0200clpr\u284E\u2852\u2863\u287Dr\u803B\xAF\u40AF\u0100et\u2857\u2859;\u6642\u0100;e\u285E\u285F\u6720se\xBB\u285F\u0100;s\u103B\u2868to\u0200;dlu\u103B\u2873\u2877\u287Bow\xEE\u048Cef\xF4\u090F\xF0\u13D1ker;\u65AE\u0100oy\u2887\u288Cmma;\u6A29;\u443Cash;\u6014asuredangle\xBB\u1626r;\uC000\u{1D52A}o;\u6127\u0180cdn\u28AF\u28B4\u28C9ro\u803B\xB5\u40B5\u0200;acd\u1464\u28BD\u28C0\u28C4s\xF4\u16A7ir;\u6AF0ot\u80BB\xB7\u01B5us\u0180;bd\u28D2\u1903\u28D3\u6212\u0100;u\u1D3C\u28D8;\u6A2A\u0163\u28DE\u28E1p;\u6ADB\xF2\u2212\xF0\u0A81\u0100dp\u28E9\u28EEels;\u62A7f;\uC000\u{1D55E}\u0100ct\u28F8\u28FDr;\uC000\u{1D4C2}pos\xBB\u159D\u0180;lm\u2909\u290A\u290D\u43BCtimap;\u62B8\u0C00GLRVabcdefghijlmoprstuvw\u2942\u2953\u297E\u2989\u2998\u29DA\u29E9\u2A15\u2A1A\u2A58\u2A5D\u2A83\u2A95\u2AA4\u2AA8\u2B04\u2B07\u2B44\u2B7F\u2BAE\u2C34\u2C67\u2C7C\u2CE9\u0100gt\u2947\u294B;\uC000\u22D9\u0338\u0100;v\u2950\u0BCF\uC000\u226B\u20D2\u0180elt\u295A\u2972\u2976ft\u0100ar\u2961\u2967rrow;\u61CDightarrow;\u61CE;\uC000\u22D8\u0338\u0100;v\u297B\u0C47\uC000\u226A\u20D2ightarrow;\u61CF\u0100Dd\u298E\u2993ash;\u62AFash;\u62AE\u0280bcnpt\u29A3\u29A7\u29AC\u29B1\u29CCla\xBB\u02DEute;\u4144g;\uC000\u2220\u20D2\u0280;Eiop\u0D84\u29BC\u29C0\u29C5\u29C8;\uC000\u2A70\u0338d;\uC000\u224B\u0338s;\u4149ro\xF8\u0D84ur\u0100;a\u29D3\u29D4\u666El\u0100;s\u29D3\u0B38\u01F3\u29DF\0\u29E3p\u80BB\xA0\u0B37mp\u0100;e\u0BF9\u0C00\u0280aeouy\u29F4\u29FE\u2A03\u2A10\u2A13\u01F0\u29F9\0\u29FB;\u6A43on;\u4148dil;\u4146ng\u0100;d\u0D7E\u2A0Aot;\uC000\u2A6D\u0338p;\u6A42;\u443Dash;\u6013\u0380;Aadqsx\u0B92\u2A29\u2A2D\u2A3B\u2A41\u2A45\u2A50rr;\u61D7r\u0100hr\u2A33\u2A36k;\u6924\u0100;o\u13F2\u13F0ot;\uC000\u2250\u0338ui\xF6\u0B63\u0100ei\u2A4A\u2A4Ear;\u6928\xED\u0B98ist\u0100;s\u0BA0\u0B9Fr;\uC000\u{1D52B}\u0200Eest\u0BC5\u2A66\u2A79\u2A7C\u0180;qs\u0BBC\u2A6D\u0BE1\u0180;qs\u0BBC\u0BC5\u2A74lan\xF4\u0BE2i\xED\u0BEA\u0100;r\u0BB6\u2A81\xBB\u0BB7\u0180Aap\u2A8A\u2A8D\u2A91r\xF2\u2971rr;\u61AEar;\u6AF2\u0180;sv\u0F8D\u2A9C\u0F8C\u0100;d\u2AA1\u2AA2\u62FC;\u62FAcy;\u445A\u0380AEadest\u2AB7\u2ABA\u2ABE\u2AC2\u2AC5\u2AF6\u2AF9r\xF2\u2966;\uC000\u2266\u0338rr;\u619Ar;\u6025\u0200;fqs\u0C3B\u2ACE\u2AE3\u2AEFt\u0100ar\u2AD4\u2AD9rro\xF7\u2AC1ightarro\xF7\u2A90\u0180;qs\u0C3B\u2ABA\u2AEAlan\xF4\u0C55\u0100;s\u0C55\u2AF4\xBB\u0C36i\xED\u0C5D\u0100;r\u0C35\u2AFEi\u0100;e\u0C1A\u0C25i\xE4\u0D90\u0100pt\u2B0C\u2B11f;\uC000\u{1D55F}\u8180\xAC;in\u2B19\u2B1A\u2B36\u40ACn\u0200;Edv\u0B89\u2B24\u2B28\u2B2E;\uC000\u22F9\u0338ot;\uC000\u22F5\u0338\u01E1\u0B89\u2B33\u2B35;\u62F7;\u62F6i\u0100;v\u0CB8\u2B3C\u01E1\u0CB8\u2B41\u2B43;\u62FE;\u62FD\u0180aor\u2B4B\u2B63\u2B69r\u0200;ast\u0B7B\u2B55\u2B5A\u2B5Flle\xEC\u0B7Bl;\uC000\u2AFD\u20E5;\uC000\u2202\u0338lint;\u6A14\u0180;ce\u0C92\u2B70\u2B73u\xE5\u0CA5\u0100;c\u0C98\u2B78\u0100;e\u0C92\u2B7D\xF1\u0C98\u0200Aait\u2B88\u2B8B\u2B9D\u2BA7r\xF2\u2988rr\u0180;cw\u2B94\u2B95\u2B99\u619B;\uC000\u2933\u0338;\uC000\u219D\u0338ghtarrow\xBB\u2B95ri\u0100;e\u0CCB\u0CD6\u0380chimpqu\u2BBD\u2BCD\u2BD9\u2B04\u0B78\u2BE4\u2BEF\u0200;cer\u0D32\u2BC6\u0D37\u2BC9u\xE5\u0D45;\uC000\u{1D4C3}ort\u026D\u2B05\0\0\u2BD6ar\xE1\u2B56m\u0100;e\u0D6E\u2BDF\u0100;q\u0D74\u0D73su\u0100bp\u2BEB\u2BED\xE5\u0CF8\xE5\u0D0B\u0180bcp\u2BF6\u2C11\u2C19\u0200;Ees\u2BFF\u2C00\u0D22\u2C04\u6284;\uC000\u2AC5\u0338et\u0100;e\u0D1B\u2C0Bq\u0100;q\u0D23\u2C00c\u0100;e\u0D32\u2C17\xF1\u0D38\u0200;Ees\u2C22\u2C23\u0D5F\u2C27\u6285;\uC000\u2AC6\u0338et\u0100;e\u0D58\u2C2Eq\u0100;q\u0D60\u2C23\u0200gilr\u2C3D\u2C3F\u2C45\u2C47\xEC\u0BD7lde\u803B\xF1\u40F1\xE7\u0C43iangle\u0100lr\u2C52\u2C5Ceft\u0100;e\u0C1A\u2C5A\xF1\u0C26ight\u0100;e\u0CCB\u2C65\xF1\u0CD7\u0100;m\u2C6C\u2C6D\u43BD\u0180;es\u2C74\u2C75\u2C79\u4023ro;\u6116p;\u6007\u0480DHadgilrs\u2C8F\u2C94\u2C99\u2C9E\u2CA3\u2CB0\u2CB6\u2CD3\u2CE3ash;\u62ADarr;\u6904p;\uC000\u224D\u20D2ash;\u62AC\u0100et\u2CA8\u2CAC;\uC000\u2265\u20D2;\uC000>\u20D2nfin;\u69DE\u0180Aet\u2CBD\u2CC1\u2CC5rr;\u6902;\uC000\u2264\u20D2\u0100;r\u2CCA\u2CCD\uC000<\u20D2ie;\uC000\u22B4\u20D2\u0100At\u2CD8\u2CDCrr;\u6903rie;\uC000\u22B5\u20D2im;\uC000\u223C\u20D2\u0180Aan\u2CF0\u2CF4\u2D02rr;\u61D6r\u0100hr\u2CFA\u2CFDk;\u6923\u0100;o\u13E7\u13E5ear;\u6927\u1253\u1A95\0\0\0\0\0\0\0\0\0\0\0\0\0\u2D2D\0\u2D38\u2D48\u2D60\u2D65\u2D72\u2D84\u1B07\0\0\u2D8D\u2DAB\0\u2DC8\u2DCE\0\u2DDC\u2E19\u2E2B\u2E3E\u2E43\u0100cs\u2D31\u1A97ute\u803B\xF3\u40F3\u0100iy\u2D3C\u2D45r\u0100;c\u1A9E\u2D42\u803B\xF4\u40F4;\u443E\u0280abios\u1AA0\u2D52\u2D57\u01C8\u2D5Alac;\u4151v;\u6A38old;\u69BClig;\u4153\u0100cr\u2D69\u2D6Dir;\u69BF;\uC000\u{1D52C}\u036F\u2D79\0\0\u2D7C\0\u2D82n;\u42DBave\u803B\xF2\u40F2;\u69C1\u0100bm\u2D88\u0DF4ar;\u69B5\u0200acit\u2D95\u2D98\u2DA5\u2DA8r\xF2\u1A80\u0100ir\u2D9D\u2DA0r;\u69BEoss;\u69BBn\xE5\u0E52;\u69C0\u0180aei\u2DB1\u2DB5\u2DB9cr;\u414Dga;\u43C9\u0180cdn\u2DC0\u2DC5\u01CDron;\u43BF;\u69B6pf;\uC000\u{1D560}\u0180ael\u2DD4\u2DD7\u01D2r;\u69B7rp;\u69B9\u0380;adiosv\u2DEA\u2DEB\u2DEE\u2E08\u2E0D\u2E10\u2E16\u6228r\xF2\u1A86\u0200;efm\u2DF7\u2DF8\u2E02\u2E05\u6A5Dr\u0100;o\u2DFE\u2DFF\u6134f\xBB\u2DFF\u803B\xAA\u40AA\u803B\xBA\u40BAgof;\u62B6r;\u6A56lope;\u6A57;\u6A5B\u0180clo\u2E1F\u2E21\u2E27\xF2\u2E01ash\u803B\xF8\u40F8l;\u6298i\u016C\u2E2F\u2E34de\u803B\xF5\u40F5es\u0100;a\u01DB\u2E3As;\u6A36ml\u803B\xF6\u40F6bar;\u633D\u0AE1\u2E5E\0\u2E7D\0\u2E80\u2E9D\0\u2EA2\u2EB9\0\0\u2ECB\u0E9C\0\u2F13\0\0\u2F2B\u2FBC\0\u2FC8r\u0200;ast\u0403\u2E67\u2E72\u0E85\u8100\xB6;l\u2E6D\u2E6E\u40B6le\xEC\u0403\u0269\u2E78\0\0\u2E7Bm;\u6AF3;\u6AFDy;\u443Fr\u0280cimpt\u2E8B\u2E8F\u2E93\u1865\u2E97nt;\u4025od;\u402Eil;\u6030enk;\u6031r;\uC000\u{1D52D}\u0180imo\u2EA8\u2EB0\u2EB4\u0100;v\u2EAD\u2EAE\u43C6;\u43D5ma\xF4\u0A76ne;\u660E\u0180;tv\u2EBF\u2EC0\u2EC8\u43C0chfork\xBB\u1FFD;\u43D6\u0100au\u2ECF\u2EDFn\u0100ck\u2ED5\u2EDDk\u0100;h\u21F4\u2EDB;\u610E\xF6\u21F4s\u0480;abcdemst\u2EF3\u2EF4\u1908\u2EF9\u2EFD\u2F04\u2F06\u2F0A\u2F0E\u402Bcir;\u6A23ir;\u6A22\u0100ou\u1D40\u2F02;\u6A25;\u6A72n\u80BB\xB1\u0E9Dim;\u6A26wo;\u6A27\u0180ipu\u2F19\u2F20\u2F25ntint;\u6A15f;\uC000\u{1D561}nd\u803B\xA3\u40A3\u0500;Eaceinosu\u0EC8\u2F3F\u2F41\u2F44\u2F47\u2F81\u2F89\u2F92\u2F7E\u2FB6;\u6AB3p;\u6AB7u\xE5\u0ED9\u0100;c\u0ECE\u2F4C\u0300;acens\u0EC8\u2F59\u2F5F\u2F66\u2F68\u2F7Eppro\xF8\u2F43urlye\xF1\u0ED9\xF1\u0ECE\u0180aes\u2F6F\u2F76\u2F7Approx;\u6AB9qq;\u6AB5im;\u62E8i\xED\u0EDFme\u0100;s\u2F88\u0EAE\u6032\u0180Eas\u2F78\u2F90\u2F7A\xF0\u2F75\u0180dfp\u0EEC\u2F99\u2FAF\u0180als\u2FA0\u2FA5\u2FAAlar;\u632Eine;\u6312urf;\u6313\u0100;t\u0EFB\u2FB4\xEF\u0EFBrel;\u62B0\u0100ci\u2FC0\u2FC5r;\uC000\u{1D4C5};\u43C8ncsp;\u6008\u0300fiopsu\u2FDA\u22E2\u2FDF\u2FE5\u2FEB\u2FF1r;\uC000\u{1D52E}pf;\uC000\u{1D562}rime;\u6057cr;\uC000\u{1D4C6}\u0180aeo\u2FF8\u3009\u3013t\u0100ei\u2FFE\u3005rnion\xF3\u06B0nt;\u6A16st\u0100;e\u3010\u3011\u403F\xF1\u1F19\xF4\u0F14\u0A80ABHabcdefhilmnoprstux\u3040\u3051\u3055\u3059\u30E0\u310E\u312B\u3147\u3162\u3172\u318E\u3206\u3215\u3224\u3229\u3258\u326E\u3272\u3290\u32B0\u32B7\u0180art\u3047\u304A\u304Cr\xF2\u10B3\xF2\u03DDail;\u691Car\xF2\u1C65ar;\u6964\u0380cdenqrt\u3068\u3075\u3078\u307F\u308F\u3094\u30CC\u0100eu\u306D\u3071;\uC000\u223D\u0331te;\u4155i\xE3\u116Emptyv;\u69B3g\u0200;del\u0FD1\u3089\u308B\u308D;\u6992;\u69A5\xE5\u0FD1uo\u803B\xBB\u40BBr\u0580;abcfhlpstw\u0FDC\u30AC\u30AF\u30B7\u30B9\u30BC\u30BE\u30C0\u30C3\u30C7\u30CAp;\u6975\u0100;f\u0FE0\u30B4s;\u6920;\u6933s;\u691E\xEB\u225D\xF0\u272El;\u6945im;\u6974l;\u61A3;\u619D\u0100ai\u30D1\u30D5il;\u691Ao\u0100;n\u30DB\u30DC\u6236al\xF3\u0F1E\u0180abr\u30E7\u30EA\u30EEr\xF2\u17E5rk;\u6773\u0100ak\u30F3\u30FDc\u0100ek\u30F9\u30FB;\u407D;\u405D\u0100es\u3102\u3104;\u698Cl\u0100du\u310A\u310C;\u698E;\u6990\u0200aeuy\u3117\u311C\u3127\u3129ron;\u4159\u0100di\u3121\u3125il;\u4157\xEC\u0FF2\xE2\u30FA;\u4440\u0200clqs\u3134\u3137\u313D\u3144a;\u6937dhar;\u6969uo\u0100;r\u020E\u020Dh;\u61B3\u0180acg\u314E\u315F\u0F44l\u0200;ips\u0F78\u3158\u315B\u109Cn\xE5\u10BBar\xF4\u0FA9t;\u65AD\u0180ilr\u3169\u1023\u316Esht;\u697D;\uC000\u{1D52F}\u0100ao\u3177\u3186r\u0100du\u317D\u317F\xBB\u047B\u0100;l\u1091\u3184;\u696C\u0100;v\u318B\u318C\u43C1;\u43F1\u0180gns\u3195\u31F9\u31FCht\u0300ahlrst\u31A4\u31B0\u31C2\u31D8\u31E4\u31EErrow\u0100;t\u0FDC\u31ADa\xE9\u30C8arpoon\u0100du\u31BB\u31BFow\xEE\u317Ep\xBB\u1092eft\u0100ah\u31CA\u31D0rrow\xF3\u0FEAarpoon\xF3\u0551ightarrows;\u61C9quigarro\xF7\u30CBhreetimes;\u62CCg;\u42DAingdotse\xF1\u1F32\u0180ahm\u320D\u3210\u3213r\xF2\u0FEAa\xF2\u0551;\u600Foust\u0100;a\u321E\u321F\u63B1che\xBB\u321Fmid;\u6AEE\u0200abpt\u3232\u323D\u3240\u3252\u0100nr\u3237\u323Ag;\u67EDr;\u61FEr\xEB\u1003\u0180afl\u3247\u324A\u324Er;\u6986;\uC000\u{1D563}us;\u6A2Eimes;\u6A35\u0100ap\u325D\u3267r\u0100;g\u3263\u3264\u4029t;\u6994olint;\u6A12ar\xF2\u31E3\u0200achq\u327B\u3280\u10BC\u3285quo;\u603Ar;\uC000\u{1D4C7}\u0100bu\u30FB\u328Ao\u0100;r\u0214\u0213\u0180hir\u3297\u329B\u32A0re\xE5\u31F8mes;\u62CAi\u0200;efl\u32AA\u1059\u1821\u32AB\u65B9tri;\u69CEluhar;\u6968;\u611E\u0D61\u32D5\u32DB\u32DF\u332C\u3338\u3371\0\u337A\u33A4\0\0\u33EC\u33F0\0\u3428\u3448\u345A\u34AD\u34B1\u34CA\u34F1\0\u3616\0\0\u3633cute;\u415Bqu\xEF\u27BA\u0500;Eaceinpsy\u11ED\u32F3\u32F5\u32FF\u3302\u330B\u330F\u331F\u3326\u3329;\u6AB4\u01F0\u32FA\0\u32FC;\u6AB8on;\u4161u\xE5\u11FE\u0100;d\u11F3\u3307il;\u415Frc;\u415D\u0180Eas\u3316\u3318\u331B;\u6AB6p;\u6ABAim;\u62E9olint;\u6A13i\xED\u1204;\u4441ot\u0180;be\u3334\u1D47\u3335\u62C5;\u6A66\u0380Aacmstx\u3346\u334A\u3357\u335B\u335E\u3363\u336Drr;\u61D8r\u0100hr\u3350\u3352\xEB\u2228\u0100;o\u0A36\u0A34t\u803B\xA7\u40A7i;\u403Bwar;\u6929m\u0100in\u3369\xF0nu\xF3\xF1t;\u6736r\u0100;o\u3376\u2055\uC000\u{1D530}\u0200acoy\u3382\u3386\u3391\u33A0rp;\u666F\u0100hy\u338B\u338Fcy;\u4449;\u4448rt\u026D\u3399\0\0\u339Ci\xE4\u1464ara\xEC\u2E6F\u803B\xAD\u40AD\u0100gm\u33A8\u33B4ma\u0180;fv\u33B1\u33B2\u33B2\u43C3;\u43C2\u0400;deglnpr\u12AB\u33C5\u33C9\u33CE\u33D6\u33DE\u33E1\u33E6ot;\u6A6A\u0100;q\u12B1\u12B0\u0100;E\u33D3\u33D4\u6A9E;\u6AA0\u0100;E\u33DB\u33DC\u6A9D;\u6A9Fe;\u6246lus;\u6A24arr;\u6972ar\xF2\u113D\u0200aeit\u33F8\u3408\u340F\u3417\u0100ls\u33FD\u3404lsetm\xE9\u336Ahp;\u6A33parsl;\u69E4\u0100dl\u1463\u3414e;\u6323\u0100;e\u341C\u341D\u6AAA\u0100;s\u3422\u3423\u6AAC;\uC000\u2AAC\uFE00\u0180flp\u342E\u3433\u3442tcy;\u444C\u0100;b\u3438\u3439\u402F\u0100;a\u343E\u343F\u69C4r;\u633Ff;\uC000\u{1D564}a\u0100dr\u344D\u0402es\u0100;u\u3454\u3455\u6660it\xBB\u3455\u0180csu\u3460\u3479\u349F\u0100au\u3465\u346Fp\u0100;s\u1188\u346B;\uC000\u2293\uFE00p\u0100;s\u11B4\u3475;\uC000\u2294\uFE00u\u0100bp\u347F\u348F\u0180;es\u1197\u119C\u3486et\u0100;e\u1197\u348D\xF1\u119D\u0180;es\u11A8\u11AD\u3496et\u0100;e\u11A8\u349D\xF1\u11AE\u0180;af\u117B\u34A6\u05B0r\u0165\u34AB\u05B1\xBB\u117Car\xF2\u1148\u0200cemt\u34B9\u34BE\u34C2\u34C5r;\uC000\u{1D4C8}tm\xEE\xF1i\xEC\u3415ar\xE6\u11BE\u0100ar\u34CE\u34D5r\u0100;f\u34D4\u17BF\u6606\u0100an\u34DA\u34EDight\u0100ep\u34E3\u34EApsilo\xEE\u1EE0h\xE9\u2EAFs\xBB\u2852\u0280bcmnp\u34FB\u355E\u1209\u358B\u358E\u0480;Edemnprs\u350E\u350F\u3511\u3515\u351E\u3523\u352C\u3531\u3536\u6282;\u6AC5ot;\u6ABD\u0100;d\u11DA\u351Aot;\u6AC3ult;\u6AC1\u0100Ee\u3528\u352A;\u6ACB;\u628Alus;\u6ABFarr;\u6979\u0180eiu\u353D\u3552\u3555t\u0180;en\u350E\u3545\u354Bq\u0100;q\u11DA\u350Feq\u0100;q\u352B\u3528m;\u6AC7\u0100bp\u355A\u355C;\u6AD5;\u6AD3c\u0300;acens\u11ED\u356C\u3572\u3579\u357B\u3326ppro\xF8\u32FAurlye\xF1\u11FE\xF1\u11F3\u0180aes\u3582\u3588\u331Bppro\xF8\u331Aq\xF1\u3317g;\u666A\u0680123;Edehlmnps\u35A9\u35AC\u35AF\u121C\u35B2\u35B4\u35C0\u35C9\u35D5\u35DA\u35DF\u35E8\u35ED\u803B\xB9\u40B9\u803B\xB2\u40B2\u803B\xB3\u40B3;\u6AC6\u0100os\u35B9\u35BCt;\u6ABEub;\u6AD8\u0100;d\u1222\u35C5ot;\u6AC4s\u0100ou\u35CF\u35D2l;\u67C9b;\u6AD7arr;\u697Bult;\u6AC2\u0100Ee\u35E4\u35E6;\u6ACC;\u628Blus;\u6AC0\u0180eiu\u35F4\u3609\u360Ct\u0180;en\u121C\u35FC\u3602q\u0100;q\u1222\u35B2eq\u0100;q\u35E7\u35E4m;\u6AC8\u0100bp\u3611\u3613;\u6AD4;\u6AD6\u0180Aan\u361C\u3620\u362Drr;\u61D9r\u0100hr\u3626\u3628\xEB\u222E\u0100;o\u0A2B\u0A29war;\u692Alig\u803B\xDF\u40DF\u0BE1\u3651\u365D\u3660\u12CE\u3673\u3679\0\u367E\u36C2\0\0\0\0\0\u36DB\u3703\0\u3709\u376C\0\0\0\u3787\u0272\u3656\0\0\u365Bget;\u6316;\u43C4r\xEB\u0E5F\u0180aey\u3666\u366B\u3670ron;\u4165dil;\u4163;\u4442lrec;\u6315r;\uC000\u{1D531}\u0200eiko\u3686\u369D\u36B5\u36BC\u01F2\u368B\0\u3691e\u01004f\u1284\u1281a\u0180;sv\u3698\u3699\u369B\u43B8ym;\u43D1\u0100cn\u36A2\u36B2k\u0100as\u36A8\u36AEppro\xF8\u12C1im\xBB\u12ACs\xF0\u129E\u0100as\u36BA\u36AE\xF0\u12C1rn\u803B\xFE\u40FE\u01EC\u031F\u36C6\u22E7es\u8180\xD7;bd\u36CF\u36D0\u36D8\u40D7\u0100;a\u190F\u36D5r;\u6A31;\u6A30\u0180eps\u36E1\u36E3\u3700\xE1\u2A4D\u0200;bcf\u0486\u36EC\u36F0\u36F4ot;\u6336ir;\u6AF1\u0100;o\u36F9\u36FC\uC000\u{1D565}rk;\u6ADA\xE1\u3362rime;\u6034\u0180aip\u370F\u3712\u3764d\xE5\u1248\u0380adempst\u3721\u374D\u3740\u3751\u3757\u375C\u375Fngle\u0280;dlqr\u3730\u3731\u3736\u3740\u3742\u65B5own\xBB\u1DBBeft\u0100;e\u2800\u373E\xF1\u092E;\u625Cight\u0100;e\u32AA\u374B\xF1\u105Aot;\u65ECinus;\u6A3Alus;\u6A39b;\u69CDime;\u6A3Bezium;\u63E2\u0180cht\u3772\u377D\u3781\u0100ry\u3777\u377B;\uC000\u{1D4C9};\u4446cy;\u445Brok;\u4167\u0100io\u378B\u378Ex\xF4\u1777head\u0100lr\u3797\u37A0eftarro\xF7\u084Fightarrow\xBB\u0F5D\u0900AHabcdfghlmoprstuw\u37D0\u37D3\u37D7\u37E4\u37F0\u37FC\u380E\u381C\u3823\u3834\u3851\u385D\u386B\u38A9\u38CC\u38D2\u38EA\u38F6r\xF2\u03EDar;\u6963\u0100cr\u37DC\u37E2ute\u803B\xFA\u40FA\xF2\u1150r\u01E3\u37EA\0\u37EDy;\u445Eve;\u416D\u0100iy\u37F5\u37FArc\u803B\xFB\u40FB;\u4443\u0180abh\u3803\u3806\u380Br\xF2\u13ADlac;\u4171a\xF2\u13C3\u0100ir\u3813\u3818sht;\u697E;\uC000\u{1D532}rave\u803B\xF9\u40F9\u0161\u3827\u3831r\u0100lr\u382C\u382E\xBB\u0957\xBB\u1083lk;\u6580\u0100ct\u3839\u384D\u026F\u383F\0\0\u384Arn\u0100;e\u3845\u3846\u631Cr\xBB\u3846op;\u630Fri;\u65F8\u0100al\u3856\u385Acr;\u416B\u80BB\xA8\u0349\u0100gp\u3862\u3866on;\u4173f;\uC000\u{1D566}\u0300adhlsu\u114B\u3878\u387D\u1372\u3891\u38A0own\xE1\u13B3arpoon\u0100lr\u3888\u388Cef\xF4\u382Digh\xF4\u382Fi\u0180;hl\u3899\u389A\u389C\u43C5\xBB\u13FAon\xBB\u389Aparrows;\u61C8\u0180cit\u38B0\u38C4\u38C8\u026F\u38B6\0\0\u38C1rn\u0100;e\u38BC\u38BD\u631Dr\xBB\u38BDop;\u630Eng;\u416Fri;\u65F9cr;\uC000\u{1D4CA}\u0180dir\u38D9\u38DD\u38E2ot;\u62F0lde;\u4169i\u0100;f\u3730\u38E8\xBB\u1813\u0100am\u38EF\u38F2r\xF2\u38A8l\u803B\xFC\u40FCangle;\u69A7\u0780ABDacdeflnoprsz\u391C\u391F\u3929\u392D\u39B5\u39B8\u39BD\u39DF\u39E4\u39E8\u39F3\u39F9\u39FD\u3A01\u3A20r\xF2\u03F7ar\u0100;v\u3926\u3927\u6AE8;\u6AE9as\xE8\u03E1\u0100nr\u3932\u3937grt;\u699C\u0380eknprst\u34E3\u3946\u394B\u3952\u395D\u3964\u3996app\xE1\u2415othin\xE7\u1E96\u0180hir\u34EB\u2EC8\u3959op\xF4\u2FB5\u0100;h\u13B7\u3962\xEF\u318D\u0100iu\u3969\u396Dgm\xE1\u33B3\u0100bp\u3972\u3984setneq\u0100;q\u397D\u3980\uC000\u228A\uFE00;\uC000\u2ACB\uFE00setneq\u0100;q\u398F\u3992\uC000\u228B\uFE00;\uC000\u2ACC\uFE00\u0100hr\u399B\u399Fet\xE1\u369Ciangle\u0100lr\u39AA\u39AFeft\xBB\u0925ight\xBB\u1051y;\u4432ash\xBB\u1036\u0180elr\u39C4\u39D2\u39D7\u0180;be\u2DEA\u39CB\u39CFar;\u62BBq;\u625Alip;\u62EE\u0100bt\u39DC\u1468a\xF2\u1469r;\uC000\u{1D533}tr\xE9\u39AEsu\u0100bp\u39EF\u39F1\xBB\u0D1C\xBB\u0D59pf;\uC000\u{1D567}ro\xF0\u0EFBtr\xE9\u39B4\u0100cu\u3A06\u3A0Br;\uC000\u{1D4CB}\u0100bp\u3A10\u3A18n\u0100Ee\u3980\u3A16\xBB\u397En\u0100Ee\u3992\u3A1E\xBB\u3990igzag;\u699A\u0380cefoprs\u3A36\u3A3B\u3A56\u3A5B\u3A54\u3A61\u3A6Airc;\u4175\u0100di\u3A40\u3A51\u0100bg\u3A45\u3A49ar;\u6A5Fe\u0100;q\u15FA\u3A4F;\u6259erp;\u6118r;\uC000\u{1D534}pf;\uC000\u{1D568}\u0100;e\u1479\u3A66at\xE8\u1479cr;\uC000\u{1D4CC}\u0AE3\u178E\u3A87\0\u3A8B\0\u3A90\u3A9B\0\0\u3A9D\u3AA8\u3AAB\u3AAF\0\0\u3AC3\u3ACE\0\u3AD8\u17DC\u17DFtr\xE9\u17D1r;\uC000\u{1D535}\u0100Aa\u3A94\u3A97r\xF2\u03C3r\xF2\u09F6;\u43BE\u0100Aa\u3AA1\u3AA4r\xF2\u03B8r\xF2\u09EBa\xF0\u2713is;\u62FB\u0180dpt\u17A4\u3AB5\u3ABE\u0100fl\u3ABA\u17A9;\uC000\u{1D569}im\xE5\u17B2\u0100Aa\u3AC7\u3ACAr\xF2\u03CEr\xF2\u0A01\u0100cq\u3AD2\u17B8r;\uC000\u{1D4CD}\u0100pt\u17D6\u3ADCr\xE9\u17D4\u0400acefiosu\u3AF0\u3AFD\u3B08\u3B0C\u3B11\u3B15\u3B1B\u3B21c\u0100uy\u3AF6\u3AFBte\u803B\xFD\u40FD;\u444F\u0100iy\u3B02\u3B06rc;\u4177;\u444Bn\u803B\xA5\u40A5r;\uC000\u{1D536}cy;\u4457pf;\uC000\u{1D56A}cr;\uC000\u{1D4CE}\u0100cm\u3B26\u3B29y;\u444El\u803B\xFF\u40FF\u0500acdefhiosw\u3B42\u3B48\u3B54\u3B58\u3B64\u3B69\u3B6D\u3B74\u3B7A\u3B80cute;\u417A\u0100ay\u3B4D\u3B52ron;\u417E;\u4437ot;\u417C\u0100et\u3B5D\u3B61tr\xE6\u155Fa;\u43B6r;\uC000\u{1D537}cy;\u4436grarr;\u61DDpf;\uC000\u{1D56B}cr;\uC000\u{1D4CF}\u0100jn\u3B85\u3B87;\u600Dj;\u600C'.split("").map(t=>t.charCodeAt(0))),aA=new Uint16Array("\u0200aglq	\x1B\u026D\0\0p;\u4026os;\u4027t;\u403Et;\u403Cuot;\u4022".split("").map(t=>t.charCodeAt(0))),xl;const iA=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),oA=(xl=String.fromCodePoint)!==null&&xl!==void 0?xl:function(t){let e="";return t>65535&&(t-=65536,e+=String.fromCharCode(t>>>10&1023|55296),t=56320|t&1023),e+=String.fromCharCode(t),e};function rA(t){var e;return t>=55296&&t<=57343||t>1114111?65533:(e=iA.get(t))!==null&&e!==void 0?e:t}d(rA,"replaceCodePoint");var Ot;(function(t){t[t.NUM=35]="NUM",t[t.SEMI=59]="SEMI",t[t.EQUALS=61]="EQUALS",t[t.ZERO=48]="ZERO",t[t.NINE=57]="NINE",t[t.LOWER_A=97]="LOWER_A",t[t.LOWER_F=102]="LOWER_F",t[t.LOWER_X=120]="LOWER_X",t[t.LOWER_Z=122]="LOWER_Z",t[t.UPPER_A=65]="UPPER_A",t[t.UPPER_F=70]="UPPER_F",t[t.UPPER_Z=90]="UPPER_Z"})(Ot||(Ot={}));const lA=32;var hs;(function(t){t[t.VALUE_LENGTH=49152]="VALUE_LENGTH",t[t.BRANCH_LENGTH=16256]="BRANCH_LENGTH",t[t.JUMP_TABLE=127]="JUMP_TABLE"})(hs||(hs={}));function wl(t){return t>=Ot.ZERO&&t<=Ot.NINE}d(wl,"isNumber$1");function uA(t){return t>=Ot.UPPER_A&&t<=Ot.UPPER_F||t>=Ot.LOWER_A&&t<=Ot.LOWER_F}d(uA,"isHexadecimalCharacter");function cA(t){return t>=Ot.UPPER_A&&t<=Ot.UPPER_Z||t>=Ot.LOWER_A&&t<=Ot.LOWER_Z||wl(t)}d(cA,"isAsciiAlphaNumeric");function dA(t){return t===Ot.EQUALS||cA(t)}d(dA,"isEntityInAttributeInvalidEnd");var jt;(function(t){t[t.EntityStart=0]="EntityStart",t[t.NumericStart=1]="NumericStart",t[t.NumericDecimal=2]="NumericDecimal",t[t.NumericHex=3]="NumericHex",t[t.NamedEntity=4]="NamedEntity"})(jt||(jt={}));var fs;(function(t){t[t.Legacy=0]="Legacy",t[t.Strict=1]="Strict",t[t.Attribute=2]="Attribute"})(fs||(fs={}));class pA{static{d(this,"EntityDecoder")}constructor(e,n,s){this.decodeTree=e,this.emitCodePoint=n,this.errors=s,this.state=jt.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=fs.Strict}startEntity(e){this.decodeMode=e,this.state=jt.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,n){switch(this.state){case jt.EntityStart:return e.charCodeAt(n)===Ot.NUM?(this.state=jt.NumericStart,this.consumed+=1,this.stateNumericStart(e,n+1)):(this.state=jt.NamedEntity,this.stateNamedEntity(e,n));case jt.NumericStart:return this.stateNumericStart(e,n);case jt.NumericDecimal:return this.stateNumericDecimal(e,n);case jt.NumericHex:return this.stateNumericHex(e,n);case jt.NamedEntity:return this.stateNamedEntity(e,n)}}stateNumericStart(e,n){return n>=e.length?-1:(e.charCodeAt(n)|lA)===Ot.LOWER_X?(this.state=jt.NumericHex,this.consumed+=1,this.stateNumericHex(e,n+1)):(this.state=jt.NumericDecimal,this.stateNumericDecimal(e,n))}addToNumericResult(e,n,s,a){if(n!==s){const i=s-n;this.result=this.result*Math.pow(a,i)+parseInt(e.substr(n,i),a),this.consumed+=i}}stateNumericHex(e,n){const s=n;for(;n<e.length;){const a=e.charCodeAt(n);if(wl(a)||uA(a))n+=1;else return this.addToNumericResult(e,s,n,16),this.emitNumericEntity(a,3)}return this.addToNumericResult(e,s,n,16),-1}stateNumericDecimal(e,n){const s=n;for(;n<e.length;){const a=e.charCodeAt(n);if(wl(a))n+=1;else return this.addToNumericResult(e,s,n,10),this.emitNumericEntity(a,2)}return this.addToNumericResult(e,s,n,10),-1}emitNumericEntity(e,n){var s;if(this.consumed<=n)return(s=this.errors)===null||s===void 0||s.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===Ot.SEMI)this.consumed+=1;else if(this.decodeMode===fs.Strict)return 0;return this.emitCodePoint(rA(this.result),this.consumed),this.errors&&(e!==Ot.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,n){const{decodeTree:s}=this;let a=s[this.treeIndex],i=(a&hs.VALUE_LENGTH)>>14;for(;n<e.length;n++,this.excess++){const r=e.charCodeAt(n);if(this.treeIndex=hA(s,a,this.treeIndex+Math.max(1,i),r),this.treeIndex<0)return this.result===0||this.decodeMode===fs.Attribute&&(i===0||dA(r))?0:this.emitNotTerminatedNamedEntity();if(a=s[this.treeIndex],i=(a&hs.VALUE_LENGTH)>>14,i!==0){if(r===Ot.SEMI)return this.emitNamedEntityData(this.treeIndex,i,this.consumed+this.excess);this.decodeMode!==fs.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var e;const{result:n,decodeTree:s}=this,a=(s[n]&hs.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,a,this.consumed),(e=this.errors)===null||e===void 0||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,n,s){const{decodeTree:a}=this;return this.emitCodePoint(n===1?a[e]&~hs.VALUE_LENGTH:a[e+1],s),n===3&&this.emitCodePoint(a[e+2],s),s}end(){var e;switch(this.state){case jt.NamedEntity:return this.result!==0&&(this.decodeMode!==fs.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case jt.NumericDecimal:return this.emitNumericEntity(0,2);case jt.NumericHex:return this.emitNumericEntity(0,3);case jt.NumericStart:return(e=this.errors)===null||e===void 0||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case jt.EntityStart:return 0}}}function Dh(t){let e="";const n=new pA(t,s=>e+=oA(s));return d(function(a,i){let r=0,o=0;for(;(o=a.indexOf("&",o))>=0;){e+=a.slice(r,o),n.startEntity(i);const l=n.write(a,o+1);if(l<0){r=o+n.end();break}r=o+l,o=l===0?r+1:r}const c=e+a.slice(r);return e="",c},"decodeWithTrie")}d(Dh,"getDecoder");function hA(t,e,n,s){const a=(e&hs.BRANCH_LENGTH)>>7,i=e&hs.JUMP_TABLE;if(a===0)return i!==0&&s===i?n:-1;if(i){const c=s-i;return c<0||c>=a?-1:t[n+c]-1}let r=n,o=r+a-1;for(;r<=o;){const c=r+o>>>1,l=t[c];if(l<s)r=c+1;else if(l>s)o=c-1;else return t[c+a]}return-1}d(hA,"determineBranch");const fA=Dh(sA);Dh(aA);function Ih(t,e=fs.Legacy){return fA(t,e)}d(Ih,"decodeHTML");function mA(t){return Object.prototype.toString.call(t)}d(mA,"_class$1");function Sl(t){return mA(t)==="[object String]"}d(Sl,"isString$1");const gA=Object.prototype.hasOwnProperty;function bA(t,e){return gA.call(t,e)}d(bA,"has");function Eo(t){return Array.prototype.slice.call(arguments,1).forEach(function(n){if(n){if(typeof n!="object")throw new TypeError(n+"must be object");Object.keys(n).forEach(function(s){t[s]=n[s]})}}),t}d(Eo,"assign$1");function Lh(t,e,n){return[].concat(t.slice(0,e),n,t.slice(e+1))}d(Lh,"arrayReplaceAt");function Cl(t){return!(t>=55296&&t<=57343||t>=64976&&t<=65007||(t&65535)===65535||(t&65535)===65534||t>=0&&t<=8||t===11||t>=14&&t<=31||t>=127&&t<=159||t>1114111)}d(Cl,"isValidEntityCode");function Ao(t){if(t>65535){t-=65536;const e=55296+(t>>10),n=56320+(t&1023);return String.fromCharCode(e,n)}return String.fromCharCode(t)}d(Ao,"fromCodePoint");const Th=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,vA=/&([a-z#][a-z0-9]{1,31});/gi,yA=new RegExp(Th.source+"|"+vA.source,"gi"),xA=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function wA(t,e){if(e.charCodeAt(0)===35&&xA.test(e)){const s=e[1].toLowerCase()==="x"?parseInt(e.slice(2),16):parseInt(e.slice(1),10);return Cl(s)?Ao(s):t}const n=Ih(t);return n!==t?n:t}d(wA,"replaceEntityPattern");function SA(t){return t.indexOf("\\")<0?t:t.replace(Th,"$1")}d(SA,"unescapeMd");function ca(t){return t.indexOf("\\")<0&&t.indexOf("&")<0?t:t.replace(yA,function(e,n,s){return n||wA(e,s)})}d(ca,"unescapeAll");const CA=/[&<>"]/,EA=/[&<>"]/g,AA={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function _A(t){return AA[t]}d(_A,"replaceUnsafeChar");function ms(t){return CA.test(t)?t.replace(EA,_A):t}d(ms,"escapeHtml");const kA=/[.?*+^$[\]\\(){}|-]/g;function PA(t){return t.replace(kA,"\\$&")}d(PA,"escapeRE$1");function gt(t){switch(t){case 9:case 32:return!0}return!1}d(gt,"isSpace");function ei(t){if(t>=8192&&t<=8202)return!0;switch(t){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}d(ei,"isWhiteSpace");function ti(t){return yl.test(t)||kh.test(t)}d(ti,"isPunctChar");function ni(t){switch(t){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}d(ni,"isMdAsciiPunct");function _o(t){return t=t.trim().replace(/\s+/g," "),"\u1E9E".toLowerCase()==="\u1E7E"&&(t=t.replace(/ẞ/g,"\xDF")),t.toLowerCase().toUpperCase()}d(_o,"normalizeReference");const DA={mdurl:eA,ucmicro:nA};var IA=Object.freeze({__proto__:null,arrayReplaceAt:Lh,assign:Eo,escapeHtml:ms,escapeRE:PA,fromCodePoint:Ao,has:bA,isMdAsciiPunct:ni,isPunctChar:ti,isSpace:gt,isString:Sl,isValidEntityCode:Cl,isWhiteSpace:ei,lib:DA,normalizeReference:_o,unescapeAll:ca,unescapeMd:SA});function LA(t,e,n){let s,a,i,r;const o=t.posMax,c=t.pos;for(t.pos=e+1,s=1;t.pos<o;){if(i=t.src.charCodeAt(t.pos),i===93&&(s--,s===0)){a=!0;break}if(r=t.pos,t.md.inline.skipToken(t),i===91){if(r===t.pos-1)s++;else if(n)return t.pos=c,-1}}let l=-1;return a&&(l=t.pos),t.pos=c,l}d(LA,"parseLinkLabel");function TA(t,e,n){let s,a=e;const i={ok:!1,pos:0,str:""};if(t.charCodeAt(a)===60){for(a++;a<n;){if(s=t.charCodeAt(a),s===10||s===60)return i;if(s===62)return i.pos=a+1,i.str=ca(t.slice(e+1,a)),i.ok=!0,i;if(s===92&&a+1<n){a+=2;continue}a++}return i}let r=0;for(;a<n&&(s=t.charCodeAt(a),!(s===32||s<32||s===127));){if(s===92&&a+1<n){if(t.charCodeAt(a+1)===32)break;a+=2;continue}if(s===40&&(r++,r>32))return i;if(s===41){if(r===0)break;r--}a++}return e===a||r!==0||(i.str=ca(t.slice(e,a)),i.pos=a,i.ok=!0),i}d(TA,"parseLinkDestination");function MA(t,e,n,s){let a,i=e;const r={ok:!1,can_continue:!1,pos:0,str:"",marker:0};if(s)r.str=s.str,r.marker=s.marker;else{if(i>=n)return r;let o=t.charCodeAt(i);if(o!==34&&o!==39&&o!==40)return r;e++,i++,o===40&&(o=41),r.marker=o}for(;i<n;){if(a=t.charCodeAt(i),a===r.marker)return r.pos=i+1,r.str+=ca(t.slice(e,i)),r.ok=!0,r;if(a===40&&r.marker===41)return r;a===92&&i+1<n&&i++,i++}return r.can_continue=!0,r.str+=ca(t.slice(e,i)),r}d(MA,"parseLinkTitle");var OA=Object.freeze({__proto__:null,parseLinkDestination:TA,parseLinkLabel:LA,parseLinkTitle:MA});const Fn={};Fn.code_inline=function(t,e,n,s,a){const i=t[e];return"<code"+a.renderAttrs(i)+">"+ms(i.content)+"</code>"},Fn.code_block=function(t,e,n,s,a){const i=t[e];return"<pre"+a.renderAttrs(i)+"><code>"+ms(t[e].content)+`</code></pre>
`},Fn.fence=function(t,e,n,s,a){const i=t[e],r=i.info?ca(i.info).trim():"";let o="",c="";if(r){const u=r.split(/(\s+)/g);o=u[0],c=u.slice(2).join("")}let l;if(n.highlight?l=n.highlight(i.content,o,c)||ms(i.content):l=ms(i.content),l.indexOf("<pre")===0)return l+`
`;if(r){const u=i.attrIndex("class"),p=i.attrs?i.attrs.slice():[];u<0?p.push(["class",n.langPrefix+o]):(p[u]=p[u].slice(),p[u][1]+=" "+n.langPrefix+o);const g={attrs:p};return`<pre><code${a.renderAttrs(g)}>${l}</code></pre>
`}return`<pre><code${a.renderAttrs(i)}>${l}</code></pre>
`},Fn.image=function(t,e,n,s,a){const i=t[e];return i.attrs[i.attrIndex("alt")][1]=a.renderInlineAsText(i.children,n,s),a.renderToken(t,e,n)},Fn.hardbreak=function(t,e,n){return n.xhtmlOut?`<br />
`:`<br>
`},Fn.softbreak=function(t,e,n){return n.breaks?n.xhtmlOut?`<br />
`:`<br>
`:`
`},Fn.text=function(t,e){return ms(t[e].content)},Fn.html_block=function(t,e){return t[e].content},Fn.html_inline=function(t,e){return t[e].content};function da(){this.rules=Eo({},Fn)}d(da,"Renderer"),da.prototype.renderAttrs=d(function(e){let n,s,a;if(!e.attrs)return"";for(a="",n=0,s=e.attrs.length;n<s;n++)a+=" "+ms(e.attrs[n][0])+'="'+ms(e.attrs[n][1])+'"';return a},"renderAttrs"),da.prototype.renderToken=d(function(e,n,s){const a=e[n];let i="";if(a.hidden)return"";a.block&&a.nesting!==-1&&n&&e[n-1].hidden&&(i+=`
`),i+=(a.nesting===-1?"</":"<")+a.tag,i+=this.renderAttrs(a),a.nesting===0&&s.xhtmlOut&&(i+=" /");let r=!1;if(a.block&&(r=!0,a.nesting===1&&n+1<e.length)){const o=e[n+1];(o.type==="inline"||o.hidden||o.nesting===-1&&o.tag===a.tag)&&(r=!1)}return i+=r?`>
`:">",i},"renderToken"),da.prototype.renderInline=function(t,e,n){let s="";const a=this.rules;for(let i=0,r=t.length;i<r;i++){const o=t[i].type;typeof a[o]<"u"?s+=a[o](t,i,e,n,this):s+=this.renderToken(t,i,e)}return s},da.prototype.renderInlineAsText=function(t,e,n){let s="";for(let a=0,i=t.length;a<i;a++)switch(t[a].type){case"text":s+=t[a].content;break;case"image":s+=this.renderInlineAsText(t[a].children,e,n);break;case"html_inline":case"html_block":s+=t[a].content;break;case"softbreak":case"hardbreak":s+=`
`;break}return s},da.prototype.render=function(t,e,n){let s="";const a=this.rules;for(let i=0,r=t.length;i<r;i++){const o=t[i].type;o==="inline"?s+=this.renderInline(t[i].children,e,n):typeof a[o]<"u"?s+=a[o](t,i,e,n,this):s+=this.renderToken(t,i,e,n)}return s};function Qt(){this.__rules__=[],this.__cache__=null}d(Qt,"Ruler"),Qt.prototype.__find__=function(t){for(let e=0;e<this.__rules__.length;e++)if(this.__rules__[e].name===t)return e;return-1},Qt.prototype.__compile__=function(){const t=this,e=[""];t.__rules__.forEach(function(n){n.enabled&&n.alt.forEach(function(s){e.indexOf(s)<0&&e.push(s)})}),t.__cache__={},e.forEach(function(n){t.__cache__[n]=[],t.__rules__.forEach(function(s){s.enabled&&(n&&s.alt.indexOf(n)<0||t.__cache__[n].push(s.fn))})})},Qt.prototype.at=function(t,e,n){const s=this.__find__(t),a=n||{};if(s===-1)throw new Error("Parser rule not found: "+t);this.__rules__[s].fn=e,this.__rules__[s].alt=a.alt||[],this.__cache__=null},Qt.prototype.before=function(t,e,n,s){const a=this.__find__(t),i=s||{};if(a===-1)throw new Error("Parser rule not found: "+t);this.__rules__.splice(a,0,{name:e,enabled:!0,fn:n,alt:i.alt||[]}),this.__cache__=null},Qt.prototype.after=function(t,e,n,s){const a=this.__find__(t),i=s||{};if(a===-1)throw new Error("Parser rule not found: "+t);this.__rules__.splice(a+1,0,{name:e,enabled:!0,fn:n,alt:i.alt||[]}),this.__cache__=null},Qt.prototype.push=function(t,e,n){const s=n||{};this.__rules__.push({name:t,enabled:!0,fn:e,alt:s.alt||[]}),this.__cache__=null},Qt.prototype.enable=function(t,e){Array.isArray(t)||(t=[t]);const n=[];return t.forEach(function(s){const a=this.__find__(s);if(a<0){if(e)return;throw new Error("Rules manager: invalid rule name "+s)}this.__rules__[a].enabled=!0,n.push(s)},this),this.__cache__=null,n},Qt.prototype.enableOnly=function(t,e){Array.isArray(t)||(t=[t]),this.__rules__.forEach(function(n){n.enabled=!1}),this.enable(t,e)},Qt.prototype.disable=function(t,e){Array.isArray(t)||(t=[t]);const n=[];return t.forEach(function(s){const a=this.__find__(s);if(a<0){if(e)return;throw new Error("Rules manager: invalid rule name "+s)}this.__rules__[a].enabled=!1,n.push(s)},this),this.__cache__=null,n},Qt.prototype.getRules=function(t){return this.__cache__===null&&this.__compile__(),this.__cache__[t]||[]};function Dn(t,e,n){this.type=t,this.tag=e,this.attrs=null,this.map=null,this.nesting=n,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}d(Dn,"Token"),Dn.prototype.attrIndex=d(function(e){if(!this.attrs)return-1;const n=this.attrs;for(let s=0,a=n.length;s<a;s++)if(n[s][0]===e)return s;return-1},"attrIndex"),Dn.prototype.attrPush=d(function(e){this.attrs?this.attrs.push(e):this.attrs=[e]},"attrPush"),Dn.prototype.attrSet=d(function(e,n){const s=this.attrIndex(e),a=[e,n];s<0?this.attrPush(a):this.attrs[s]=a},"attrSet"),Dn.prototype.attrGet=d(function(e){const n=this.attrIndex(e);let s=null;return n>=0&&(s=this.attrs[n][1]),s},"attrGet"),Dn.prototype.attrJoin=d(function(e,n){const s=this.attrIndex(e);s<0?this.attrPush([e,n]):this.attrs[s][1]=this.attrs[s][1]+" "+n},"attrJoin");function Mh(t,e,n){this.src=t,this.env=n,this.tokens=[],this.inlineMode=!1,this.md=e}d(Mh,"StateCore"),Mh.prototype.Token=Dn;const jA=/\r\n?|\n/g,NA=/\0/g;function FA(t){let e;e=t.src.replace(jA,`
`),e=e.replace(NA,"\uFFFD"),t.src=e}d(FA,"normalize");function $A(t){let e;t.inlineMode?(e=new t.Token("inline","",0),e.content=t.src,e.map=[0,1],e.children=[],t.tokens.push(e)):t.md.block.parse(t.src,t.md,t.env,t.tokens)}d($A,"block");function RA(t){const e=t.tokens;for(let n=0,s=e.length;n<s;n++){const a=e[n];a.type==="inline"&&t.md.inline.parse(a.content,t.md,t.env,a.children)}}d(RA,"inline");function qA(t){return/^<a[>\s]/i.test(t)}d(qA,"isLinkOpen$1");function BA(t){return/^<\/a\s*>/i.test(t)}d(BA,"isLinkClose$1");function UA(t){const e=t.tokens;if(t.md.options.linkify)for(let n=0,s=e.length;n<s;n++){if(e[n].type!=="inline"||!t.md.linkify.pretest(e[n].content))continue;let a=e[n].children,i=0;for(let r=a.length-1;r>=0;r--){const o=a[r];if(o.type==="link_close"){for(r--;a[r].level!==o.level&&a[r].type!=="link_open";)r--;continue}if(o.type==="html_inline"&&(qA(o.content)&&i>0&&i--,BA(o.content)&&i++),!(i>0)&&o.type==="text"&&t.md.linkify.test(o.content)){const c=o.content;let l=t.md.linkify.match(c);const u=[];let p=o.level,g=0;l.length>0&&l[0].index===0&&r>0&&a[r-1].type==="text_special"&&(l=l.slice(1));for(let y=0;y<l.length;y++){const w=l[y].url,S=t.md.normalizeLink(w);if(!t.md.validateLink(S))continue;let m=l[y].text;l[y].schema?l[y].schema==="mailto:"&&!/^mailto:/i.test(m)?m=t.md.normalizeLinkText("mailto:"+m).replace(/^mailto:/,""):m=t.md.normalizeLinkText(m):m=t.md.normalizeLinkText("http://"+m).replace(/^http:\/\//,"");const D=l[y].index;if(D>g){const k=new t.Token("text","",0);k.content=c.slice(g,D),k.level=p,u.push(k)}const A=new t.Token("link_open","a",1);A.attrs=[["href",S]],A.level=p++,A.markup="linkify",A.info="auto",u.push(A);const j=new t.Token("text","",0);j.content=m,j.level=p,u.push(j);const L=new t.Token("link_close","a",-1);L.level=--p,L.markup="linkify",L.info="auto",u.push(L),g=l[y].lastIndex}if(g<c.length){const y=new t.Token("text","",0);y.content=c.slice(g),y.level=p,u.push(y)}e[n].children=a=Lh(a,r,u)}}}}d(UA,"linkify$1");const Oh=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,zA=/\((c|tm|r)\)/i,HA=/\((c|tm|r)\)/ig,GA={c:"\xA9",r:"\xAE",tm:"\u2122"};function VA(t,e){return GA[e.toLowerCase()]}d(VA,"replaceFn");function WA(t){let e=0;for(let n=t.length-1;n>=0;n--){const s=t[n];s.type==="text"&&!e&&(s.content=s.content.replace(HA,VA)),s.type==="link_open"&&s.info==="auto"&&e--,s.type==="link_close"&&s.info==="auto"&&e++}}d(WA,"replace_scoped");function KA(t){let e=0;for(let n=t.length-1;n>=0;n--){const s=t[n];s.type==="text"&&!e&&Oh.test(s.content)&&(s.content=s.content.replace(/\+-/g,"\xB1").replace(/\.{2,}/g,"\u2026").replace(/([?!])…/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1\u2014").replace(/(^|\s)--(?=\s|$)/mg,"$1\u2013").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1\u2013")),s.type==="link_open"&&s.info==="auto"&&e--,s.type==="link_close"&&s.info==="auto"&&e++}}d(KA,"replace_rare");function YA(t){let e;if(t.md.options.typographer)for(e=t.tokens.length-1;e>=0;e--)t.tokens[e].type==="inline"&&(zA.test(t.tokens[e].content)&&WA(t.tokens[e].children),Oh.test(t.tokens[e].content)&&KA(t.tokens[e].children))}d(YA,"replace");const XA=/['"]/,jh=/['"]/g,Nh="\u2019";function ko(t,e,n){return t.slice(0,e)+n+t.slice(e+1)}d(ko,"replaceAt");function JA(t,e){let n;const s=[];for(let a=0;a<t.length;a++){const i=t[a],r=t[a].level;for(n=s.length-1;n>=0&&!(s[n].level<=r);n--);if(s.length=n+1,i.type!=="text")continue;let o=i.content,c=0,l=o.length;e:for(;c<l;){jh.lastIndex=c;const u=jh.exec(o);if(!u)break;let p=!0,g=!0;c=u.index+1;const y=u[0]==="'";let w=32;if(u.index-1>=0)w=o.charCodeAt(u.index-1);else for(n=a-1;n>=0&&!(t[n].type==="softbreak"||t[n].type==="hardbreak");n--)if(t[n].content){w=t[n].content.charCodeAt(t[n].content.length-1);break}let S=32;if(c<l)S=o.charCodeAt(c);else for(n=a+1;n<t.length&&!(t[n].type==="softbreak"||t[n].type==="hardbreak");n++)if(t[n].content){S=t[n].content.charCodeAt(0);break}const m=ni(w)||ti(String.fromCharCode(w)),D=ni(S)||ti(String.fromCharCode(S)),A=ei(w),j=ei(S);if(j?p=!1:D&&(A||m||(p=!1)),A?g=!1:m&&(j||D||(g=!1)),S===34&&u[0]==='"'&&w>=48&&w<=57&&(g=p=!1),p&&g&&(p=m,g=D),!p&&!g){y&&(i.content=ko(i.content,u.index,Nh));continue}if(g)for(n=s.length-1;n>=0;n--){let L=s[n];if(s[n].level<r)break;if(L.single===y&&s[n].level===r){L=s[n];let k,I;y?(k=e.md.options.quotes[2],I=e.md.options.quotes[3]):(k=e.md.options.quotes[0],I=e.md.options.quotes[1]),i.content=ko(i.content,u.index,I),t[L.token].content=ko(t[L.token].content,L.pos,k),c+=I.length-1,L.token===a&&(c+=k.length-1),o=i.content,l=o.length,s.length=n;continue e}}p?s.push({token:a,pos:u.index,single:y,level:r}):g&&y&&(i.content=ko(i.content,u.index,Nh))}}}d(JA,"process_inlines");function ZA(t){if(t.md.options.typographer)for(let e=t.tokens.length-1;e>=0;e--)t.tokens[e].type!=="inline"||!XA.test(t.tokens[e].content)||JA(t.tokens[e].children,t)}d(ZA,"smartquotes");function QA(t){let e,n;const s=t.tokens,a=s.length;for(let i=0;i<a;i++){if(s[i].type!=="inline")continue;const r=s[i].children,o=r.length;for(e=0;e<o;e++)r[e].type==="text_special"&&(r[e].type="text");for(e=n=0;e<o;e++)r[e].type==="text"&&e+1<o&&r[e+1].type==="text"?r[e+1].content=r[e].content+r[e+1].content:(e!==n&&(r[n]=r[e]),n++);e!==n&&(r.length=n)}}d(QA,"text_join");const El=[["normalize",FA],["block",$A],["inline",RA],["linkify",UA],["replacements",YA],["smartquotes",ZA],["text_join",QA]];function Al(){this.ruler=new Qt;for(let t=0;t<El.length;t++)this.ruler.push(El[t][0],El[t][1])}d(Al,"Core"),Al.prototype.process=function(t){const e=this.ruler.getRules("");for(let n=0,s=e.length;n<s;n++)e[n](t)},Al.prototype.State=Mh;function $n(t,e,n,s){this.src=t,this.md=e,this.env=n,this.tokens=s,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;const a=this.src;for(let i=0,r=0,o=0,c=0,l=a.length,u=!1;r<l;r++){const p=a.charCodeAt(r);if(!u)if(gt(p)){o++,p===9?c+=4-c%4:c++;continue}else u=!0;(p===10||r===l-1)&&(p!==10&&r++,this.bMarks.push(i),this.eMarks.push(r),this.tShift.push(o),this.sCount.push(c),this.bsCount.push(0),u=!1,o=0,c=0,i=r+1)}this.bMarks.push(a.length),this.eMarks.push(a.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}d($n,"StateBlock"),$n.prototype.push=function(t,e,n){const s=new Dn(t,e,n);return s.block=!0,n<0&&this.level--,s.level=this.level,n>0&&this.level++,this.tokens.push(s),s},$n.prototype.isEmpty=d(function(e){return this.bMarks[e]+this.tShift[e]>=this.eMarks[e]},"isEmpty"),$n.prototype.skipEmptyLines=d(function(e){for(let n=this.lineMax;e<n&&!(this.bMarks[e]+this.tShift[e]<this.eMarks[e]);e++);return e},"skipEmptyLines"),$n.prototype.skipSpaces=d(function(e){for(let n=this.src.length;e<n;e++){const s=this.src.charCodeAt(e);if(!gt(s))break}return e},"skipSpaces"),$n.prototype.skipSpacesBack=d(function(e,n){if(e<=n)return e;for(;e>n;)if(!gt(this.src.charCodeAt(--e)))return e+1;return e},"skipSpacesBack"),$n.prototype.skipChars=d(function(e,n){for(let s=this.src.length;e<s&&this.src.charCodeAt(e)===n;e++);return e},"skipChars"),$n.prototype.skipCharsBack=d(function(e,n,s){if(e<=s)return e;for(;e>s;)if(n!==this.src.charCodeAt(--e))return e+1;return e},"skipCharsBack"),$n.prototype.getLines=d(function(e,n,s,a){if(e>=n)return"";const i=new Array(n-e);for(let r=0,o=e;o<n;o++,r++){let c=0;const l=this.bMarks[o];let u=l,p;for(o+1<n||a?p=this.eMarks[o]+1:p=this.eMarks[o];u<p&&c<s;){const g=this.src.charCodeAt(u);if(gt(g))g===9?c+=4-(c+this.bsCount[o])%4:c++;else if(u-l<this.tShift[o])c++;else break;u++}c>s?i[r]=new Array(c-s+1).join(" ")+this.src.slice(u,p):i[r]=this.src.slice(u,p)}return i.join("")},"getLines"),$n.prototype.Token=Dn;const e_=65536;function _l(t,e){const n=t.bMarks[e]+t.tShift[e],s=t.eMarks[e];return t.src.slice(n,s)}d(_l,"getLine");function Fh(t){const e=[],n=t.length;let s=0,a=t.charCodeAt(s),i=!1,r=0,o="";for(;s<n;)a===124&&(i?(o+=t.substring(r,s-1),r=s):(e.push(o+t.substring(r,s)),o="",r=s+1)),i=a===92,s++,a=t.charCodeAt(s);return e.push(o+t.substring(r)),e}d(Fh,"escapedSplit");function t_(t,e,n,s){if(e+2>n)return!1;let a=e+1;if(t.sCount[a]<t.blkIndent||t.sCount[a]-t.blkIndent>=4)return!1;let i=t.bMarks[a]+t.tShift[a];if(i>=t.eMarks[a])return!1;const r=t.src.charCodeAt(i++);if(r!==124&&r!==45&&r!==58||i>=t.eMarks[a])return!1;const o=t.src.charCodeAt(i++);if(o!==124&&o!==45&&o!==58&&!gt(o)||r===45&&gt(o))return!1;for(;i<t.eMarks[a];){const L=t.src.charCodeAt(i);if(L!==124&&L!==45&&L!==58&&!gt(L))return!1;i++}let c=_l(t,e+1),l=c.split("|");const u=[];for(let L=0;L<l.length;L++){const k=l[L].trim();if(!k){if(L===0||L===l.length-1)continue;return!1}if(!/^:?-+:?$/.test(k))return!1;k.charCodeAt(k.length-1)===58?u.push(k.charCodeAt(0)===58?"center":"right"):k.charCodeAt(0)===58?u.push("left"):u.push("")}if(c=_l(t,e).trim(),c.indexOf("|")===-1||t.sCount[e]-t.blkIndent>=4)return!1;l=Fh(c),l.length&&l[0]===""&&l.shift(),l.length&&l[l.length-1]===""&&l.pop();const p=l.length;if(p===0||p!==u.length)return!1;if(s)return!0;const g=t.parentType;t.parentType="table";const y=t.md.block.ruler.getRules("blockquote"),w=t.push("table_open","table",1),S=[e,0];w.map=S;const m=t.push("thead_open","thead",1);m.map=[e,e+1];const D=t.push("tr_open","tr",1);D.map=[e,e+1];for(let L=0;L<l.length;L++){const k=t.push("th_open","th",1);u[L]&&(k.attrs=[["style","text-align:"+u[L]]]);const I=t.push("inline","",0);I.content=l[L].trim(),I.children=[],t.push("th_close","th",-1)}t.push("tr_close","tr",-1),t.push("thead_close","thead",-1);let A,j=0;for(a=e+2;a<n&&!(t.sCount[a]<t.blkIndent);a++){let L=!1;for(let I=0,v=y.length;I<v;I++)if(y[I](t,a,n,!0)){L=!0;break}if(L||(c=_l(t,a).trim(),!c)||t.sCount[a]-t.blkIndent>=4||(l=Fh(c),l.length&&l[0]===""&&l.shift(),l.length&&l[l.length-1]===""&&l.pop(),j+=p-l.length,j>e_))break;if(a===e+2){const I=t.push("tbody_open","tbody",1);I.map=A=[e+2,0]}const k=t.push("tr_open","tr",1);k.map=[a,a+1];for(let I=0;I<p;I++){const v=t.push("td_open","td",1);u[I]&&(v.attrs=[["style","text-align:"+u[I]]]);const T=t.push("inline","",0);T.content=l[I]?l[I].trim():"",T.children=[],t.push("td_close","td",-1)}t.push("tr_close","tr",-1)}return A&&(t.push("tbody_close","tbody",-1),A[1]=a),t.push("table_close","table",-1),S[1]=a,t.parentType=g,t.line=a,!0}d(t_,"table");function n_(t,e,n){if(t.sCount[e]-t.blkIndent<4)return!1;let s=e+1,a=s;for(;s<n;){if(t.isEmpty(s)){s++;continue}if(t.sCount[s]-t.blkIndent>=4){s++,a=s;continue}break}t.line=a;const i=t.push("code_block","code",0);return i.content=t.getLines(e,a,4+t.blkIndent,!1)+`
`,i.map=[e,t.line],!0}d(n_,"code$1");function s_(t,e,n,s){let a=t.bMarks[e]+t.tShift[e],i=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4||a+3>i)return!1;const r=t.src.charCodeAt(a);if(r!==126&&r!==96)return!1;let o=a;a=t.skipChars(a,r);let c=a-o;if(c<3)return!1;const l=t.src.slice(o,a),u=t.src.slice(a,i);if(r===96&&u.indexOf(String.fromCharCode(r))>=0)return!1;if(s)return!0;let p=e,g=!1;for(;p++,!(p>=n||(a=o=t.bMarks[p]+t.tShift[p],i=t.eMarks[p],a<i&&t.sCount[p]<t.blkIndent));)if(t.src.charCodeAt(a)===r&&!(t.sCount[p]-t.blkIndent>=4)&&(a=t.skipChars(a,r),!(a-o<c)&&(a=t.skipSpaces(a),!(a<i)))){g=!0;break}c=t.sCount[e],t.line=p+(g?1:0);const y=t.push("fence","code",0);return y.info=u,y.content=t.getLines(e+1,p,c,!0),y.markup=l,y.map=[e,t.line],!0}d(s_,"fence");function a_(t,e,n,s){let a=t.bMarks[e]+t.tShift[e],i=t.eMarks[e];const r=t.lineMax;if(t.sCount[e]-t.blkIndent>=4||t.src.charCodeAt(a)!==62)return!1;if(s)return!0;const o=[],c=[],l=[],u=[],p=t.md.block.ruler.getRules("blockquote"),g=t.parentType;t.parentType="blockquote";let y=!1,w;for(w=e;w<n;w++){const j=t.sCount[w]<t.blkIndent;if(a=t.bMarks[w]+t.tShift[w],i=t.eMarks[w],a>=i)break;if(t.src.charCodeAt(a++)===62&&!j){let k=t.sCount[w]+1,I,v;t.src.charCodeAt(a)===32?(a++,k++,v=!1,I=!0):t.src.charCodeAt(a)===9?(I=!0,(t.bsCount[w]+k)%4===3?(a++,k++,v=!1):v=!0):I=!1;let T=k;for(o.push(t.bMarks[w]),t.bMarks[w]=a;a<i;){const P=t.src.charCodeAt(a);if(gt(P))P===9?T+=4-(T+t.bsCount[w]+(v?1:0))%4:T++;else break;a++}y=a>=i,c.push(t.bsCount[w]),t.bsCount[w]=t.sCount[w]+1+(I?1:0),l.push(t.sCount[w]),t.sCount[w]=T-k,u.push(t.tShift[w]),t.tShift[w]=a-t.bMarks[w];continue}if(y)break;let L=!1;for(let k=0,I=p.length;k<I;k++)if(p[k](t,w,n,!0)){L=!0;break}if(L){t.lineMax=w,t.blkIndent!==0&&(o.push(t.bMarks[w]),c.push(t.bsCount[w]),u.push(t.tShift[w]),l.push(t.sCount[w]),t.sCount[w]-=t.blkIndent);break}o.push(t.bMarks[w]),c.push(t.bsCount[w]),u.push(t.tShift[w]),l.push(t.sCount[w]),t.sCount[w]=-1}const S=t.blkIndent;t.blkIndent=0;const m=t.push("blockquote_open","blockquote",1);m.markup=">";const D=[e,0];m.map=D,t.md.block.tokenize(t,e,w);const A=t.push("blockquote_close","blockquote",-1);A.markup=">",t.lineMax=r,t.parentType=g,D[1]=t.line;for(let j=0;j<u.length;j++)t.bMarks[j+e]=o[j],t.tShift[j+e]=u[j],t.sCount[j+e]=l[j],t.bsCount[j+e]=c[j];return t.blkIndent=S,!0}d(a_,"blockquote");function i_(t,e,n,s){const a=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4)return!1;let i=t.bMarks[e]+t.tShift[e];const r=t.src.charCodeAt(i++);if(r!==42&&r!==45&&r!==95)return!1;let o=1;for(;i<a;){const l=t.src.charCodeAt(i++);if(l!==r&&!gt(l))return!1;l===r&&o++}if(o<3)return!1;if(s)return!0;t.line=e+1;const c=t.push("hr","hr",0);return c.map=[e,t.line],c.markup=Array(o+1).join(String.fromCharCode(r)),!0}d(i_,"hr");function $h(t,e){const n=t.eMarks[e];let s=t.bMarks[e]+t.tShift[e];const a=t.src.charCodeAt(s++);if(a!==42&&a!==45&&a!==43)return-1;if(s<n){const i=t.src.charCodeAt(s);if(!gt(i))return-1}return s}d($h,"skipBulletListMarker");function Rh(t,e){const n=t.bMarks[e]+t.tShift[e],s=t.eMarks[e];let a=n;if(a+1>=s)return-1;let i=t.src.charCodeAt(a++);if(i<48||i>57)return-1;for(;;){if(a>=s)return-1;if(i=t.src.charCodeAt(a++),i>=48&&i<=57){if(a-n>=10)return-1;continue}if(i===41||i===46)break;return-1}return a<s&&(i=t.src.charCodeAt(a),!gt(i))?-1:a}d(Rh,"skipOrderedListMarker");function o_(t,e){const n=t.level+2;for(let s=e+2,a=t.tokens.length-2;s<a;s++)t.tokens[s].level===n&&t.tokens[s].type==="paragraph_open"&&(t.tokens[s+2].hidden=!0,t.tokens[s].hidden=!0,s+=2)}d(o_,"markTightParagraphs");function r_(t,e,n,s){let a,i,r,o,c=e,l=!0;if(t.sCount[c]-t.blkIndent>=4||t.listIndent>=0&&t.sCount[c]-t.listIndent>=4&&t.sCount[c]<t.blkIndent)return!1;let u=!1;s&&t.parentType==="paragraph"&&t.sCount[c]>=t.blkIndent&&(u=!0);let p,g,y;if((y=Rh(t,c))>=0){if(p=!0,r=t.bMarks[c]+t.tShift[c],g=Number(t.src.slice(r,y-1)),u&&g!==1)return!1}else if((y=$h(t,c))>=0)p=!1;else return!1;if(u&&t.skipSpaces(y)>=t.eMarks[c])return!1;if(s)return!0;const w=t.src.charCodeAt(y-1),S=t.tokens.length;p?(o=t.push("ordered_list_open","ol",1),g!==1&&(o.attrs=[["start",g]])):o=t.push("bullet_list_open","ul",1);const m=[c,0];o.map=m,o.markup=String.fromCharCode(w);let D=!1;const A=t.md.block.ruler.getRules("list"),j=t.parentType;for(t.parentType="list";c<n;){i=y,a=t.eMarks[c];const L=t.sCount[c]+y-(t.bMarks[c]+t.tShift[c]);let k=L;for(;i<a;){const K=t.src.charCodeAt(i);if(K===9)k+=4-(k+t.bsCount[c])%4;else if(K===32)k++;else break;i++}const I=i;let v;I>=a?v=1:v=k-L,v>4&&(v=1);const T=L+v;o=t.push("list_item_open","li",1),o.markup=String.fromCharCode(w);const P=[c,0];o.map=P,p&&(o.info=t.src.slice(r,y-1));const F=t.tight,U=t.tShift[c],M=t.sCount[c],V=t.listIndent;if(t.listIndent=t.blkIndent,t.blkIndent=T,t.tight=!0,t.tShift[c]=I-t.bMarks[c],t.sCount[c]=k,I>=a&&t.isEmpty(c+1)?t.line=Math.min(t.line+2,n):t.md.block.tokenize(t,c,n,!0),(!t.tight||D)&&(l=!1),D=t.line-c>1&&t.isEmpty(t.line-1),t.blkIndent=t.listIndent,t.listIndent=V,t.tShift[c]=U,t.sCount[c]=M,t.tight=F,o=t.push("list_item_close","li",-1),o.markup=String.fromCharCode(w),c=t.line,P[1]=c,c>=n||t.sCount[c]<t.blkIndent||t.sCount[c]-t.blkIndent>=4)break;let W=!1;for(let K=0,R=A.length;K<R;K++)if(A[K](t,c,n,!0)){W=!0;break}if(W)break;if(p){if(y=Rh(t,c),y<0)break;r=t.bMarks[c]+t.tShift[c]}else if(y=$h(t,c),y<0)break;if(w!==t.src.charCodeAt(y-1))break}return p?o=t.push("ordered_list_close","ol",-1):o=t.push("bullet_list_close","ul",-1),o.markup=String.fromCharCode(w),m[1]=c,t.line=c,t.parentType=j,l&&o_(t,S),!0}d(r_,"list");function l_(t,e,n,s){let a=t.bMarks[e]+t.tShift[e],i=t.eMarks[e],r=e+1;if(t.sCount[e]-t.blkIndent>=4||t.src.charCodeAt(a)!==91)return!1;function o(A){const j=t.lineMax;if(A>=j||t.isEmpty(A))return null;let L=!1;if(t.sCount[A]-t.blkIndent>3&&(L=!0),t.sCount[A]<0&&(L=!0),!L){const v=t.md.block.ruler.getRules("reference"),T=t.parentType;t.parentType="reference";let P=!1;for(let F=0,U=v.length;F<U;F++)if(v[F](t,A,j,!0)){P=!0;break}if(t.parentType=T,P)return null}const k=t.bMarks[A]+t.tShift[A],I=t.eMarks[A];return t.src.slice(k,I+1)}d(o,"getNextLine");let c=t.src.slice(a,i+1);i=c.length;let l=-1;for(a=1;a<i;a++){const A=c.charCodeAt(a);if(A===91)return!1;if(A===93){l=a;break}else if(A===10){const j=o(r);j!==null&&(c+=j,i=c.length,r++)}else if(A===92&&(a++,a<i&&c.charCodeAt(a)===10)){const j=o(r);j!==null&&(c+=j,i=c.length,r++)}}if(l<0||c.charCodeAt(l+1)!==58)return!1;for(a=l+2;a<i;a++){const A=c.charCodeAt(a);if(A===10){const j=o(r);j!==null&&(c+=j,i=c.length,r++)}else if(!gt(A))break}const u=t.md.helpers.parseLinkDestination(c,a,i);if(!u.ok)return!1;const p=t.md.normalizeLink(u.str);if(!t.md.validateLink(p))return!1;a=u.pos;const g=a,y=r,w=a;for(;a<i;a++){const A=c.charCodeAt(a);if(A===10){const j=o(r);j!==null&&(c+=j,i=c.length,r++)}else if(!gt(A))break}let S=t.md.helpers.parseLinkTitle(c,a,i);for(;S.can_continue;){const A=o(r);if(A===null)break;c+=A,a=i,i=c.length,r++,S=t.md.helpers.parseLinkTitle(c,a,i,S)}let m;for(a<i&&w!==a&&S.ok?(m=S.str,a=S.pos):(m="",a=g,r=y);a<i;){const A=c.charCodeAt(a);if(!gt(A))break;a++}if(a<i&&c.charCodeAt(a)!==10&&m)for(m="",a=g,r=y;a<i;){const A=c.charCodeAt(a);if(!gt(A))break;a++}if(a<i&&c.charCodeAt(a)!==10)return!1;const D=_o(c.slice(1,l));return D?(s||(typeof t.env.references>"u"&&(t.env.references={}),typeof t.env.references[D]>"u"&&(t.env.references[D]={title:m,href:p}),t.line=r),!0):!1}d(l_,"reference");var u_=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"];const c_="[a-zA-Z_:][a-zA-Z0-9:._-]*",d_="[^\"'=<>`\\x00-\\x20]+",p_="'[^']*'",h_='"[^"]*"',f_="(?:"+d_+"|"+p_+"|"+h_+")",m_="(?:\\s+"+c_+"(?:\\s*=\\s*"+f_+")?)",qh="<[A-Za-z][A-Za-z0-9\\-]*"+m_+"*\\s*\\/?>",Bh="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",g_="<!---?>|<!--(?:[^-]|-[^-]|--[^>])*-->",b_="<[?][\\s\\S]*?[?]>",v_="<![A-Za-z][^>]*>",y_="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",x_=new RegExp("^(?:"+qh+"|"+Bh+"|"+g_+"|"+b_+"|"+v_+"|"+y_+")"),w_=new RegExp("^(?:"+qh+"|"+Bh+")"),pa=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+u_.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(w_.source+"\\s*$"),/^$/,!1]];function S_(t,e,n,s){let a=t.bMarks[e]+t.tShift[e],i=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4||!t.md.options.html||t.src.charCodeAt(a)!==60)return!1;let r=t.src.slice(a,i),o=0;for(;o<pa.length&&!pa[o][0].test(r);o++);if(o===pa.length)return!1;if(s)return pa[o][2];let c=e+1;if(!pa[o][1].test(r)){for(;c<n&&!(t.sCount[c]<t.blkIndent);c++)if(a=t.bMarks[c]+t.tShift[c],i=t.eMarks[c],r=t.src.slice(a,i),pa[o][1].test(r)){r.length!==0&&c++;break}}t.line=c;const l=t.push("html_block","",0);return l.map=[e,c],l.content=t.getLines(e,c,t.blkIndent,!0),!0}d(S_,"html_block");function C_(t,e,n,s){let a=t.bMarks[e]+t.tShift[e],i=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4)return!1;let r=t.src.charCodeAt(a);if(r!==35||a>=i)return!1;let o=1;for(r=t.src.charCodeAt(++a);r===35&&a<i&&o<=6;)o++,r=t.src.charCodeAt(++a);if(o>6||a<i&&!gt(r))return!1;if(s)return!0;i=t.skipSpacesBack(i,a);const c=t.skipCharsBack(i,35,a);c>a&&gt(t.src.charCodeAt(c-1))&&(i=c),t.line=e+1;const l=t.push("heading_open","h"+String(o),1);l.markup="########".slice(0,o),l.map=[e,t.line];const u=t.push("inline","",0);u.content=t.src.slice(a,i).trim(),u.map=[e,t.line],u.children=[];const p=t.push("heading_close","h"+String(o),-1);return p.markup="########".slice(0,o),!0}d(C_,"heading");function E_(t,e,n){const s=t.md.block.ruler.getRules("paragraph");if(t.sCount[e]-t.blkIndent>=4)return!1;const a=t.parentType;t.parentType="paragraph";let i=0,r,o=e+1;for(;o<n&&!t.isEmpty(o);o++){if(t.sCount[o]-t.blkIndent>3)continue;if(t.sCount[o]>=t.blkIndent){let y=t.bMarks[o]+t.tShift[o];const w=t.eMarks[o];if(y<w&&(r=t.src.charCodeAt(y),(r===45||r===61)&&(y=t.skipChars(y,r),y=t.skipSpaces(y),y>=w))){i=r===61?1:2;break}}if(t.sCount[o]<0)continue;let g=!1;for(let y=0,w=s.length;y<w;y++)if(s[y](t,o,n,!0)){g=!0;break}if(g)break}if(!i)return!1;const c=t.getLines(e,o,t.blkIndent,!1).trim();t.line=o+1;const l=t.push("heading_open","h"+String(i),1);l.markup=String.fromCharCode(r),l.map=[e,t.line];const u=t.push("inline","",0);u.content=c,u.map=[e,t.line-1],u.children=[];const p=t.push("heading_close","h"+String(i),-1);return p.markup=String.fromCharCode(r),t.parentType=a,!0}d(E_,"lheading");function A_(t,e,n){const s=t.md.block.ruler.getRules("paragraph"),a=t.parentType;let i=e+1;for(t.parentType="paragraph";i<n&&!t.isEmpty(i);i++){if(t.sCount[i]-t.blkIndent>3||t.sCount[i]<0)continue;let l=!1;for(let u=0,p=s.length;u<p;u++)if(s[u](t,i,n,!0)){l=!0;break}if(l)break}const r=t.getLines(e,i,t.blkIndent,!1).trim();t.line=i;const o=t.push("paragraph_open","p",1);o.map=[e,t.line];const c=t.push("inline","",0);return c.content=r,c.map=[e,t.line],c.children=[],t.push("paragraph_close","p",-1),t.parentType=a,!0}d(A_,"paragraph");const Po=[["table",t_,["paragraph","reference"]],["code",n_],["fence",s_,["paragraph","reference","blockquote","list"]],["blockquote",a_,["paragraph","reference","blockquote","list"]],["hr",i_,["paragraph","reference","blockquote","list"]],["list",r_,["paragraph","reference","blockquote"]],["reference",l_],["html_block",S_,["paragraph","reference","blockquote"]],["heading",C_,["paragraph","reference","blockquote"]],["lheading",E_],["paragraph",A_]];function Do(){this.ruler=new Qt;for(let t=0;t<Po.length;t++)this.ruler.push(Po[t][0],Po[t][1],{alt:(Po[t][2]||[]).slice()})}d(Do,"ParserBlock"),Do.prototype.tokenize=function(t,e,n){const s=this.ruler.getRules(""),a=s.length,i=t.md.options.maxNesting;let r=e,o=!1;for(;r<n&&(t.line=r=t.skipEmptyLines(r),!(r>=n||t.sCount[r]<t.blkIndent));){if(t.level>=i){t.line=n;break}const c=t.line;let l=!1;for(let u=0;u<a;u++)if(l=s[u](t,r,n,!1),l){if(c>=t.line)throw new Error("block rule didn't increment state.line");break}if(!l)throw new Error("none of the block rules matched");t.tight=!o,t.isEmpty(t.line-1)&&(o=!0),r=t.line,r<n&&t.isEmpty(r)&&(o=!0,r++,t.line=r)}},Do.prototype.parse=function(t,e,n,s){if(!t)return;const a=new this.State(t,e,n,s);this.tokenize(a,a.line,a.lineMax)},Do.prototype.State=$n;function si(t,e,n,s){this.src=t,this.env=n,this.md=e,this.tokens=s,this.tokens_meta=Array(s.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}d(si,"StateInline"),si.prototype.pushPending=function(){const t=new Dn("text","",0);return t.content=this.pending,t.level=this.pendingLevel,this.tokens.push(t),this.pending="",t},si.prototype.push=function(t,e,n){this.pending&&this.pushPending();const s=new Dn(t,e,n);let a=null;return n<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),s.level=this.level,n>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],a={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(s),this.tokens_meta.push(a),s},si.prototype.scanDelims=function(t,e){const n=this.posMax,s=this.src.charCodeAt(t),a=t>0?this.src.charCodeAt(t-1):32;let i=t;for(;i<n&&this.src.charCodeAt(i)===s;)i++;const r=i-t,o=i<n?this.src.charCodeAt(i):32,c=ni(a)||ti(String.fromCharCode(a)),l=ni(o)||ti(String.fromCharCode(o)),u=ei(a),p=ei(o),g=!p&&(!l||u||c),y=!u&&(!c||p||l);return{can_open:g&&(e||!y||c),can_close:y&&(e||!g||l),length:r}},si.prototype.Token=Dn;function __(t){switch(t){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}d(__,"isTerminatorChar");function k_(t,e){let n=t.pos;for(;n<t.posMax&&!__(t.src.charCodeAt(n));)n++;return n===t.pos?!1:(e||(t.pending+=t.src.slice(t.pos,n)),t.pos=n,!0)}d(k_,"text");const P_=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;function D_(t,e){if(!t.md.options.linkify||t.linkLevel>0)return!1;const n=t.pos,s=t.posMax;if(n+3>s||t.src.charCodeAt(n)!==58||t.src.charCodeAt(n+1)!==47||t.src.charCodeAt(n+2)!==47)return!1;const a=t.pending.match(P_);if(!a)return!1;const i=a[1],r=t.md.linkify.matchAtStart(t.src.slice(n-i.length));if(!r)return!1;let o=r.url;if(o.length<=i.length)return!1;o=o.replace(/\*+$/,"");const c=t.md.normalizeLink(o);if(!t.md.validateLink(c))return!1;if(!e){t.pending=t.pending.slice(0,-i.length);const l=t.push("link_open","a",1);l.attrs=[["href",c]],l.markup="linkify",l.info="auto";const u=t.push("text","",0);u.content=t.md.normalizeLinkText(o);const p=t.push("link_close","a",-1);p.markup="linkify",p.info="auto"}return t.pos+=o.length-i.length,!0}d(D_,"linkify");function I_(t,e){let n=t.pos;if(t.src.charCodeAt(n)!==10)return!1;const s=t.pending.length-1,a=t.posMax;if(!e)if(s>=0&&t.pending.charCodeAt(s)===32)if(s>=1&&t.pending.charCodeAt(s-1)===32){let i=s-1;for(;i>=1&&t.pending.charCodeAt(i-1)===32;)i--;t.pending=t.pending.slice(0,i),t.push("hardbreak","br",0)}else t.pending=t.pending.slice(0,-1),t.push("softbreak","br",0);else t.push("softbreak","br",0);for(n++;n<a&&gt(t.src.charCodeAt(n));)n++;return t.pos=n,!0}d(I_,"newline");const kl=[];for(let t=0;t<256;t++)kl.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(t){kl[t.charCodeAt(0)]=1});function L_(t,e){let n=t.pos;const s=t.posMax;if(t.src.charCodeAt(n)!==92||(n++,n>=s))return!1;let a=t.src.charCodeAt(n);if(a===10){for(e||t.push("hardbreak","br",0),n++;n<s&&(a=t.src.charCodeAt(n),!!gt(a));)n++;return t.pos=n,!0}let i=t.src[n];if(a>=55296&&a<=56319&&n+1<s){const o=t.src.charCodeAt(n+1);o>=56320&&o<=57343&&(i+=t.src[n+1],n++)}const r="\\"+i;if(!e){const o=t.push("text_special","",0);a<256&&kl[a]!==0?o.content=i:o.content=r,o.markup=r,o.info="escape"}return t.pos=n+1,!0}d(L_,"escape");function T_(t,e){let n=t.pos;if(t.src.charCodeAt(n)!==96)return!1;const a=n;n++;const i=t.posMax;for(;n<i&&t.src.charCodeAt(n)===96;)n++;const r=t.src.slice(a,n),o=r.length;if(t.backticksScanned&&(t.backticks[o]||0)<=a)return e||(t.pending+=r),t.pos+=o,!0;let c=n,l;for(;(l=t.src.indexOf("`",c))!==-1;){for(c=l+1;c<i&&t.src.charCodeAt(c)===96;)c++;const u=c-l;if(u===o){if(!e){const p=t.push("code_inline","code",0);p.markup=r,p.content=t.src.slice(n,l).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return t.pos=c,!0}t.backticks[u]=l}return t.backticksScanned=!0,e||(t.pending+=r),t.pos+=o,!0}d(T_,"backtick");function M_(t,e){const n=t.pos,s=t.src.charCodeAt(n);if(e||s!==126)return!1;const a=t.scanDelims(t.pos,!0);let i=a.length;const r=String.fromCharCode(s);if(i<2)return!1;let o;i%2&&(o=t.push("text","",0),o.content=r,i--);for(let c=0;c<i;c+=2)o=t.push("text","",0),o.content=r+r,t.delimiters.push({marker:s,length:0,token:t.tokens.length-1,end:-1,open:a.can_open,close:a.can_close});return t.pos+=a.length,!0}d(M_,"strikethrough_tokenize");function Uh(t,e){let n;const s=[],a=e.length;for(let i=0;i<a;i++){const r=e[i];if(r.marker!==126||r.end===-1)continue;const o=e[r.end];n=t.tokens[r.token],n.type="s_open",n.tag="s",n.nesting=1,n.markup="~~",n.content="",n=t.tokens[o.token],n.type="s_close",n.tag="s",n.nesting=-1,n.markup="~~",n.content="",t.tokens[o.token-1].type==="text"&&t.tokens[o.token-1].content==="~"&&s.push(o.token-1)}for(;s.length;){const i=s.pop();let r=i+1;for(;r<t.tokens.length&&t.tokens[r].type==="s_close";)r++;r--,i!==r&&(n=t.tokens[r],t.tokens[r]=t.tokens[i],t.tokens[i]=n)}}d(Uh,"postProcess$1");function O_(t){const e=t.tokens_meta,n=t.tokens_meta.length;Uh(t,t.delimiters);for(let s=0;s<n;s++)e[s]&&e[s].delimiters&&Uh(t,e[s].delimiters)}d(O_,"strikethrough_postProcess");var zh={tokenize:M_,postProcess:O_};function j_(t,e){const n=t.pos,s=t.src.charCodeAt(n);if(e||s!==95&&s!==42)return!1;const a=t.scanDelims(t.pos,s===42);for(let i=0;i<a.length;i++){const r=t.push("text","",0);r.content=String.fromCharCode(s),t.delimiters.push({marker:s,length:a.length,token:t.tokens.length-1,end:-1,open:a.can_open,close:a.can_close})}return t.pos+=a.length,!0}d(j_,"emphasis_tokenize");function Hh(t,e){const n=e.length;for(let s=n-1;s>=0;s--){const a=e[s];if(a.marker!==95&&a.marker!==42||a.end===-1)continue;const i=e[a.end],r=s>0&&e[s-1].end===a.end+1&&e[s-1].marker===a.marker&&e[s-1].token===a.token-1&&e[a.end+1].token===i.token+1,o=String.fromCharCode(a.marker),c=t.tokens[a.token];c.type=r?"strong_open":"em_open",c.tag=r?"strong":"em",c.nesting=1,c.markup=r?o+o:o,c.content="";const l=t.tokens[i.token];l.type=r?"strong_close":"em_close",l.tag=r?"strong":"em",l.nesting=-1,l.markup=r?o+o:o,l.content="",r&&(t.tokens[e[s-1].token].content="",t.tokens[e[a.end+1].token].content="",s--)}}d(Hh,"postProcess");function N_(t){const e=t.tokens_meta,n=t.tokens_meta.length;Hh(t,t.delimiters);for(let s=0;s<n;s++)e[s]&&e[s].delimiters&&Hh(t,e[s].delimiters)}d(N_,"emphasis_post_process");var Gh={tokenize:j_,postProcess:N_};function F_(t,e){let n,s,a,i,r="",o="",c=t.pos,l=!0;if(t.src.charCodeAt(t.pos)!==91)return!1;const u=t.pos,p=t.posMax,g=t.pos+1,y=t.md.helpers.parseLinkLabel(t,t.pos,!0);if(y<0)return!1;let w=y+1;if(w<p&&t.src.charCodeAt(w)===40){for(l=!1,w++;w<p&&(n=t.src.charCodeAt(w),!(!gt(n)&&n!==10));w++);if(w>=p)return!1;if(c=w,a=t.md.helpers.parseLinkDestination(t.src,w,t.posMax),a.ok){for(r=t.md.normalizeLink(a.str),t.md.validateLink(r)?w=a.pos:r="",c=w;w<p&&(n=t.src.charCodeAt(w),!(!gt(n)&&n!==10));w++);if(a=t.md.helpers.parseLinkTitle(t.src,w,t.posMax),w<p&&c!==w&&a.ok)for(o=a.str,w=a.pos;w<p&&(n=t.src.charCodeAt(w),!(!gt(n)&&n!==10));w++);}(w>=p||t.src.charCodeAt(w)!==41)&&(l=!0),w++}if(l){if(typeof t.env.references>"u")return!1;if(w<p&&t.src.charCodeAt(w)===91?(c=w+1,w=t.md.helpers.parseLinkLabel(t,w),w>=0?s=t.src.slice(c,w++):w=y+1):w=y+1,s||(s=t.src.slice(g,y)),i=t.env.references[_o(s)],!i)return t.pos=u,!1;r=i.href,o=i.title}if(!e){t.pos=g,t.posMax=y;const S=t.push("link_open","a",1),m=[["href",r]];S.attrs=m,o&&m.push(["title",o]),t.linkLevel++,t.md.inline.tokenize(t),t.linkLevel--,t.push("link_close","a",-1)}return t.pos=w,t.posMax=p,!0}d(F_,"link");function $_(t,e){let n,s,a,i,r,o,c,l,u="";const p=t.pos,g=t.posMax;if(t.src.charCodeAt(t.pos)!==33||t.src.charCodeAt(t.pos+1)!==91)return!1;const y=t.pos+2,w=t.md.helpers.parseLinkLabel(t,t.pos+1,!1);if(w<0)return!1;if(i=w+1,i<g&&t.src.charCodeAt(i)===40){for(i++;i<g&&(n=t.src.charCodeAt(i),!(!gt(n)&&n!==10));i++);if(i>=g)return!1;for(l=i,o=t.md.helpers.parseLinkDestination(t.src,i,t.posMax),o.ok&&(u=t.md.normalizeLink(o.str),t.md.validateLink(u)?i=o.pos:u=""),l=i;i<g&&(n=t.src.charCodeAt(i),!(!gt(n)&&n!==10));i++);if(o=t.md.helpers.parseLinkTitle(t.src,i,t.posMax),i<g&&l!==i&&o.ok)for(c=o.str,i=o.pos;i<g&&(n=t.src.charCodeAt(i),!(!gt(n)&&n!==10));i++);else c="";if(i>=g||t.src.charCodeAt(i)!==41)return t.pos=p,!1;i++}else{if(typeof t.env.references>"u")return!1;if(i<g&&t.src.charCodeAt(i)===91?(l=i+1,i=t.md.helpers.parseLinkLabel(t,i),i>=0?a=t.src.slice(l,i++):i=w+1):i=w+1,a||(a=t.src.slice(y,w)),r=t.env.references[_o(a)],!r)return t.pos=p,!1;u=r.href,c=r.title}if(!e){s=t.src.slice(y,w);const S=[];t.md.inline.parse(s,t.md,t.env,S);const m=t.push("image","img",0),D=[["src",u],["alt",""]];m.attrs=D,m.children=S,m.content=s,c&&D.push(["title",c])}return t.pos=i,t.posMax=g,!0}d($_,"image");const R_=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,q_=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;function B_(t,e){let n=t.pos;if(t.src.charCodeAt(n)!==60)return!1;const s=t.pos,a=t.posMax;for(;;){if(++n>=a)return!1;const r=t.src.charCodeAt(n);if(r===60)return!1;if(r===62)break}const i=t.src.slice(s+1,n);if(q_.test(i)){const r=t.md.normalizeLink(i);if(!t.md.validateLink(r))return!1;if(!e){const o=t.push("link_open","a",1);o.attrs=[["href",r]],o.markup="autolink",o.info="auto";const c=t.push("text","",0);c.content=t.md.normalizeLinkText(i);const l=t.push("link_close","a",-1);l.markup="autolink",l.info="auto"}return t.pos+=i.length+2,!0}if(R_.test(i)){const r=t.md.normalizeLink("mailto:"+i);if(!t.md.validateLink(r))return!1;if(!e){const o=t.push("link_open","a",1);o.attrs=[["href",r]],o.markup="autolink",o.info="auto";const c=t.push("text","",0);c.content=t.md.normalizeLinkText(i);const l=t.push("link_close","a",-1);l.markup="autolink",l.info="auto"}return t.pos+=i.length+2,!0}return!1}d(B_,"autolink");function U_(t){return/^<a[>\s]/i.test(t)}d(U_,"isLinkOpen");function z_(t){return/^<\/a\s*>/i.test(t)}d(z_,"isLinkClose");function H_(t){const e=t|32;return e>=97&&e<=122}d(H_,"isLetter");function G_(t,e){if(!t.md.options.html)return!1;const n=t.posMax,s=t.pos;if(t.src.charCodeAt(s)!==60||s+2>=n)return!1;const a=t.src.charCodeAt(s+1);if(a!==33&&a!==63&&a!==47&&!H_(a))return!1;const i=t.src.slice(s).match(x_);if(!i)return!1;if(!e){const r=t.push("html_inline","",0);r.content=i[0],U_(r.content)&&t.linkLevel++,z_(r.content)&&t.linkLevel--}return t.pos+=i[0].length,!0}d(G_,"html_inline");const V_=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,W_=/^&([a-z][a-z0-9]{1,31});/i;function K_(t,e){const n=t.pos,s=t.posMax;if(t.src.charCodeAt(n)!==38||n+1>=s)return!1;if(t.src.charCodeAt(n+1)===35){const i=t.src.slice(n).match(V_);if(i){if(!e){const r=i[1][0].toLowerCase()==="x"?parseInt(i[1].slice(1),16):parseInt(i[1],10),o=t.push("text_special","",0);o.content=Cl(r)?Ao(r):Ao(65533),o.markup=i[0],o.info="entity"}return t.pos+=i[0].length,!0}}else{const i=t.src.slice(n).match(W_);if(i){const r=Ih(i[0]);if(r!==i[0]){if(!e){const o=t.push("text_special","",0);o.content=r,o.markup=i[0],o.info="entity"}return t.pos+=i[0].length,!0}}}return!1}d(K_,"entity");function Vh(t){const e={},n=t.length;if(!n)return;let s=0,a=-2;const i=[];for(let r=0;r<n;r++){const o=t[r];if(i.push(0),(t[s].marker!==o.marker||a!==o.token-1)&&(s=r),a=o.token,o.length=o.length||0,!o.close)continue;e.hasOwnProperty(o.marker)||(e[o.marker]=[-1,-1,-1,-1,-1,-1]);const c=e[o.marker][(o.open?3:0)+o.length%3];let l=s-i[s]-1,u=l;for(;l>c;l-=i[l]+1){const p=t[l];if(p.marker===o.marker&&p.open&&p.end<0){let g=!1;if((p.close||o.open)&&(p.length+o.length)%3===0&&(p.length%3!==0||o.length%3!==0)&&(g=!0),!g){const y=l>0&&!t[l-1].open?i[l-1]+1:0;i[r]=r-l+y,i[l]=y,o.open=!1,p.end=r,p.close=!1,u=-1,a=-2;break}}}u!==-1&&(e[o.marker][(o.open?3:0)+(o.length||0)%3]=u)}}d(Vh,"processDelimiters");function Y_(t){const e=t.tokens_meta,n=t.tokens_meta.length;Vh(t.delimiters);for(let s=0;s<n;s++)e[s]&&e[s].delimiters&&Vh(e[s].delimiters)}d(Y_,"link_pairs");function X_(t){let e,n,s=0;const a=t.tokens,i=t.tokens.length;for(e=n=0;e<i;e++)a[e].nesting<0&&s--,a[e].level=s,a[e].nesting>0&&s++,a[e].type==="text"&&e+1<i&&a[e+1].type==="text"?a[e+1].content=a[e].content+a[e+1].content:(e!==n&&(a[n]=a[e]),n++);e!==n&&(a.length=n)}d(X_,"fragments_join");const Pl=[["text",k_],["linkify",D_],["newline",I_],["escape",L_],["backticks",T_],["strikethrough",zh.tokenize],["emphasis",Gh.tokenize],["link",F_],["image",$_],["autolink",B_],["html_inline",G_],["entity",K_]],Dl=[["balance_pairs",Y_],["strikethrough",zh.postProcess],["emphasis",Gh.postProcess],["fragments_join",X_]];function ai(){this.ruler=new Qt;for(let t=0;t<Pl.length;t++)this.ruler.push(Pl[t][0],Pl[t][1]);this.ruler2=new Qt;for(let t=0;t<Dl.length;t++)this.ruler2.push(Dl[t][0],Dl[t][1])}d(ai,"ParserInline"),ai.prototype.skipToken=function(t){const e=t.pos,n=this.ruler.getRules(""),s=n.length,a=t.md.options.maxNesting,i=t.cache;if(typeof i[e]<"u"){t.pos=i[e];return}let r=!1;if(t.level<a){for(let o=0;o<s;o++)if(t.level++,r=n[o](t,!0),t.level--,r){if(e>=t.pos)throw new Error("inline rule didn't increment state.pos");break}}else t.pos=t.posMax;r||t.pos++,i[e]=t.pos},ai.prototype.tokenize=function(t){const e=this.ruler.getRules(""),n=e.length,s=t.posMax,a=t.md.options.maxNesting;for(;t.pos<s;){const i=t.pos;let r=!1;if(t.level<a){for(let o=0;o<n;o++)if(r=e[o](t,!1),r){if(i>=t.pos)throw new Error("inline rule didn't increment state.pos");break}}if(r){if(t.pos>=s)break;continue}t.pending+=t.src[t.pos++]}t.pending&&t.pushPending()},ai.prototype.parse=function(t,e,n,s){const a=new this.State(t,e,n,s);this.tokenize(a);const i=this.ruler2.getRules(""),r=i.length;for(let o=0;o<r;o++)i[o](a)},ai.prototype.State=si;function J_(t){const e={};t=t||{},e.src_Any=Ah.source,e.src_Cc=_h.source,e.src_Z=Ph.source,e.src_P=yl.source,e.src_ZPCc=[e.src_Z,e.src_P,e.src_Cc].join("|"),e.src_ZCc=[e.src_Z,e.src_Cc].join("|");const n="[><\uFF5C]";return e.src_pseudo_letter="(?:(?!"+n+"|"+e.src_ZPCc+")"+e.src_Any+")",e.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",e.src_auth="(?:(?:(?!"+e.src_ZCc+"|[@/\\[\\]()]).)+@)?",e.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",e.src_host_terminator="(?=$|"+n+"|"+e.src_ZPCc+")(?!"+(t["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+e.src_ZPCc+"))",e.src_path="(?:[/?#](?:(?!"+e.src_ZCc+"|"+n+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+e.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+e.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+e.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+e.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+e.src_ZCc+"|[']).)+\\'|\\'(?="+e.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+e.src_ZCc+"|[.]|$)|"+(t["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+e.src_ZCc+"|$)|;(?!"+e.src_ZCc+"|$)|\\!+(?!"+e.src_ZCc+"|[!]|$)|\\?(?!"+e.src_ZCc+"|[?]|$))+|\\/)?",e.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',e.src_xn="xn--[a-z0-9\\-]{1,59}",e.src_domain_root="(?:"+e.src_xn+"|"+e.src_pseudo_letter+"{1,63})",e.src_domain="(?:"+e.src_xn+"|(?:"+e.src_pseudo_letter+")|(?:"+e.src_pseudo_letter+"(?:-|"+e.src_pseudo_letter+"){0,61}"+e.src_pseudo_letter+"))",e.src_host="(?:(?:(?:(?:"+e.src_domain+")\\.)*"+e.src_domain+"))",e.tpl_host_fuzzy="(?:"+e.src_ip4+"|(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%)))",e.tpl_host_no_ip_fuzzy="(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%))",e.src_host_strict=e.src_host+e.src_host_terminator,e.tpl_host_fuzzy_strict=e.tpl_host_fuzzy+e.src_host_terminator,e.src_host_port_strict=e.src_host+e.src_port+e.src_host_terminator,e.tpl_host_port_fuzzy_strict=e.tpl_host_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_port_no_ip_fuzzy_strict=e.tpl_host_no_ip_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+e.src_ZPCc+"|>|$))",e.tpl_email_fuzzy="(^|"+n+'|"|\\(|'+e.src_ZCc+")("+e.src_email_name+"@"+e.tpl_host_fuzzy_strict+")",e.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|\uFF5C]|"+e.src_ZPCc+"))((?![$+<=>^`|\uFF5C])"+e.tpl_host_port_fuzzy_strict+e.src_path+")",e.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|\uFF5C]|"+e.src_ZPCc+"))((?![$+<=>^`|\uFF5C])"+e.tpl_host_port_no_ip_fuzzy_strict+e.src_path+")",e}d(J_,"reFactory");function Il(t){return Array.prototype.slice.call(arguments,1).forEach(function(n){n&&Object.keys(n).forEach(function(s){t[s]=n[s]})}),t}d(Il,"assign");function Io(t){return Object.prototype.toString.call(t)}d(Io,"_class");function Z_(t){return Io(t)==="[object String]"}d(Z_,"isString");function Q_(t){return Io(t)==="[object Object]"}d(Q_,"isObject");function ek(t){return Io(t)==="[object RegExp]"}d(ek,"isRegExp");function Wh(t){return Io(t)==="[object Function]"}d(Wh,"isFunction");function tk(t){return t.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}d(tk,"escapeRE");const Kh={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function nk(t){return Object.keys(t||{}).reduce(function(e,n){return e||Kh.hasOwnProperty(n)},!1)}d(nk,"isOptionsObj");const sk={"http:":{validate:function(t,e,n){const s=t.slice(e);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(s)?s.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(t,e,n){const s=t.slice(e);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(s)?e>=3&&t[e-3]===":"||e>=3&&t[e-3]==="/"?0:s.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(t,e,n){const s=t.slice(e);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(s)?s.match(n.re.mailto)[0].length:0}}},ak="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",ik="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|\u0440\u0444".split("|");function ok(t){t.__index__=-1,t.__text_cache__=""}d(ok,"resetScanCache");function rk(t){return function(e,n){const s=e.slice(n);return t.test(s)?s.match(t)[0].length:0}}d(rk,"createValidator");function Yh(){return function(t,e){e.normalize(t)}}d(Yh,"createNormalizer");function Lo(t){const e=t.re=J_(t.__opts__),n=t.__tlds__.slice();t.onCompile(),t.__tlds_replaced__||n.push(ak),n.push(e.src_xn),e.src_tlds=n.join("|");function s(o){return o.replace("%TLDS%",e.src_tlds)}d(s,"untpl"),e.email_fuzzy=RegExp(s(e.tpl_email_fuzzy),"i"),e.link_fuzzy=RegExp(s(e.tpl_link_fuzzy),"i"),e.link_no_ip_fuzzy=RegExp(s(e.tpl_link_no_ip_fuzzy),"i"),e.host_fuzzy_test=RegExp(s(e.tpl_host_fuzzy_test),"i");const a=[];t.__compiled__={};function i(o,c){throw new Error('(LinkifyIt) Invalid schema "'+o+'": '+c)}d(i,"schemaError"),Object.keys(t.__schemas__).forEach(function(o){const c=t.__schemas__[o];if(c===null)return;const l={validate:null,link:null};if(t.__compiled__[o]=l,Q_(c)){ek(c.validate)?l.validate=rk(c.validate):Wh(c.validate)?l.validate=c.validate:i(o,c),Wh(c.normalize)?l.normalize=c.normalize:c.normalize?i(o,c):l.normalize=Yh();return}if(Z_(c)){a.push(o);return}i(o,c)}),a.forEach(function(o){t.__compiled__[t.__schemas__[o]]&&(t.__compiled__[o].validate=t.__compiled__[t.__schemas__[o]].validate,t.__compiled__[o].normalize=t.__compiled__[t.__schemas__[o]].normalize)}),t.__compiled__[""]={validate:null,normalize:Yh()};const r=Object.keys(t.__compiled__).filter(function(o){return o.length>0&&t.__compiled__[o]}).map(tk).join("|");t.re.schema_test=RegExp("(^|(?!_)(?:[><\uFF5C]|"+e.src_ZPCc+"))("+r+")","i"),t.re.schema_search=RegExp("(^|(?!_)(?:[><\uFF5C]|"+e.src_ZPCc+"))("+r+")","ig"),t.re.schema_at_start=RegExp("^"+t.re.schema_search.source,"i"),t.re.pretest=RegExp("("+t.re.schema_test.source+")|("+t.re.host_fuzzy_test.source+")|@","i"),ok(t)}d(Lo,"compile");function lk(t,e){const n=t.__index__,s=t.__last_index__,a=t.__text_cache__.slice(n,s);this.schema=t.__schema__.toLowerCase(),this.index=n+e,this.lastIndex=s+e,this.raw=a,this.text=a,this.url=a}d(lk,"Match");function Ll(t,e){const n=new lk(t,e);return t.__compiled__[n.schema].normalize(n,t),n}d(Ll,"createMatch");function fn(t,e){if(!(this instanceof fn))return new fn(t,e);e||nk(t)&&(e=t,t={}),this.__opts__=Il({},Kh,e),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=Il({},sk,t),this.__compiled__={},this.__tlds__=ik,this.__tlds_replaced__=!1,this.re={},Lo(this)}d(fn,"LinkifyIt"),fn.prototype.add=d(function(e,n){return this.__schemas__[e]=n,Lo(this),this},"add"),fn.prototype.set=d(function(e){return this.__opts__=Il(this.__opts__,e),this},"set"),fn.prototype.test=d(function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;let n,s,a,i,r,o,c,l,u;if(this.re.schema_test.test(e)){for(c=this.re.schema_search,c.lastIndex=0;(n=c.exec(e))!==null;)if(i=this.testSchemaAt(e,n[2],c.lastIndex),i){this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+i;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(l=e.search(this.re.host_fuzzy_test),l>=0&&(this.__index__<0||l<this.__index__)&&(s=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(r=s.index+s[1].length,(this.__index__<0||r<this.__index__)&&(this.__schema__="",this.__index__=r,this.__last_index__=s.index+s[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(u=e.indexOf("@"),u>=0&&(a=e.match(this.re.email_fuzzy))!==null&&(r=a.index+a[1].length,o=a.index+a[0].length,(this.__index__<0||r<this.__index__||r===this.__index__&&o>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=r,this.__last_index__=o))),this.__index__>=0},"test"),fn.prototype.pretest=d(function(e){return this.re.pretest.test(e)},"pretest"),fn.prototype.testSchemaAt=d(function(e,n,s){return this.__compiled__[n.toLowerCase()]?this.__compiled__[n.toLowerCase()].validate(e,s,this):0},"testSchemaAt"),fn.prototype.match=d(function(e){const n=[];let s=0;this.__index__>=0&&this.__text_cache__===e&&(n.push(Ll(this,s)),s=this.__last_index__);let a=s?e.slice(s):e;for(;this.test(a);)n.push(Ll(this,s)),a=a.slice(this.__last_index__),s+=this.__last_index__;return n.length?n:null},"match"),fn.prototype.matchAtStart=d(function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return null;const n=this.re.schema_at_start.exec(e);if(!n)return null;const s=this.testSchemaAt(e,n[2],n[0].length);return s?(this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+s,Ll(this,0)):null},"matchAtStart"),fn.prototype.tlds=d(function(e,n){return e=Array.isArray(e)?e:[e],n?(this.__tlds__=this.__tlds__.concat(e).sort().filter(function(s,a,i){return s!==i[a-1]}).reverse(),Lo(this),this):(this.__tlds__=e.slice(),this.__tlds_replaced__=!0,Lo(this),this)},"tlds"),fn.prototype.normalize=d(function(e){e.schema||(e.url="http://"+e.url),e.schema==="mailto:"&&!/^mailto:/i.test(e.url)&&(e.url="mailto:"+e.url)},"normalize"),fn.prototype.onCompile=d(function(){},"onCompile");const ha=2147483647,Rn=36,Tl=1,ii=26,uk=38,ck=700,Xh=72,Jh=128,Zh="-",dk=/^xn--/,pk=/[^\0-\x7F]/,hk=/[\x2E\u3002\uFF0E\uFF61]/g,fk={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Ml=Rn-Tl,qn=Math.floor,Ol=String.fromCharCode;function gs(t){throw new RangeError(fk[t])}d(gs,"error");function mk(t,e){const n=[];let s=t.length;for(;s--;)n[s]=e(t[s]);return n}d(mk,"map");function Qh(t,e){const n=t.split("@");let s="";n.length>1&&(s=n[0]+"@",t=n[1]),t=t.replace(hk,".");const a=t.split("."),i=mk(a,e).join(".");return s+i}d(Qh,"mapDomain");function ef(t){const e=[];let n=0;const s=t.length;for(;n<s;){const a=t.charCodeAt(n++);if(a>=55296&&a<=56319&&n<s){const i=t.charCodeAt(n++);(i&64512)==56320?e.push(((a&1023)<<10)+(i&1023)+65536):(e.push(a),n--)}else e.push(a)}return e}d(ef,"ucs2decode");const gk=d(t=>String.fromCodePoint(...t),"ucs2encode"),bk=d(function(t){return t>=48&&t<58?26+(t-48):t>=65&&t<91?t-65:t>=97&&t<123?t-97:Rn},"basicToDigit"),tf=d(function(t,e){return t+22+75*(t<26)-((e!=0)<<5)},"digitToBasic"),nf=d(function(t,e,n){let s=0;for(t=n?qn(t/ck):t>>1,t+=qn(t/e);t>Ml*ii>>1;s+=Rn)t=qn(t/Ml);return qn(s+(Ml+1)*t/(t+uk))},"adapt"),sf=d(function(t){const e=[],n=t.length;let s=0,a=Jh,i=Xh,r=t.lastIndexOf(Zh);r<0&&(r=0);for(let o=0;o<r;++o)t.charCodeAt(o)>=128&&gs("not-basic"),e.push(t.charCodeAt(o));for(let o=r>0?r+1:0;o<n;){const c=s;for(let u=1,p=Rn;;p+=Rn){o>=n&&gs("invalid-input");const g=bk(t.charCodeAt(o++));g>=Rn&&gs("invalid-input"),g>qn((ha-s)/u)&&gs("overflow"),s+=g*u;const y=p<=i?Tl:p>=i+ii?ii:p-i;if(g<y)break;const w=Rn-y;u>qn(ha/w)&&gs("overflow"),u*=w}const l=e.length+1;i=nf(s-c,l,c==0),qn(s/l)>ha-a&&gs("overflow"),a+=qn(s/l),s%=l,e.splice(s++,0,a)}return String.fromCodePoint(...e)},"decode"),af=d(function(t){const e=[];t=ef(t);const n=t.length;let s=Jh,a=0,i=Xh;for(const c of t)c<128&&e.push(Ol(c));const r=e.length;let o=r;for(r&&e.push(Zh);o<n;){let c=ha;for(const u of t)u>=s&&u<c&&(c=u);const l=o+1;c-s>qn((ha-a)/l)&&gs("overflow"),a+=(c-s)*l,s=c;for(const u of t)if(u<s&&++a>ha&&gs("overflow"),u===s){let p=a;for(let g=Rn;;g+=Rn){const y=g<=i?Tl:g>=i+ii?ii:g-i;if(p<y)break;const w=p-y,S=Rn-y;e.push(Ol(tf(y+w%S,0))),p=qn(w/S)}e.push(Ol(tf(p,0))),i=nf(a,l,o===r),a=0,++o}++a,++s}return e.join("")},"encode"),vk=d(function(t){return Qh(t,function(e){return dk.test(e)?sf(e.slice(4).toLowerCase()):e})},"toUnicode"),yk=d(function(t){return Qh(t,function(e){return pk.test(e)?"xn--"+af(e):e})},"toASCII"),of={version:"2.3.1",ucs2:{decode:ef,encode:gk},decode:sf,encode:af,toASCII:yk,toUnicode:vk};var xk={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201C\u201D\u2018\u2019",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},wk={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201C\u201D\u2018\u2019",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},Sk={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201C\u201D\u2018\u2019",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}};const Ck={default:xk,zero:wk,commonmark:Sk},Ek=/^(vbscript|javascript|file|data):/,Ak=/^data:image\/(gif|png|jpeg|webp);/;function _k(t){const e=t.trim().toLowerCase();return Ek.test(e)?Ak.test(e):!0}d(_k,"validateLink");const rf=["http:","https:","mailto:"];function kk(t){const e=vl(t,!0);if(e.hostname&&(!e.protocol||rf.indexOf(e.protocol)>=0))try{e.hostname=of.toASCII(e.hostname)}catch{}return Qa(bl(e))}d(kk,"normalizeLink");function Pk(t){const e=vl(t,!0);if(e.hostname&&(!e.protocol||rf.indexOf(e.protocol)>=0))try{e.hostname=of.toUnicode(e.hostname)}catch{}return ua(bl(e),ua.defaultChars+"%")}d(Pk,"normalizeLinkText");function yn(t,e){if(!(this instanceof yn))return new yn(t,e);e||Sl(t)||(e=t||{},t="default"),this.inline=new ai,this.block=new Do,this.core=new Al,this.renderer=new da,this.linkify=new fn,this.validateLink=_k,this.normalizeLink=kk,this.normalizeLinkText=Pk,this.utils=IA,this.helpers=Eo({},OA),this.options={},this.configure(t),e&&this.set(e)}d(yn,"MarkdownIt"),yn.prototype.set=function(t){return Eo(this.options,t),this},yn.prototype.configure=function(t){const e=this;if(Sl(t)){const n=t;if(t=Ck[n],!t)throw new Error('Wrong `markdown-it` preset "'+n+'", check name')}if(!t)throw new Error("Wrong `markdown-it` preset, can't be empty");return t.options&&e.set(t.options),t.components&&Object.keys(t.components).forEach(function(n){t.components[n].rules&&e[n].ruler.enableOnly(t.components[n].rules),t.components[n].rules2&&e[n].ruler2.enableOnly(t.components[n].rules2)}),this},yn.prototype.enable=function(t,e){let n=[];Array.isArray(t)||(t=[t]),["core","block","inline"].forEach(function(a){n=n.concat(this[a].ruler.enable(t,!0))},this),n=n.concat(this.inline.ruler2.enable(t,!0));const s=t.filter(function(a){return n.indexOf(a)<0});if(s.length&&!e)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+s);return this},yn.prototype.disable=function(t,e){let n=[];Array.isArray(t)||(t=[t]),["core","block","inline"].forEach(function(a){n=n.concat(this[a].ruler.disable(t,!0))},this),n=n.concat(this.inline.ruler2.disable(t,!0));const s=t.filter(function(a){return n.indexOf(a)<0});if(s.length&&!e)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+s);return this},yn.prototype.use=function(t){const e=[this].concat(Array.prototype.slice.call(arguments,1));return t.apply(t,e),this},yn.prototype.parse=function(t,e){if(typeof t!="string")throw new Error("Input data should be a String");const n=new this.core.State(t,this,e);return this.core.process(n),n.tokens},yn.prototype.render=function(t,e){return e=e||{},this.renderer.render(this.parse(t,e),this.options,e)},yn.prototype.parseInline=function(t,e){const n=new this.core.State(t,this,e);return n.inlineMode=!0,this.core.process(n),n.tokens},yn.prototype.renderInline=function(t,e){return e=e||{},this.renderer.render(this.parseInline(t,e),this.options,e)};var Dk=Object.defineProperty,Ik=d((t,e)=>Dk(t,"name",{value:e,configurable:!0}),"u$4");const lf=class extends Be{static{d(this,"c")}async init(){this.markdownParser=yn({html:!0,linkify:!0,typographer:!0}),this.settings={description:{type:"textarea",label:"Description",value:"",help:"Add a note's text content to keep track of ideas, tasks, or reminders.",tooltipClasses:"w-56 ",arrowClasses:"-ml-11",hintPosition:"bottom",validate:"maxlength=5000",validateMessage:"Your text exceeds the 5,000 character limit."},textColor:{type:"color",label:"Text Color",class:"w-full",value:"#000000",help:"Choose the color of the note's text to improve readability or match your style.",tooltipClasses:"w-56 ",arrowClasses:"-ml-11",hintPosition:"bottom",events:{change:n=>{n.target.style.backgroundColor=n.target.value,this.domElement.style.color=n.target.value;const s=this.domElement.querySelector(".title .text");s&&(s.style.color=n.target.value)}}},color:{type:"color",label:"Background Color",class:"w-full",value:"#c7ff1529",help:"Set the background color of the note to organize or highlight different types of information.",tooltipClasses:"w-56 ",arrowClasses:"-ml-11",events:{change:n=>{n.target.style.backgroundColor=n.target.value,this.domElement.style.backgroundColor=n.target.value}}},markdown_enabled:{type:"toggle",label:"Enable Markdown",section:"Advanced",value:!0,help:"If enabled, allows you to add markdown content that will be rendered in the note.",tooltipClasses:"w-64 ",arrowClasses:"-ml-11",display:"inline",events:{change:this.markdownToggleHandler.bind(this)}},markdown_content:{type:"textarea",label:"Markdown Content",section:"Advanced",value:"",help:"Add markdown content that will be rendered in the note.",tooltipClasses:"w-56 ",arrowClasses:"-ml-11",hintPosition:"bottom",validate:"maxlength=5000",validateMessage:"Your text exceeds the 5,000 character limit."}};const e=["color","textColor","markdown_enabled","markdown_content"];for(let n of e)typeof this.data[n]>"u"&&(this.data[n]=this.settings[n].value);!this.data._noteHeight&&this.properties.height&&(this.data._noteHeight=this.properties.height),this.properties.defaultOutputs=[],this.properties.defaultInputs=[],this.drawSettings.iconCSSClass="svg-icon "+this.constructor.name,this.drawSettings.addOutputButton=null,this.drawSettings.addInputButton=null,this.drawSettings.componentDescription="",this.drawSettings.shortDescription="",this.drawSettings.color="#ff00f2",this.drawSettings.showSettings=!0,this?.domElement?.style?.zIndex&&(this.domElement.style.zIndex="1"),setTimeout(()=>{const n=this.domElement?.querySelector(".title .text");n&&n.style.color!==(this.data.textColor||"#000")&&(n.style.color=this.data.textColor||"#000")},550)}async markdownToggleHandler(e){const n=e.target.checked,s=e.target.closest("form");if(!s)return;const a=s.querySelector('.form-box[data-field-name="markdown_content"]'),i=a?.querySelector("textarea");!a||!i||(a.classList.toggle("hidden",!n),this.resetTextarea(i),n||(this.data.markdown_content="",this.removeMarkdownContent()))}resetTextarea(e){e.value="",e.style.height="34px",e.dispatchEvent(new Event("input",{bubbles:!0}))}removeMarkdownContent(){const e=this.domElement?.querySelector(".note-markdown");e&&(e.remove(),this.autoResizeNote())}autoResizeNote(){const e=this.domElement?.querySelector(".note-content-wrapper");e&&setTimeout(()=>{const n=e.scrollHeight,s=40,a=20,i=80,r=n+s+a,o=Math.max(r,i)+"px";this.domElement.style.height=o,this.properties.height=o,this.data._noteHeight=o},10)}renderMarkdownContent(){const e=this.domElement?.querySelector(".note-markdown");if(e&&e.remove(),!this.data.markdown_enabled||!this.data.markdown_content?.trim())return;const n=this.domElement?.querySelector(".note-content-wrapper");if(!n)return;const s=document.createElement("div");s.classList.add("note-markdown"),s.innerHTML=this.markdownParser.render(this.data.markdown_content),n.appendChild(s)}updateNoteContent(){this.domElement.querySelector(".note-text").innerHTML=this.data.description||"",this.renderMarkdownContent(),this.autoResizeNote()}updateNoteStyles(){this.domElement.style.backgroundColor=this.data.color,this.domElement.style.borderColor=this.data.color,this.domElement.style.color=this.data.textColor;const e=this.domElement.querySelector(".title .text");e&&(e.style.color=this.data.textColor)}initializeSidebar(e){const n=e.querySelector("#textColor"),s=e.querySelector("#color");n&&this.data.textColor&&(n.style.backgroundColor=this.data.textColor),s&&this.data.color&&(s.style.backgroundColor=this.data.color);const a=e.querySelector('.form-box[data-field-name="markdown_content"]');a&&a.classList.toggle("hidden",!this.data.markdown_enabled)}async run(){return this.addEventListener("settingsSaved",e=>{this.updateNoteContent(),this.updateNoteStyles()}),this.addEventListener("settingsOpened",(e,n)=>{n===this&&setTimeout(()=>this.initializeSidebar(e),100)}),!0}redraw(e=!1){const n=super.redraw(e);n.style.backgroundColor=this.data.color,n.style.borderColor=this.data.color,n.style.color=this.data.textColor,n.style.zIndex||(n.style.zIndex="1"),this.properties.width&&(n.style.width=this.properties.width),this.data._noteHeight?n.style.height=this.data._noteHeight:this.properties.height&&(n.style.height=this.properties.height,this.data._noteHeight=this.properties.height);const s=n.querySelector(".title .text");s&&(s.style.color=this.data.textColor),n.querySelector(".title-bar .description").classList.add("hidden"),n.querySelector(".title-bar .icon").classList.add("hidden"),n.querySelector(".debug-bar").classList.add("hidden"),n.querySelector(".ep-control.inputs").classList.add("hidden"),n.querySelector(".ep-control.outputs").classList.add("hidden"),n.querySelector(".input-container").classList.add("hidden"),n.querySelector(".output-container").classList.add("hidden"),n.querySelector(".button-container").classList.add("hidden");const a=document.createElement("div");a.classList.add("note-content-wrapper");const i=document.createElement("pre");i.classList.add("note-text"),i.innerHTML=this.data.description||"",a.appendChild(i),n.appendChild(a),setTimeout(()=>{this.renderMarkdownContent()},0);const r=document.createElement("div");r.classList.add("resize-handle"),n.appendChild(r),a.addEventListener("wheel",l=>{l.ctrlKey||l.metaKey||l.stopPropagation()});const o=this,c=this.workspace;return ds(n).resizable({edges:{left:!1,right:!0,bottom:!0,top:!1},listeners:{start(l){if(c?.locked||[...o.domElement.querySelectorAll(".pinned")].length>0)return!1;o.domElement.classList.add("resizing")},move(l){if(c?.locked||[...o.domElement.querySelectorAll(".pinned")].length>0)return!1;const u=l.target,p=Math.round(l.rect.width/c.scale)+"px",g=Math.round(l.rect.height/c.scale)+"px";u.style.width=p,u.style.height=g,o.properties.width=p,o.properties.height=g,o.data._noteHeight=g,o.repaint(!1)},end(l){if(c?.locked||[...o.domElement.querySelectorAll(".pinned")].length>0)return!1;const u=o.domElement.style.height;u&&(o.properties.height=u,o.data._noteHeight=u),o.repaint(),setTimeout(()=>{o.workspace.saveAgent(),o.domElement.classList.remove("resizing")},200)}},modifiers:[ds.modifiers.restrictSize({min:{width:100,height:50}})],inertia:!1}),n}addDebugButton(){}};Ik(lf,"Note");let Lk=lf;var Tk=Object.defineProperty,Mk=d((t,e)=>Tk(t,"name",{value:e,configurable:!0}),"u$3");const uf=class extends Be{static{d(this,"o")}async init(){this.settings={endpoint:{type:"input",label:"Endpoint",value:"",validate:"required maxlength=50 custom=isValidEndpoint",validateMessage:"Provide a valid endpoint that only contains 'a-z', 'A-Z', '0-9', '-', '_' , without leading or trailing spaces.",hint:"Enter endpoint name"},ai_exposed:{type:"checkbox",label:"Expose to AI",value:!0,hint:"If checked, the endpoint can be used by AI (e.g. ChatGPT, Chatbot, ...)",events:{change:this.exposeIAChangeHandler.bind(this)}},description:{type:"textarea",label:"Instructions",value:"",hint:"Instructions for AI Agent, Describes how to use this endpoint when exposed to an LLM",validate:"maxlength=5000",validateMessage:"Your text exceeds the 5,000 character limit."},summary:{type:"textarea",label:"Description",value:"",hint:"Short description of the endpoint, used for documentation",validate:"maxlength=1000",validateMessage:"Your text exceeds the 1,000 character limit."}};const e=["endpoint","description","ai_exposed","summary"];for(let n of e)typeof this.data[n]>"u"&&(this.data[n]=this.settings[n].value);this.inputSettings={...this.inputSettings,description:{type:"string",label:"Description",default:"",editConfig:{type:"textarea"}},isFile:{type:"boolean",editConfig:{type:"checkbox",label:"Binary Input",value:!1,cls:"hidden"}}},this.properties.defaultOutputs=["headers","body","query"],this.drawSettings.iconCSSClass="svg-icon "+this.constructor.name,this.drawSettings.addOutputButton="Request Parts",this.drawSettings.addInputButton="Parameters",this.drawSettings.showSettings=!0,this.drawSettings.inputMaxConnections=0,this.drawSettings.shortDescription="HTTP API Endpoint - Expose your agent as a REST API",this.drawSettings.color="#b700f1",this._ready=!0}async exposeIAChangeHandler(e){console.log(e,e.target,e.target.checked);const n=e.target.closest("form");if(!n)return;const s=n.querySelector('.form-box[data-field-name="description"]');s&&(e.target.checked?s.classList.remove("hidden"):s.classList.add("hidden"))}inputNameExists(e){return!!(this.inputContainer.querySelector(`.input-endpoint[smt-name="${e}"]`)||this.outputContainer.querySelector(`.output-endpoint[smt-name="${e}"]`))}async addInput(e,n){if(this.properties.defaultOutputs.includes(n))return super.addInput(e,n);const s=await super.addInput(e,n),a=e.parentElement.querySelector(".output-container"),i=`body.${n}`,r=await super.addOutput(a,i);return s.querySelector(".ep").setAttribute("smt-con-thickness","8"),s.querySelector(".ep").setAttribute("smt-con-hide-overlays","true"),s._outputDivElement=r,r._inputDivElement=s,this.repaint(),s}async addOutput(e,n){return this.properties.defaultOutputs.includes(n)?super.addOutput(e,n):null}async deleteEndpoint(e){console.log("deleting"),super.deleteEndpoint(e);const n=e._outputDivElement||e._inputDivElement;e._outputDivElement&&(e.outputDivElement=null),e._inputDivElement&&(e.inputDivElement=null),n&&super.deleteEndpoint(n)}async run(){this.addEventListener("settingsOpened",async e=>{await je(50);const n=e.querySelector('.form-box[data-field-name="description"]');n&&(this.data.ai_exposed?n.classList.remove("hidden"):n.classList.add("hidden"))}),this.addEventListener("endpointChanged",(e,n,s,a)=>{if(e!="name")return;console.log("endpointNameChanged",n,s,a);const i=n.classList.contains("input-endpoint")?n:n._inputDivElement,r=n.classList.contains("output-endpoint")?n:n._outputDivElement,o=i.getAttribute("smt-name"),c=r.getAttribute("smt-name");if(o!=a&&(i.setAttribute("smt-name",a),i.querySelector(".name").innerText=a),c!=a){const l=`body.${a}`;r.setAttribute("smt-name",l),r.querySelector(".name").innerText=l}})}};Mk(uf,"POST_APIEndpoint");let Ok=uf;var jk=Object.defineProperty,Nk=d((t,e)=>jk(t,"name",{value:e,configurable:!0}),"u$2");const cf=class extends Be{static{d(this,"m")}async prepare(){const e=lt.prepareModelSelectOptionsByFeatures(["text"]);this.defaultModel=lt.getDefaultModel(e),e.unshift("Echo");const n=this.data.model||this.defaultModel;return n&&![...e.map(s=>s?.value||s)].includes(n)&&e.push({text:n+"&nbsp;&nbsp",value:n,badge:Nt("Removed","text-smyth-red-500 border-smyth-red-500")}),this.modelOptions=e.filter(s=>s),this.setModelParams(n),!0}async init(){this.settings=this.generateSettings();const e=["model","prompt","temperature","maxTokens","stopSequences","topP","topK","frequencyPenalty","presencePenalty"];for(let n of e)typeof this.data[n]>"u"&&(this.data[n]=this.settings[n].value);this.outputSettings={...this.outputSettings,description:{type:"string",default:"",editConfig:{type:"textarea"}}},this.properties.defaultInputs=[],this.properties.inputs.length==0&&(this.properties.inputs=["Input"]),this.properties.defaultOutputs=["Reply"],this.drawSettings.displayName="LLM Prompt",this.drawSettings.iconCSSClass="svg-icon "+this.constructor.name,this.drawSettings.componentDescription="Use LLM to generate output based on prompt and input variables",this.drawSettings.shortDescription="LLM - Generates output based on prompt and input variables",this.drawSettings.color="#65a698",this._ready=!0}async run(){this.addEventListener("settingsOpened",this.handleSettingsOpened.bind(this))}async handleSettingsOpened(e,n){n===this&&(await je(200),await Ds(e,this),e.querySelector("#model"))}async handleElementClick(e){await Xs(e,this)}async saveApiKey(e,n,s){return await Is(e,n,s,this.workspace,this.refreshLLMModels.bind(this))}async refreshLLMModels(){await Ls(this.workspace,this.prepare.bind(this),this.init.bind(this),this.refreshSettingsSidebar.bind(this))}modelChangeHandler(e){e.closest(".select.smt-input-select"),Er.updateFieldsInfo(e),Er.updateMaxTokens(e),this.setModelParams(e.value||this.defaultModel),this.settings=this.generateSettings(),Er.toggleFields(e)}setModelParams(e){const n=window.__LLM_MODELS__?.[e]?.provider?.toLowerCase()||window.__LLM_MODELS__?.[e]?.llm?.toLowerCase(),s=cs[n]||cs.default;this.modelParams={allowedContextTokens:Sr(e),allowedCompletionTokens:Cr(e),maxTemperature:s?.maxTemperature,maxStopSequences:s?.maxStopSequences,maxTopP:s?.maxTopP,maxTopK:s?.maxTopK,maxFrequencyPenalty:s?.maxFrequencyPenalty,maxPresencePenalty:s?.maxPresencePenalty,minTopP:s?.minTopP,minTopK:s?.minTopK,defaultTemperature:s?.defaultTemperature,defaultMaxTokens:s?.defaultMaxTokens,defaultTopP:s?.defaultTopP,defaultTopK:s?.defaultTopK,hint:s.hint}}generateSettings(){const{allowedContextTokens:e,allowedCompletionTokens:n,maxTemperature:s,maxStopSequences:a,maxTopP:i,maxTopK:r,maxFrequencyPenalty:o,maxPresencePenalty:c,minTopP:l,minTopK:u,defaultTemperature:p,defaultMaxTokens:g,defaultTopP:y,defaultTopK:w,hint:S}=this.modelParams;return{model:{type:"select",label:"Model",hint:"Model name",value:this.defaultModel,options:this.modelOptions,dropdownHeight:350,attributes:{"data-supported-models":"all"},events:{change:m=>this.modelChangeHandler(m.target)},actions:[{label:"Configure more models",icons:{left:{svg:ja,classes:"mr-2"},right:{svg:Na,classes:"absolute right-4"}},position:"after-dropdown",id:"configureMoreModelsBtn",classes:"custom_model_add_btn",events:{click:()=>{window.open("/vault","_blank")}}}]},prompt:{type:"textarea",label:"Prompt",validate:"required",class:"mt-1",validateMessage:"Please provide a prompt. It's required!",value:`Summarize the input text
Input : {{Input}}`,attributes:{"data-template-vars":"true","data-supported-models":"all"}},maxContextTokens:{type:"div",html:`<strong class="px-2">Context window size: <span class="tokens_num">${e?e.toLocaleString():"Unknown"}</span> tokens</strong><br/>`,attributes:{"data-supported-models":"OpenAI,Anthropic,GoogleAI,xAI,TogetherAI,VertexAI,Bedrock,cohere"},section:"Advanced",hint:"The total context window size includes both the request prompt length and output completion length.",hintPosition:"left",class:"p-4"},temperature:{type:"range",label:"Temperature",min:0,max:s,value:p,step:.01,validate:`min=0 max=${s}`,validateMessage:`Allowed range 0 to ${s}`,attributes:{"data-supported-models":"OpenAI,Anthropic,GoogleAI,Groq,xAI,TogetherAI,VertexAI,Bedrock,cohere"},section:"Advanced",hint:S.temperature,hintPosition:"left"},maxTokens:{type:"range",label:"Maximum Output Tokens",min:1,max:n,value:g,step:1,validate:`min=1 max=${n}`,validateMessage:`Allowed range 1 to ${n}`,attributes:{"data-supported-models":"OpenAI,Anthropic,GoogleAI,Groq,xAI,TogetherAI,VertexAI,Bedrock,cohere"},section:"Advanced",hint:S.maxTokens,hintPosition:"left"},stopSequences:{type:"tag",label:"Stop Sequence",maxTags:a,value:"",attributes:{"data-supported-models":"OpenAI,Anthropic,GoogleAI,Groq,xAI,TogetherAI,VertexAI,Bedrock,cohere"},section:"Advanced",hint:S.stopSequences,hintPosition:"left",additionalHint:"Input a sequence and press Enter, Space, or Comma to add it to the list."},topP:{type:"range",label:"Top P",min:l,max:i,value:y,step:.01,validate:`min=${l} max=${i}`,validateMessage:`Allowed range ${l} to ${i}`,attributes:{"data-supported-models":"OpenAI,Anthropic,GoogleAI,Groq,xAI,TogetherAI,VertexAI,Bedrock,cohere"},section:"Advanced",hint:S.topP,hintPosition:"left"},topK:{type:"range",label:"Top K",min:u,max:r,value:w,step:1,validate:`min=${u} max=${r}`,validateMessage:`Allowed range ${u} to ${r}`,attributes:{"data-supported-models":"GoogleAI,VertexAI,Anthropic,TogetherAI,cohere"},section:"Advanced",hint:S.topK,hintPosition:"left"},frequencyPenalty:{type:"range",label:"Frequency Penalty",min:0,max:o,value:0,step:.01,validate:`min=0 max=${o}`,validateMessage:`Allowed range 0 to ${o}`,attributes:{"data-supported-models":"OpenAI,TogetherAI,cohere"},section:"Advanced",hint:S.frequencyPenalty,hintPosition:"left"},presencePenalty:{type:"range",label:"Presence Penalty",min:0,max:c,value:0,step:.01,validate:`min=0 max=${c}`,validateMessage:`Allowed range 0 to ${c}`,attributes:{"data-supported-models":"OpenAI,cohere"},section:"Advanced",hint:S.presencePenalty,hintPosition:"left"},passthrough:{type:"checkbox",label:"Passthrough",value:!1,attributes:{"data-supported-models":"all"},section:"Advanced"}}}};Nk(cf,"PromptGenerator");let Fk=cf;var $k=Object.defineProperty,Rk=d((t,e)=>$k(t,"name",{value:e,configurable:!0}),"a$5");const df=class extends Be{static{d(this,"s")}async init(){this.settings={url:{type:"input",label:"URL",validate:"required maxlength=8192 custom=isUrlValid",validateMessage:"Provide a valid URL",attributes:{"data-template-vars":"true"}}};const e=["url"];for(let n of e)typeof this.data[n]>"u"&&(this.data[n]=this.settings[n].value);this.properties.defaultOutputs=[],this.properties.defaultInputs=[],this.drawSettings.iconCSSClass="svg-icon "+this.constructor.name,this.drawSettings.addOutputButton=null,this.drawSettings.outputMaxConnections=0,this.drawSettings.addOutputButtonLabel=" ",this.drawSettings.color="#8600f1"}};Rk(df,"Redirect");let qk=df;var Bk=Object.defineProperty,pf=d((t,e)=>Bk(t,"name",{value:e,configurable:!0}),"o$4");const hf=class extends Be{static{d(this,"d")}constructor(){super(...arguments),this.domains=["[NONE]"],this.errorLoading=""}async prepare(){return!0}async init(){this.settings={span:{type:"span",html:'<span class="">Schedule Job</span>',label:"Config jobs",value:"",actions:[{cls:"float-right",label:"add",id:"addJobs",events:{click:Cb.bind(this,"jobs")}}]},jobs:{type:"hidden",value:""}};const e=["jobs","span"];for(let n of e)typeof this.data[n]>"u"&&(this.data[n]=this.settings[n].value);this.inputSettings={...this.inputSettings,description:{type:"string",default:"",editConfig:{type:"textarea"}}},this.properties.defaultOutputs=["headers","body","query"],this.drawSettings.iconCSSClass="svg-icon "+this.constructor.name,this.drawSettings.addOutputButton="Request Parts",this.drawSettings.addInputButton="Parameters",this.drawSettings.showSettings=!0,this.drawSettings.inputMaxConnections=0,this.drawSettings.shortDescription="Scheduler Endpoint - Run your agent on a schedule",this.drawSettings.color="#b700f1",this._ready=!0}async run(){const e=pf(n=>n.classList.contains("input-endpoint"),"isInput");this.addEventListener("settingsOpened",async(n,s)=>{s==this&&(console.log("sidebar",n),await this.drawSchedulerJobsUI(n))}),this.addEventListener("endpointRemoved",async(n,s)=>{if(this.data.jobs!==""&&this.data.jobs!=="{}"&&this.data.jobs!=="[]"){const a=document.querySelector("#right-sidebar .form-section"),i=await Ar(this,"job-details");a?.appendChild(i)}}),this.addEventListener("endpointChanged",async(n,s,a,i)=>{const r=JSON?.parse(this.data.jobs)||[];if(n==="name"&&e(s)){let o=r.length&&r?.map(l=>(l[`${a}`]!==void 0&&(l[`${i}`]=l[`${a}`],delete l[`${a}`]),l));const c=JSON?.stringify(o);if(this.data.jobs=c,this.settings.jobs.value=c,this.editSettings(),this.data.jobs!==""&&this.data.jobs!=="{}"&&this.data.jobs!=="[]"){const l=document.querySelector("#right-sidebar .form-section"),u=await Ar(this,"job-details");l?.appendChild(u)}}})}async drawSchedulerJobsUI(e){if(this.data.jobs!==""&&this.data.jobs!=="{}"&&this.data.jobs!=="[]"){let n=e?.querySelector(".form-section");const s=await Ar(this,"job-details");n?.appendChild(s)}}};pf(hf,"SchedulerEndpoint");let Uk=hf;var zk=Object.defineProperty,Hk=d((t,e)=>zk(t,"name",{value:e,configurable:!0}),"d$4");const ff=class extends Be{static{d(this,"c")}constructor(){super(...arguments),this.templateSupport=!1}async init(){const e=`/*
* Enter packages imports here
*/
import dayjs from 'dayjs';`,n=`/*
* Enter code body here
* return value is bound to component Output endpoint
*/
return dayjs().format();`;this.settings={code_imports:{type:"textarea",code:{mode:"javascript",theme:"chrome"},label:"Code Editor",value:e,attributes:{class:"code-imports","data-scroll-margin-top":5,"data-scroll-margin-bottom":5,"data-scroll-margin-left":0,"data-scroll-margin-right":0},classOverride:"code-imports-container"},function_label:{type:"div",html:`
        <div class="code-editor-label-container-wrapper">
        <div class="code-editor-label-container" id="function-label-top-container">
          <div class="code-editor-label-container-left-border"></div>
          <div id="function-label-text" class="code-editor-label-container-right-border">async main() {</div>
        </div>
        </div>`,label:"",attributes:{labelCase:"none"},classOverride:"function-label-container"},code_body:{type:"textarea",code:{mode:"javascript",theme:"chrome",disableWorker:!0},label:"",value:n,validate:"maxlength=500000",validateMessage:"The code length is limitted to 500,000 characters",attributes:{labelCase:"none",class:"code-body","data-scroll-margin-top":5,"data-scroll-margin-bottom":5,"data-scroll-margin-left":0,"data-scroll-margin-right":0},classOverride:"code-body-container"},function_label_end:{type:"div",html:`
        <div class="code-editor-label-container">
          <div class="code-editor-label-container-left-border"></div>
          <div class="code-editor-label-container-right-border">}</div>
        </div>`,label:"",attributes:{labelCase:"none"},classOverride:"function-label-container"},pricing_note:{type:"div",html:'<div class="pricing-note">* This component will incur cloud usage cost. Configure your custom keys in advance to avoid extra charges.</div>',label:"",attributes:{class:"pricing-note"}},...this.isLegacyPlan()?{}:{use_own_keys:{type:"toggle",label:"Use Custom Cloud Keys",value:!1,display:"inline",events:{change:this.useOwnKeysChangeHandler.bind(this)},section:`${this.isLegacyPlan()?"Credentials":"Advanced"}`,attributes:{},classOverride:"use-own-keys"}},hintSelect:{type:"p",html:"<small>NodeJS is executed in AWS Lambda. You can bring your own keys or use our default keys.</small>",section:`${this.isLegacyPlan()?"Credentials":"Advanced"}`,attributes:{class:"hint-select mt-[-30px]"}},accessKeyId:{type:"input",label:"AWS Access Key ID",value:"",validate:`${this.isLegacyPlan()?"required":""} maxlength=350`,validateMessage:"Ensure a non-empty AWS Access Key ID",attributes:{placeholder:"Select AWS Access Key ID","data-vault":"All","data-vault-exclusive":!0},events:{input:o=>Ts(o,"AWS_ACCESS_KEY_ID"),focus:o=>Ts(o,"AWS_ACCESS_KEY_ID")},section:`${this.isLegacyPlan()?"Credentials":"Advanced"}`},secretAccessKey:{type:"input",label:"AWS Secret Access Key",value:"",validate:`${this.isLegacyPlan()?"required":""}maxlength=350`,validateMessage:"Ensure a non-empty AWS Secret Access Key",attributes:{placeholder:"Select AWS Secret Access Key","data-vault":"All","data-vault-exclusive":!0},events:{input:o=>Ts(o,"AWS_SECRET_ACCESS_KEY"),focus:o=>Ts(o,"AWS_SECRET_ACCESS_KEY")},section:`${this.isLegacyPlan()?"Credentials":"Advanced"}`},region:{type:"select",label:"Region",value:"us-east-1",options:[{text:"US East (N. Virginia) - us-east-1",value:"us-east-1"},{text:"US East (Ohio) - us-east-2",value:"us-east-2"},{text:"US West (N. California) - us-west-1",value:"us-west-1"},{text:"US West (Oregon) - us-west-2",value:"us-west-2"},{text:"Africa (Cape Town) - af-south-1",value:"af-south-1"},{text:"Asia Pacific (Hong Kong) - ap-east-1",value:"ap-east-1"},{text:"Asia Pacific (Mumbai) - ap-south-1",value:"ap-south-1"},{text:"Asia Pacific (Osaka) - ap-northeast-3",value:"ap-northeast-3"},{text:"Asia Pacific (Seoul) - ap-northeast-2",value:"ap-northeast-2"},{text:"Asia Pacific (Singapore) - ap-southeast-1",value:"ap-southeast-1"},{text:"Asia Pacific (Sydney) - ap-southeast-2",value:"ap-southeast-2"},{text:"Asia Pacific (Tokyo) - ap-northeast-1",value:"ap-northeast-1"},{text:"Canada (Central) - ca-central-1",value:"ca-central-1"},{text:"EU (Frankfurt) - eu-central-1",value:"eu-central-1"},{text:"EU (Ireland) - eu-west-1",value:"eu-west-1"},{text:"EU (London) - eu-west-2",value:"eu-west-2"},{text:"EU (Milan) - eu-south-1",value:"eu-south-1"},{text:"EU (Paris) - eu-west-3",value:"eu-west-3"},{text:"EU (Stockholm) - eu-north-1",value:"eu-north-1"},{text:"Middle East (Bahrain) - me-south-1",value:"me-south-1"},{text:"South America (S\xE3o Paulo) - sa-east-1",value:"sa-east-1"}],help:"Select AWS Region for Lambda",section:`${this.isLegacyPlan()?"Credentials":"Advanced"}`},role:{type:"div",html:"<div></div>",label:"Assigned Role",section:`${this.isLegacyPlan()?"Credentials":"Advanced"}`}};const s=["code_imports","code_body","use_own_keys"];for(let o of s)typeof this.data[o]>"u"&&(this.data[o]=this.settings[o]?.value);this.properties.defaultInputs=[],this.properties.defaultOutputs=["Output"],this.properties.outputs.length==0&&(this.properties.outputs=["Output","_error"]),this.drawSettings.displayName="NodeJS";const a=this.properties.template?.templateInfo?.icon||"",i=this.properties.template?.templateInfo?.color||"#000000",r=a&&a.startsWith("<svg");this.drawSettings.iconCSSClass=a?`tpl-fa-icon ${a}`:`svg-icon ${this.constructor.name}`,this.drawSettings.color=a?i:"#00BCD4",r&&(this.drawSettings.iconCSSClass=a),this.data.use_own_keys=!this.doHideAWSKeys(this.data),this.drawSettings.componentDescription="Execute code in a NodeJS environment",this.drawSettings.shortDescription="Execute code in a NodeJS environment",this._ready=!0}async run(){this.addEventListener("endpointAdded",this.updateCodeVars.bind(this)),this.addEventListener("endpointRemoved",this.updateCodeVars.bind(this)),this.addEventListener("endpointChanged",this.updateCodeVars.bind(this)),this.addEventListener("settingsOpened",async(e,n)=>{if(n!==this)return;const s=e.querySelector("#code_imports");if(s){s.classList.add("hidden");const r=s._editor;r&&(r.session.setOption("useWorker",!1),r.clearSelection())}const a=e.querySelector("#code_body");if(a){a.classList.add("hidden");const r=a._editor;r&&r.clearSelection()}const i=document.querySelector('[data-field-name="role"]');i&&i.classList.add("hidden"),this.setFunctionLabelStyling(),this.setCodeBodyTitle([]),this.toggleAWSKeys(this.isLegacyPlan()?!1:this.doHideAWSKeys(this.data))})}doHideAWSKeys(e){return e?.use_own_keys?!1:!this.isLegacyPlan()&&!e?.use_own_keys?!0:!(e?.accessKeyId&&e?.secretAccessKey&&e?.region)}setFunctionLabelStyling(){const e=document.querySelector('[data-field-name="function_label"]');e&&e.setAttribute("style","margin-top: 0 !important; margin-bottom: 0 !important; padding-top: 0 !important; padding-bottom: 0 !important; padding-right: 0 !important;");const n=document.querySelector('[data-field-name="function_label_end"]');n&&n.setAttribute("style","margin-top: 0 !important; margin-bottom: 0 !important; padding-top: 0 !important; padding-bottom: 0 !important; padding-right: 0 !important;")}useOwnKeysChangeHandler(e){const n=e.target.closest("form");if(!n)return;const s=n.querySelector('[data-field-name="accessKeyId"]'),a=n.querySelector('[data-field-name="secretAccessKey"]'),i=n.querySelector('[data-field-name="region"]');!s||!a||!i||(e.target.checked?this.toggleAWSKeys(!1):this.toggleAWSKeys(!0))}async updateRole(){const e=await this.fetchDeploymentStatus();if(e?.data){const n=e.data.role.split("/").pop(),s=`
        <a style="text-decoration: underline" href="${`https://${this.data.region}.console.aws.amazon.com/iam/home?region=${this.data.region}#/roles/details/${n}?section=permissions`}" target="_blank">Manage AWS Role</a>`,a=document.querySelector("#role");(a&&this.data.use_own_keys||this.isLegacyPlan())&&(a.innerHTML=s,document.querySelector('[data-field-name="role"]').classList.remove("hidden"))}}async toggleAWSKeys(e){const n=document.querySelector('[data-field-name="accessKeyId"]'),s=document.querySelector('[data-field-name="secretAccessKey"]'),a=document.querySelector('[data-field-name="region"]'),i=document.querySelector('[data-field-name="role"]'),r=document.querySelector('[data-field-name="hintSelect"]');!n||!s||!a||(e?(n.classList.add("hidden"),s.classList.add("hidden"),a.classList.add("hidden"),i.classList.add("hidden"),r.classList.add("hidden")):(n.classList.remove("hidden"),s.classList.remove("hidden"),a.classList.remove("hidden"),r.classList.remove("hidden"),await this.updateRole()))}validateServerlessCode(e){return e.split(`
`).every(n=>n.trim()===""||!Eb.test(n))}async fetchDeploymentStatus(){return(await fetch("/api/page/builder/serverless-code/get-deployment-status",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({agentId:this.workspace.agent.id,componentId:Be.curComponentSettings.uid,awsConfigs:{accessKeyId:this.data.accessKeyId,secretAccessKey:this.data.secretAccessKey,region:this.data.region}})})).json()}setCodeBodyTitle(e){if(this.getSettingsSidebar()){const n=e&&e.length?e:this.properties.inputs,s=document.querySelector("#function-label-text");s&&(s.textContent=`async main(${n.join(", ")}) {`)}}async updateCodeVars(){const e=[...this.domElement.querySelectorAll(".input-container .input-endpoint")].map(n=>n.getAttribute("smt-name"));this.setCodeBodyTitle(e)}exportTemplate(){let e=JSON.parse(JSON.stringify(this.data));const n={};e.code_body=e.code_body||"",e.code_body=this.parseTemplateString(e.code_body,n);const s=this.properties.inputProps,a=this.properties.outputProps;return{name:this.title,componentName:this.constructor.name,description:this.description,settings:n,data:e,inputs:s,outputs:a}}isLegacyPlan(){return this.workspace.teamData.isLegacyPlan}};Hk(ff,"ServerlessCode");let Gk=ff;var Vk=Object.defineProperty,Wk=d((t,e)=>Vk(t,"name",{value:e,configurable:!0}),"i$4");const mf=class extends Be{static{d(this,"e")}async init(){this.settings={phone:{type:"input",label:"Phone Number",value:"",hint:"+1 555 555 5555"}};const e=["phone"];for(let n of e)typeof this.data[n]>"u"&&(this.data[n]=this.settings[n].value);this.properties.outputs=["Success","Error"],this.properties.inputs.length==0&&(this.properties.inputs=["Input"]),this.drawSettings.iconCSSClass="svg-icon "+this.constructor.name,this.drawSettings.addInputButton=null,this._ready=!0}};Wk(mf,"SMSSender");let Kk=mf;var Yk=Object.defineProperty,Xk=d((t,e)=>Yk(t,"name",{value:e,configurable:!0}),"s$2");const gf=class extends Be{static{d(this,"r")}async init(){const e=this.properties.sender?.getAttribute("provider")||"";this.settings={format:{type:"input",label:"Format",value:e,attributes:{readonly:"readonly"}}};const n=["format"];for(let s of n)typeof this.data[s]>"u"&&(this.data[s]=this.settings[s].value);this.properties.inputs.length==0&&(this.properties.inputs=["Text"]),this.properties.outputs=["Audio"],this.drawSettings.iconCSSClass="svg-icon "+this.constructor.name,this.drawSettings.addInputButton=null,this.drawSettings.addOutputButton=null,this._ready=!0}redraw(e=!0){const n=super.redraw(e),s=this.properties.sender?.querySelector(".icon").className||"icon mif-file-empty",a=this.domElement.querySelector(".title-bar").querySelector(".icon");return a.className=s,n}};Xk(gf,"TTS");let Jk=gf;var Zk=Object.defineProperty,bf=d((t,e)=>Zk(t,"name",{value:e,configurable:!0}),"c$3");const vf=class extends Be{static{d(this,"r")}constructor(){super(...arguments),this.authUrl="",this._state="",this._conCheckInterval=null}async prepare(){const e=this._uid+"::"+Date.now(),n=this.workspace.server+"/oauth2/twitter/authUrl?state="+e;console.log("fetching authUrlReq = "+n);const s=await fetch(n,{method:"GET",headers:{"Content-Type":"application/json"}}).then(a=>{if(a.ok)return a.json();throw new Error("Something went wrong")}).catch(a=>{console.log(a)});return console.log({data:s}),this.authUrl=s.authUrl,this._state=e,!0}async init(){this.settings={account:{type:"input",label:"Account",value:"",attributes:{readonly:!0}},token:{type:"password",label:"Token",value:"",attributes:{readonly:!0}},secret:{type:"password",label:"Secret",value:"",attributes:{readonly:!0}},connect:{type:"button",label:"Connect",attributes:{},events:{click:e=>{window.open(this.authUrl,"_blank");const n=e.currentTarget;this._conCheckFunction=()=>this.twitterConnectClick(n,this._state),window.addEventListener("focus",this._conCheckFunction)}}}},this.dataFields=["account","token","secret"];for(let e of this.dataFields)typeof this.data[e]>"u"&&(this.data[e]=this.settings[e].value);this.properties.defaultOutputs=["Success","Error","id"],this.properties.defaultInputs=["message","id"],this.drawSettings.iconCSSClass="svg-icon "+this.constructor.name,this.drawSettings.addOutputButton=null,this.drawSettings.addInputButton=null,this.drawSettings.showSettings=!0,this._ready=!0}async run(){return this.addEventListener("settingsClosed",()=>{this.cancelTwitterConnect(),(!this.data.account||!this.data.token)&&this.domElement.classList.add("missing-config")}),this.addEventListener("settingsSaved",()=>{this.data.account&&this.data.token&&this.domElement.classList.remove("missing-config")}),!this.data.account||!this.data.token?this.domElement.classList.add("missing-config"):this.domElement.classList.remove("missing-config"),!0}async cancelTwitterConnect(){clearInterval(this._conCheckInterval)}async twitterConnectClick(e,n){const s=e.closest("form");console.log("start checking twitter auth state"),window.removeEventListener("focus",this._conCheckFunction);const a=`${this.workspace.server}/oauth2/twitter/authState?state=${n}&scope=tweet.read users.read follows.read follows.write tweet.write offline.access`;let i=5;const r=bf(async()=>{console.log("checking twitter auth state");const o=await fetch(a,{method:"GET",headers:{"Content-Type":"application/json"}}).then(c=>{if(c.ok)return c.json();throw new Error("Something went wrong")}).catch(c=>{console.log(c)});o&&o.access_token&&o.access_token_secret&&o.account&&(clearInterval(this._conCheckInterval),s.querySelector('[name="account"]').value=o.account,s.querySelector('[name="token"]').value=o.access_token,s.querySelector('[name="secret"]').value=o.access_token_secret),i--,i==0&&clearInterval(this._conCheckInterval)},"checkAuth");this._conCheckInterval=setInterval(r,5e3),r()}};bf(vf,"Twitter");let Qk=vf;var e3=Object.defineProperty,t3=d((t,e)=>e3(t,"name",{value:e,configurable:!0}),"i$3");const yf=class extends Be{static{d(this,"a")}async prepare(){const e=lt.prepareModelSelectOptionsByFeatures(["image"]);this.defaultModel=lt.getDefaultModel(e);const n=this.data?.model||this.defaultModel;return n&&![...e.map(s=>s?.value||s)].includes(n)&&e.push({text:n+"&nbsp;&nbsp",value:n,badge:Nt("Removed","text-smyth-red-500 border-smyth-red-500")}),this.modelOptions=e.filter(s=>s),this.setModelParams(this.data?.model),!0}async init(){this.settings=this.generateSettings();const e=["model","prompt","maxTokens"];for(let n of e)typeof this.data[n]>"u"&&(this.data[n]=this.settings[n].value);this.properties.defaultInputs=["Images"],this.properties.defaultOutputs=["Reply"],this.drawSettings.displayName="Vision LLM",this.drawSettings.iconCSSClass="svg-icon "+this.constructor.name,this.drawSettings.componentDescription="Vision LLM enables image processing and answering questions related to the visual content.",this.drawSettings.shortDescription="Answers questions related given image(s).",this.drawSettings.color="#65a698",this._ready=!0}modelChangeHandler(e){const n=e.target;n.closest(".select.smt-input-select").classList.contains("focused")&&(Hi.updateMaxTokens(e),this.setModelParams(n.value),this.settings=this.generateSettings()),Hi.toggleFields(e)}setModelParams(e){const n=window.__LLM_MODELS__?.[e]?.provider?.toLowerCase()||window.__LLM_MODELS__?.[e]?.llm?.toLowerCase(),s=cs[n]||cs.default;this.modelParams={allowedContextTokens:Sr(e),allowedCompletionTokens:Cr(e),hint:s?.hint}}generateSettings(){const{allowedContextTokens:e,allowedCompletionTokens:n,hint:s}=this.modelParams;return{model:{type:"select",label:"Model",hint:"Model name",value:this.defaultModel,options:this.modelOptions,events:{change:this.modelChangeHandler.bind(this)},attributes:{"data-supported-models":"all"}},prompt:{type:"textarea",label:"Prompt",class:"mb-6",validate:"required",validateMessage:"Please provide a prompt. It's required!",value:"What\u2019s in this image?",attributes:{"data-template-vars":"true"}},maxContextTokens:{type:"div",html:`<strong class="px-2">Context window size: <span class="tokens_num">${e?e.toLocaleString():"Unknown"}</span> tokens</strong><br/>`,attributes:{"data-supported-models":"OpenAI,Anthropic,GoogleAI,Groq,xAI,TogetherAI,VertexAI,Bedrock,cohere"},section:"Advanced",hint:"The total context window size includes both the request prompt length and output completion length.",hintPosition:"left",class:"p-4"},maxTokens:{type:"range",label:"Maximum Output Tokens",min:1,max:n,value:300,step:1,validate:`min=1 max=${n}`,validateMessage:`Allowed range 1 to ${n}`,attributes:{"data-supported-models":"OpenAI,Anthropic,GoogleAI,Groq,xAI,TogetherAI,VertexAI,Bedrock,cohere"},section:"Advanced",hint:s.maxTokens,hintPosition:"left"},passthrough:{type:"checkbox",label:"Passthrough",value:!1,attributes:{"data-supported-models":"all"},section:"Advanced"}}}async run(){this.addEventListener("settingsOpened",this.handleSettingsOpened.bind(this))}async handleSettingsOpened(e,n){n===this&&(await je(200),await Ds(e,this))}async handleElementClick(e){await Xs(e,this)}async saveApiKey(e,n,s){return await Is(e,n,s,this.workspace,this.refreshLLMModels.bind(this))}async refreshLLMModels(){await Ls(this.workspace,this.prepare.bind(this),this.init.bind(this),this.refreshSettingsSidebar.bind(this))}};t3(yf,"VisionLLM");let n3=yf;var s3=Object.defineProperty,a3=d((t,e)=>s3(t,"name",{value:e,configurable:!0}),"s$1");const xf=class extends Be{static{d(this,"a")}async init(){this.settings={format:{type:"select",label:"Format",hint:"Format of the results",value:"markdown",options:[{text:"Markdown",value:"markdown"},{text:"Markdown (Exclude images)",value:"markdown:no_images"},{text:"Markdown (Exclude links)",value:"markdown:no_links"},{text:"Raw",value:"raw"},{text:"Text",value:"text"},{text:"Clean HTML",value:"clean_html"},{text:"JSON",value:"json"}]},antiScrapingProtection:{type:"checkbox",label:"Bypass Anti-Bot Protection",help:"Enable if the website is protected by bot detection methods like Captchas.",value:!1},javascriptRendering:{type:"checkbox",label:"Javascript Rendering",help:"This will render the page using a headless browser and extract the text and images. Useful for websites that use javascript to load content.",value:!1},autoScroll:{type:"checkbox",label:"Auto Scroll",help:"To automatically scroll the page till the bottom and extract the text and images. Useful for websites that load content on scroll.",value:!1}};const e=["format","antiScrapingProtection","javascriptRendering","autoScroll"];for(let n of e)typeof this.data[n]>"u"&&(this.data[n]=this.settings[n].value);this.properties.defaultOutputs=["Results","FailedURLs"],this.properties.inputs.length==0&&(this.properties.inputs=["URLs"]),this.drawSettings.displayName="Web Scrape",this.drawSettings.iconCSSClass="svg-icon "+this.constructor.name,this.drawSettings.componentDescription="Extract text and images from URLs",this.drawSettings.shortDescription="Extract text and images from URLs",this.drawSettings.color="#65a698",this._ready=!0}};a3(xf,"WebScrape");let i3=xf;var o3=Object.defineProperty,r3=d((t,e)=>o3(t,"name",{value:e,configurable:!0}),"a$1");const wf=class extends Be{static{d(this,"s")}async init(){this.settings={sourcesLimit:{type:"number",label:"Sources Limit",help:"The maximum number of search results to return. Ceiling is 20.",value:4,validate:"min=1 max=20"},searchTopic:{type:"select",label:"Search Topic",value:"general",options:["general","news"],help:"This will optimize the search for the selected topic. Currently, only supports &#34;general&#34; and &#34;news&#34; (default: &#34;general&#34;)."},includeQAs:{type:"checkbox",label:"Include Questions and Answers",help:"If selected, includes a rich summary based on the information found in the results. Response time will be longer if selected.",value:!1},includeImages:{type:"checkbox",label:"Include Image Results",help:"If selected, includes public images relevant to the query.",value:!1},timeRange:{type:"select",label:"Time Range",value:"None",options:["None","day","week","month","year"],help:"[Optional] Select the time range to filter the search results."},includeRawContent:{type:"checkbox",label:"Include Raw Content",help:"If selected, returns the parsed html content for each source.",value:!0},excludeDomains:{type:"textarea",label:"Exclude Domains",help:"A list of domains to exclude from search results. Separate multiple domains with a comma.",value:""}};const e=["sourcesLimit","searchTopic","includeQAs","includeImages","timeRange","includeRawContent","excludeDomains"];for(let n of e)typeof this.data[n]>"u"&&(this.data[n]=this.settings[n].value);this.properties.defaultOutputs=["Results","Images","Answer"],this.properties.defaultInputs=["SearchQuery"],this.drawSettings.displayName="Web Search",this.drawSettings.iconCSSClass="svg-icon "+this.constructor.name,this.drawSettings.componentDescription="Fetch web results from a query",this.drawSettings.shortDescription="Fetch web results from a query",this.drawSettings.color="#65a698",this._ready=!0}};r3(wf,"WebSearch");let l3=wf;var u3=Object.defineProperty,c3=d((t,e)=>u3(t,"name",{value:e,configurable:!0}),"e$1");const Sf=class extends Be{static{d(this,"a")}async prepare(){if(this.actionId=this.data?.actionId||this.properties.sender?.getAttribute("smt-id")||"",this.actionName=this.data?.actionName||this.properties.sender?.getAttribute("smt-name")||"",this.params=this.data?.params||this.properties.sender?.getAttribute("smt-params")||"",this.logoUrl=this.data?.logoUrl||this.properties.sender?.querySelector("img")?.src||"",this.apiKey=this.data?.apiKey||this.properties.sender?.getAttribute("smt-api-key")||"",this.params){const e=JSON.parse(this.params||"{}"),n=[];for(const s in e)n.push(s);this.inputs=n}return!0}async init(){this.properties.defaultInputs=this.inputs,this.properties.defaultOutputs=["Output"],this.drawSettings.iconCSSClass="svg-icon "+this.constructor.name,this.drawSettings.addOutputButton="+ out",this.drawSettings.addInputButton="",this.drawSettings.displayName=this.actionName||this.constructor.name,this.drawSettings.shortDescription=this.actionName||"",this.drawSettings.showSettings=!1,this._ready=!0}redraw(e=!0){const n=super.redraw(e),s=n.querySelector(".internal-name");return s.innerHTML=`<span class="internal-name-prefix zapier">Zapier </span>${this.drawSettings.displayName}`,this.data={...this.data,actionName:this.actionName,actionId:this.actionId,logoUrl:this.logoUrl,apiKey:this.apiKey,params:this.params},Wn.call(this,this.logoUrl),n.setAttribute("data-action-id",this.actionId),n}};c3(Sf,"ZapierAction");let d3=Sf;const To={Component:Be,Classifier:sS,PromptGenerator:Fk,InputSync:XC,DataSourceLookup:vS,GPTPlugin:uC,EmailSender:ES,FileExport:BS,TTS:Jk,SMSSender:Kk,DBInsert:wS,APIEndpoint:Uw,APICall:qw,Memory:AE,Twitter:Qk,LinkedIn:tE,APIOutput:Gw,LogicAND:rE,LogicOR:gE,LogicXOR:yE,LogicAtLeast:cE,LogicAtMost:hE,Base64Encoder:eS,HuggingFace:mC,AgentPlugin:Fw,ZapierAction:d3,MemoryWriteInput:FE,MemoryWriteKeyVal:qE,MemoryReadOutput:OE,MemoryReadKeyVal:LE,Note:Lk,SchedulerEndpoint:Uk,JSONFilter:QC,DataSourceIndexer:mS,DataSourceCleaner:pS,Code:oS,ServerlessCode:Gk,ForEach:WS,VisionLLM:n3,LLMAssistant:aE,Redirect:qk,Async:Kw,FCrypto:DS,FHash:$S,FSign:XS,FEncDec:MS,FSleep:QS,FTimestamp:nC,Await:Jw,POST_APIEndpoint:Ok,MemoryDeleteKey:PE,MultimodalLLM:zE,GenAILLM:oC,FileStore:HS,WebScrape:i3,WebSearch:l3,ImageGenerator:GC,TextToImage:UC,ImageToImage:wC,ImageToText:EC,BackgroundRemoval:vC,ImageUpscaling:kC,RestyleControlNet:NC,RestyleIPAdapter:RC,Outpainting:MC,Inpainting:IC,AgentCard:Ja,ComputerUse:uS,MCPClient:SE};var p3=Object.defineProperty,Cf=d((t,e)=>p3(t,"name",{value:e,configurable:!0}),"l$3"),Ef=d((t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},"m$1"),jl=d((t,e,n)=>(Ef(t,e,"read from private field"),n?n.call(t):e.get(t)),"o$1"),h3=d((t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},"h$1"),Af=d((t,e,n,s)=>(Ef(t,e,"write to private field"),s?s.call(t,n):e.set(t,n),n),"b$3"),Rs;const _f=class{static{d(this,"p")}constructor(e){if(this.mimetype="",this.size=0,h3(this,Rs,void 0),e instanceof Blob)Af(this,Rs,e),this.mimetype=e?.type||"",this.size=e?.size||0;else if(typeof e=="object")Af(this,Rs,e),this.mimetype=e?.mimetype||"",this.size=e?.size||0;else throw new Error("Invalid input!")}toBlobUrl(){try{if(typeof jl(this,Rs)!="object")return jl(this,Rs);const e=jl(this,Rs).url.split(",")[1],n=atob(e),s=n.length,a=new Uint8Array(s);for(let r=0;r<s;r++)a[r]=n.charCodeAt(r);const i=new Blob([a],{type:this.mimetype});return URL.createObjectURL(i)}catch(e){return console.log("Error converting SmythFileObject to Blob: ",e),""}}static isSmythFileObject(e){return typeof e=="object"&&e!==null&&e?.url&&"size"in e&&"mimetype"in e}};Rs=new WeakMap,Cf(_f,"SmythFile");let f3=_f;function m3(t){return/^(https?:\/\/)([^\s.]+\.[^\s]{2,})(:[0-9]{1,5})?(\/[^\s]*)?(\?[^\s]*)?$/i.test(t)}d(m3,"z$1"),Cf(m3,"isUrl");var kf={exports:{}};(function(t){var e=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var n=function(s){var a=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,i=0,r={},o={manual:s.Prism&&s.Prism.manual,disableWorkerMessageHandler:s.Prism&&s.Prism.disableWorkerMessageHandler,util:{encode:d(function A(j){return j instanceof c?new c(j.type,A(j.content),j.alias):Array.isArray(j)?j.map(A):j.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},"encode"),type:function(A){return Object.prototype.toString.call(A).slice(8,-1)},objId:function(A){return A.__id||Object.defineProperty(A,"__id",{value:++i}),A.__id},clone:d(function A(j,L){L=L||{};var k,I;switch(o.util.type(j)){case"Object":if(I=o.util.objId(j),L[I])return L[I];k={},L[I]=k;for(var v in j)j.hasOwnProperty(v)&&(k[v]=A(j[v],L));return k;case"Array":return I=o.util.objId(j),L[I]?L[I]:(k=[],L[I]=k,j.forEach(function(T,P){k[P]=A(T,L)}),k);default:return j}},"deepClone"),getLanguage:function(A){for(;A;){var j=a.exec(A.className);if(j)return j[1].toLowerCase();A=A.parentElement}return"none"},setLanguage:function(A,j){A.className=A.className.replace(RegExp(a,"gi"),""),A.classList.add("language-"+j)},currentScript:function(){if(typeof document>"u")return null;if(document.currentScript&&document.currentScript.tagName==="SCRIPT")return document.currentScript;try{throw new Error}catch(k){var A=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(k.stack)||[])[1];if(A){var j=document.getElementsByTagName("script");for(var L in j)if(j[L].src==A)return j[L]}return null}},isActive:function(A,j,L){for(var k="no-"+j;A;){var I=A.classList;if(I.contains(j))return!0;if(I.contains(k))return!1;A=A.parentElement}return!!L}},languages:{plain:r,plaintext:r,text:r,txt:r,extend:function(A,j){var L=o.util.clone(o.languages[A]);for(var k in j)L[k]=j[k];return L},insertBefore:function(A,j,L,k){k=k||o.languages;var I=k[A],v={};for(var T in I)if(I.hasOwnProperty(T)){if(T==j)for(var P in L)L.hasOwnProperty(P)&&(v[P]=L[P]);L.hasOwnProperty(T)||(v[T]=I[T])}var F=k[A];return k[A]=v,o.languages.DFS(o.languages,function(U,M){M===F&&U!=A&&(this[U]=v)}),v},DFS:d(function A(j,L,k,I){I=I||{};var v=o.util.objId;for(var T in j)if(j.hasOwnProperty(T)){L.call(j,T,j[T],k||T);var P=j[T],F=o.util.type(P);F==="Object"&&!I[v(P)]?(I[v(P)]=!0,A(P,L,null,I)):F==="Array"&&!I[v(P)]&&(I[v(P)]=!0,A(P,L,T,I))}},"DFS")},plugins:{},highlightAll:function(A,j){o.highlightAllUnder(document,A,j)},highlightAllUnder:function(A,j,L){var k={callback:L,container:A,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};o.hooks.run("before-highlightall",k),k.elements=Array.prototype.slice.apply(k.container.querySelectorAll(k.selector)),o.hooks.run("before-all-elements-highlight",k);for(var I=0,v;v=k.elements[I++];)o.highlightElement(v,j===!0,k.callback)},highlightElement:function(A,j,L){var k=o.util.getLanguage(A),I=o.languages[k];o.util.setLanguage(A,k);var v=A.parentElement;v&&v.nodeName.toLowerCase()==="pre"&&o.util.setLanguage(v,k);var T=A.textContent,P={element:A,language:k,grammar:I,code:T};function F(M){P.highlightedCode=M,o.hooks.run("before-insert",P),P.element.innerHTML=P.highlightedCode,o.hooks.run("after-highlight",P),o.hooks.run("complete",P),L&&L.call(P.element)}if(d(F,"insertHighlightedCode"),o.hooks.run("before-sanity-check",P),v=P.element.parentElement,v&&v.nodeName.toLowerCase()==="pre"&&!v.hasAttribute("tabindex")&&v.setAttribute("tabindex","0"),!P.code){o.hooks.run("complete",P),L&&L.call(P.element);return}if(o.hooks.run("before-highlight",P),!P.grammar){F(o.util.encode(P.code));return}if(j&&s.Worker){var U=new Worker(o.filename);U.onmessage=function(M){F(M.data)},U.postMessage(JSON.stringify({language:P.language,code:P.code,immediateClose:!0}))}else F(o.highlight(P.code,P.grammar,P.language))},highlight:function(A,j,L){var k={code:A,grammar:j,language:L};if(o.hooks.run("before-tokenize",k),!k.grammar)throw new Error('The language "'+k.language+'" has no grammar.');return k.tokens=o.tokenize(k.code,k.grammar),o.hooks.run("after-tokenize",k),c.stringify(o.util.encode(k.tokens),k.language)},tokenize:function(A,j){var L=j.rest;if(L){for(var k in L)j[k]=L[k];delete j.rest}var I=new p;return g(I,I.head,A),u(A,I,j,I.head,0),w(I)},hooks:{all:{},add:function(A,j){var L=o.hooks.all;L[A]=L[A]||[],L[A].push(j)},run:function(A,j){var L=o.hooks.all[A];if(!(!L||!L.length))for(var k=0,I;I=L[k++];)I(j)}},Token:c};s.Prism=o;function c(A,j,L,k){this.type=A,this.content=j,this.alias=L,this.length=(k||"").length|0}d(c,"Token"),c.stringify=d(function A(j,L){if(typeof j=="string")return j;if(Array.isArray(j)){var k="";return j.forEach(function(F){k+=A(F,L)}),k}var I={type:j.type,content:A(j.content,L),tag:"span",classes:["token",j.type],attributes:{},language:L},v=j.alias;v&&(Array.isArray(v)?Array.prototype.push.apply(I.classes,v):I.classes.push(v)),o.hooks.run("wrap",I);var T="";for(var P in I.attributes)T+=" "+P+'="'+(I.attributes[P]||"").replace(/"/g,"&quot;")+'"';return"<"+I.tag+' class="'+I.classes.join(" ")+'"'+T+">"+I.content+"</"+I.tag+">"},"stringify");function l(A,j,L,k){A.lastIndex=j;var I=A.exec(L);if(I&&k&&I[1]){var v=I[1].length;I.index+=v,I[0]=I[0].slice(v)}return I}d(l,"matchPattern");function u(A,j,L,k,I,v){for(var T in L)if(!(!L.hasOwnProperty(T)||!L[T])){var P=L[T];P=Array.isArray(P)?P:[P];for(var F=0;F<P.length;++F){if(v&&v.cause==T+","+F)return;var U=P[F],M=U.inside,V=!!U.lookbehind,W=!!U.greedy,K=U.alias;if(W&&!U.pattern.global){var R=U.pattern.toString().match(/[imsuy]*$/)[0];U.pattern=RegExp(U.pattern.source,R+"g")}for(var X=U.pattern||U,Q=k.next,G=I;Q!==j.tail&&!(v&&G>=v.reach);G+=Q.value.length,Q=Q.next){var J=Q.value;if(j.length>A.length)return;if(!(J instanceof c)){var E=1,O;if(W){if(O=l(X,G,A,V),!O||O.index>=A.length)break;var Y=O.index,C=O.index+O[0].length,B=G;for(B+=Q.value.length;Y>=B;)Q=Q.next,B+=Q.value.length;if(B-=Q.value.length,G=B,Q.value instanceof c)continue;for(var z=Q;z!==j.tail&&(B<C||typeof z.value=="string");z=z.next)E++,B+=z.value.length;E--,J=A.slice(G,B),O.index-=G}else if(O=l(X,0,J,V),!O)continue;var Y=O.index,se=O[0],le=J.slice(0,Y),te=J.slice(Y+se.length),he=G+J.length;v&&he>v.reach&&(v.reach=he);var fe=Q.prev;le&&(fe=g(j,fe,le),G+=le.length),y(j,fe,E);var be=new c(T,M?o.tokenize(se,M):se,K,se);if(Q=g(j,fe,be),te&&g(j,Q,te),E>1){var ge={cause:T+","+F,reach:he};u(A,j,L,Q.prev,G,ge),v&&ge.reach>v.reach&&(v.reach=ge.reach)}}}}}}d(u,"matchGrammar");function p(){var A={value:null,prev:null,next:null},j={value:null,prev:A,next:null};A.next=j,this.head=A,this.tail=j,this.length=0}d(p,"LinkedList");function g(A,j,L){var k=j.next,I={value:L,prev:j,next:k};return j.next=I,k.prev=I,A.length++,I}d(g,"addAfter");function y(A,j,L){for(var k=j.next,I=0;I<L&&k!==A.tail;I++)k=k.next;j.next=k,k.prev=j,A.length-=I}d(y,"removeRange");function w(A){for(var j=[],L=A.head.next;L!==A.tail;)j.push(L.value),L=L.next;return j}if(d(w,"toArray"),!s.document)return s.addEventListener&&(o.disableWorkerMessageHandler||s.addEventListener("message",function(A){var j=JSON.parse(A.data),L=j.language,k=j.code,I=j.immediateClose;s.postMessage(o.highlight(k,o.languages[L],L)),I&&s.close()},!1)),o;var S=o.util.currentScript();S&&(o.filename=S.src,S.hasAttribute("data-manual")&&(o.manual=!0));function m(){o.manual||o.highlightAll()}if(d(m,"highlightAutomaticallyCallback"),!o.manual){var D=document.readyState;D==="loading"||D==="interactive"&&S&&S.defer?document.addEventListener("DOMContentLoaded",m):window.requestAnimationFrame?window.requestAnimationFrame(m):window.setTimeout(m,16)}return o}(e);t.exports&&(t.exports=n),typeof ht<"u"&&(ht.Prism=n),n.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},n.languages.markup.tag.inside["attr-value"].inside.entity=n.languages.markup.entity,n.languages.markup.doctype.inside["internal-subset"].inside=n.languages.markup,n.hooks.add("wrap",function(s){s.type==="entity"&&(s.attributes.title=s.content.replace(/&amp;/,"&"))}),Object.defineProperty(n.languages.markup.tag,"addInlined",{value:d(function(a,i){var r={};r["language-"+i]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:n.languages[i]},r.cdata=/^<!\[CDATA\[|\]\]>$/i;var o={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:r}};o["language-"+i]={pattern:/[\s\S]+/,inside:n.languages[i]};var c={};c[a]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return a}),"i"),lookbehind:!0,greedy:!0,inside:o},n.languages.insertBefore("markup","cdata",c)},"addInlined")}),Object.defineProperty(n.languages.markup.tag,"addAttribute",{value:function(s,a){n.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+s+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[a,"language-"+a],inside:n.languages[a]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),n.languages.html=n.languages.markup,n.languages.mathml=n.languages.markup,n.languages.svg=n.languages.markup,n.languages.xml=n.languages.extend("markup",{}),n.languages.ssml=n.languages.xml,n.languages.atom=n.languages.xml,n.languages.rss=n.languages.xml,function(s){var a=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;s.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+a.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+a.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+a.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+a.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:a,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},s.languages.css.atrule.inside.rest=s.languages.css;var i=s.languages.markup;i&&(i.tag.addInlined("style","css"),i.tag.addAttribute("style","css"))}(n),n.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},n.languages.javascript=n.languages.extend("clike",{"class-name":[n.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),n.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,n.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:n.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:n.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:n.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:n.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:n.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),n.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:n.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),n.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),n.languages.markup&&(n.languages.markup.tag.addInlined("script","javascript"),n.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),n.languages.js=n.languages.javascript,function(){if(typeof n>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var s="Loading\u2026",a=d(function(S,m){return"\u2716 Error "+S+" while fetching file: "+m},"FAILURE_MESSAGE"),i="\u2716 Error: File does not exist or is empty",r={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},o="data-src-status",c="loading",l="loaded",u="failed",p="pre[data-src]:not(["+o+'="'+l+'"]):not(['+o+'="'+c+'"])';function g(S,m,D){var A=new XMLHttpRequest;A.open("GET",S,!0),A.onreadystatechange=function(){A.readyState==4&&(A.status<400&&A.responseText?m(A.responseText):A.status>=400?D(a(A.status,A.statusText)):D(i))},A.send(null)}d(g,"loadFile");function y(S){var m=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(S||"");if(m){var D=Number(m[1]),A=m[2],j=m[3];return A?j?[D,Number(j)]:[D,void 0]:[D,D]}}d(y,"parseRange"),n.hooks.add("before-highlightall",function(S){S.selector+=", "+p}),n.hooks.add("before-sanity-check",function(S){var m=S.element;if(m.matches(p)){S.code="",m.setAttribute(o,c);var D=m.appendChild(document.createElement("CODE"));D.textContent=s;var A=m.getAttribute("data-src"),j=S.language;if(j==="none"){var L=(/\.(\w+)$/.exec(A)||[,"none"])[1];j=r[L]||L}n.util.setLanguage(D,j),n.util.setLanguage(m,j);var k=n.plugins.autoloader;k&&k.loadLanguages(j),g(A,function(I){m.setAttribute(o,l);var v=y(m.getAttribute("data-range"));if(v){var T=I.split(/\r\n?|\n/g),P=v[0],F=v[1]==null?T.length:v[1];P<0&&(P+=T.length),P=Math.max(0,Math.min(P-1,T.length)),F<0&&(F+=T.length),F=Math.max(0,Math.min(F,T.length)),I=T.slice(P,F).join(`
`),m.hasAttribute("data-start")||m.setAttribute("data-start",String(P+1))}D.textContent=I,n.highlightElement(D)},function(I){m.setAttribute(o,u),D.textContent=I})}}),n.plugins.fileHighlight={highlight:d(function(m){for(var D=(m||document).querySelectorAll(p),A=0,j;j=D[A++];)n.highlightElement(j)},"highlight")};var w=!1;n.fileHighlight=function(){w||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),w=!0),n.plugins.fileHighlight.highlight.apply(this,arguments)}}()})(kf);var g3=kf.exports,Mo=cr(g3);Prism.languages.json={property:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?=\s*:)/,lookbehind:!0,greedy:!0},string:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?!\s*:)/,lookbehind:!0,greedy:!0},comment:{pattern:/\/\/.*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},number:/-?\b\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,punctuation:/[{}[\],]/,operator:/:/,boolean:/\b(?:false|true)\b/,null:{pattern:/\bnull\b/,alias:"keyword"}},Prism.languages.webmanifest=Prism.languages.json;var b3=`/**
 * okaidia theme for JavaScript, CSS and HTML
 * Loosely based on Monokai textmate theme by http://www.monokai.nl/
 * @author ocodia
 */

code[class*="language-"],
pre[class*="language-"] {
	color: #f8f8f2;
	background: none;
	text-shadow: 0 1px rgba(0, 0, 0, 0.3);
	font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
	font-size: 1em;
	text-align: left;
	white-space: pre;
	word-spacing: normal;
	word-break: normal;
	word-wrap: normal;
	line-height: 1.5;

	-moz-tab-size: 4;
	-o-tab-size: 4;
	tab-size: 4;

	-webkit-hyphens: none;
	hyphens: none;
}

/* Code blocks */
pre[class*="language-"] {
	padding: 1em;
	margin: .5em 0;
	overflow: auto;
	border-radius: 0.3em;
}

:not(pre) > code[class*="language-"],
pre[class*="language-"] {
	background: #272822;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
	padding: .1em;
	border-radius: .3em;
	white-space: normal;
}

.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
	color: #8292a2;
}

.token.punctuation {
	color: #f8f8f2;
}

.token.namespace {
	opacity: .7;
}

.token.property,
.token.tag,
.token.constant,
.token.symbol,
.token.deleted {
	color: #f92672;
}

.token.boolean,
.token.number {
	color: #ae81ff;
}

.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.inserted {
	color: #a6e22e;
}

.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string,
.token.variable {
	color: #f8f8f2;
}

.token.atrule,
.token.attr-value,
.token.function,
.token.class-name {
	color: #e6db74;
}

.token.keyword {
	color: #66d9ef;
}

.token.regex,
.token.important {
	color: #fd971f;
}

.token.important,
.token.bold {
	font-weight: bold;
}
.token.italic {
	font-style: italic;
}

.token.entity {
	cursor: help;
}
`;Ab(b3);var v3=Object.defineProperty,Nl=d((t,e)=>v3(t,"name",{value:e,configurable:!0}),"e");const y3=Nl(t=>/^-?\d+(\.\d+)?$/.test(t.trim()),"isNumber"),x3=Nl(t=>{const e=parseFloat(t);return!isNaN(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER&&e.toString()===t.trim()},"isValidNumber");function Pf(t){if(!t)return null;if(y3(t)&&!x3(t)||!t.trim().startsWith("{")&&!t.trim().startsWith("["))return t;try{return JSON.parse(t)}catch{try{return JSON.parse(_r(t))}catch(e){return console.error("Error on parseJson: ",e.toString()),console.error("   Tried to parse: ",t),null}}}d(Pf,"parseJson"),Nl(Pf,"parseJson");var w3=Object.defineProperty,Oo=d((t,e)=>w3(t,"name",{value:e,configurable:!0}),"E$2");const Df=class{static{d(this,"A")}constructor(e,n={}){this.wrapper=e,this.options={debounceDelay:300,mutatingClass:"mutating",mutatingWrapperClass:"jfs_has_mutating",mutationDuration:300,jsonFieldClass:"jfs_json_field",...n},this.parentMap=new Map,this.previousValues=new Map,this.initializeStructure(),this.bindEvents()}initializeStructure(){Array.from(this.wrapper.querySelectorAll(`.${this.options.jsonFieldClass}[data-expression]`)).filter(e=>!/[\.\[\]]/.test(e.dataset.expression)).forEach(e=>{const n=e.dataset.expression,s=this.findChildren(n),a=s.some(i=>i.path.includes("["));this.parentMap.set(e,{data:a?[]:{},children:s,isArray:a})})}findChildren(e){return Array.from(this.wrapper.querySelectorAll(`.${this.options.jsonFieldClass}[data-expression^="${e}["], .${this.options.jsonFieldClass}[data-expression^="${e}."]`)).map(n=>({element:n,path:n.dataset.expression.replace(e,"")}))}bindEvents(){this.parentMap.forEach((e,n)=>{let s;n.addEventListener("input",()=>{clearTimeout(s),s=setTimeout(()=>this.handleParentUpdate(n,e),this.options.debounceDelay)}),e.children.forEach(a=>{a.element.addEventListener("input",()=>this.handleChildUpdate(n,a,e)),a.element.addEventListener("focus",()=>this.handleFocus(a.element,n)),a.element.addEventListener("blur",()=>this.handleBlur(a.element,n))}),n.addEventListener("focus",()=>this.handleFocus(n,n)),n.addEventListener("blur",()=>this.handleBlur(n,n))})}handleParentUpdate(e,n){const s=e.value?.trim()||"";try{let a,i=!0;if(n.data&&(n.isArray&&!Array.isArray(n.data)&&(i=!1),!n.isArray&&typeof n.data!="object"&&(i=!1)),i||(n.data=n.isArray?[]:{}),s)try{a=JSON.parse(s)}catch{try{const r=Oo(c=>{try{return JSON.parse(c)}catch{try{if(!o(c))return c.startsWith("[")?[]:{};let l=c;l=l.replace(/\\"/g,"___ESCAPED_DOUBLE_QUOTE___");let u=!1,p=!1,g="";for(let w=0;w<l.length;w++){const S=l[w];S==='"'&&(w===0||l[w-1]!=="\\")?(p||(u=!u),g+=S):S==="'"&&(w===0||l[w-1]!=="\\")?u?g+=S:(p=!p,g+='"'):g+=S}l=g.replace(/___ESCAPED_DOUBLE_QUOTE___/g,'\\"');const y=l.replace(/({|\[|\,)\s*?(\w+)\s*?:/g,'$1"$2":');return JSON.parse(y)}catch{return c.startsWith("[")?[]:{}}}},"safeEval"),o=Oo(c=>{let l=!1,u=!1,p=[];for(let g=0;g<c.length;g++){const y=c[g],w=g>0?c[g-1]:"";if(y==='"'&&w!=="\\"?u||(l=!l):y==="'"&&w!=="\\"&&(l||(u=!u)),!(l||u)){if(y==="{"||y==="[")p.push(y);else if(y==="}"){if(p.length===0||p.pop()!=="{")return!1}else if(y==="]"&&(p.length===0||p.pop()!=="["))return!1}}return!l&&!u&&p.length===0},"validateSyntax");a=r(s)}catch{a=n.isArray?[]:{}}}else a=n.isArray?[]:{};n.data=a,typeof a!="object"||a===null?n.children.forEach(r=>{r.element.value=""}):this.updateChildren(n,e),e.classList.add(this.options.mutatingClass),this.wrapper.classList.add(this.options.mutatingWrapperClass)}catch{n.data=n.isArray?[]:{},n.children.forEach(a=>{a.element.value=""})}}handleChildUpdate(e,n,s){let a=n.element.value?.trim()||"";try{let i;try{if(i=JSON.parse(e.value),s.isArray&&!Array.isArray(i))throw new Error("Parent data structure mismatch");if(!s.isArray&&typeof i!="object")throw new Error("Parent data structure mismatch")}catch{i=s.isArray?[]:{}}s.data=i;const r=this.parsePath(n.path,s.isArray);this.clearAllMutations(),e.classList.add(this.options.mutatingClass),n.element.classList.add(this.options.mutatingClass),this.wrapper.classList.add(this.options.mutatingWrapperClass);let o=a;if(a&&(a.startsWith("{")&&a.endsWith("}")||a.startsWith("[")&&a.endsWith("]")))try{o=JSON.parse(a)}catch{try{o=Oo(c=>{try{return JSON.parse(c)}catch{try{let l=c;l=l.replace(/\\"/g,"___ESCAPED_DOUBLE_QUOTE___");let u=!1,p=!1,g="";for(let w=0;w<l.length;w++){const S=l[w],m=l[w+1]||"";S==='"'&&(w===0||l[w-1]!=="\\")?(p||(u=!u),g+=S):S==="'"&&(w===0||l[w-1]!=="\\")?u?g+=S:(p=!p,g+='"'):g+=S}l=g.replace(/___ESCAPED_DOUBLE_QUOTE___/g,'\\"');const y=l.replace(/({|\[|\,)\s*?(\w+)\s*?:/g,'$1"$2":');return JSON.parse(y)}catch{return c}}},"safeEval")(a)}catch{}}this.updateValue(s.data,r,o),e.value=JSON.stringify(s.data,null,2),typeof o=="object"&&o!==null?this.previousValues.set(n.element,JSON.stringify(o)):this.previousValues.set(n.element,String(o)),setTimeout(()=>this.clearAllMutations(),this.options.mutationDuration)}catch{}}updateValue(e,n,s){if(n.isArray){let a=e;for(let r=0;r<n.indices.length-1;r++){const o=n.indices[r];for(;a.length<=o;)a.push(r===n.indices.length-2?[]:{});Array.isArray(a[o])||(a[o]=[]),a=a[o]}const i=n.indices[n.indices.length-1];for(;a.length<=i;)a.push({});if(n.props.length>0){let r=a[i];for(let o=0;o<n.props.length-1;o++){const c=n.props[o];(!r[c]||typeof r[c]!="object")&&(r[c]={}),r=r[c]}r[n.props[n.props.length-1]]=s}else a[i]=s}else{let a=e;n.props.length>0&&(n.props.slice(0,-1).forEach(i=>{(!a[i]||typeof a[i]!="object")&&(a[i]={}),a=a[i]}),a[n.props[n.props.length-1]]=s)}}parsePath(e,n){const s=[...e.matchAll(/\[(\d+)\]/g)].map(a=>parseInt(a[1]));if(s.length>0){const a=e.replace(/\[\d+\]/g,"").replace(/^\./,""),i=a?a.split(".").filter(Boolean):[];return{isArray:!0,indices:s,props:i}}return{isArray:!1,props:e.replace(/^\./,"").split(".").filter(Boolean)}}updateChildren(e,n){if(this.clearAllMutations(),typeof e.data!="object"||e.data===null){e.children.forEach(a=>{a.element.value=""});return}let s=!1;e.children.forEach(a=>{try{const i=this.parsePath(a.path,e.isArray),r=this.previousValues.get(a.element)||"",o=this.getValue(e.data,i);let c=!1;if(o.startsWith("{")||o.startsWith("["))try{const l=r?JSON.parse(r):null,u=o?JSON.parse(o):null;c=JSON.stringify(l)!==JSON.stringify(u)}catch{c=o!==r}else c=o!==r;c&&(a.element.classList.add(this.options.mutatingClass),s=!0,this.previousValues.set(a.element,o)),a.element.value=o}catch(i){console.error("Child update error:",i),a.element.value=""}}),s&&(n.classList.add(this.options.mutatingClass),this.wrapper.classList.add(this.options.mutatingWrapperClass),setTimeout(()=>this.clearAllMutations(),this.options.mutationDuration))}getValue(e,n){if(!e||typeof e!="object")return"";let s=e;if(n.isArray){for(const a of n.indices){if(!Array.isArray(s)||a>=s.length)return"";s=s[a]}for(const a of n.props)if(!s||typeof s!="object"||(s=s[a],s===void 0))return"";return this.formatValueForDisplay(s)}else{for(let a=0;a<n.props.length;a++){const i=n.props[a];if(!s||typeof s!="object"||(s=s[i],s===void 0))return""}return this.formatValueForDisplay(s)}}formatValueForDisplay(e){return e==null?"":typeof e=="object"?JSON.stringify(e,null,2):String(e)}handleFocus(e,n){clearTimeout(this.blurTimeout),this.wrapper.classList.add("jfs_has_focused"),this.wrapper.querySelectorAll(".focused").forEach(s=>s.classList.remove("focused")),e.classList.add("focused"),e===n?this.parentMap.get(n).children.forEach(s=>s.element.classList.add("focused")):n.classList.add("focused")}handleBlur(e,n){this.blurTimeout=setTimeout(()=>{const s=[n,...this.parentMap.get(n).children.map(a=>a.element)];s.some(a=>a.matches(":focus"))||(s.forEach(a=>a.classList.remove("focused")),this.wrapper.querySelector(".focused")||this.wrapper.classList.remove("jfs_has_focused"))},50)}clearAllMutations(){this.wrapper.querySelectorAll(`.${this.options.mutatingClass}`).forEach(e=>e.classList.remove(this.options.mutatingClass)),this.wrapper.classList.remove(this.options.mutatingWrapperClass)}};Oo(Df,"JsonFieldSynchronizer");let If=Df;var S3=Object.defineProperty,bs=d((t,e)=>S3(t,"name",{value:e,configurable:!0}),"d$2");async function qs(t){return(await fa(t))?.enabled===!0}d(qs,"isMockDataEnabled"),bs(qs,"isMockDataEnabled");async function fa(t){const e=Fa.get(Gi)||{};let n=e?.[t];if(!n)try{const s=workspace?.agent?.id;n=(await(await fetch(`/api/page/builder/mock-data/${s}/${t}`)).json())?.data,Fa.set(Gi,{...e,[t]:n})}catch{console.warn("Failed to fetch mock data:")}return n||{}}d(fa,"getMockData"),bs(fa,"getMockData");async function Fl(t,e){const n={...e,updatedAt:new Date().toISOString()};try{const s=workspace?.agent?.id;if((await fetch(`/api/page/builder/mock-data/${s}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({[t]:n})})).ok){const a=Fa.get(Gi)||{},i={...a?.[t]||{},...n};a[t]=i,Fa.set(Gi,a)}}catch{console.warn("Failed to save Mock Data")}}d(Fl,"C$2"),bs(Fl,"insertOrUpdateMockData");const vs={BUTTON_CLASS:"_mock_data_toggle_btn",SAVE_BTN_CLASS:"_mock_data_save_btn",SAVE_BTN_LABEL_CLASS:"_mock_data_save_btn__label",LABEL_CLASS:"_btn_label",ICON_CLASS:"_btn_icon"},mn={ENABLED:{icon:"fa-toggle-on",label:"Mock Data Enabled",color:"text-[#3C89F9]"},DISABLED:{icon:"fa-toggle-off",label:"Use Mock Data",color:"text-grey-600"}};function $l(t){return new Promise(async(e,n)=>{const s=bs(async(r,o)=>{const c=(await fa(t.uid))?.data?.outputs||{};return r.map((l,u)=>{let p=c?.[l?.name]??"";p=typeof p=="object"?JSON.stringify(p,null,2):String(p);const g=l?.fieldClasses||"",y=Object.entries(l?.attributes||{}).map(([w,S])=>`${w}="${S}"`).join(" ");return l.type==="file"?`
              <div class="flex mb-5">
                <span class="inline-flex w-40 items-center px-3 text-sm text-gray-900 bg-gray-200 border border-e-0 border-gray-300 rounded-s-md dark:bg-gray-600 dark:text-gray-400 dark:border-gray-600 break-all">
                  ${l.name}
                </span>
                <input type="file" name="${l.name}" id="${o}-input-${u}" class="${o}-input input
                  block w-full text-sm text-slate-500
                  file:mr-4 file:py-2 file:px-4 file:rounded-md
                  file:border-0 file:text-sm file:font-semibold
                  file:bg-gray-200 file:text-gray-900
                  hover:file:bg-gray-300 pl-5
                " multiple>
              </div>`:`
              <div class="flex mb-5">
                <span class="inline-flex w-40 items-center px-3 text-sm text-gray-900 bg-gray-200 border border-e-0 border-gray-300 rounded-s-md dark:bg-gray-600 dark:text-gray-400 dark:border-gray-600 break-all">
                  ${l.name}
                </span>
                <textarea id="${o}-input-${u}" name="${l.name}" class="${o}-input input block p-1 w-full text-sm text-gray-900 bg-gray-50 rounded-e-md border border-gray-300 focus:ring-blue-500 focus:border-blue-500 ${g}" style="min-height:44px; height: 44px;" ${y}>${p}</textarea>
              </div>`}).join("")},"createInputList"),a=[...t.domElement.querySelectorAll(".output-endpoint")].map(r=>{const o=r.getAttribute("smt-name"),c=r.getAttribute("smt-expression")||o;return{name:o,expression:c,fieldClasses:Vi,attributes:{"data-expression":c}}}),i=await s(a,"outputs");vr({title:"Configure Mock Output Data",content:`
        <div class="mb-4">
          <p class="text-xs text-gray-500">
            Mock output data allows you to test your component without requiring actual API keys or credentials. 
            Configure sample responses below to simulate the component's behavior.
          </p>
        </div>
        ${i}
      `,actions:[{label:`<span class="flex items-center gap-2">
                  <span class="fa-solid fa-save"></span>
                  <span class="!text-[#3b82f6] group-hover:!text-white ${vs.SAVE_BTN_LABEL_CLASS}">Save</span>
                </span>`,cssClass:`border border-[#3b82f6] bg-white hover:bg-[#3b82f6] group transition-all duration-200 !text-[#3b82f6] hover:!text-white ${vs.SAVE_BTN_CLASS}`,callback:async(r,o)=>{const c=o.querySelector(`.${vs.SAVE_BTN_CLASS}`),l=c.querySelector(`.${vs.SAVE_BTN_LABEL_CLASS}`);c.disabled=!0,c?.classList.add("cursor-not-allowed"),l.textContent="Saving...";const u={},p=Array.from(o.querySelectorAll(".outputs-input.input")).reduce((g,y,w)=>{let S;try{u[w]?S=u[w].value:S=Pf(y.value)||y.value}catch{S=y.value}return g[a[w].name]=S,g},{});try{await Fl(t.uid,{enabled:!0,data:{outputs:p}}),_t.track("app_set_mock_data"),e("saved")}finally{c.disabled=!1,c?.classList.remove("cursor-not-allowed"),l.textContent="Save",Ta(o)}}}],onCloseClick:(r,o)=>{n("close"),Ta(o)},onDOMReady:function(r){new If(r.querySelector(".__content"),{jsonFieldClass:Vi});const o=r.querySelector(".__actions");o.classList.remove("justify-center"),o.classList.add("justify-end")}})})}d($l,"saveMockOutputs"),bs($l,"saveMockOutputs");const Lf={getOutputFields(t){const e=t.querySelectorAll(".outputs-input.input");return Array.from(e)},async setMockData(t,e){try{const n=(await fa(t))?.data?.outputs||{};this.getOutputFields(e).forEach(s=>{const a=s.getAttribute("name")||"";let i=n[a]??"";i=typeof i=="object"?JSON.stringify(i,null,2):String(i),s.value=i})}catch(n){console.error("Failed to set mock data:",n)}},applyJsonFieldSynchronizer(t){try{this.getOutputFields(t).forEach(n=>{const s=n.getAttribute("name")||"",a=n.getAttribute("smt-expression")||s;n.classList.add(Vi),n.setAttribute("data-expression",a)});const e=t.querySelector("#outputs");if(!e)return;new If(e,{jsonFieldClass:Vi})}catch{console.error("Failed to apply JSON field synchronizer:")}}};async function jo(t){const e=[...t.domElement.querySelectorAll(".output-endpoint")];if(await qs(t.uid)){const n=await fa(t.uid);for(const s of e){const a=s.getAttribute("smt-name");let i=n?.data?.outputs?.[a];i&&s.setAttribute("smt-mock-data",typeof i=="object"?JSON.stringify(i):i)}}else e.forEach(n=>{n.removeAttribute("smt-mock-data")})}d(jo,"toggleMockOutputPills"),bs(jo,"toggleMockOutputPills");const oi={elements(t){return{button:t.domElement.querySelector(`.${vs.BUTTON_CLASS}`),label:t.domElement.querySelector(`.${vs.LABEL_CLASS}`),icon:t.domElement.querySelector(`.${vs.ICON_CLASS}`)}},turnOn(t){const{button:e,label:n,icon:s}=this.elements(t);e.classList.remove(mn.DISABLED.color),e.classList.add(mn.ENABLED.color),n.textContent=mn.ENABLED.label,s.classList.remove(mn.DISABLED.icon),s.classList.add(mn.ENABLED.icon)},turnOff(t){const{button:e,label:n,icon:s}=this.elements(t);e.classList.remove(mn.ENABLED.color),e.classList.add(mn.DISABLED.color),n.textContent=mn.DISABLED.label,s.classList.remove(mn.ENABLED.icon),s.classList.add(mn.DISABLED.icon)},setLoadingState(t){const{button:e}=this.elements(t);e.classList.contains("text-[#3C89F9]")&&e.classList.remove("text-[#3C89F9]"),e.disabled=!0,e.classList.add("cursor-not-allowed")},clearLoadingState(t){const{button:e}=this.elements(t);e.disabled=!1,e.classList.remove("cursor-not-allowed")}},Rl=new Set;async function Tf(t){const e=t.uid;if(!Rl.has(e)){Rl.add(e);try{const n=await qs(e)?"ENABLED":"DISABLED";let s=mn[n].label,a=mn[n].icon,i=mn[n].color;t.addComponentButton(`<div class="fa-solid ${a} text-base _btn_icon"></div>
       <span class="ml-2 font-semibold _btn_label">${s}</span>`," ",{class:`${vs.BUTTON_CLASS} ${i} transition-opacity duration-300`,customStyle:"toggle",position:"top"},async()=>{try{const r=bs(async()=>{await qs(e)?(await Fl(t.uid,{enabled:!1}),oi.turnOff(t)):(_t.track("app_mock_screen_impression",{source:"use_mock_data_button"}),await $l(t),oi.turnOn(t))},"toggleMockData");oi.setLoadingState(t),await r(),await jo(t)}catch{console.error("Failed to toggle mock data")}finally{oi.clearLoadingState(t)}})}finally{Rl.delete(e)}}}d(Tf,"addMockDataToggleButton"),bs(Tf,"addMockDataToggleButton");var C3=Object.defineProperty,ri=d((t,e)=>C3(t,"name",{value:e,configurable:!0}),"r$2");function ql(t,e,n){if(!e)return;const s=Array.isArray(e)?e:e.trim().split(/\s+/);t.classList[n](...s)}d(ql,"b$2"),ri(ql,"applyClasses");function ys(t={step:{enable:!1},run:{enable:!1,tooltipText:"Run",icon:"mif-play"},stop:{enable:!1},attach:{enable:!1}},e={}){for(const[i,r]of Object.entries(t)){if(!r)continue;const o=document.getElementById(`debug-menubtn-${i}`);if(!o)continue;const{enable:c,classesToAdd:l,classesToRemove:u,tooltipText:p,icon:g}=r;if(c?o.removeAttribute("disabled"):o.setAttribute("disabled","true"),ql(o,l,"add"),ql(o,u,"remove"),p){const y=document.querySelector(`#tooltip-${i}`);y&&(y.textContent=p)}if(g){o.querySelectorAll(".debug-btn-icon").forEach(w=>w.classList.add("hidden"));const y=o.querySelector(`.${g}`);y&&y.classList.remove("hidden")}}const n=document.getElementById("debug-controls-overlay"),s=document.getElementById("tooltip-controls-overlay"),a=e.controlsOverlay;a?.enable?(n?.classList.remove("hidden"),a.tooltipText&&s&&(s.textContent=a.tooltipText)):n?.classList.add("hidden")}d(ys,"updateDebugControls"),ri(ys,"updateDebugControls");function No(t={}){ys({run:{enable:!0},step:{enable:!0},stop:{enable:!0},attach:{enable:!0}},t)}d(No,"enableAllDebugControls"),ri(No,"enableAllDebugControls");function E3(t={}){ys({run:{enable:!1},step:{enable:!1},stop:{enable:!1},attach:{enable:!1}},t)}d(E3,"disableAllDebugControls"),ri(E3,"disableAllDebugControls");function li(){const t=!!document.querySelector(".component.selected"),e=!!document.querySelector(".component.dbg-active"),n=!!document.querySelector(".component.dbg-running"),s=su()==="error";if(e||n)return;const a=document.getElementById("debug-menu-tgl")?.checked;t&&a?No({controlsOverlay:{enable:!1}}):ys({run:{enable:!1},step:{enable:!1},stop:{enable:s},attach:{enable:a}},{controlsOverlay:{enable:!a||!t&&!s,tooltipText:a?"Please select a component":"Click to toggle debug"}})}d(li,"updateDebugControlsOnSelection"),ri(li,"updateDebugControlsOnSelection");var A3=Object.defineProperty,Re=d((t,e)=>A3(t,"name",{value:e,configurable:!0}),"i$1");const Mf={CONTROL:"control",VARIANT_1:"variant_1",VARIANT_2:"variant_2"},_3={CONTROL:"control",VARIANT_1:"variant_1"};Mo.languages.smythLog={error:{pattern:/^Error\s:.*$/m,inside:{keyword:/^Error/},greedy:!0},json:{pattern:/{[^{}]*}/,inside:Mo.languages.json,greedy:!0}};const k3=Re(t=>/^-?\d+(\.\d+)?$/.test(t.trim()),"isNumber"),P3=Re(t=>{const e=parseFloat(t);return!isNaN(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER&&e.toString()===t.trim()},"isValidNumber");function Bl(t){if(!t)return null;if(k3(t)&&!P3(t)||!t.trim().startsWith("{")&&!t.trim().startsWith("["))return t;try{return JSON.parse(t)}catch{try{return JSON.parse(_r(t))}catch(e){return console.error("Error on parseJson: ",e.toString()),console.error("   Tried to parse: ",t),null}}}d(Bl,"Te"),Re(Bl,"parseJson");function Of(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}d(Of,"it"),Re(Of,"escapeRegExp");const bt={},Bs={};let ma,Fo,Ul;function jf(){const t=workspace.agent;return bt?.[t.id]?.sessionID}d(jf,"getDebugSessionID"),Re(jf,"getDebugSessionID");let Nf=!1,$o=!1,Ff=!1;function zl(t){const e=document.querySelector(".debug-switcher"),n=document.getElementById("debug-switcher-container");document.getElementById("debug-menu");const s=e.querySelector(".debug-switcher-text"),a=e.querySelector(".pulsing-dot-container"),i=e.querySelector(".mif-bug"),r=document?.getElementById("cmp-inspect-btn"),o=document?.querySelector(".debug-switcher-message");t&&_t.track("debug_button_click",{position:"bottom center of builder",type:"debug"}),t?(o?.classList.remove("hidden"),o?.classList.add("block"),a.classList.remove("hidden"),s.textContent="Debug On",i.classList.add("hidden"),e.classList.add("active"),n.classList.add("active"),tu(r,!0)):(Ho({resetPinned:!0}),s.textContent="Debug Off",e.classList.remove("active"),n.classList.remove("active"),i.classList.remove("hidden"),a.classList.add("hidden"),o?.classList.remove("block"),o?.classList.add("hidden"),tu(r,!1))}d(zl,"Me"),Re(zl,"toggleSwitch");async function Hl(t,e="step"){const n=workspace.domElement.querySelector(".component.selected");if(!n){us("No component selected","Please select a component");return}const s=n?._control;await s.openDebugDialog.call(s,t,e)}d(Hl,"Ce"),Re(Hl,"_openDebugDialog");function $f(t){document.querySelectorAll(".component .debug-bar").forEach(e=>{const n=e.querySelector(".btn-debug"),s=e.querySelector(".btn-debug-log"),a=e.querySelector(".btn-fix-with-ai");Gl(s,a);const i=e.querySelector(".btn-debug");i&&(t===Mf.VARIANT_1&&(i.style.right="35px",i.insertAdjacentHTML("afterbegin",'<span class="text-white">Debug</span>')),t===Mf.VARIANT_2&&(i.style.right="30px",i.insertAdjacentHTML("afterbegin",'<span class="text-white">Click</span>'))),e.addEventListener("click",r=>{r.stopPropagation(),r.stopImmediatePropagation(),n?.click()})})}d($f,"at$1"),Re($f,"handleDebugButtons");function Gl(t,e){t&&t.classList.add("variant_2","h-6"),e&&e.classList.add("variant_2","h-6")}d(Gl,"De"),Re(Gl,"applyDebugButtonStyles");function Vl(){try{const t=_t.getFeatureFlag(yc.DEBUG_INJECT_TEXT_EXPERIMENT);$f(t)}catch(t){console.error("Error on runDebugInjectButtonExperiment: ",t.toString())}}d(Vl,"Ie"),Re(Vl,"runDebugInjectButtonExperiment");function Rf(){_t.getFeatureFlag(yc.POSTHOG_EXPERIMENT_FIX_WITH_AI)===_3.VARIANT_1&&document.querySelectorAll(".component .debug-bar")?.forEach(t=>{const e=t?.querySelector(".btn-fix-with-ai");e&&e.setAttribute("style","display:none !important")})}d(Rf,"lt"),Re(Rf,"runFixWithAIEExperiment");async function D3(){if(Nf){console.log("Debugger already initialized ... Skipping");return}await workspace.waitUnlock(),Nf=!0,console.log("Initializing debugger");const t=document.getElementById("debug-menu"),e=document.getElementById("debug-menu-tgl"),n=document.getElementById("debug-status"),s=document.querySelector(".debug-switcher");function a(){e.checked=!e.checked;const l=new Event("change",{bubbles:!0});e.dispatchEvent(l),e.checked&&!$o&&(Vl(),$o=!0)}if(d(a,"o"),Re(a,"toggleDebugMenu"),s?.addEventListener("click",a),t?.addEventListener("click",()=>{e.checked||a()}),e?.addEventListener("change",()=>{xs(),e?.checked?(zl(!0),n.classList.remove("hidden"),t.classList.remove("hidden")):(zl(!1),n.classList.add("hidden")),[...document.querySelectorAll(".debug-btn")].forEach(l=>{e?.checked?(l.removeAttribute("disabled"),workspace.domElement.classList.add("debug-enabled")):(l.setAttribute("disabled","true"),workspace.domElement.classList.remove("debug-enabled"),xs(),n.classList.add("hidden"))}),workspace.saveAgent(),setTimeout(()=>{workspace.redraw(),li()},500)}),workspace.agent.data.debugSessionEnabled){e.checked=!0;const l=new Event("change",{bubbles:!0});e.dispatchEvent(l),n.classList.remove("hidden"),[...document.querySelectorAll(".debug-btn")].forEach(u=>{u.removeAttribute("disabled"),workspace.domElement.classList.add("debug-enabled")}),setTimeout(()=>{workspace.redraw(),workspace?.agent?.id&&xs(),$o||(Vl(),$o=!0),Ff||(Rf(),Ff=!0)},500)}const i=document.getElementById("debug-menubtn-run"),r=document.getElementById("debug-menubtn-step"),o=document.getElementById("debug-menubtn-stop"),c=document.getElementById("debug-menubtn-attach");i?.addEventListener("click",async l=>{console.log("debug run"),_t.track("debug_button_click",{position:"bottom center of builder",type:"run"});const u=i.querySelector(".mif-play"),p=i.querySelector(".mif-pause"),g=i.classList.contains("running"),y=workspace.agent;if(bt?.[y.id]?.sessionID||await Hl(l,"run"),g){const w=document.querySelector("#tooltip-run");w.innerHTML="Run",i.classList.remove("running"),u.classList.remove("hidden"),p.classList.add("hidden"),r.removeAttribute("disabled"),c.removeAttribute("disabled"),o.removeAttribute("disabled")}else{const{result:w}=await Wl();!w?.errorOccurred&&w?.states?.sessionClosed&&fi()}}),r.addEventListener("click",async l=>{console.log("debug Step"),_t.track("debug_button_click",{position:"bottom center of builder",type:"step"});const u=workspace.agent;if(!bt?.[u.id]?.sessionID){Hl(l,"step");return}ys({step:{enable:!1},run:{enable:!1},stop:{enable:!0},attach:{enable:!1}});try{if(await Uo(u.id)){const p=await ga(u.id);!p?.errorOccurred&&p?.states?.sessionClosed&&fi()}else Xe("Debug session terminated unexpectedly. Check logs for details.","Debug Interrupted"),ba()}finally{No()}}),c.addEventListener("click",async l=>{_t.track("debug_button_click",{position:"bottom center of builder",type:"attach"}),Bn("Attaching to live debug session ...");const u=workspace.agent;u&&(ys({step:{enable:!1},run:{enable:!1},stop:{enable:!1},attach:{enable:!1}}),await Kl(u.id,1)?(Bt("Successfully attached to action","Debug Session Attached"),Bn("Successfully attached to action")):(Xe("Failed to attach debugger","No active session found"),Bn("Failed to attach debugger, No active session found")))}),document.getElementById("debug-menubtn-stop").addEventListener("click",async l=>{_t.track("debug_button_click",{position:"bottom center of builder",type:"stop"}),xs(),i.removeAttribute("disabled"),r.removeAttribute("disabled"),c.removeAttribute("disabled"),o.removeAttribute("disabled"),us("Debug session stopped. Review and re-initiate if needed.","Debug Stopped"),ba()}),zf(),Uf()}d(D3,"init"),Re(D3,"init");function qf(){return new Promise(t=>{const e=document.getElementById("debug-menubtn-step"),n=setInterval(()=>{e.getAttribute("disabled")||(clearInterval(n),t(!0))},100)})}d(qf,"ct$1"),Re(qf,"waitDebugStep");function Bn(t){const e=document.querySelector("#debug-status pre");e.innerHTML=t+`
`+e.innerHTML}d(Bn,"log"),Re(Bn,"log");async function Wl(){const t=document.getElementById("debug-menubtn-run"),e=t.querySelector(".mif-play"),n=t.querySelector(".mif-pause"),s=document.getElementById("debug-menubtn-step"),a=document.getElementById("debug-menubtn-attach"),i=document.getElementById("debug-menubtn-stop"),r=document.querySelector("#tooltip-run");r.innerHTML="Pause",e.classList.add("hidden"),n.classList.remove("hidden"),s.setAttribute("disabled","true"),a.setAttribute("disabled","true"),i.setAttribute("disabled","true");let o=t.classList.contains("running");if(o)return;t.classList.add("running"),o=!0,_t.track("app_run_agent");let c,l=!0,u="success",p;for(;o;){const g=workspace.agent;if(!bt?.[g.id]?.sessionID)break;if(l&&(c=await Uo(g.id)),!c){Xe("Debug session terminated unexpectedly. Check logs for details.","Debug Interrupted"),u="failed",ba();break}p=await ga(g.id);const y=Object.values(p.states.state).filter(w=>w.active);if(console.log(y),l=y.length>0,p?.error&&(u="failed"),p.error||p.sessionClosed||p?.states?.sessionClosed)break;o=t.classList.contains("running")}return console.log("debug run end"),_t.track("app_workflow_test_completed",{status:u,source:"debugger"}),r.innerHTML="Run",t.classList.remove("running"),e.classList.remove("hidden"),n.classList.add("hidden"),s.removeAttribute("disabled"),a.removeAttribute("disabled"),i.removeAttribute("disabled"),{result:p}}d(Wl,"runDebug"),Re(Wl,"runDebug");function Bf(){return new Promise(t=>{const e=document.getElementById("debug-menubtn-run"),n=setInterval(()=>{e.classList.contains("running")||(clearInterval(n),t(!0))},100)})}d(Bf,"dt$1"),Re(Bf,"waitRunningDebug");function Uf(){const t={debugLastAction:async()=>{const e=document.getElementById("debug-menu-tgl");if(!(e&&!e.checked)&&!t.debugLastAction.running){t.debugLastAction.running=!0;try{Ro("Debugger:Attaching...");let n=3;console.log("Waiting for debugger to be ready ..."),await Bf(),console.log("Waiting previous session to close ..."),await Gf(workspace.agent.id),console.log("debugger ready, trying to attach ..."),await Kl(workspace.agent.id,10)?(Ro("Debug is attached. Interact with the debug controls to proceed with debugging your agent"),Bn("Successfully attached to action")):(Xe("Failed to attach debugger","No active session found"),Bn("Failed to attach debugger"))}catch(n){console.error("debugLastAction",n)}t.debugLastAction.running=!1}}};window.onmessage=function(e){const n=`${`${workspace.agent.id}.${workspace.serverData.agent_domain}`}`;if(e.origin.replace("https://","").replace("http://","")===n)try{const s=JSON.parse(e.data);if(s.function&&typeof t[s.function]=="function"){const a=s.args||[];t[s.function].apply(null,a)}else console.error("Invalid jsonRPC call",s)}catch(s){console.error("Invalid jsonRPC call",s)}}}d(Uf,"ut"),Re(Uf,"handleEmbodimentRPCDebug");async function zf(t=!0){if(await workspace.waitServerData(),ma=workspace.serverData.dbgUrl+"/api",Fo=workspace.serverData.dbgUrl,console.log("DBG Server Status:",workspace.serverData.status.toLowerCase()),!t)return;const e=document.querySelector(".debug-switcher");workspace.serverData.status.toLowerCase()==="offline"?(document.querySelectorAll("#debug-menu .debugger").forEach(n=>{$(n).removeClass("flex").addClass("hidden")}),e.disabled=!0,e.style.opacity="0.5",document.querySelectorAll("#debug-menu .no-debugger").forEach(n=>{$(n).addClass("flex").removeClass("hidden")})):(document.querySelectorAll("#debug-menu .debugger").forEach(n=>{$(n).removeClass("hidden").addClass("flex")}),e.disabled=!1,e.style.opacity="1",document.querySelectorAll("#debug-menu .no-debugger").forEach(n=>{$(n).addClass("hidden").removeClass("flex")}))}d(zf,"pt"),Re(zf,"updateServerStatus");async function Hf(t,e){const n=ma+"?read",s={"Content-type":"application/json; charset=UTF-8","X-AGENT-ID":t,"X-DEBUG-READ":e};window.currentMonitorId&&(s["X-MONITOR-ID"]=window.currentMonitorId);let a=await fetch(n,{method:"POST",headers:s}).then(i=>i.json());try{const i=Object.keys(a.state),r=JSON.parse(JSON.stringify(a));for(const o of i)if(await qs(o)){const c=r.state?.[o];c?.output&&c?.output?.constructor===Object&&(r.state[o].output._debug="Response generated using mock data. Please disable mock data to see actual response.",a=r)}else Object.keys(r.state?.[o]?.output||{})?.length>0&&!r.state?.[o].output._debug&&(r.state[o].output._debug="Response generated with configured output data.",a=r)}catch{console.warn("Error mutating result for inject/mock output data")}return a}d(Hf,"gt"),Re(Hf,"readDebugInfo");function Gf(t){return new Promise(e=>{setInterval(()=>{if(!bt[t]?.sessionID)return e(!0)},1e3)})}d(Gf,"mt$1"),Re(Gf,"waitSessionClose");async function Kl(t,e=1){let n=e,s,a=0;for(;!s&&n>0;){if(await je(100+a),document.querySelectorAll(".component.dbg-active").length>0){console.log("attachLiveDebugSession canceled, there is already an active debug session");break}s=await Vf(workspace.agent.id),n--,!s&&n>0&&(console.log("Attach failed, retrying ..."),a+=500)}return setTimeout(()=>{const i=[...document.querySelectorAll(".component.dbg-active")].filter(r=>r.classList.contains("dbg-always-active")===!1)[0];workspace.scrollToComponent(i),ys({step:{enable:!!s},run:{enable:!!s},stop:{enable:!!s},attach:{enable:!s}})},1e3),s}d(Kl,"attachLiveDebugSession"),Re(Kl,"attachLiveDebugSession");async function Vf(t){console.log("attachLiveDebugSession",t),eu(),Ul!=t&&(await xs(),await je(200));const e=`${Fo}/debugSession/${t}`,n=await fetch(e).then(a=>a.json());console.log("getLiveDebugSession",n);const s=n.dbgSession;return s&&((await ga(workspace.agent.id,s)).attached||(us("Cannot attach to this session.<br />Make sure that the session ID is valid and that the corresponding agent is loaded","Invalid Debug Session"),Bn("Cannot attach to session "+s))),Ul=t,s}d(Vf,"ft"),Re(Vf,"_attachLiveDebugSession");function Ro(t){Ba.send({function:"updateStatus",args:[t]},["chatbot"])}d(Ro,"ve"),Re(Ro,"updateChatbotStatus");function Wf(t,e){const n=e.split(/\.|\[|\]\.|\]\[|\]/).filter(Boolean);let s=t;for(let a of n){if(s==null)return;s=s[a]}return s}d(Wf,"bt$1"),Re(Wf,"JSONExpression");function Yl(t,e){let n=!1,s="";const a=Re(o=>ci(o)||di(o)||pi(o),"isPreviewableUrl"),i=e===Yt.imageGenerator;(Array.isArray(t)&&t.some(a)||a(t)||i)&&(n=!0),n&&(s=`<div class="text-center"><a href="#" class="w-[100px] px-3 py-1 text-xs font-medium text-center text-white bg-blue-700 rounded-md hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800 btn-file-preview" data-is-image-generator="${i}">Preview</a></div>`);let r=typeof t!="string"?JSON.stringify(t,null,2):t;return r=r.replace(/\\n/g,`
`),t=`<textarea readonly class="dbg dbg-textarea text-gray-800">${r===""?"[empty string]":r}</textarea>${s}`,t}d(Yl,"$e"),Re(Yl,"getFormattedContent");function Kf(t){t.querySelectorAll(".smyth.endpoint").forEach(e=>{e.id,e.classList.add("disabled-endpoint"),e.endpoint.canvas.style.display="none"})}d(Kf,"yt$1"),Re(Kf,"disableComponentEndpoints");function Xl(t){t.querySelectorAll(".smyth.endpoint").forEach(e=>{e.id,e.classList.remove("disabled-endpoint"),e.endpoint.canvas.style.display=""})}d(Xl,"_e"),Re(Xl,"enableComponentEndpoints");function ui(t,e){if(!e)return;e==="pin"?(t.classList.add("pinned"),t.closest(".endpoint").classList.add("pinned")):e==="toggle"&&(t.classList.toggle("pinned"),t.closest(".endpoint").classList.toggle("pinned"),t.classList.contains("pinned")||t.removeAttribute("style"));const n=t.closest(".component");[...n.querySelectorAll(".pinned")].length>0?(Kf(n),n.style.zIndex=500):(Xl(n),n.style.zIndex="")}d(ui,"ne$2"),Re(ui,"togglePinning");function ci(t){return f3.isSmythFileObject(t)}d(ci,"se$2"),Re(ci,"isSmythFileObject");function di(t){return typeof t=="string"&&t.startsWith("smythfs://")}d(di,"oe$1"),Re(di,"isSmythFileUrl");function pi(t){return typeof t=="string"&&_b(t)}d(pi,"re$1"),Re(pi,"isUrl");async function Yf(t){try{let e;try{e=JSON.parse(t)}catch{e=t.trim()}const n=Re(i=>({name:i.name||"",url:`${Fo}/file-proxy?url=${i.url}`,mimetype:i.mimetype||""}),"smythFileToOutput"),s=Re(i=>({name:"",url:`${Fo}/file-proxy?url=${i}`,mimetype:""}),"smythFileUrlToOutput"),a=Re(i=>({name:"",url:i,mimetype:""}),"urlToOutput");if(Array.isArray(e)){if(e.some(ci))return e.filter(ci).map(n);if(e.some(di))return e.filter(di).map(i=>s(i));if(e.some(pi))return e.filter(pi).map(i=>a(i))}else{if(ci(e))return[n(e)];if(di(e))return[s(e)];if(pi(e))return[a(e)]}return[]}catch(e){return console.error("Error processing file content:",e),[]}}d(Yf,"ht"),Re(Yf,"processFileContent");async function Jl(t,e){if(t?.mimetype)return xc(t.mimetype);try{const n=await kb(e);return xc(n)}catch{return"unknown"}}d(Jl,"He"),Re(Jl,"getFileType");function Zl(t,e,n,s){const a="btn btn-primary font-medium text-sm text-gray-400 dark:text-gray-500 hover:underline";switch(t){case"image":return`
        <div class="image-container p-2">
          <div class="text-sm font-medium mb-2 text-gray-500">${n}</div>
          <div class="w-full flex justify-center bg-gray-100 rounded-lg relative">
            <img
              src="${e}"
              alt="${n}"
              class="max-w-full max-h-[80vh] object-contain rounded-lg"
              onerror="${s}"
              onload="${s}"
            />
          </div>
          <div class="text-center mt-2 flex justify-between gap-2">
            <a href="${e}" target="_blank" class="${a}">Open in new tab</a>
            <a href="${e}" download="${n}" class="${a}">Download</a>
          </div>
        </div>`;case"audio":return`
        <div class="audio-container p-2">
          <audio controls src="${e}" class="max-w-full m-auto" onerror="${s}" oncanplay="${s}"></audio>
          <div class="text-center mt-2">
            <a href="${e}" target="_blank" class="${a}">Open in new tab</a>
          </div>
        </div>`;case"video":return`
        <div class="video-container p-2">
          <video controls class="max-w-full m-auto" onerror="${s}" oncanplay="${s}">
            <source src="${e}" type="video/mp4">
            Your browser does not support the video tag.
          </video>
          <div class="text-center mt-2">
            <a href="${e}" target="_blank" class="${a}">Open in new tab</a>
          </div>
        </div>`;case"pdf":return`
        <div class="pdf-container p-2">
          <div class="text-sm font-medium mb-2 text-gray-500">${n}</div>
          <div class="w-full h-[80vh] bg-gray-100 rounded-lg relative">
            <iframe
              src="${e}#toolbar=0"
              class="w-full h-full rounded-lg"
              type="application/pdf"
              onerror="${s}"
              onload="${s}"
            ></iframe>
          </div>
          <div class="text-center mt-2 flex justify-between gap-2">
            <a href="${e}" target="_blank" class="${a}">Open in new tab</a>
            <a href="${e}" download="${n}" class="${a}">Download</a>
            </div>
          </div>`;default:return`
          <div class="file-container p-2">
            <div class="text-sm font-medium mb-2 text-gray-700">${n}</div>
            <div class="text-center">
              <a href="${e}" target="_blank" download="${n}" class="btn btn-primary font-medium text-blue-600 dark:text-blue-500 hover:underline">Download File</a>
            </div>
          </div>`}}d(Zl,"Ne"),Re(Zl,"generateFilePreviewHTML");function Xf(t){Wi("File Preview",`${t}<div class="h-1 mt-1">
      <div data-role="progress" data-type="line" data-small="true" data-cls-back="bg-gray-300" class="file-preloader h-1"></div>
    </div>`,{Close:{class:"border border-gray-700 hover:opacity-75",handler:()=>{}}},{onShow:()=>{document.querySelector(".fallback-file-download-link")&&document.querySelector(".file-preloader")?.remove()}})}d(Xf,"vt"),Re(Xf,"showPreviewDialog");async function Ql(t){t.preventDefault();const e=t.target,n=e.textContent||"Preview";e.textContent="...",e.classList.add("opacity-50","cursor-not-allowed"),e.setAttribute("disabled","true");try{const s="document.querySelector('.file-preloader')?.remove()",a=e.closest(".dbg-element")?.querySelector(".dbg-textarea");if(!a)throw new Error("Parent textarea not found");const i=e.getAttribute("data-is-image-generator")==="true"?"image":"",r=a.textContent,o=await Yf(r);let c;if(o.length>1)c=`
      <div class="file-gallery grid grid-cols-2 gap-4">
        ${(await Promise.all(o.map(async(l,u)=>{const p=l?.name||`File ${u+1}`,g=l?.url,y=i||await Jl(l,g);return Zl(y,g,p,s)}))).join("")}
      </div>`;else if(o.length===1){const l=o[0],u=l.url,p=l.name||"File",g=i||await Jl(l,u);c=Zl(g,u,p,s)}else throw new Error("No valid files found to preview");Xf(c)}catch(s){console.error("Preview error:",s);const a=s instanceof Error?s.message:"Failed to generate preview";ls(`Preview failed: ${a}`)}finally{e.textContent=n,e.classList.remove("opacity-50","cursor-not-allowed"),e.removeAttribute("disabled")}}d(Ql,"Be"),Re(Ql,"previewHandler");function hi(t,e,n){let s=t.querySelector(".dbg-element.dbg-output");s||(s=document.createElement("div"),t.appendChild(s)),e===""||e===null||typeof e!="string"&&JSON.stringify(e,null,2);const a=e?Yl(e,n):e+"";s.innerHTML=`<button class="pin button primary"><span class="mif-pin icon"></span></button>${a}`,s.className="dbg-element dbg-output";const i=s.closest(".endpoint")?.classList.contains("pinned");ui(s,i?"pin":""),s.querySelector(".pin").onclick=async c=>{c.stopPropagation(),c.stopImmediatePropagation(),ui(s,"toggle")},s.querySelector(".btn-file-preview")?.addEventListener("click",Ql);const r=s.closest(".endpoint"),o=s.querySelector(".dbg-textarea");if(r&&o&&!r.classList.contains("pinned")){const c=Re(()=>{const l=window.getSelection();l&&l.toString()&&l.anchorNode&&(o.contains(l.anchorNode)||o.contains(l.focusNode))&&l.removeAllRanges()},"clearSelectionHandler");r.addEventListener("mouseleave",c),document.addEventListener("click",l=>{if(!s.contains(l.target)&&!r.classList.contains("pinned")){const u=window.getSelection();u&&u.toString()&&u.anchorNode&&(o.contains(u.anchorNode)||o.contains(u.focusNode))&&u.removeAllRanges()}})}t.querySelector(".name").classList.add("dbg-info"),t.querySelector(".ep").classList.add("dbg-info")}d(hi,"ie$2"),Re(hi,"showOutputInfo");function Jf(t,e){let n=t?.querySelector(".dbg-element.dbg-output");n||(n=document.createElement("div"),t?.appendChild(n));const s=Yl(e);n.innerHTML=`<button class="pin button primary"><span class="mif-pin icon"></span></button>${s}`,n.className="dbg-element dbg-output",t?.appendChild(n);const a=n.closest(".endpoint")?.classList.contains("pinned");ui(n,a?"pin":""),n.querySelector(".pin").onclick=async o=>{o.stopPropagation(),o.stopImmediatePropagation(),ui(n,"toggle")},n.querySelector(".btn-file-preview")?.addEventListener("click",Ql);const i=n.closest(".endpoint"),r=n.querySelector(".dbg-textarea");if(i&&r&&!i.classList.contains("pinned")){const o=Re(()=>{const c=window.getSelection();c&&c.toString()&&c.anchorNode&&(r.contains(c.anchorNode)||r.contains(c.focusNode))&&c.removeAllRanges()},"clearSelectionHandler");i.addEventListener("mouseleave",o),document.addEventListener("click",c=>{if(!n.contains(c.target)&&!i.classList.contains("pinned")){const l=window.getSelection();l&&l.toString()&&l.anchorNode&&(r.contains(l.anchorNode)||r.contains(l.focusNode))&&l.removeAllRanges()}})}t?.querySelector(".name")?.classList?.add("dbg-info"),t?.querySelector(".ep")?.classList?.add("dbg-info")}d(Jf,"wt"),Re(Jf,"showInputInfo");let qo={};const Bo=1e4;async function ga(t,e,n){console.log("readDebugStep",t,e),e||(e=bt?.[t]?.sessionID),bt[t]||(bt[t]={}),bt[t].sessionID=e;const s=await Hf(t,e);qo=s;let a=!e;Ho({resetPinned:!0});const i=[];let r=!1;for(let l in s.state){if(n&&!n.includes(l))continue;const u=document.getElementById(l);if(u){const p=u.querySelectorAll(".smyth.output-endpoint.default");a||(a=!0);const g=s.state[l].active;g&&(u.classList.add("dbg-active"),i.push(u)),s.state[l].alwaysActive&&u.classList.add("dbg-always-active");const y=s.state[l].status;s.state[l].sourceId;let w=s.state[l].active?s.state[l].runtimeData.input:s.state[l]?.input,S=s.state[l]?.output;s.state[l]?.step;let m=s.state[l]?.runtimeData?._LoopData;const D=s.state[l]?.name;if(w){let j=!1,L=[];u.querySelectorAll(".smyth.input-endpoint").forEach(I=>{const v=I.getAttribute("smt-name"),T=I.getAttribute("smt-optional")==="true";if(!v)return;let P=!0;if(w[v]!==void 0){const F=w[v];P=!1,(F==null||typeof F=="string"&&F.trim()==="")&&(P=!0)}L.push({element:I,name:v,isEmpty:P,isOptional:T}),P&&!T&&(j=!0)});const k=u?._control?.isFunctionalComponent();if(j){if(u.classList.add("has-empty-inputs"),!Array.from(u.querySelectorAll(".messages-container .message")).some(I=>I.id!=="component-button")){const I=u._control;I&&I.addComponentMessage("Missing Required Inputs","missing-input")}for(let I of L){const v=document.createElement("img");v.className="input-status-icon",v.src=I.isOptional?"/img/builder/empty-input.svg":"/img/builder/fill-input.svg",v.style.width=k?"12px":"16px",v.style.height=k?"12px":"16px",v.style.position="absolute",v.style.left=k?"-7px":"-8px",v.style.top=k?"1px":"6px",v.style.zIndex="100";const T=I.element.querySelector(".input-status-icon");T&&T.remove(),I.element.appendChild(v)}}for(let I of L){const v=document.createElement("img");v.className="input-status-icon",v.src=I.isOptional?"/img/builder/empty-input.svg":"/img/builder/fill-input.svg",v.style.width=k?"12px":"16px",v.style.height=k?"12px":"16px",v.style.position="absolute",v.style.left=k?"-7px":"-8px",v.style.top=k?"1px":"6px",v.style.zIndex="100";const T=I.element.querySelector(".input-status-icon");T&&T.remove(),I.element.appendChild(v)}j&&u.classList.add("empty-inputs-style")}if(m){let j=m.loopIndex;const L=m.loopLength,k=u.querySelector('.smyth.output-endpoint[smt-name="Loop"]');if(k){let I=k.querySelector(".dbg-loop-info");I||(I=document.createElement("div"),I.className="dbg-loop-info",k.insertBefore(I,k.firstChild)),I.innerHTML=`[ ${j} / ${L} ]`}}let A=s.state[l]?._job_components;if(Array.isArray(A))for(let j of A){const L=document.getElementById(j);L&&L.classList.add("dbg-async")}if(y&&u.classList.add(`dbg-active-${y}`),g&&w){Bs[l]={inputs:{}};for(let j in w){const L=u.querySelector(`.smyth.input-endpoint[smt-name="${j}"]`);if(L){Jf(L,w[j]);const k=typeof w[j]!="string"?JSON.stringify(w[j],null,2):w[j];Bs[l].inputs[j]=k}}}if(S){const j=u.querySelectorAll(".smyth.output-endpoint");for(let I of j)hi(I,"");const L=JSON.parse(JSON.stringify(S));for(let[I,v]of Object.entries(L))/[.\[\]]/.test(I)&&!v&&delete L[I];for(let I in L){const v=[...u.querySelectorAll(`.smyth.output-endpoint[smt-expression*="${I}."], .smyth.output-endpoint[smt-name*="${I}."], .smyth.output-endpoint[smt-expression*="${I}["], .smyth.output-endpoint[smt-name*="${I}["]`)],T=u.querySelector(`.smyth.output-endpoint[smt-name="${I}"]`);if(T){hi(T,S[I],D);for(let P of v){const F=P.getAttribute("smt-expression")||P.getAttribute("smt-name"),U=Wf(S,F);hi(P,U,D)}if(p.length<=1)for(let P in S[I]){const F=[...u.querySelectorAll(`.smyth.output-endpoint[smt-expression="${P}"], .smyth.output-endpoint[smt-name="${P}"]`)];for(let U of F)hi(U,S[I][P])}}}for(let I of p)if(!I.querySelector(".dbg-element.dbg-output")){let v=document.createElement("div");I.appendChild(v),v.innerHTML='<span class="mif-bug icon"></span>[undefined]',v.className="dbg-element dbg-output",I.querySelector(".name").classList.add("dbg-info"),I.querySelector(".ep").classList.add("dbg-info")}const k=u.querySelector(".debug-info");if(k.innerHTML="",S._debug){const I=document.createElement("div"),v=S._debug;I.textContent=v;const T=S?._error||"";T&&(I.append(`

${T}`),r=!0);let P=workspace.domElement.querySelector(`.debug-box[rel="${u.id}"]`);const F=`tooltip-${Math.random().toString(36).substr(2,9)}`,U=`tooltip-${Math.random().toString(36).substr(2,9)}`;if(!P){P=document.createElement("div"),P.className="debug-box bg-gray-800 exclude-panzoom hidden",P.setAttribute("rel",u.id);const B=u.offsetTop+100,z=u.offsetLeft-20;P.style.position="absolute",P.style.top=B+"px",P.style.left=z+"px",P.style.height="300px",P.style.width="500px",P.innerHTML=`<div class="debug-info-title flex justify-between px-2 py-1">
                                <h2 class="text-base">Debug Log</h2>
                                <div class="space-x-2">
                                    <input type="search" placeholder="Search ..." class="search-input w-24 h-6 rounded-md p-1 bg-gray-600 text-gray-200 hidden" />
                                    <button class="downlaod text-gray-400 hover:text-gray-200 hidden" data-tooltip-target="${F}"  data-tooltip-placement="top" type="button">
                                        <i class="fa-solid fa-download"></i>
                                    </button>
                                    <div
                                        id="${F}"
                                        role="tooltip"
                                        class="tooltip absolute z-10 inline-block bg-gray-900 shadow-lg text-white py-2 px-4 rounded-lg opacity-0 invisible"
                                        style="font-size: 12px; left:12px; top:30px;"
                                        data-popper-reference-hidden=""
                                        data-popper-escaped=""
                                        data-popper-placement="bottom"
                                    >
                                        Download log
                                    </div>
                                    <button class="copy text-gray-400 hover:text-gray-200 hidden" data-tooltip-target="${U}"   data-tooltip-placement="top" type="button" >
                                        <i class="fa-solid fa-copy"></i>
                                    </button>
                                    <div
                                        id="${U}"
                                        role="tooltip"
                                        class="tooltip absolute z-10 inline-block bg-gray-900 shadow-lg text-white py-2 px-4 rounded-lg opacity-0 invisible"
                                        style="font-size: 12px; left:68px; top:30px;"
                                        data-popper-reference-hidden=""
                                        data-popper-escaped=""
                                        data-popper-placement="bottom"
                                    >
                                        Copy log
                                    </div>
                                    <button class="close text-gray-400 hover:text-gray-200">
                                        <i class="fa-solid fa-xmark"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="dbg dbg-textarea syntax bg-gray-700">
                                <!-- this is the actual syntax highlighting -->
                                <div readonly class="dbg-log absolute top-0"></div>
                                <!-- this is the search highlighting layer with transparent background and text color -->
                                <div readonly class="dbg-search-highlight bg-transparent text-transparent absolute top-0"></div>
                            </div>
                            <div class="dbg-info-footer px-2 hidden">The data is too long to display, <a class="dbg-log-download-link" href="#">click here to download</a></div>
                        `,workspace.domElement.appendChild(P);const Y=P.querySelector(".close");Y.onclick=()=>{P.classList.add("hidden"),P._connection.canvas.classList.add("hidden")},ds(P).draggable({allowFrom:".debug-info-title",onmove:function(se){const le=se.target,te=(parseFloat(le.style.left)||0)+se.dx/workspace.scale,he=(parseFloat(le.style.top)||0)+se.dy/workspace.scale;le.style.left=te+"px",le.style.top=he+"px",workspace.jsPlumbInstance.repaint(P)}})}const M=P.querySelector(".dbg-log");M.textContent=I.textContent.replace(/debug:/gm,"");const V=I.textContent.replace(/debug:/gm,""),W=V?.length>Bo?V?.substring(0,Bo)+"...":V,K=Zf(W);M.innerHTML=V.length<Bo?Qf(K):K;const R=P.querySelector(".dbg-search-highlight"),X=P.querySelector(".dbg-info-footer"),Q=P.querySelector(".copy"),G=P.querySelector(".search-input"),J=P.querySelector(".downlaod");if(Q.addEventListener("mouseenter",()=>o(U)),Q.addEventListener("mouseleave",()=>c(U)),J.addEventListener("mouseenter",()=>o(F)),J.addEventListener("mouseleave",()=>c(F)),V?.length<Bo)X.classList.add("hidden"),Q.classList.remove("hidden"),G.classList.remove("hidden"),J.classList.remove("hidden"),Q.onclick=()=>{try{navigator.clipboard.writeText(V),Bt("Copied to clipboard","Success")}catch(B){us("Please manually select and copy the log.","Failed to copy"),console.error("debugger:copy",B)}},J.onclick=()=>{const B=`${v}

${T}`,z=new Blob([B],{type:"text/plain"}),Y=URL?.createObjectURL(z),se=document?.createElement("a");se.href=Y,se.download="log.txt",document?.body?.appendChild(se),se?.click(),document?.body?.removeChild(se),URL?.revokeObjectURL(Y)},G.oninput=()=>{const B=G.value;if(B){const z=K.replace(new RegExp(Of(B),"gi"),`<mark>${B}</mark>`);R.innerHTML=z;const Y=R.querySelector("mark");Y&&Y.scrollIntoView({behavior:"smooth",block:"nearest"})}else R.innerHTML=""};else{Q.classList.add("hidden"),G.classList.add("hidden"),J.classList.add("hidden"),X.classList.remove("hidden"),P.querySelector(".dbg-textarea").classList.add("dbg-textarea-with-footer");const B=P.querySelector(".dbg-log-download-link"),z=new Blob([`${v}

${T}`],{type:"text/plain"}),Y=URL.createObjectURL(z);B.href=Y,B.download="log.txt"}const E=u.querySelector(".btn-debug-log"),O=u.querySelector(".btn-fix-with-ai"),C=!0;if(E.classList.remove("hidden"),Gl(E,O),S._error){if(u.classList.add("state-error"),u.classList.remove("state-success"),u.classList.remove("has-empty-inputs"),u.querySelector(".message.missing-input")?.remove(),E.classList.add("error"),C){O?.classList.remove("hidden");const B=typeof S._error=="string"?S._error:JSON.stringify(S._error);O.setAttribute("data-error",B)}}else u.classList.remove("state-error"),u.classList.remove("has-empty-inputs"),u.classList.add("state-success"),u.querySelector(".message.missing-input")?.remove(),E.classList.remove("error"),O?.classList.add("hidden"),O?.removeAttribute("data-error");nu(u),S._debug_time&&u.querySelector(".debug-bar").setAttribute("debug-time",S._debug_time+"ms")}}}workspace.jsPlumbInstance.repaint(u)}if(i.length===1){const l=i[0]?._control?.title||"";ba(l)}else ba();s.sessionClosed&&(document.querySelectorAll(".dbg-running")?.forEach(l=>l?.classList.remove("dbg-running")),r?(Xe("Debug encountered an error. Please check the logs for details.","Debug Error"),Bn("Debug session failed: Check the debug log for error details")):Bn("Debug session completed successfully"),console.log("Deleting debug session",t,e),delete bt[t].sessionID,zo(!1),Ro("Debugger:Checking remaining debug jobs ...")),s.error&&(ls("An error occured",s.error),Bn("An error occured : "+s.error),await xs(!0));function o(l){const u=document?.querySelector(`#${l}`);u?.classList?.remove("invisible","opacity-0"),u?.classList?.add("visible","opacity-100")}d(o,"m"),Re(o,"showTooltip");function c(l){const u=document?.querySelector(`#${l}`);u?.classList?.remove("visible","opacity-100"),u?.classList?.add("invisible","opacity-0")}return d(c,"h"),Re(c,"hideTooltip"),{states:s,attached:a,errorOccurred:r}}d(ga,"readDebugStep"),Re(ga,"readDebugStep");function ba(t){const e=document.querySelector(".debug-switcher-message > p");if(e){if(t){e.innerHTML=`<div class='flex'>
    Next Component:&nbsp;<div class="text-ellipsis max-w-[120px] overflow-hidden whitespace-nowrap font-bold">${t}</div>
    </div>
    <div>Click step to continue debugging.</div>`;return}e.textContent="Debug session active. Use the controls above to step through execution."}}d(ba,"W"),Re(ba,"setDebugMessage");function Zf(t){const e=document.createElement("textarea");return e.textContent=t,e.innerHTML}d(Zf,"Lt"),Re(Zf,"escapeHTML");function Qf(t,e="smythLog"){return Mo.highlight(t,Mo.languages[e],e)}d(Qf,"xt"),Re(Qf,"highlightCode");function I3(t,e,n){eu(),bt[t]||(bt[t]={}),e||(e=bt?.[t]?.sessionID),e&&(bt[t][e]=setInterval(async()=>{const s=await ga(t,e);typeof n=="function"&&n(s)},5e3))}d(I3,"startDebugListener"),Re(I3,"startDebugListener");function L3(t,e){bt[t]&&(clearInterval(bt[t][e]),delete bt[t][e])}d(L3,"stopDebugListener"),Re(L3,"stopDebugListener");async function T3(t,e,{input:n,output:s}){const a=bt?.[t]?.sessionID||"",i=ma,r={"Content-type":"application/json; charset=UTF-8","X-AGENT-ID":t,"X-DEBUG-INJ":a};window.currentMonitorId&&(r["X-MONITOR-ID"]=window.currentMonitorId);let o=JSON.parse(JSON.stringify(s));if(await qs(e)){const p=(await fa(e)).data?.outputs,g=Re(y=>!!(y==null||y===""||Array.isArray(y)&&y.length===0||typeof y=="object"&&Object.keys(y).length===0),"isEmptyValue");for(const[y,w]of Object.entries(o))o[y]=g(w)?p[y]:w}const c=[{id:e,ctx:{active:!0,input:n,output:o}}];$("#"+e).find(".cpt-overlay").show();const l=document.getElementById(e);l&&(workspace.refreshComponentSelection(l),l?.classList?.add("dbg-running"));const u=await fetch(i,{method:"POST",headers:r,body:JSON.stringify(c)}).then(p=>p.json()).catch(p=>{throw p});return bt[t]||(bt[t]={}),bt[t].sessionID=u.dbgSession,u}d(T3,"injectComponentDebugInfo"),Re(T3,"injectComponentDebugInfo");async function Uo(t,e){if(e||(e=bt?.[t]?.sessionID),!e)return;for(let i in qo.state){qo?.state[i].active&&$("#"+i).find(".cpt-overlay").show();const r=document.getElementById(i);r&&(workspace.refreshComponentSelection(r),r.classList?.add("dbg-running"))}const n=ma+"?run",s={"Content-type":"application/json; charset=UTF-8","X-AGENT-ID":t,"X-DEBUG-RUN":e};window.currentMonitorId&&(s["X-MONITOR-ID"]=window.currentMonitorId);const a=await fetch(n,{method:"POST",headers:s}).then(i=>i.json());return a.dbgSession?a.error?(ls("Debug Runtime Error",a.error),xs(!1),null):e:(console.log("Debug session ended"),delete bt[t].sessionID,zo(!1),null)}d(Uo,"runDebugStep"),Re(Uo,"runDebugStep");async function M3(t,e){if(e||(e=bt?.[t]?.sessionID),!e)return;const n=ma,s={"Content-type":"application/json; charset=UTF-8","X-AGENT-ID":t,"X-DEBUG-STOP":e};return window.currentMonitorId&&(s["X-MONITOR-ID"]=window.currentMonitorId),!!(await fetch(n,{method:"POST",headers:s}).then(a=>a.json()).catch(a=>{})).success}d(M3,"clearDebuggerSession"),Re(M3,"clearDebuggerSession");async function O3(){const t=workspace.agent;if(!bt?.[t.id]?.sessionID)return;const e=await Uo(t.id);if(!e)return;let n=[];do n=[...document.querySelectorAll(".dbg-async")].map(s=>s.id),console.log("asyncRunning",n,n.length),n.length>0&&await ga(t.id,e),await je(3e3);while(n.length>0)}d(O3,"Wt"),Re(O3,"waitPendingAsyncComponents");function zo(t=!0){qo={},workspace.domElement.classList.remove("debugging"),workspace.domElement.querySelectorAll(".btn-debug").forEach(e=>{e.classList.remove("active")}),Ho({resetPinned:!0}),t&&(workspace.domElement.querySelectorAll(".pinned").forEach(e=>{e.classList.remove("pinned")}),workspace.domElement.querySelectorAll(".disabled-endpoint").forEach(e=>{e.classList.remove("disabled-endpoint")}),workspace.domElement.querySelectorAll(".dbg-info").forEach(e=>{e.classList.remove("dbg-info")}),workspace.domElement.querySelectorAll(".debug-info").forEach(e=>{e.classList.add("hidden"),e.innerHTML="";const n=e.closest(".component").querySelector(".btn-debug-log"),s=e.closest(".component").querySelector(".btn-fix-with-ai");n?.classList.add("hidden"),n?.classList.remove("error"),s?.classList.add("hidden"),s?.removeAttribute("data-error"),nu(e.closest(".component"))}),workspace.domElement.querySelectorAll(".debug-bar").forEach(e=>{e.removeAttribute("debug-time")}),workspace.domElement.querySelectorAll(".component").forEach(e=>{e.classList.remove("state-success","state-error","has-empty-inputs")}))}d(zo,"we"),Re(zo,"stopDebugUI");function eu(){[...workspace.domElement.querySelectorAll(".dbg-element")].forEach(t=>{t.remove()})}d(eu,"Oe"),Re(eu,"clearDebugUIInfo");async function xs(t=!0){zo(t);const e=jf();if(!e)return;Ul=void 0;const n=workspace.agent;delete bt[n.id].sessionID;const s=ma,a={"Content-type":"application/json; charset=UTF-8","X-AGENT-ID":n.id,"X-DEBUG-STOP":e};await fetch(s,{method:"POST",headers:a}).catch(i=>{console.error(i)})}d(xs,"stopDebugSession"),Re(xs,"stopDebugSession");function j3(t,e,n,s,a="step"){const i=Re((D,A)=>D.map((j,L)=>j.type==="file"?`
            <div class="flex mb-5">
              <span class="inline-flex w-40 items-center px-3 text-sm text-gray-900 bg-gray-200 border border-e-0 border-gray-300 rounded-s-md dark:bg-gray-600 dark:text-gray-400 dark:border-gray-600 break-all">
                ${j.name}
              </span>
              <input type="file" name="${j.name}" id="${A}-input-${L}" class="${A}-input input
                block w-full text-sm text-slate-500
                file:mr-4 file:py-2 file:px-4 file:rounded-md
                file:border-0 file:text-sm file:font-semibold
                file:bg-gray-200 file:text-gray-900
                hover:file:bg-gray-300 pl-5
              " multiple>
            </div>`:`
            <div class="flex mb-5">
              <span class="inline-flex w-40 items-center px-3 text-sm text-gray-900 bg-gray-200 border border-e-0 border-gray-300 rounded-s-md dark:bg-gray-600 dark:text-gray-400 dark:border-gray-600 break-all">
                ${j.name}
              </span>
              <textarea id="${A}-input-${L}" name="${j.name}" class="${A}-input input block p-1 w-full text-sm text-gray-900 bg-gray-50 outline-none rounded-e-md border-b border-gray-300 focus:border-gray-300 focus:border-b-smythos-blue-500 focus:border-b-2" style="min-height:44px; height: 44px; box-shadow: none;"></textarea>
            </div>`).join(""),"createInputList"),r=Re((D,A)=>D.map((j,L)=>`
      <div class="flex items-center py-2">
        <input type="checkbox" rel="${A}-input-${L}" class="
          relative w-[36px] h-[21px] bg-gray-100 border-transparent text-transparent rounded-full cursor-pointer transition-colors ease-in-out duration-200
          disabled:opacity-50 disabled:pointer-events-none checked:bg-none checked:text-smythos-blue-500 checked:border-smythos-blue-500 checked:bg-smythos-blue-500
          focus:ring-0 focus:ring-offset-0 focus:ring-offset-transparent
          before:inline-block before:w-4 before:h-4 before:bg-white checked:before:bg-white before:translate-x-0 checked:before:translate-x-full
          before:rounded-full before:shadow before:transform before:ring-0 before:transition before:ease-in-out before:duration-200
          mr-3
        ">
        <span class="text-sm text-gray-700">${j.name}</span>
      </div>
    `).join(""),"createToggleList"),o=i(e,"inputs"),c=i(n,"outputs"),l=r(e,"inputs"),u=r(n,"outputs"),p={},g={},y=`
    <div class="border bd-default p-2">
      <div id="inputs">
        ${o}
        <details class="mt-4 [&_summary::-webkit-details-marker]:hidden group">
          <summary class="cursor-pointer text-sm text-gray-700 flex items-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" width="11" height="7" viewBox="0 0 11 7" fill="none"
                 class="transition-transform duration-300 ease-in-out details-arrow">
              <path d="M9.40349 0.242188L5.69516 3.94245L1.98682 0.242188L0.847656 1.38135L5.69516 6.22885L10.5427 1.38135L9.40349 0.242188Z" fill="#808080"/>
            </svg>
            Advanced options
          </summary>
          <div class=" details-content">
            <div class="pt-5 transition-all duration-300 ease-in-out details-inner">
              <div class="flex items-center gap-2 mb-2">
                <p class="text-sm text-gray-600">Use Default Values</p>
                <div class="relative inline-block group" id="default-values-tooltip">
                  <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="cursor-help">
                    <path d="M8 14.6667C11.6819 14.6667 14.6667 11.6819 14.6667 8C14.6667 4.3181 11.6819 1.33333 8 1.33333C4.3181 1.33333 1.33333 4.3181 1.33333 8C1.33333 11.6819 4.3181 14.6667 8 14.6667Z" stroke="#808080" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M8 10.6667V8" stroke="#808080" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M8 5.33333H8.00667" stroke="#808080" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                  <div class="absolute left-full ml-2 -translate-y-1/2 top-1/2 hidden w-[320px] p-2 bg-gray-900 text-white text-sm rounded shadow-lg z-50 tooltip-content">
                    When toggled on, will use default value set in <a href="${Ut}/agent-studio/build-agents/building-workflows"
                      target="_blank"
                      class="underline hover:text-blue-300">Component Input Settings</a>.
                    <div class="absolute right-[98.5%] top-1/2 -translate-y-1/2 w-2 h-2">
                      <div class="bg-gray-900 w-2 h-2 transform rotate-45"></div>
                    </div>
                  </div>
                </div>
              </div>
              ${l}
            </div>
          </div>
        </details>
        <p class="mt-4 text-sm text-gray-600">
          Looking to set output values? <a href="#" class="text-blue-600 configure-output">Configure output</a>
        </p>
      </div>
      <div id="outputs" class="hidden">
        ${c}
        <details class="mt-4 [&_summary::-webkit-details-marker]:hidden group">
          <summary class="cursor-pointer text-sm text-gray-700 flex items-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" width="11" height="7" viewBox="0 0 11 7" fill="none"
                 class="transition-transform duration-300 ease-in-out details-arrow">
              <path d="M9.40349 0.242188L5.69516 3.94245L1.98682 0.242188L0.847656 1.38135L5.69516 6.22885L10.5427 1.38135L9.40349 0.242188Z" fill="#808080"/>
            </svg>
            Advanced options
          </summary>
          <div class="details-content transition-[height] duration-300 ease-in-out">
            <div class="pt-5 transition-all duration-300 ease-in-out details-inner">
              <div class="flex items-center gap-2 mb-2">
                <p class="text-sm text-gray-600">Use Default Values</p>
                <div class="relative inline-block group" id="default-values-tooltip-outputs">
                  <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="cursor-help">
                    <path d="M8 14.6667C11.6819 14.6667 14.6667 11.6819 14.6667 8C14.6667 4.3181 11.6819 1.33333 8 1.33333C4.3181 1.33333 1.33333 4.3181 1.33333 8C1.33333 11.6819 4.3181 14.6667 8 14.6667Z" stroke="#808080" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M8 10.6667V8" stroke="#808080" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M8 5.33333H8.00667" stroke="#808080" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                  <div class="absolute left-full ml-2 -translate-y-1/2 top-1/2 hidden w-[320px] p-2 bg-gray-900 text-white text-sm rounded shadow-lg z-50 tooltip-content">
                    When toggled on, will use default value set in <a href="${Ut}/agent-studio/build-agents/building-workflows"
                      target="_blank"
                      class="underline hover:text-blue-300">Component Input Settings</a>.
                    <div class="absolute right-[98.5%] top-1/2 -translate-y-1/2 w-2 h-2">
                      <div class="bg-gray-900 w-2 h-2 transform rotate-45"></div>
                    </div>
                  </div>
                </div>
              </div>
              ${u}
            </div>
          </div>
        </details>
        <p class="mt-4 text-sm text-gray-600">
          Looking to set input values? <a href="#" class="text-blue-600 configure-input">Configure input</a>
        </p>
      </div>
    </div>`,w=Re(async(D,A)=>{const j=Array.from(D.files||[]);A.files=j;const L=await Promise.all(j.map(k=>new Promise(I=>{const v=new FileReader;v.onload=T=>{let P=T.target.result;navigator.userAgent.includes("Windows")&&k.type===""&&k.name.toLowerCase().endsWith(".md")&&(P=P.replace("data:application/octet-stream;","data:text/markdown;")),I(P)},v.readAsDataURL(k)})));A.value=L.length===1?L[0]:L},"handleFileInput");function S(){const D=workspace?.userData?.email,A=workspace?.teamData?.id,j=workspace?.agent?.id;if(D&&A&&j){const L=`first-debug-session-${D}-${A}-${j}`,k=localStorage.getItem(L)===null,I=document.getElementById("bottom-bar");k&&I&&(I.classList.remove("hidden"),localStorage.setItem(L,"false"))}}d(S,"k"),Re(S,"handleFirstDebugSession");const m=Re(async function(D,A,j){const L=D.domElement.querySelector(".error"),k=su();if(k==="error"&&!L||k==="inprogress"){us("A debug session is in progress. Please stop the current run before starting again.","Debug Running");return}k==="success"&&document.querySelectorAll(".component").forEach(U=>{U.classList.remove("state-success"),U.classList.remove("state-error"),U.classList.remove("has-empty-inputs")}),S(),Bs[D.uid]={inputs:{}};const I=Array.from(A.querySelectorAll(".inputs-input.input")),v=I.reduce((U,M,V)=>{let W;try{if(A.querySelector(`input[type="checkbox"][rel="inputs-input-${V}"]`)?.checked){const R=M.getAttribute("name");W=D?.workspace?.agent?.data?.components?.filter(X=>X.id===D._uid)?.[0]?.inputs?.filter(X=>X.name===R)[0]?.defaultVal||void 0}else p[V]?W=p[V].value||void 0:W=M.getAttribute("disabled")?void 0:Bl(M.value)||M.value}catch{W=M.value}U[e[V].name]=W;const K=typeof W!="string"?JSON.stringify(W,null,2):W;return Bs[D.uid].inputs[e[V].name]=K,U},{});let T=!0;for(let U in v){const M=v[U];let V=!1;if((M==null||typeof M=="string"&&M.trim()===""||Array.isArray(M)&&M.length===0||typeof M=="object"&&Object.keys(M).length===0)&&(V=!0),!V){T=!1;break}}if(T&&!await qs(D.uid)&&I.length>0){Array.from(D.domElement.querySelectorAll(".messages-container .message")).some(U=>U.id!=="component-button")||D.addComponentMessage("Missing Required Inputs","missing-input"),us("Cannot run with empty inputs","Please provide input values."),D.domElement.classList.add("has-empty-inputs");return}const P=Array.from(A.querySelectorAll(".outputs-input.input")).reduce((U,M,V)=>{let W;try{g[V]?W=g[V].value:W=Bl(M.value)||M.value}catch{W=M.value}return U[n[V].name]=W,U},{});let F;if(typeof s=="function"&&(F=await s({input:v,output:P})),j==="run"){const{result:U}=await Wl();(!F?.errorOccurred&&F?.states?.sessionClosed||!U?.errorOccurred&&U?.states?.sessionClosed)&&fi()}else await qf(),F?.errorOccurred||(F===null&&us("A debug session is in progress. Please stop the current run before starting again.","Debug Running"),F?.states?.sessionClosed&&fi());D.domElement.classList.remove("has-empty-inputs"),console.log(`Debug ${j} done`)},"handleDebugAction");Pb({title:`<div class="flex items-center gap-2">
              <span>Debug Run</span>
              <div class="relative inline-block group" id="tooltip-container">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="cursor-help">
                  <path d="M8 14.6667C11.6819 14.6667 14.6667 11.6819 14.6667 8C14.6667 4.3181 11.6819 1.33333 8 1.33333C4.3181 1.33333 1.33333 4.3181 1.33333 8C1.33333 11.6819 4.3181 14.6667 8 14.6667Z" stroke="#808080" stroke-linecap="round" stroke-linejoin="round"/>
                  <path d="M8 10.6667V8" stroke="#808080" stroke-linecap="round" stroke-linejoin="round"/>
                  <path d="M8 5.33333H8.00667" stroke="#808080" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <div class="absolute left-full ml-2 -translate-y-1/2 top-1/2 hidden w-[420px] p-2 bg-gray-900 text-white text-sm rounded shadow-lg z-50 tooltip-content font-normal">
                  Configure input and output parameters for your debug run.
                  <br/>
                  See <a href="${Ut}/agent-studio/build-agents/debugging"
                        target="_blank"
                        class="underline hover:text-blue-300">debug documentation</a> for more details.
                  <div class="absolute right-[98.5%] top-1/2 -translate-y-1/2 w-2 h-2">
                    <div class="bg-gray-900 w-2 h-2 transform rotate-45"></div>
                  </div>
                </div>
              </div>
            </div>`,content:y,actions:[{label:`<span class="flex items-center gap-2">
                  <span class="debug-step-icon w-5 h-5 bg-contain bg-no-repeat bg-center" style="background-image: url('/img/debug-bar/step-blue.svg');"></span>
                  <span class="!text-[#3b82f6] group-hover:!text-white">Step</span>
                </span>`,cssClass:"border border-[#3b82f6] bg-white hover:bg-[#3b82f6] group transition-all duration-200 !text-[#3b82f6] hover:!text-white",callback:D=>m(t,D,"step")},{label:`<span class="flex items-center gap-2">
                  <span class="debug-play-icon w-5 h-5 bg-contain bg-no-repeat bg-center" style="background-image: url('/img/debug-bar/play-blue.svg');"></span>
                  <span class="!text-[#3b82f6] group-hover:!text-white">Run</span>
                </span>`,cssClass:"border border-[#3b82f6] bg-white hover:bg-[#3b82f6] group transition-all duration-200 !text-[#3b82f6] hover:!text-white",callback:D=>m(t,D,"run")}],onCloseClick:()=>{},onDOMReady:function(D){if(Bs[t.uid]?.inputs)for(let k in Bs[t.uid]?.inputs){const I=D.querySelector(`.inputs-input[name="${k}"]`);if(I&&I.type!=="file"){const v=Bs[t.uid]?.inputs[k]||"";I.value=v}}[...D.querySelectorAll('input[type="checkbox"]')].forEach(k=>{const I=k.getAttribute("rel"),v=D.querySelector(`#${I}`);v&&k.addEventListener("change",T=>{T.target.checked?(v.setAttribute("disabled","true"),v.value="",v.style.opacity="0.5"):(v.removeAttribute("disabled"),v.style.opacity="1")})});const A=D.querySelector("#inputs"),j=D.querySelector("#outputs");e.forEach((k,I)=>{if(k.type==="file"){const v=A.querySelector(`#inputs-input-${I}`),T={domElement:v,value:null,files:[]};p[I]=T,v.addEventListener("change",P=>{w(P.target,T)})}}),n.forEach((k,I)=>{if(k.type==="file"){const v=j.querySelector(`#outputs-input-${I}`),T={domElement:v,value:null,files:[]};g[I]=T,v.addEventListener("change",P=>{w(P.target,T)})}}),D.querySelector(".configure-output")?.addEventListener("click",async k=>{k.preventDefault(),D.querySelector("#inputs").classList.add("hidden"),D.querySelector("#outputs").classList.remove("hidden"),await Lf.setMockData(t.uid,D),Lf.applyJsonFieldSynchronizer(D)}),D.querySelector(".configure-input")?.addEventListener("click",k=>{k.preventDefault(),D.querySelector("#outputs").classList.add("hidden"),D.querySelector("#inputs").classList.remove("hidden")}),D.querySelectorAll("details").forEach(k=>{const I=k.querySelector(".details-content"),v=k.querySelector(".details-inner"),T=k.querySelector(".details-arrow");k.open?I.style.height=v.offsetHeight+"px":I.style.height="0",k.addEventListener("toggle",P=>{if(k.open){const F=v.offsetHeight;requestAnimationFrame(()=>{I.style.height=F+"px",T.style.transform="rotate(180deg)"})}else{const F=v.offsetHeight;I.style.height=F+"px",I.offsetHeight,requestAnimationFrame(()=>{I.style.height="0",T.style.transform="rotate(0)"})}}),I.addEventListener("transitionend",()=>{k.open&&(I.style.height="auto")})});const L=Re(k=>{const I=D.querySelector(k);if(!I)return;const v=I.querySelector(".tooltip-content");let T;I.addEventListener("mouseenter",()=>{clearTimeout(T),v.classList.remove("hidden")}),I.addEventListener("mouseleave",()=>{T=setTimeout(()=>{v.matches(":hover")||v.classList.add("hidden")},400)}),v.addEventListener("mouseenter",()=>{clearTimeout(T)}),v.addEventListener("mouseleave",()=>{T=setTimeout(()=>{v.classList.add("hidden")},400)})},"setupTooltip");L("#tooltip-container"),L("#default-values-tooltip"),L("#default-values-tooltip-outputs")}})}d(j3,"createDebugInjectDialog"),Re(j3,"createDebugInjectDialog");function tu(t,e){t&&(e?t.classList.add("active"):t.classList.remove("active"))}d(tu,"Re"),Re(tu,"updateInspectButtonIcon");async function em(t){t.on("component",s=>{if(s.data.action==="callStop"&&s.data.duration){const a=document.querySelector(`#${s.data.id}`);if(!a)return;a.classList.remove("dbg-running"),s.data.duration<500?setTimeout(()=>{$(a.querySelector(".cpt-overlay")).hide(),console.log("HIDDEN OVERLAY FOR COMP ",s.data.id," BY MONITOR ")},500-s.data.duration):($(a.querySelector(".cpt-overlay")).hide(),console.log("HIDDEN OVERLAY FOR COMP ",s.data.id," BY MONITOR "))}else if(s.data.action==="callStart"){const a=document.querySelector(`#${s.data.id}`);if(!a)return;workspace.refreshComponentSelection(a),a.classList.add("dbg-running"),$(a.querySelector(".cpt-overlay")).show()}}),t.on("computer-use/ui-state",s=>{const a=document.querySelector(`#${s.data.componentId}`);if(!a)return;const i=a.querySelector(".computer-state-img");i&&(i.src=s.data.image_url)});function e(s){const a=document?.querySelector(`#${s}`);a?.classList?.remove("invisible","opacity-0"),a?.classList?.add("visible","opacity-100")}d(e,"e"),Re(e,"showTooltip");function n(s){const a=document?.querySelector(`#${s}`);a?.classList?.remove("visible","opacity-100"),a?.classList?.add("invisible","opacity-0")}d(n,"s"),Re(n,"hideTooltip")}d(em,"registerDbgMonitorUI"),Re(em,"registerDbgMonitorUI");function nu(t){const e=t.querySelector(".debug-bar"),n=t.querySelector(".btn-debug-log"),s=t.querySelector(".btn-fix-with-ai");if(e){const a=n&&!n.classList.contains("hidden")||s&&!s.classList.contains("hidden");e.style.display=a?"":"none"}}d(nu,"Pe"),Re(nu,"toggleDebugBarVisibility");function Ho({resetMessages:t=!1,resetPinned:e=!1}){document.querySelectorAll("#workspace-container .component").forEach(n=>{n.querySelectorAll(".input-status-icon").forEach(s=>s?.remove()),n.classList.remove("dbg-async"),n.classList.remove("dbg-active"),n.classList.remove("dbg-active-waiting"),n.classList.remove("dbg-active-in_progress"),n.classList.remove("dbg-active-error"),n.classList.remove("has-empty-inputs"),n.classList.remove("empty-input-style"),$(n.querySelector(".cpt-overlay")).hide(),t&&n._control?.clearComponentMessages(),e&&(n.querySelector(".pinned")||Xl(n))}),requestAnimationFrame(()=>{workspace.redraw()})}d(Ho,"Le"),Re(Ho,"resetComponentsState");function su(){if(document.querySelectorAll(".component.dbg-active").length>0)return"inprogress";const t=(document.querySelector("#debug-status pre")?.innerHTML||"").trim().split(`
`)?.[0],e=document.querySelectorAll(".component .btn-debug-log:not(.hidden)");if(t.includes("Debug session completed successfully")&&e.length>0)return"success";const n=document.querySelectorAll(".component .error");return(t.includes("Debug session failed")||t.includes("An error occured"))&&n.length>0?"error":"default"}d(su,"checkWorkflowStatus"),Re(su,"checkWorkflowStatus");function fi(){Bt("Debug run finished successfully. Ready to deploy?","Debug Complete",{ctaText:"Deploy Agent",ctaCallback:()=>{const t=document.querySelector("#deploy-button-topbar");t&&t.click()}})}d(fi,"ce$1"),Re(fi,"showDeployAgentToast");var N3=Object.defineProperty,xn=d((t,e)=>N3(t,"name",{value:e,configurable:!0}),"X");function tm(t){var e=t.jsPlumb,n=t.jsPlumbUtil,s="Straight",a="Arc",i=xn(function(r){this.type="SmythFlowchart",r=r||{},r.stub=r.stub==null?30:r.stub;var o,c=e.Connectors.AbstractConnector.apply(this,arguments),l=r.midpoint==null||isNaN(r.midpoint)?.5:r.midpoint,u=r.alwaysRespectStubs===!0,p=null,g=null,y=r.cornerRadius!=null?r.cornerRadius:0;r.loopbackRadius;var w=xn(function(L){return L<0?-1:L===0?0:1},"sgn"),S=xn(function(L){return[w(L[2]-L[0]),w(L[3]-L[1])]},"segmentDirections"),m=xn(function(L,k,I,v){if(!(p===k&&g===I)){var T=p??v.sx,P=g??v.sy,F=T===k?"v":"h";p=k,g=I,L.push([T,P,k,I,F])}},"addSegment"),D=xn(function(L){return Math.sqrt(Math.pow(L[0]-L[2],2)+Math.pow(L[1]-L[3],2))},"segLength"),A=xn(function(L){var k=[];return k.push.apply(k,L),k},"_cloneArray"),j=xn(function(L,k,I){for(var v=null,T,P,F,U=0;U<k.length-1;U++){if(v=v||A(k[U]),T=A(k[U+1]),P=S(v),F=S(T),y>0&&v[4]!==T[4]){var M=Math.min(D(v),D(T)),V=Math.min(y,M/1.5);v[2]-=P[0]*V,v[3]-=P[1]*V,T[0]+=F[0]*V,T[1]+=F[1]*V;var W=P[1]===F[0]&&F[0]===1||P[1]===F[0]&&F[0]===0&&P[0]!==F[1]||P[1]===F[0]&&F[0]===-1,K=T[1]>v[3]?1:-1,R=T[0]>v[2]?1:-1,X=K===R,Q=X&&W||!X&&!W?T[0]:v[2],G=X&&W||!X&&!W?v[3]:T[1];c.addSegment(L,s,{x1:v[0],y1:v[1],x2:v[2],y2:v[3]}),c.addSegment(L,a,{r:V,x1:v[2],y1:v[3],x2:T[0],y2:T[1],cx:Q,cy:G,ac:W})}else{var J=v[2]===v[0]?0:v[2]>v[0]?I.lw/2:-(I.lw/2),E=v[3]===v[1]?0:v[3]>v[1]?I.lw/2:-(I.lw/2);c.addSegment(L,s,{x1:v[0]-J,y1:v[1]-E,x2:v[2]+J,y2:v[3]+E})}v=T}T!=null&&c.addSegment(L,s,{x1:T[0],y1:T[1],x2:T[2],y2:T[3]})},"writeSegments");this.midpoint=l,this._compute=function(L,k){o=[],p=null,g=null,L._meta||(L._meta={});var I=k.sourceEndpoint._domElement,v=k.targetEndpoint._domElement;I.classList.contains("output-endpoint")||([I,v]=[v,I]);let T=0;const P=this._jsPlumb.instance.getZoom();if(I&&v){const z=I.getBoundingClientRect(),Y=v.getBoundingClientRect(),se=L._meta.sourceComponentElement||I.closest(".component");L._meta.sourceComponentElement=se;const le=se.getBoundingClientRect(),te=L._meta.targetComponentElement||v.closest(".component");L._meta.targetComponentElement=te;const he=te.getBoundingClientRect(),fe=L._meta.outputsElement||se.querySelector(".ep-control.outputs");L._meta.outputsElement=fe;const be=L._meta.inputsElement||te.querySelector(".ep-control.inputs");L._meta.inputsElement=be;const ge=fe.getBoundingClientRect(),ye=be.getBoundingClientRect();if(Y.left<=z.right){const ke=(le.bottom-z.top)/(le.bottom-ge.bottom);l=(le.bottom-15*P-z.top)/(Y.bottom-z.bottom),l+=he.bottom>le.bottom?ke/10:-ke/10,he.bottom<le.top&&(l=(z.top-le.top+15*P)/(z.bottom-Y.bottom),l+=he.bottom<le.bottom?ke/10:-ke/10),T=26*ke}else{const ke=Y.left-z.right;l=(le.bottom-z.top)/(le.bottom-ge.bottom),ye.bottom<ge.top&&(l=1-l),ke>110&&(l*=1/ke*100*.6),l*=P}}var F=xn(function(){return[L.startStubX,L.startStubY,L.endStubX,L.endStubY]},"commonStubCalculator"),U={perpendicular:F,orthogonal:F,opposite:function(z){var Y=L,se=z==="x"?0:1,le={x:function(){return Y.so[se]===1&&(Y.startStubX>Y.endStubX&&Y.tx>Y.startStubX||Y.sx>Y.endStubX&&Y.tx>Y.sx)||Y.so[se]===-1&&(Y.startStubX<Y.endStubX&&Y.tx<Y.startStubX||Y.sx<Y.endStubX&&Y.tx<Y.sx)},y:function(){return Y.so[se]===1&&(Y.startStubY>Y.endStubY&&Y.ty>Y.startStubY||Y.sy>Y.endStubY&&Y.ty>Y.sy)||Y.so[se]===-1&&(Y.startStubY<Y.endStubY&&Y.ty<Y.startStubY||Y.sy<Y.endStubY&&Y.ty<Y.sy)}};return!u&&le[z]()?{x:[(L.sx+L.tx)/2,L.startStubY,(L.sx+L.tx)/2,L.endStubY],y:[L.startStubX,(L.sy+L.ty)/2,L.endStubX,(L.sy+L.ty)/2]}[z]:[L.startStubX+T,L.startStubY,L.endStubX+T-20,L.endStubY]}},M=U[L.anchorOrientation](L.sourceAxis),V=L.sourceAxis==="x"?0:1,W=L.sourceAxis==="x"?1:0,K=M[V],R=M[W],X=M[V+2],Q=M[W+2];m(o,M[0],M[1],L);var G=L.startStubX+(L.endStubX-L.startStubX)*l,J=L.startStubY+(L.endStubY-L.startStubY)*l,E={x:[0,1],y:[1,0]},O={perpendicular:function(z){var Y=L,se={x:[[[1,2,3,4],null,[2,1,4,3]],null,[[4,3,2,1],null,[3,4,1,2]]],y:[[[3,2,1,4],null,[2,3,4,1]],null,[[4,1,2,3],null,[1,4,3,2]]]},le={x:[[Y.startStubX,Y.endStubX],null,[Y.endStubX,Y.startStubX]],y:[[Y.startStubY,Y.endStubY],null,[Y.endStubY,Y.startStubY]]},te={x:[[G,Y.startStubY],[G,Y.endStubY]],y:[[Y.startStubX,J],[Y.endStubX,J]]},he={x:[[Y.endStubX,Y.startStubY]],y:[[Y.startStubX,Y.endStubY]]},fe={x:[[Y.startStubX,Y.endStubY],[Y.endStubX,Y.endStubY]],y:[[Y.endStubX,Y.startStubY],[Y.endStubX,Y.endStubY]]},be={x:[[Y.startStubX,J],[Y.endStubX,J],[Y.endStubX,Y.endStubY]],y:[[G,Y.startStubY],[G,Y.endStubY],[Y.endStubX,Y.endStubY]]},ge={x:[Y.startStubY,Y.endStubY],y:[Y.startStubX,Y.endStubX]},ye=E[z][0],ke=E[z][1],Ie=Y.so[ye]+1,_e=Y.to[ke]+1,Ue=Y.to[ke]===-1&&ge[z][1]<ge[z][0]||Y.to[ke]===1&&ge[z][1]>ge[z][0],Fe=le[z][Ie][0],xe=le[z][Ie][1],de=se[z][Ie][_e];if(Y.segment===de[3]||Y.segment===de[2]&&Ue)return te[z];if(Y.segment===de[2]&&xe<Fe)return he[z];if(Y.segment===de[2]&&xe>=Fe||Y.segment===de[1]&&!Ue)return be[z];if(Y.segment===de[0]||Y.segment===de[1]&&Ue)return fe[z]},orthogonal:function(z,Y,se,le,te){var he=L,fe={x:he.so[0]===-1?Math.min(Y,le):Math.max(Y,le),y:he.so[1]===-1?Math.min(Y,le):Math.max(Y,le)}[z];return{x:[[fe,se],[fe,te],[le,te]],y:[[se,fe],[te,fe],[te,le]]}[z]},opposite:function(z,Y,se,le){var te=L,he={x:"y",y:"x"}[z],fe={x:"height",y:"width"}[z],be=te["is"+z.toUpperCase()+"GreaterThanStubTimes2"];if(k.sourceEndpoint.elementId===k.targetEndpoint.elementId){var ge=se+(1-k.sourceEndpoint.anchor[he])*k.sourceInfo[fe]+c.maxStub;return{x:[[Y,ge],[le,ge]],y:[[ge,Y],[ge,le]]}[z]}else{if(!be||te.so[V]===1&&Y>le||te.so[V]===-1&&Y<le)return{x:[[Y,J],[le,J]],y:[[G,Y],[G,le]]}[z];if(te.so[V]===1&&Y<le||te.so[V]===-1&&Y>le)return{x:[[G,te.sy],[G,te.ty]],y:[[te.sx,J],[te.tx,J]]}[z]}}},C=O[L.anchorOrientation](L.sourceAxis,K,R,X,Q);if(C)for(var B=0;B<C.length;B++)m(o,C[B][0],C[B][1],L);m(o,M[2],M[3],L),m(o,L.tx,L.ty,L),j(this,o,L)}},"SmythFlowchart");e.Connectors.SmythFlowchart=i,n.extend(e.Connectors.SmythFlowchart,e.Connectors.AbstractConnector)}d(tm,"dt"),xn(tm,"initSmythFlowchartConnector");function nm(t){var e=t.jsPlumb,n=t.jsPlumbUtil,s=xn(function(a){a=a||{},this.type="SmythBezier";var i=e.Connectors.AbstractBezierConnector.apply(this,arguments),r=a.curviness||150,o=10;this.getCurviness=function(){return r},this._findControlPoint=function(c,l,u,p,g,y,w){let S=r,m=p._domElement,D=g._domElement;try{if(m&&D){m.classList.contains("output-endpoint")||([m,D]=[D,m]);var A=m.closest(".component").getBoundingClientRect(),j=D.closest(".component").getBoundingClientRect();const I=j.left-A.right,v=A.bottom<j.top||j.bottom<A.top,T=Math.min(Math.abs(A.top-j.bottom),Math.abs(A.bottom-j.top));S=v||I>150?r:50}else S=o}catch{}var L=y[0]!==w[0]||y[1]===w[1],k=[];return L?(w[0]===0?k.push(u[0]<l[0]?c[0]+o:c[0]-o):k.push(c[0]+S*w[0]),w[1]===0?k.push(u[1]<l[1]?c[1]+o:c[1]-o):k.push(c[1]+S*y[1])):(y[0]===0?k.push(l[0]<u[0]?c[0]+o:c[0]-o):k.push(c[0]-S*y[0]),y[1]===0?k.push(l[1]<u[1]?c[1]+o:c[1]-o):k.push(c[1]+S*w[1])),k},this._computeBezier=function(c,l,u,p,g,y){var w,S,m=u[0]<p[0]?g:0,D=u[1]<p[1]?y:0,A=u[0]<p[0]?0:g,j=u[1]<p[1]?0:y;w=this._findControlPoint([m,D],u,p,l.sourceEndpoint,l.targetEndpoint,c.so,c.to),S=this._findControlPoint([A,j],p,u,l.targetEndpoint,l.sourceEndpoint,c.to,c.so),i.addSegment(this,"Bezier",{x1:m,y1:D,x2:A,y2:j,cp1x:w[0],cp1y:w[1],cp2x:S[0],cp2y:S[1]})}},"SmythBezier");e.Connectors.SmythBezier=s,n.extend(s,e.Connectors.AbstractBezierConnector)}d(nm,"mt"),xn(nm,"initSmythBezierConnector");function sm(){tm(window),nm(window)}d(sm,"extendJsPlumb"),xn(sm,"extendJsPlumb");var F3=Object.defineProperty,$3=d((t,e)=>F3(t,"name",{value:e,configurable:!0}),"_");const am=class{static{d(this,"P")}constructor(e){this.workspace=e}write(e){const n=document.createElement("input");n.style.position="fixed",n.style.opacity="0",n.value=e,document.body.appendChild(n),n.select(),document.execCommand("Copy"),document.body.removeChild(n)}async read(){return navigator.clipboard.readText()}copySelection(){const e=[...document.querySelectorAll(".component.selected")],n=e.map(o=>o.id),s=e.map(o=>{const c=o._control;return{id:o.id,name:o.querySelector(".title-bar").getAttribute("smt-name"),outputs:[...o.querySelectorAll(".output-endpoint")].map((l,u)=>({name:l.getAttribute("smt-name"),color:l.getAttribute("smt-color"),...this.workspace.extractComponentOutputProps(o,l),index:u,uuid:l.endpoint?.getUuid(),default:c.properties.defaultOutputs.includes(l.getAttribute("smt-name"))})),inputs:[...o.querySelectorAll(".input-endpoint")].map((l,u)=>({name:l.getAttribute("smt-name"),type:l.getAttribute("smt-type"),color:l.getAttribute("smt-color"),optional:l.getAttribute("smt-optional")==="true",...this.workspace.extractComponentInputProps(o,l),index:u,uuid:l.endpoint?.getUuid(),default:c.properties.defaultInputs.includes(l.getAttribute("smt-name"))})),data:c.data,top:o.style.top,left:o.style.left,width:o.style.width,height:o.style.height,displayName:c.drawSettings.displayName,title:c.title,aiTitle:c.aiTitle,description:c.description,template:c.properties.template}}),a=this.workspace.jsPlumbInstance.getAllConnections().map(o=>{const c=o.source,l=o.target,u=c.closest(".component"),p=l.closest(".component");return!u||!p||!n.includes(u.id)||!n.includes(p.id)?null:{sourceId:c.closest(".component").id,sourceIndex:[...c.parentElement.querySelectorAll(".output-endpoint")].findIndex(g=>g===c),targetId:l.closest(".component").id,targetIndex:[...l.parentElement.querySelectorAll(".input-endpoint")].findIndex(g=>g===l)}}).filter(o=>o),i=s.reduce((o,c)=>{const l=parseInt(c.top),u=parseInt(c.left);return{top:Math.min(o.top,l),left:Math.min(o.left,u)}},{top:1/0,left:1/0});s.forEach(o=>{o.top=`${parseInt(o.top)-i.top}px`,o.left=`${parseInt(o.left)-i.left}px`});const r=[];return s.forEach(o=>{const c=Vn();r.push({oldId:o.id,newId:c}),o.id=c}),a.forEach(o=>{const c=r.find(u=>u.oldId===o.sourceId)?.newId||o.sourceId,l=r.find(u=>u.oldId===o.targetId)?.newId||o.targetId;o.sourceId=c,o.targetId=l}),JSON.stringify({components:s,connections:a,partial:!0})}async pasteSelection(e,n,s){const a=this.workspace;a._loading=!0;try{const i=typeof e=="string"?JSON.parse(e):e,{components:r}=i;n===void 0&&(n=a.mouseCoords.x),s===void 0&&(s=a.mouseCoords.y);const o={};await Promise.all(r.map(async u=>{const p=await a.addComponent(u.name,{outputs:u?.outputs?.map(g=>g.name)||[],inputs:u?.inputs?.map(g=>g.name)||[],outputProps:u?.outputs||[],inputProps:u?.inputs||[],data:u?.data||{},top:`${parseInt(u.top)+s}px`,left:`${parseInt(u.left)+n}px`,width:u.width,title:u.title||"",aiTitle:u.aiTitle||"",description:u.description||"",uid:Vn(),template:u.template},!1);p.classList.add("selected"),o[u.id]=p.id}));const c=document.querySelector(".component.active");c?._control&&c._control.closeSettings(),await je(50);const l=[];await Promise.all(i.connections.map(async u=>{await je(~~(Math.random()*100));try{const p=o[u.sourceId],g=o[u.targetId],y=document.getElementById(p),w=document.getElementById(g),S=i.components.find(k=>k.id===u.sourceId),m=i.components.find(k=>k.id===u.targetId),D=S.outputs[u.sourceIndex].name,A=m.inputs[u.targetIndex].name;let j=5,L=100;for(let k=0;k<j;k++){const I=~~(Math.random()*50)+k*L;try{const v=y.querySelector(`.output-endpoint[smt-name='${D}']`),T=w.querySelector(`.input-endpoint[smt-name='${A}']`);if(!v||!T){await je(I);continue}const P=v.id+":"+T.id;if(l.includes(P))continue;const F=a.jsPlumbInstance.connect({source:v.endpoint,target:T.endpoint,detachable:!0,cssClass:"exclude-panzoom"});this.workspace.updateConnectionStyle(F),l.push(P);break}catch{await je(I)}}}catch(p){console.error("Error adding connection:",p)}})),console.log("selection pasted"),document.querySelectorAll(".component:not(.selected)").forEach(u=>{u.classList.add("unselected")}),await je(100),a._loading=!1}catch(i){console.error("Error pasting selection:",i)}finally{await je(100),a._loading=!1}a.checkConnectionsConsistency()}copySelection_deprecated(){const e=[...document.querySelectorAll(".component.selected")],n=e.map(u=>({uid:u?.properties?.uid||u?._control?.uid,name:u._control.constructor.name,properties:JSON.parse(JSON.stringify(u._control.properties)),data:JSON.parse(JSON.stringify(u._control.data)),title:u._control.title,description:u._control.description,noteText:u?.querySelector(".note-text")?.innerHTML||""})),s=this.workspace.jsPlumbInstance.getAllConnections().map(u=>{const p=u.source,g=u.target,y=p.closest(".component"),w=g.closest(".component");return!y||!w?null:{sourceId:p.closest(".component").id,sourceIndex:[...p.parentElement.querySelectorAll(".output-endpoint")].findIndex(S=>S===p),targetId:g.closest(".component").id,targetIndex:[...g.parentElement.querySelectorAll(".input-endpoint")].findIndex(S=>S===g)}}).filter(u=>u!==null),a=e.map(u=>u.id),i=s.filter(u=>a.includes(u.sourceId)&&a.includes(u.targetId)),r=n.reduce((u,p)=>parseInt(p.properties.top)<parseInt(u.properties.top)||parseInt(p.properties.top)===parseInt(u.properties.top)&&parseInt(p.properties.left)<parseInt(u.properties.left)?p:u),o=parseInt(r.properties.top),c=parseInt(r.properties.left);n.forEach(u=>{u.properties.top=parseInt(u.properties.top)-o+"px",u.properties.left=parseInt(u.properties.left)-c+"px"});const l=[];return n.forEach(u=>{const p=Vn();l.push({oldId:u.uid,newId:p}),u.properties.uid=p,u.properties.top=parseInt(u.properties.top)+100+"px",u.properties.left=parseInt(u.properties.left)+40+"px"}),i.forEach(u=>{const p=l.find(y=>y.oldId===u.sourceId)?.newId||u.sourceId,g=l.find(y=>y.oldId===u.targetId)?.newId||u.targetId;u.sourceId=p,u.targetId=g}),JSON.stringify({componentsProps:n,connections:i})}async pasteSelection_deprecated(e,n,s){const a=this.workspace,i=JSON.parse(e);if(n===void 0&&(n=a.mouseCoords.x),s===void 0&&(s=a.mouseCoords.y),i.name&&i.componentName){console.log("pasting component template");const p={uid:"TPL"+Vn(),top:s+"px",left:n+"px",sender:null,title:i.name,description:i.description,template:i},g=(await a.addComponent(i.componentName,p,!0))._control;for(let y in i.data)g.data[y]=i.data[y];await je(100),g.checkSettings();return}const{componentsProps:r,connections:o}=i,c=[];r.forEach(p=>{const g=Vn();c.push({oldId:p.properties.uid,newId:g}),p.properties.uid=g,p.properties.top=parseInt(p.properties.top)+s+"px",p.properties.left=parseInt(p.properties.left)+n+"px",p.properties.sender=null}),o.forEach(p=>{const g=c.find(w=>w.oldId===p.sourceId)?.newId||p.sourceId,y=c.find(w=>w.oldId===p.targetId)?.newId||p.targetId;p.sourceId=g,p.targetId=y});let l=r.length;await new Promise(p=>{r.forEach(async g=>{const y=await a.addComponent(g.name,g.properties,!1);for(let w in g.data){y._control.data[w]=g.data[w],y._control.title=g.title,y._control.description=g.description,y.classList.add("selected");const S=y.querySelector(".title-bar"),m=S.querySelector(".title"),D=S.querySelector(".description");m.textContent=g?.title,D.textContent=g.description,y.style.zIndex||(y.style.zIndex="999");const A=y?.querySelector(".note-text");A&&(A.innerHTML=g?.noteText||"",m.style.color=g?.data?.textColor||"#000",A.style.color=g?.data?.textColor||"#000",y.style.backgroundColor=g?.data?.color||"#c7ff1529",y.style.borderColor=g?.data?.color||"#c7ff1529")}await je(50),y._control.checkSettings(),l--,l<=0&&(await je(300),p(!0))})});const u=document.querySelector(".component.active");u?._control&&u._control.closeSettings(),o.forEach(async p=>{const g=document.querySelector(`#${p.sourceId} .output-endpoint:nth-child(${p.sourceIndex+1})`),y=document.querySelector(`#${p.targetId} .input-endpoint:nth-child(${p.targetIndex+1})`);g.endpoint.id+""+y.endpoint.id,a.jsPlumbInstance.connect({source:g.endpoint,target:y.endpoint,detachable:!0,cssClass:"exclude-panzoom"})})}};$3(am,"ClipboardManager");let R3=am;var q3=Object.defineProperty,au=d((t,e)=>q3(t,"name",{value:e,configurable:!0}),"n$1");function im(){let t=null;document.addEventListener("click",s=>{const a=s.target?.closest("[data-smyth-dropdown-toggle]");if(a){const i=a.getAttribute("data-smyth-dropdown-toggle");if(i){const r=document.getElementById(i);r&&e(r)}}else t&&n(t)});function e(s){t&&t!==s&&n(t),s?.classList?.remove("hidden"),t=s}d(e,"o"),au(e,"show");function n(s){s?.classList?.add("hidden"),t=null}d(n,"d"),au(n,"hide")}d(im,"registerDropdown"),au(im,"registerDropdown");var B3=Object.defineProperty,iu=d((t,e)=>B3(t,"name",{value:e,configurable:!0}),"r");window.__GLOBAL_TEMPLATE_VARIABLES__=new Map;function om(t){const e=document.createElement("button");e.className="mt-2 w-9 px-3 py-2 hover:opacity-75 relative bg-primary-100 text-white text-sm duration-200 font-bold text-center",e.innerHTML="Manage";const n=document.createElement("textarea");n.className="hidden",n.setAttribute("readonly","true"),n.id="global-vars-textarea";const s=document.createElement("div"),a=document.getElementById("agent-global-variables-button");s.className="relative",s.appendChild(n),a&&(s.appendChild(e),a.appendChild(e),a.appendChild(n));const i=document.getElementById("agent-status");function r(o){n.value=JSON.stringify(o.data.variables||{},null,2),ou(o.data.variables),e.onclick=async()=>{console.log("Agent Loaded : handling global vars",o);const c=await wc({title:"Agent Variables",content:'<div class="px-2 py-2">The declared Agent Variables are available to all components</div>',fields:{_globalVars:{type:"key-value",rel:"#global-vars-textarea",keyField:{attributes:{placeholder:"Name"}},valueField:{attributes:{placeholder:"Value","data-vault":"ALL_NON_GLOBAL_KEYS"}}}}});if(!c)return;console.log("Global Vars : ",c),n.value=JSON.stringify(c._globalVars,null,2);const l=c._globalVars;o.data.variables=l,ou(l),t.saveAgent()},i.appendChild(s)}d(r,"s"),iu(r,"updateGlobalVars"),t.addEventListener("AgentLoaded",r),t.addEventListener("agentUpdated",r)}d(om,"registerGlobalVars"),iu(om,"registerGlobalVars");function ou(t={}){window.__GLOBAL_TEMPLATE_VARIABLES__.clear();for(const[e,n]of Object.entries(t))window.__GLOBAL_TEMPLATE_VARIABLES__.set(e,{var:`{{${e}}}`,type:"global"})}d(ou,"c$1"),iu(ou,"setGlobalVars");const ru=typeof navigator<"u"?navigator.userAgent.toLowerCase().indexOf("firefox")>0:!1;function lu(t,e,n,s){t.addEventListener?t.addEventListener(e,n,s):t.attachEvent&&t.attachEvent("on".concat(e),n)}d(lu,"addEvent");function mi(t,e,n,s){t.removeEventListener?t.removeEventListener(e,n,s):t.detachEvent&&t.detachEvent("on".concat(e),n)}d(mi,"removeEvent");function rm(t,e){const n=e.slice(0,e.length-1);for(let s=0;s<n.length;s++)n[s]=t[n[s].toLowerCase()];return n}d(rm,"getMods");function lm(t){typeof t!="string"&&(t=""),t=t.replace(/\s/g,"");const e=t.split(",");let n=e.lastIndexOf("");for(;n>=0;)e[n-1]+=",",e.splice(n,1),n=e.lastIndexOf("");return e}d(lm,"getKeys");function U3(t,e){const n=t.length>=e.length?t:e,s=t.length>=e.length?e:t;let a=!0;for(let i=0;i<n.length;i++)s.indexOf(n[i])===-1&&(a=!1);return a}d(U3,"compareArray");const gi={backspace:8,"\u232B":8,tab:9,clear:12,enter:13,"\u21A9":13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,arrowup:38,arrowdown:40,arrowleft:37,arrowright:39,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"\u21EA":20,",":188,".":190,"/":191,"`":192,"-":ru?173:189,"=":ru?61:187,";":ru?59:186,"'":222,"{":219,"}":221,"[":219,"]":221,"\\":220},In={"\u21E7":16,shift:16,"\u2325":18,alt:18,option:18,"\u2303":17,ctrl:17,control:17,"\u2318":91,cmd:91,meta:91,command:91},bi={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},$t={16:!1,18:!1,17:!1,91:!1},St={};for(let t=1;t<20;t++)gi["f".concat(t)]=111+t;let wt=[],vi=null,um="all";const Jn=new Map,va=d(t=>gi[t.toLowerCase()]||In[t.toLowerCase()]||t.toUpperCase().charCodeAt(0),"code"),z3=d(t=>Object.keys(gi).find(e=>gi[e]===t),"getKey"),H3=d(t=>Object.keys(In).find(e=>In[e]===t),"getModifier");function cm(t){um=t||"all"}d(cm,"setScope");function yi(){return um||"all"}d(yi,"getScope");function G3(){return wt.slice(0)}d(G3,"getPressedKeyCodes");function V3(){return wt.map(t=>z3(t)||H3(t)||String.fromCharCode(t))}d(V3,"getPressedKeyString");function W3(){const t=[];return Object.keys(St).forEach(e=>{St[e].forEach(n=>{let{key:s,scope:a,mods:i,shortcut:r}=n;t.push({scope:a,shortcut:r,mods:i,keys:s.split("+").map(o=>va(o))})})}),t}d(W3,"getAllKeyCodes");function K3(t){const e=t.target||t.srcElement,{tagName:n}=e;let s=!0;const a=n==="INPUT"&&!["checkbox","radio","range","button","file","reset","submit","color"].includes(e.type);return(e.isContentEditable||(a||n==="TEXTAREA"||n==="SELECT")&&!e.readOnly)&&(s=!1),s}d(K3,"filter");function Y3(t){return typeof t=="string"&&(t=va(t)),wt.indexOf(t)!==-1}d(Y3,"isPressed");function X3(t,e){let n,s;t||(t=yi());for(const a in St)if(Object.prototype.hasOwnProperty.call(St,a))for(n=St[a],s=0;s<n.length;)n[s].scope===t?n.splice(s,1).forEach(r=>{let{element:o}=r;return uu(o)}):s++;yi()===t&&cm(e||"all")}d(X3,"deleteScope");function J3(t){let e=t.keyCode||t.which||t.charCode;t.key&&t.key.toLowerCase()==="capslock"&&(e=va(t.key));const n=wt.indexOf(e);if(n>=0&&wt.splice(n,1),t.key&&t.key.toLowerCase()==="meta"&&wt.splice(0,wt.length),(e===93||e===224)&&(e=91),e in $t){$t[e]=!1;for(const s in In)In[s]===e&&(Zn[s]=!1)}}d(J3,"clearModifier");function dm(t){if(typeof t>"u")Object.keys(St).forEach(a=>{Array.isArray(St[a])&&St[a].forEach(i=>Go(i)),delete St[a]}),uu(null);else if(Array.isArray(t))t.forEach(a=>{a.key&&Go(a)});else if(typeof t=="object")t.key&&Go(t);else if(typeof t=="string"){for(var e=arguments.length,n=new Array(e>1?e-1:0),s=1;s<e;s++)n[s-1]=arguments[s];let[a,i]=n;typeof a=="function"&&(i=a,a=""),Go({key:t,scope:a,method:i,splitKey:"+"})}}d(dm,"unbind");const Go=d(t=>{let{key:e,scope:n,method:s,splitKey:a="+"}=t;lm(e).forEach(r=>{const o=r.split(a),c=o.length,l=o[c-1],u=l==="*"?"*":va(l);if(!St[u])return;n||(n=yi());const p=c>1?rm(In,o):[],g=[];St[u]=St[u].filter(y=>{const S=(s?y.method===s:!0)&&y.scope===n&&U3(y.mods,p);return S&&g.push(y.element),!S}),g.forEach(y=>uu(y))})},"eachUnbind");function pm(t,e,n,s){if(e.element!==s)return;let a;if(e.scope===n||e.scope==="all"){a=e.mods.length>0;for(const i in $t)Object.prototype.hasOwnProperty.call($t,i)&&(!$t[i]&&e.mods.indexOf(+i)>-1||$t[i]&&e.mods.indexOf(+i)===-1)&&(a=!1);(e.mods.length===0&&!$t[16]&&!$t[18]&&!$t[17]&&!$t[91]||a||e.shortcut==="*")&&(e.keys=[],e.keys=e.keys.concat(wt),e.method(t,e)===!1&&(t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation&&t.stopPropagation(),t.cancelBubble&&(t.cancelBubble=!0)))}}d(pm,"eventHandler");function hm(t,e){const n=St["*"];let s=t.keyCode||t.which||t.charCode;if(t.key&&t.key.toLowerCase()==="capslock"||!Zn.filter.call(this,t))return;if((s===93||s===224)&&(s=91),wt.indexOf(s)===-1&&s!==229&&wt.push(s),["metaKey","ctrlKey","altKey","shiftKey"].forEach(o=>{const c=bi[o];t[o]&&wt.indexOf(c)===-1?wt.push(c):!t[o]&&wt.indexOf(c)>-1?wt.splice(wt.indexOf(c),1):o==="metaKey"&&t[o]&&(wt=wt.filter(l=>l in bi||l===s))}),s in $t){$t[s]=!0;for(const o in In)if(Object.prototype.hasOwnProperty.call(In,o)){const c=bi[In[o]];Zn[o]=t[c]}if(!n)return}for(const o in $t)Object.prototype.hasOwnProperty.call($t,o)&&($t[o]=t[bi[o]]);t.getModifierState&&!(t.altKey&&!t.ctrlKey)&&t.getModifierState("AltGraph")&&(wt.indexOf(17)===-1&&wt.push(17),wt.indexOf(18)===-1&&wt.push(18),$t[17]=!0,$t[18]=!0);const a=yi();if(n)for(let o=0;o<n.length;o++)n[o].scope===a&&(t.type==="keydown"&&n[o].keydown||t.type==="keyup"&&n[o].keyup)&&pm(t,n[o],a,e);if(!(s in St))return;const i=St[s],r=i.length;for(let o=0;o<r;o++)if((t.type==="keydown"&&i[o].keydown||t.type==="keyup"&&i[o].keyup)&&i[o].key){const c=i[o],{splitKey:l}=c,u=c.key.split(l),p=[];for(let g=0;g<u.length;g++)p.push(va(u[g]));p.sort().join("")===wt.sort().join("")&&pm(t,c,a,e)}}d(hm,"dispatch");function Zn(t,e,n){wt=[];const s=lm(t);let a=[],i="all",r=document,o=0,c=!1,l=!0,u="+",p=!1,g=!1;for(n===void 0&&typeof e=="function"&&(n=e),Object.prototype.toString.call(e)==="[object Object]"&&(e.scope&&(i=e.scope),e.element&&(r=e.element),e.keyup&&(c=e.keyup),e.keydown!==void 0&&(l=e.keydown),e.capture!==void 0&&(p=e.capture),typeof e.splitKey=="string"&&(u=e.splitKey),e.single===!0&&(g=!0)),typeof e=="string"&&(i=e),g&&dm(t,i);o<s.length;o++)t=s[o].split(u),a=[],t.length>1&&(a=rm(In,t)),t=t[t.length-1],t=t==="*"?"*":va(t),t in St||(St[t]=[]),St[t].push({keyup:c,keydown:l,scope:i,mods:a,shortcut:s[o],method:n,key:s[o],splitKey:u,element:r});if(typeof r<"u"&&window){if(!Jn.has(r)){const y=d(function(){let S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.event;return hm(S,r)},"keydownListener"),w=d(function(){let S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.event;hm(S,r),J3(S)},"keyupListenr");Jn.set(r,{keydownListener:y,keyupListenr:w,capture:p}),lu(r,"keydown",y,p),lu(r,"keyup",w,p)}if(!vi){const y=d(()=>{wt=[]},"listener");vi={listener:y,capture:p},lu(window,"focus",y,p)}}}d(Zn,"hotkeys");function Z3(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"all";Object.keys(St).forEach(n=>{St[n].filter(a=>a.scope===e&&a.shortcut===t).forEach(a=>{a&&a.method&&a.method()})})}d(Z3,"trigger");function uu(t){const e=Object.values(St).flat();if(e.findIndex(s=>{let{element:a}=s;return a===t})<0){const{keydownListener:s,keyupListenr:a,capture:i}=Jn.get(t)||{};s&&a&&(mi(t,"keyup",a,i),mi(t,"keydown",s,i),Jn.delete(t))}if((e.length<=0||Jn.size<=0)&&(Object.keys(Jn).forEach(a=>{const{keydownListener:i,keyupListenr:r,capture:o}=Jn.get(a)||{};i&&r&&(mi(a,"keyup",r,o),mi(a,"keydown",i,o),Jn.delete(a))}),Jn.clear(),Object.keys(St).forEach(a=>delete St[a]),vi)){const{listener:a,capture:i}=vi;mi(window,"focus",a,i),vi=null}}d(uu,"removeKeyEvent");const cu={getPressedKeyString:V3,setScope:cm,getScope:yi,deleteScope:X3,getPressedKeyCodes:G3,getAllKeyCodes:W3,isPressed:Y3,filter:K3,trigger:Z3,unbind:dm,keyMap:gi,modifier:In,modifierMap:bi};for(const t in cu)Object.prototype.hasOwnProperty.call(cu,t)&&(Zn[t]=cu[t]);if(typeof window<"u"){const t=window.hotkeys;Zn.noConflict=e=>(e&&window.hotkeys===Zn&&(window.hotkeys=t),Zn),window.hotkeys=Zn}var Us=(t=>(t.COMPONENT_SELECTED="componentSelected",t.SEARCH_OPENED="searchOpened",t.SEARCH_CLOSED="searchClosed",t.SEARCH_QUERY_CHANGED="searchQueryChanged",t))(Us||{}),Q3=Object.defineProperty,e6=d((t,e)=>Q3(t,"name",{value:e,configurable:!0}),"v$1");const fm=class ya{static{d(this,"d")}constructor(){this.searchContainer=null,this.searchInput=null,this.searchResults=null,this.searchContent=null,this.currentResults=[],this.currentSelectedIndex=-1,this.recentlyEditedComponents=[],this.config={maxMainResults:5,maxTotalResults:5,maxRecentComponents:3},this.eventListeners=new Map,this.boundPerformSearch=null,this.boundShowRecent=null,this.boundKeyboardNav=null,this.boundClickOutside=null,this.initializeEventListeners()}static getInstance(){return ya.instance||(ya.instance=new ya),ya.instance}initialize(e){this.validateWorkspace(e),this.setupDOMReferences(),this.setupEventHandlers(e),this.initializeRecentComponentsTracking(e),this.emitEvent(Us.SEARCH_OPENED,{})}validateWorkspace(e){if(!e||typeof e!="object")throw new Error("Invalid workspace instance provided to CanvasSearchHelper")}setupDOMReferences(){if(this.searchContainer=document.getElementById("canvas-search-container"),this.searchInput=document.getElementById("canvas-search-input"),this.searchResults=document.getElementById("canvas-search-results"),this.searchContent=document.getElementById("canvas-search-content"),!this.searchContainer||!this.searchInput||!this.searchResults)throw new Error("Required DOM elements for canvas search not found")}setupEventHandlers(e){!this.searchInput||!this.searchContainer||(this.boundPerformSearch=n=>{const s=n.target.value.trim();this.performSearch(e,s),this.emitEvent(Us.SEARCH_QUERY_CHANGED,{query:s})},this.searchInput.addEventListener("input",this.boundPerformSearch),this.boundShowRecent=n=>{n.target.value.trim()||this.showRecentlyEditedComponents(e)},this.searchInput.addEventListener("focus",this.boundShowRecent),this.boundKeyboardNav=n=>{this.handleKeyboardNavigation(n,e)},this.searchInput.addEventListener("keydown",this.boundKeyboardNav),this.boundClickOutside=n=>{this.searchContainer&&!this.searchContainer.contains(n.target)&&!this.searchContainer.classList.contains("hidden")&&this.closeSearch()},document.addEventListener("click",this.boundClickOutside))}initializeRecentComponentsTracking(e){document.addEventListener("componentSettingsSaved",n=>{n.detail?.componentId&&this.updateRecentlyEdited(n.detail.componentId)}),document.addEventListener("componentEndpointChanged",n=>{n.detail?.componentId&&this.updateRecentlyEdited(n.detail.componentId)}),document.addEventListener("componentTitleChanged",n=>{n.detail?.componentId&&this.updateRecentlyEdited(n.detail.componentId)}),document.addEventListener("componentDescriptionChanged",n=>{n.detail?.componentId&&this.updateRecentlyEdited(n.detail.componentId)})}updateRecentlyEdited(e){if(!e||typeof e!="string"){console.warn("Invalid componentId provided to updateRecentlyEdited:",e);return}const n=Date.now();this.recentlyEditedComponents=this.recentlyEditedComponents.filter(s=>s.id!==e),this.recentlyEditedComponents.unshift({id:e,timestamp:n}),this.recentlyEditedComponents.length>this.config.maxRecentComponents&&(this.recentlyEditedComponents=this.recentlyEditedComponents.slice(0,this.config.maxRecentComponents))}openSearch(e){if(!this.searchContainer||!this.searchInput||!this.searchResults){console.error("Search elements not initialized");return}this.searchInput.value="",this.searchInput.placeholder="Search Components and Integrations.",this.currentSelectedIndex=-1,this.currentResults=[],this.searchContainer.classList.remove("hidden"),this.updateSearchContentStyling(!1),this.searchResults.innerHTML="",setTimeout(()=>{this.searchInput?.focus()},0),this.emitEvent(Us.SEARCH_OPENED,{})}closeSearch(){!this.searchContainer||!this.searchInput||(this.searchInput.value="",this.searchInput.placeholder="Search Components and Integrations.",this.searchInput.blur(),this.searchContainer.classList.add("hidden"),this.currentSelectedIndex=-1,this.currentResults=[],this.emitEvent(Us.SEARCH_CLOSED,{}))}performSearch(e,n){if(!this.searchResults)return;if(this.updateSearchContentStyling(!!n),!n){this.showRecentlyEditedComponents(e);return}const s=this.searchComponents(e,n);if(s.length===0){this.showNoResultsFound();return}this.displaySearchResults(e,s,n)}searchComponents(e,n){const s=[],a=document.querySelectorAll(".component"),i=n.toLowerCase();return a.forEach(r=>{const o=r._control;if(!o)return;const c=o.title||"",l=o.description||o.drawSettings?.componentDescription||o.drawSettings?.shortDescription||"";(c.toLowerCase().includes(i)||l.toLowerCase().includes(i))&&s.push({id:r.id,name:c||o.drawSettings?.displayName||"",type:o.drawSettings?.displayName||"",description:l,element:r,iconHTML:this.getComponentIconHTML(o)})}),this.sortSearchResults(s,n)}searchComponentsByType(e,n,s){const a=[],i=document.querySelectorAll(".component"),r=n.toLowerCase();return i.forEach(o=>{const c=o._control;if(!c||s.includes(o.id))return;const l=c.title||"",u=c.drawSettings?.displayName||"",p=c.description||c.drawSettings?.componentDescription||c.drawSettings?.shortDescription||"";u.toLowerCase().includes(r)&&!l.toLowerCase().includes(r)&&!p.toLowerCase().includes(r)&&a.push({id:o.id,name:l||u,type:u,description:p,element:o,iconHTML:this.getComponentIconHTML(c)})}),a}sortSearchResults(e,n){const s=n.toLowerCase();return e.sort((a,i)=>{const r=(a.name||"").toLowerCase()===s,o=(i.name||"").toLowerCase()===s,c=(a.description||"").toLowerCase()===s,l=(i.description||"").toLowerCase()===s;return r&&!o?-1:!r&&o?1:c&&!l?-1:!c&&l?1:a.name.localeCompare(i.name)})}displaySearchResults(e,n,s){if(!this.searchResults)return;const a=n.slice(0,this.config.maxMainResults);let i=[];if(a.length<this.config.maxMainResults){const c=this.config.maxMainResults-a.length;i=this.searchComponentsByType(e,s,a.map(l=>l.id)).slice(0,c)}const r=[...a,...i];this.currentResults=r,this.currentSelectedIndex=r.length>0?0:-1;const o=this.generateResultsHTML(a,i,s);this.searchResults.innerHTML=o,this.addResultClickHandlers(e),this.updateSelection()}generateResultsHTML(e,n,s){let a="";return e.length>0&&(a+=e.map((i,r)=>`
        <div class="search-result self-stretch inline-flex justify-start items-center gap-2 cursor-pointer hover:bg-gray-50 p-1 rounded ${r===0?"bg-gray-50":""}"
             data-component-id="${i.id}">
          <div class="w-4 h-4 min-w-4 relative">
            ${i.iconHTML}
          </div>
          <div class="inline-flex flex-col justify-start items-start overflow-hidden flex-1 min-w-0">
            <div class="justify-center w-full">
              <span class="text-gray-900 text-xs font-normal font-['Inter'] truncate block">${this.highlightMatch(i.name,s)}</span>
            </div>
          </div>
        </div>
      `).join("")),n.length>0&&(a+=`
        <div class="self-stretch inline-flex justify-start items-center gap-2 mt-2">
          <div class="inline-flex flex-col justify-start items-start overflow-hidden">
            <div class="justify-center text-neutral-500 text-xs font-normal font-['Inter']">Other Results</div>
          </div>
        </div>
      `,a+=n.map(i=>`
        <div class="search-result self-stretch inline-flex justify-start items-center gap-2 cursor-pointer hover:bg-gray-50 p-1 rounded"
             data-component-id="${i.id}">
          <div class="w-4 h-4 min-w-4 relative">
            ${i.iconHTML}
          </div>
          <div class="inline-flex flex-col justify-start items-start overflow-hidden flex-1 min-w-0">
            <div class="justify-center w-full">
              <span class="text-gray-900 text-xs font-normal font-['Inter'] truncate block">${this.highlightMatch(i.name,s)}</span>
            </div>
          </div>
        </div>
      `).join("")),a}showRecentlyEditedComponents(e){if(!this.searchResults)return;const n=this.getRecentlyEditedComponents(e);if(n.length===0){this.searchResults.innerHTML=`
        <div class="self-stretch inline-flex justify-start items-center gap-2">
          <div class="inline-flex flex-col justify-start items-start overflow-hidden">
            <div class="justify-center text-neutral-500 text-xs font-normal font-['Inter']">No recently edited components</div>
          </div>
        </div>
      `;return}const s=this.generateRecentComponentsHTML(n);this.searchResults.innerHTML=s,this.currentResults=n,this.currentSelectedIndex=0,this.addResultClickHandlers(e)}generateRecentComponentsHTML(e){return`
      <div class="self-stretch inline-flex justify-start items-center gap-2">
        <div class="inline-flex flex-col justify-start items-start overflow-hidden">
          <div class="justify-center text-neutral-500 text-xs font-normal font-['Inter']">Recent Action</div>
        </div>
      </div>
      ${e.map((n,s)=>`
        <div class="search-result self-stretch inline-flex justify-start items-center gap-2 cursor-pointer hover:bg-gray-50 p-1 rounded"
             data-component-id="${n.id}">
          <div class="w-4 h-4 min-w-4 relative">
            ${n.iconHTML}
          </div>
          <div class="inline-flex flex-col justify-start items-start overflow-hidden flex-1 min-w-0">
            <div class="justify-center w-full">
              <span class="text-gray-900 text-xs font-normal font-['Inter'] truncate block">${this.escapeHtml(n.name)}</span>
            </div>
          </div>
        </div>
      `).join("")}
    `}getRecentlyEditedComponents(e){const n=[],s=[...this.recentlyEditedComponents].sort((a,i)=>i.timestamp-a.timestamp);for(const a of s){const i=document.getElementById(a.id);if(i?.classList.contains("component")){const r=i._control;r&&n.push({id:a.id,name:r.title||r.drawSettings?.displayName||"",type:r.drawSettings?.displayName||"",description:r.description||r.drawSettings?.componentDescription||"",element:i,iconHTML:this.getComponentIconHTML(r)})}}return n}showNoResultsFound(){this.searchResults&&(this.searchResults.innerHTML=`
      <div class="self-stretch inline-flex justify-start items-center gap-2">
        <div class="justify-center">
          <span class="text-gray-900 text-xs font-normal font-['Inter']">No Results Found. </span>
          <span class="text-blue-500 text-xs font-normal font-['Inter'] underline cursor-pointer" data-action="add-skill">Click to add a skill</span>
        </div>
        <div class="w-6 h-4"></div>
      </div>
    `,this.currentResults=[],this.currentSelectedIndex=-1,this.addNoResultsClickHandlers())}handleKeyboardNavigation(e,n){if(this.searchResults)switch(e.key){case"ArrowDown":e.preventDefault(),this.currentSelectedIndex<this.currentResults.length-1&&(this.currentSelectedIndex++,this.updateSelection());break;case"ArrowUp":e.preventDefault(),this.currentSelectedIndex>0&&(this.currentSelectedIndex--,this.updateSelection());break;case"Enter":e.preventDefault(),this.currentSelectedIndex>=0&&this.currentResults[this.currentSelectedIndex]&&this.selectComponent(n,this.currentResults[this.currentSelectedIndex]);break;case"Escape":e.preventDefault(),this.closeSearch();break}}updateSelection(){this.searchResults&&this.searchResults.querySelectorAll(".search-result").forEach((e,n)=>{n===this.currentSelectedIndex?e.classList.add("bg-gray-50"):e.classList.remove("bg-gray-50")})}addResultClickHandlers(e){this.searchResults&&this.searchResults.querySelectorAll(".search-result").forEach(n=>{n.addEventListener("click",()=>{const s=n.getAttribute("data-component-id");if(s){const a=this.currentResults.find(i=>i.id===s);a&&this.selectComponent(e,a)}})})}addNoResultsClickHandlers(){if(!this.searchResults)return;const e=this.searchResults.querySelector('[data-action="add-skill"]');e&&e.addEventListener("click",()=>{window.addAgentSkill?.()})}selectComponent(e,n){this.closeSearch(),e.scrollToComponent(n.element),n.element.classList.add("selected"),setTimeout(()=>{n.element.classList.remove("selected")},2e3),this.emitEvent(Us.COMPONENT_SELECTED,{componentId:n.id,result:n})}updateSearchContentStyling(e){this.searchContent&&(e?this.searchContent.className="p-3 bg-white rounded-lg outline outline-1 outline-offset-[-1px] outline-slate-200 inline-flex flex-col justify-center items-start gap-3":this.searchContent.className="px-2 py-1 bg-white rounded-lg outline outline-1 outline-offset-[-1px] outline-slate-200 inline-flex flex-col justify-center items-start")}getComponentIconHTML(e){const n=e.drawSettings?.iconCSSClass||"",s=e.drawSettings?.color||"#000";if(n.startsWith("<svg")){let a=n;return a=a.replace(/fill="[^"]*"/g,""),a=a.replace("<svg",`<svg fill="${s}"`),`<div class="w-4 h-4 min-w-4 relative">${a}</div>`}return n.includes("fa-")||n.includes("tpl-fa-icon")?`<div class="w-4 h-4 min-w-4 relative"><i class="${n.includes("tpl-fa-icon")?n:`tpl-fa-icon ${n}`}" style="color: ${s};"></i></div>`:n.includes("svg-icon")?`<div class="w-4 h-4 min-w-4 relative"><span class="${n}" style="background-color: ${s};"></span></div>`:n.includes("mif-")?`<div class="w-4 h-4 min-w-4 relative"><i class="${n}" style="color: ${s};"></i></div>`:`<div class="w-4 h-4 min-w-4 relative">
      <div class="w-1.5 h-1.5 left-[1.67px] top-[8.83px] absolute bg-gray-900"></div>
      <div class="w-1.5 h-1.5 left-[5.33px] top-[1.50px] absolute bg-gray-900"></div>
      <div class="w-1.5 h-1.5 left-[9px] top-[8.83px] absolute bg-gray-900"></div>
    </div>`}highlightMatch(e,n){if(!n)return this.escapeHtml(e);const s=this.escapeHtml(e),a=this.escapeHtml(n),i=new RegExp(`(${a})`,"gi");return s.replace(i,'<span class="text-blue-500 font-medium">$1</span>')}escapeHtml(e){const n=document.createElement("div");return n.textContent=e,n.innerHTML}initializeEventListeners(){Object.values(Us).forEach(e=>{this.eventListeners.set(e,[])})}addEventListener(e,n){const s=this.eventListeners.get(e);s&&s.push(n)}removeEventListener(e,n){const s=this.eventListeners.get(e);if(s){const a=s.indexOf(n);a>-1&&s.splice(a,1)}}emitEvent(e,n){const s=this.eventListeners.get(e);if(s){const a={type:e,payload:n};s.forEach(i=>{try{i(a)}catch(r){console.error("Error in search event listener:",r)}})}}getConfig(){return{...this.config}}updateConfig(e){Object.assign(this.config,e)}getCurrentResults(){return[...this.currentResults]}getRecentlyEditedComponentsList(){return[...this.recentlyEditedComponents]}clearRecentlyEditedComponents(){this.recentlyEditedComponents=[]}destroy(){this.searchInput&&this.boundPerformSearch&&this.searchInput.removeEventListener("input",this.boundPerformSearch),this.searchInput&&this.boundShowRecent&&this.searchInput.removeEventListener("focus",this.boundShowRecent),this.searchInput&&this.boundKeyboardNav&&this.searchInput.removeEventListener("keydown",this.boundKeyboardNav),this.boundClickOutside&&document.removeEventListener("click",this.boundClickOutside),this.boundPerformSearch=null,this.boundShowRecent=null,this.boundKeyboardNav=null,this.boundClickOutside=null,this.eventListeners.clear(),this.currentResults=[],this.currentSelectedIndex=-1,this.recentlyEditedComponents=[],this.searchContainer=null,this.searchInput=null,this.searchResults=null,this.searchContent=null,ya.instance=null}};e6(fm,"CanvasSearchHelper");let mm=fm;window.addAgentSkill=async()=>{const t=window.workspace;if(!t){console.warn("Workspace not available");return}const e=mm.getInstance();if(e.closeSearch(),!window.addingSkill){window.addingSkill=!0;try{const n=t.agent?.data?.components||[];let s=50,a=50;if(n.length>0){const o=n.reduce((u,p)=>{const g=Number(u.top?.split("px")[0]||0);return Number(p.top?.split("px")[0]||0)>g?p:u}),c=document.getElementById(o.id);let l=200;c&&(l=c.getBoundingClientRect().height),s=Number(o.top?.split("px")[0]||0)+l+100}const i={top:`${s}px`,left:`${a}px`,outputs:["response"],inputs:[],data:{prompt:"New skill prompt...",advancedModeEnabled:!1},sender:null},r=await t.addComponent("APIEndpoint",i,!0);r&&(t.scrollToComponent(r),t.refreshComponentSelection(r),e.updateRecentlyEdited(r.id),setTimeout(()=>{t.saveAgent()},100))}catch(n){console.error("Error adding APIEndpoint component:",n)}finally{window.addingSkill=!1}}};var t6=Object.defineProperty,en=d((t,e)=>t6(t,"name",{value:e,configurable:!0}),"p");let ws=!1;function du(t){if(!Array.isArray(t)||t.length===0)throw new Error("Input must be a non-empty array of DOM components.");let e=1/0,n=1/0,s=-1/0,a=-1/0;return t.forEach(i=>{const r=i.style,o=parseFloat(r.left)||0,c=parseFloat(r.top)||0,l=parseFloat(i.clientWidth)||0,u=parseFloat(i.clientHeight)||0,p=o+l,g=c+u;e=Math.min(e,o),n=Math.min(n,c),s=Math.max(s,p),a=Math.max(a,g)}),{x:e,y:n,width:s-e,height:a-n}}d(du,"E"),en(du,"calculateBoundingBox");function xi(t){t.forEach(e=>{const n=e.components.map(a=>document.getElementById(a.id)),s=du(n);e.box?(e.box.x=s.x,e.box.y=s.y,e.box.width=s.width,e.box.height=s.height):e.box=s})}d(xi,"b$1"),en(xi,"updateWFBoundingBox");async function pu(t){const{components:e,connections:n}=t;function s(){const c=new Map;return e.forEach(l=>{c.set(l.id,[])}),n.forEach(({sourceId:l,targetId:u})=>{c.has(l)&&c.get(l).push(u)}),c}d(s,"t"),en(s,"buildGraph");function a(c,l){const u={},p=new Set;e.forEach(y=>{u[y.id]=y.name==="APIEndpoint"?0:1});function g(y,w){p.add(y),u[y]=Math.max(u[y],w),(l.get(y)||[]).forEach(S=>{g(S,u[y]+1)})}return d(g,"i"),en(g,"dfs"),g(c,0),u}d(a,"n"),en(a,"calculateLevels");function i(c){const l=s(),u=a(c,l);let p=new Set,g=[c],y=[],w=[];for(;g.length>0;){const S=g.pop();if(!p.has(S)){p.add(S);const m=e.find(D=>D.id===S);m&&(y.push({...m,_level:u[S]}),(n.filter(D=>D.sourceId===S)||[]).forEach(D=>{w.push(D),g.push(D.targetId)}))}}return e.sort((S,m)=>S._level-m._level),{components:y,connections:w}}d(i,"a"),en(i,"getConnectedComponentsAndConnections");function r(c){return n.filter(l=>l.targetId===c.id).length===0}d(r,"w"),en(r,"isSourceComponent");const o=[];if(!e)return o;for(let c of e)if(r(c)){const l=i(c.id);o.push(l)}return xi(o),o}d(pu,"I"),en(pu,"extractWorkflows");async function gm(t,e,n){for(let s of t.components){const a=document.getElementById(s.id);if(!a)continue;a.style.transition="0.2s ease-in-out";const i=parseInt(a.style.left)+e,r=parseInt(a.style.top)+n;a.style.left=`${i}px`,a.style.top=`${r}px`}await je(300);for(let s of t.components){const a=document.getElementById(s.id);a&&(a.style.transition="",workspace.jsPlumbInstance.repaint(a))}}d(gm,"M"),en(gm,"moveFlow");async function hu(t){if(!t||t.length===0)return[];const e=Math.min(...t.map(s=>s.box.x));t.sort((s,a)=>s.box.y-a.box.y);let n=0;for(let s of t)await gm(s,e-s.box.x,n-s.box.y),await xi([s]),n+=s.box.height+100;await je(200),workspace.jsPlumbInstance.repaintEverything()}d(hu,"B"),en(hu,"alignBoxes");async function fu(t,e,n){const s={};t.forEach(r=>{const o=r._level;s[o]||(s[o]=[]),s[o].push(r)});let a=e;const i=Object.keys(s).sort((r,o)=>parseInt(r)-parseInt(o));for(let r of i){const o=s[r],c=Math.max(...o.map(u=>{const p=document.getElementById(u.id);return p&&p.offsetWidth||0}));let l=n;for(let u of o){const p=document.getElementById(u.id);p&&(p.style.transition="0.1s ease-in-out",p.style.left=`${a}px`,p.style.top=`${l}px`,l+=(p.offsetHeight||0)+100,p.style.transition="",await je(100),p.style.transition="0.1s ease-in-out",workspace.jsPlumbInstance.repaint(p))}a+=c+200}return t}d(fu,"C"),en(fu,"organizeComponents");async function bm(){document.querySelector(".component.selected")?await ym():await vm()}d(bm,"sortAgent"),en(bm,"sortAgent");async function vm(){if(!ws)try{ws=!0;const t=await workspace.export(!1)||workspace.agent.data,e=await pu(t);await je(50),await workspace.export(),await je(200),workspace.lock();const n=10;for(let s=0;s<e.length;s+=n){const a=e.slice(s,s+n);for(let i of a)await fu(i.components,i.box.x,i.box.y);await je(100)}await je(100),xi(e),await je(100),await hu(e),await je(200),workspace.jsPlumbInstance.repaintEverything()}catch(t){console.error("Error during sort:",t)}finally{workspace.unlock();try{await je(1e3),await workspace.export(),await workspace.saveAgent(),await je(100),ws=!1}catch(t){console.error("Error saving agent:",t),ws=!1}}}d(vm,"P"),en(vm,"sortAll");async function ym(){if(!ws)try{ws=!0;const t=await workspace.export(!1)||workspace.agent.data,e=await pu(t),n=[...document.querySelectorAll(".component.selected")];if(!n.length)return;const s=e.filter(i=>n.some(r=>i.components.some(o=>o.id===r.id)));workspace.lock();for(let i of s)await fu(i.components,i.box.x,i.box.y);const a=[];for(let i of e)s.includes(i)||a.push(...i.components);if(a.length>0){await je(100),xi(s);const i=du(a.map(r=>document.getElementById(r.id)));s.unshift({box:i,components:a,connections:[]})}await je(100),hu(s),await je(100),workspace.jsPlumbInstance.repaintEverything()}catch(t){console.error("Error during sort:",t)}finally{workspace.unlock(),await je(500);try{await workspace.saveAgent(),await je(100),ws=!1}catch(t){console.error("Error saving agent:",t),ws=!1}}}d(ym,"S"),en(ym,"sortSelection");var n6=Object.defineProperty,xm=d((t,e)=>n6(t,"name",{value:e,configurable:!0}),"h");function wm(t){const e=navigator.userAgent.includes("Mac"),n={save:e?"command+s":"ctrl+s",copy:e?"command+c":"ctrl+c",paste:e?"command+v":"ctrl+v",undo:e?"command+z":"ctrl+z",redo:e?"command+shift+z":"ctrl+shift+z",selectAll:e?"command+a":"ctrl+a",sort:e?"command+option+a":"ctrl+alt+a",export:e?"command+shift+e":"ctrl+shift+e",componentPriorityUp:e?"command+shift+]":"ctrl+shift+]",componentPriorityDown:e?"command+shift+[":"ctrl+shift+[",search:e?"command+p":"ctrl+p"},s=Zn.noConflict(),a="del, backspace";let i=!1;const r=mm.getInstance();try{r.initialize(t)}catch(o){console.error("Failed to initialize canvas search:",o)}s(n.search,(o,c)=>{if(t.locked)return!1;if(!(t.hoveredElement.tagName==="TEXTAREA"||t.hoveredElement.tagName==="INPUT"||t.hoveredElement.classList.contains("dbg")||t.hoveredElement.closest(".dbg")))return o.preventDefault(),o.stopPropagation(),o.stopImmediatePropagation(),r.openSearch(t),!1}),s(a,async(o,c)=>{if(t.locked||i)return!1;const l=window.getSelection(),u=l.toString(),p=xm(D=>{const A=D instanceof Element?D:D.parentElement;return A instanceof HTMLElement&&(A.isContentEditable||A.tagName==="INPUT"||A.tagName==="TEXTAREA")},"isEditableElement");if(u&&(p(l.anchorNode)||p(l.focusNode)))return!1;const g=[...document.querySelectorAll(".component.selected")];if(g.length<=0)return!1;const y=g.map(D=>D._control);i=!0;const w=g.length===1?"component":"components",S=await Mn("",`Are you sure you want to delete selected ${w}?`,{icon:"",btnNoLabel:"No, Cancel",btnYesLabel:"Yes, I'm sure",btnYesClass:"bg-smyth-red-500 border-smyth-red-500"});if(i=!1,!S)return;const m=[];y.forEach(D=>{m.push(D.delete(!0,!1))}),await Promise.all(m),await je(200),t.saveAgent()}),s(n.save,(o,c)=>{if(t.locked)return!1}),s(n.copy,(o,c)=>{if(window.getSelection().toString())return;if(t.locked)return!1;if(t.hoveredElement.tagName=="TEXTAREA"||t.hoveredElement.tagName=="INPUT"||t.hoveredElement.classList.contains("dbg")||t.hoveredElement.closest(".dbg")||document.activeElement!=document.body)return;const l=t.clipboard.copySelection();t.clipboard.write(l)}),s(n.paste,async(o,c)=>{if(t.locked)return!1;if(t.hoveredElement.tagName=="TEXTAREA"||t.hoveredElement.tagName=="INPUT"||t.hoveredElement.classList.contains("dbg")||t.hoveredElement.closest(".dbg")||document.activeElement!=document.body)return;document.querySelectorAll(".component.selected").forEach(u=>u.classList.remove("selected"));const l=await t.clipboard.read();t.clipboard.pasteSelection(l),t.redraw()}),s(n.undo,(o,c)=>{if(t.locked)return!1;try{t.stateManager.undo()}catch(l){console.error("Error during undo",l)}}),s(n.redo,(o,c)=>{if(t.locked)return!1;try{t.stateManager.redo()}catch(l){console.error("Error during redo",l)}}),s(n.selectAll,(o,c)=>{if(t.locked)return!1;if(t.hoveredElement.classList.contains("dbg")||t.hoveredElement.closest(".dbg")){const p=t.hoveredElement.classList.contains("dbg")?t.hoveredElement:t.hoveredElement.closest(".dbg");window.getSelection().selectAllChildren(p),o.preventDefault(),o.stopPropagation(),o.stopImmediatePropagation();return}if(t.hoveredElement.tagName=="TEXTAREA"||t.hoveredElement.tagName=="INPUT")return;o.preventDefault(),o.stopPropagation(),o.stopImmediatePropagation();const l=document.querySelectorAll("#workspace-container .component.selected"),u=document.querySelectorAll("#workspace-container .component");l.length===u.length?u.forEach(p=>p.classList.remove("selected","unselected")):u.forEach(p=>{p.classList.add("selected"),p.classList.remove("unselected")})}),s("esc",(o,c)=>{if(t.locked)return!1}),s("enter",(o,c)=>{if(t.locked)return!1;Db()}),s(n.sort,async(o,c)=>{console.log("Sorting agent ..."),await bm(),console.log("Agent sorted")}),s(n.export,async(o,c)=>{await t.exportTemplate()}),s(n.componentPriorityUp,(o,c)=>{if(t.locked)return!1;if(t.hoveredElement.tagName==="TEXTAREA"||t.hoveredElement.tagName==="INPUT"||t.hoveredElement.classList.contains("dbg")||t.hoveredElement.closest(".dbg"))return;const l=document.querySelectorAll(".component.selected");l.length!==0&&(l.forEach(u=>{u.style.zIndex="999",setTimeout(()=>{document.querySelectorAll(".component:not(.selected)").forEach(p=>{const g=p;(!g.style.zIndex||parseInt(g.style.zIndex)>900)&&(g.style.zIndex="1")})},50)}),t.redraw(),t.saveAgent())}),s(n.componentPriorityDown,(o,c)=>{if(t.locked)return!1;if(t.hoveredElement.tagName==="TEXTAREA"||t.hoveredElement.tagName==="INPUT"||t.hoveredElement.classList.contains("dbg")||t.hoveredElement.closest(".dbg"))return;const l=document.querySelectorAll(".component.selected");l.length!==0&&(l.forEach(u=>{u.style.zIndex="0"}),t.redraw(),t.saveAgent())})}d(wm,"registerHotkeys"),xm(wm,"registerHotkeys");var s6=Object.defineProperty,wi=d((t,e)=>s6(t,"name",{value:e,configurable:!0}),"u");function Sm(t){const e=document.querySelector("#minimap");if(!e)return;const n=e.getContext("2d"),s=t.container,a=document.createElement("canvas");a.width=e.width,a.height=e.height;const i=a.getContext("2d");window.requestAnimationFrame(r);function r(){n.clearRect(0,0,e.width,e.height),i.clearRect(0,0,a.width,a.height),i.globalCompositeOperation="source-over";const y=o(),w=c(y);document.querySelectorAll(".component, .agent-card").forEach(m=>{const D=m.getBoundingClientRect(),A=D.width*w,j=D.height*w;n.fillStyle="#fff",n.beginPath(),n.roundRect((D.left-y.left)*w,(D.top-y.top)*w,A,j,2),n.fill()}),i.fillStyle="rgba(204, 204, 204, 0.8)",i.fillRect(0,0,a.width,a.height);const S=s.getBoundingClientRect();i.globalCompositeOperation="destination-out",i.fillRect((S.left-y.left)*w,(S.top-y.top)*w,s.offsetWidth*w,s.offsetHeight*w),n.globalAlpha=.5,n.drawImage(a,0,0),n.globalAlpha=1,n.strokeStyle="#ccc",n.lineWidth=2,n.strokeRect((S.left-y.left)*w,(S.top-y.top)*w,s.offsetWidth*w,s.offsetHeight*w),window.requestAnimationFrame(r)}d(r,"E"),wi(r,"updateMiniMap");function o(){let y=Number.POSITIVE_INFINITY,w=Number.POSITIVE_INFINITY,S=Number.NEGATIVE_INFINITY,m=Number.NEGATIVE_INFINITY;document.querySelectorAll(".component, .agent-card").forEach(A=>{const j=A.getBoundingClientRect();y=Math.min(y,j.left),w=Math.min(w,j.top),S=Math.max(S,j.right),m=Math.max(m,j.bottom)});const D=s.getBoundingClientRect();return y=Math.min(y,D.left),w=Math.min(w,D.top),S=Math.max(S,D.right),m=Math.max(m,D.bottom),y===Number.POSITIVE_INFINITY&&(y=0,w=0,S=100,m=100),{left:y,top:w,right:S,bottom:m}}d(o,"f"),wi(o,"calculateWorkspaceBounds");function c(y){const w=y.right-y.left,S=y.bottom-y.top,m=e.width,D=e.height,A=m/w,j=D/S;let L=Math.min(A,j);return L=Math.min(L,.08),L}d(c,"I"),wi(c,"calculateScaleFactor");function l(y){const w=t.panzoom,S=e.getBoundingClientRect(),m=s.getBoundingClientRect(),D=y.clientX-S.left,A=y.clientY-S.top,j=o(),L=c(j),k=s.getBoundingClientRect(),I=(k.left-j.left)*L,v=(k.top-j.top)*L,T=w.getPan();w.pan(T.x+m.width/2+(I-D)/L,T.y+m.height/2+(v-A)/L)}d(l,"b"),wi(l,"canvasClick");let u=!1,p=0,g=0;e.addEventListener("mousedown",y=>{u=!0,p=y.clientX,g=y.clientY,l(y)}),e.addEventListener("mouseup",()=>{u=!1}),e.addEventListener("mouseleave",()=>{u=!1}),e.addEventListener("mousemove",y=>{const w=t.panzoom,S=w.getPan();if(u){const m=o(),D=c(m),A=y.clientX-p,j=y.clientY-g;p=y.clientX,g=y.clientY,w.pan(S.x-A/D,S.y-j/D,{animate:!1})}})}d(Sm,"registerMiniMap"),wi(Sm,"registerMiniMap");var a6=Object.defineProperty,mu=d((t,e)=>a6(t,"name",{value:e,configurable:!0}),"n");const Cm=class extends Oa{static{d(this,"i")}constructor(e){super(),this.controller=null,this.monitorId=null,this.workspace=e}get id(){return this.monitorId}async init(){try{this.workspace?.serverData?.dbgUrl||(console.log("Waiting for server data to be loaded"),await new Promise(e=>{let n=mu(()=>{this.workspace.removeEventListener("ServerDataLoaded",n),e(!0),console.log("Server data loaded so we can initialize the monitor")},"listener");this.workspace.addEventListener("ServerDataLoaded",n)})),this.workspace?.agent?.id||(console.log("Waiting for agent to be loaded"),await new Promise(e=>{let n=mu(()=>{this.workspace.removeEventListener("AgentLoaded",n),e(!0),console.log("Agent loaded so we can initialize the monitor")},"listener");this.workspace.addEventListener("AgentLoaded",n)})),this.controller=await this.setupMonitor()}catch(e){console.error("Failed to initialize monitor:",e),this.emit("error",e)}}close(){this.controller&&(this.controller.abort(),this.controller=null,this.monitorId=null)}async setupMonitor(){const e=new AbortController;let n=`${this.workspace.serverData.dbgUrl}/sse/agent/${this.workspace.agent.id}/monitor`,s={"X-AGENT-ID":this.workspace.agent.id};return nd(n,{signal:e.signal,headers:s,async onopen(a){if(!a.ok)throw new Error(`Failed to open monitor connection: ${a.status}`);console.log("Monitor connection opened")},onmessage:a=>{this.processEvent(a)},onclose:()=>{console.log("Monitor connection closed"),this.emit("closed"),this.monitorId=null,this.controller=null,setTimeout(()=>this.init(),1e3)},onerror:a=>{console.error("Monitor connection error:",a),this.emit("error",a)},openWhenHidden:!0}),e}processEvent(e){const n={init:s=>{const a=s;return console.log("Monitor initialized:",a),this.monitorId=a,window.currentMonitorId=a,this.emit("initialized",{monitorId:a}),Ba.send({function:"attachHeaders",args:[{"X-MONITOR-ID":a}]},["all"]),!1},agent:s=>(window.debugCurrentRunningAgentTimestamp=s.endTime?void 0:s.startTime,!0)};try{if(!(n[e.event]||(()=>!0))(e.data))return;const s=JSON.parse(e.data);this.emit(e.event,{type:e.event,timestamp:new Date().toISOString(),data:s})}catch(s){this.emit("error",s)}}};mu(Cm,"Monitor");let i6=Cm;var o6=Object.defineProperty,r6=d((t,e)=>o6(t,"name",{value:e,configurable:!0}),"x");const Em=class{static{d(this,"w")}constructor(e){this.workspace=e,this.lastState={components:[],connections:[]},this.state=[],this.redoStack=[],this.enabled=!0,this.queue=[],this.processingQueue=!1,this._saving=!1,e.addEventListener("AgentLoaded",async n=>{this.lastState=this.processState(n.data),this.state=[]}),e.addEventListener("DataExported",n=>{this.enabled&&(this.queue.push(n),this.processQueue())})}reset(e){e&&(this.lastState=this.processState(e)),this.state=[]}async processQueue(){if(!this.processingQueue){for(this.processingQueue=!0;this.queue.length>0;){if(this.locked){await je(30);continue}const e=this.queue.shift();this.saveState(e)}this.processingQueue=!1}}diffState(e){const n={add:{components:[],connections:[]},remove:{components:[],connections:[]},update:{components:[],connections:[]}},s=this.lastState.components.map(g=>g.id),a=e.components.map(g=>g.id),i=e.components.filter(g=>!s.includes(g.id));n.add.components=i;const r=this.lastState.components.filter(g=>!a.includes(g.id));n.remove.components=r;const o=this.lastState.connections.map(g=>`${g.sourceId}:${g.sourceIndex},${g.targetId}:${g.targetIndex}`),c=e.connections.map(g=>`${g.sourceId}:${g.sourceIndex},${g.targetId}:${g.targetIndex}`),l=e.connections.filter(g=>!o.includes(g.id));n.add.connections=l;const u=this.lastState.connections.filter(g=>!c.includes(g.id));n.remove.connections=u;const p=e.components.filter(g=>{const y=this.lastState.components.find(w=>w.id===g.id);return y&&JSON.stringify(g)!==JSON.stringify(y)}).map(g=>g.id);n.remove.components.push(...this.lastState.components.filter(g=>p.includes(g.id))),n.add.components.push(...e.components.filter(g=>p.includes(g.id))),n.update.components=p,!(n.add.components.length===0&&n.remove.components.length===0&&n.add.connections.length===0&&n.remove.connections.length===0)&&(this.redoStack=[],this.state.push(n))}processState(e){const n=JSON.parse(JSON.stringify(e));return n.connections=n.connections.map(s=>({...s,id:`${s.sourceId}:${s.sourceIndex},${s.targetId}:${s.targetIndex}`})),n}saveState(e){if(e){this.lock();try{let n=this.processState(e);this.diffState(n),this.lastState=n}catch(n){console.warn("Error during saveState",n)}setTimeout(this.unlock.bind(this),100)}}get locked(){return this._saving}lock(){this._saving=!0,this.workspace._loading=!0}unlock(){this._saving=!1,this.workspace._loading=!1}async undo(){if(this.locked)return;const e=this.state.pop();if(e){this.redoStack.push(e),this.lock();try{for(let o of e.add?.connections||[]){const c=document.getElementById(o.sourceId),l=document.getElementById(o.targetId);if(!c||!l)continue;const u=c.querySelectorAll(".output-container .endpoint")[o.sourceIndex],p=l.querySelectorAll(".input-container .endpoint")[o.targetIndex];if(!u||!p)continue;const g=this.workspace.jsPlumbInstance.getConnections({source:u,target:p});this.workspace.jsPlumbInstance.deleteConnection(g[0],{force:!0})}await je(50);let n=[],s=[];for(let o of e.add?.components||[]){const c=document.getElementById(o.id),l=c._control,u=[...c.querySelectorAll(".input-container .endpoint")].map(w=>w.id),p=[...c.querySelectorAll(".output-container .endpoint")].map(w=>w.id),g=this.workspace.jsPlumbInstance.getConnections({target:u}).map(w=>{const S=w.source.id,m=w.target.id,D=document.getElementById(S).closest(".component").id,A=document.getElementById(m).closest(".component").id,j=[...document.getElementById(S).parentElement.querySelectorAll(".endpoint")].map(k=>k.id).indexOf(S),L=[...document.getElementById(m).parentElement.querySelectorAll(".endpoint")].map(k=>k.id).indexOf(m);return{sourceId:D,targetId:A,sourceIndex:j,targetIndex:L}}),y=this.workspace.jsPlumbInstance.getConnections({source:p}).map(w=>{const S=w.source.id,m=w.target.id,D=document.getElementById(S).closest(".component").id,A=document.getElementById(m).closest(".component").id,j=[...document.getElementById(S).parentElement.querySelectorAll(".endpoint")].map(k=>k.id).indexOf(S),L=[...document.getElementById(m).parentElement.querySelectorAll(".endpoint")].map(k=>k.id).indexOf(m);return{sourceId:D,targetId:A,sourceIndex:j,targetIndex:L}});n.push(...g,...y),l.delete(),s.push("#"+o.id)}let a=30;for(;s.length>0&&document.querySelectorAll(s.join(",")).length>0&&a>0;)await je(33),a--;const i={};for(let o of e.remove?.components||[]){i[o.id]=!0;const c=this.workspace.addComponent(o.name,{outputs:o.outputs.map(l=>l.name),inputs:o.inputs.map(l=>l.name),outputProps:o.outputs,inputProps:o.inputs,data:o.data,top:o.top,left:o.left,width:o.width,title:o.title||"",aiTitle:o.aiTitle||"",description:o.description||"",uid:o.id,template:o.template},!1)}for(a=30;Object.keys(i).length>0&&a>0;){const o=Object.keys(i);for(let c of o)document.getElementById(c)&&delete i[c];await je(33),a--}await je(300);let r=[];if(r.push(...n,...e.remove?.connections),r=r.filter((o,c,l)=>c===l.findIndex(u=>u.sourceId===o.sourceId&&u.targetId===o.targetId)),r.length>0)for(let o of r){const c=document.getElementById(o.sourceId),l=document.getElementById(o.targetId);if(!c||!l)continue;const u=c.querySelectorAll(".output-container .endpoint")?.[o.sourceIndex],p=l.querySelectorAll(".input-container .endpoint")?.[o.targetIndex];if(!u||!p||!u?.endpoint||!p?.endpoint)continue;const g=this.workspace.jsPlumbInstance.connect({source:u.endpoint,target:p.endpoint,detachable:!0,cssClass:"exclude-panzoom"});this.workspace.updateConnectionStyle(g),await je(5)}await je(100),this.lastState=this.processState(await this.workspace.export(!1))}catch(n){console.error("Error during undo",n)}return this.unlock(),this.workspace.saveAgent(void 0,void 0,void 0,void 0,!1),e}}async redo(){if(this.locked)return;const e=this.redoStack.pop();if(e){this.state.push(e),this.lock();try{for(let i of e.remove?.connections||[]){const r=document.getElementById(i.sourceId),o=document.getElementById(i.targetId);if(!r||!o)continue;const c=r.querySelectorAll(".output-container .endpoint")[i.sourceIndex],l=o.querySelectorAll(".input-container .endpoint")[i.targetIndex];if(!c||!l)continue;const u=this.workspace.jsPlumbInstance.getConnections({source:c,target:l});this.workspace.jsPlumbInstance.deleteConnection(u[0],{force:!0})}await je(50);let n=[],s=[];for(let i of e.remove?.components||[]){const r=document.getElementById(i.id),o=r._control,c=[...r.querySelectorAll(".input-container .endpoint")].map(g=>g.id),l=[...r.querySelectorAll(".output-container .endpoint")].map(g=>g.id),u=this.workspace.jsPlumbInstance.getConnections({target:c}).map(g=>{const y=g.source.id,w=g.target.id,S=document.getElementById(y).closest(".component").id,m=document.getElementById(w).closest(".component").id,D=[...document.getElementById(y).parentElement.querySelectorAll(".endpoint")].map(j=>j.id).indexOf(y),A=[...document.getElementById(w).parentElement.querySelectorAll(".endpoint")].map(j=>j.id).indexOf(w);return{sourceId:S,targetId:m,sourceIndex:D,targetIndex:A}}),p=this.workspace.jsPlumbInstance.getConnections({source:l}).map(g=>{const y=g.source.id,w=g.target.id,S=document.getElementById(y).closest(".component").id,m=document.getElementById(w).closest(".component").id,D=[...document.getElementById(y).parentElement.querySelectorAll(".endpoint")].map(j=>j.id).indexOf(y),A=[...document.getElementById(w).parentElement.querySelectorAll(".endpoint")].map(j=>j.id).indexOf(w);return{sourceId:S,targetId:m,sourceIndex:D,targetIndex:A}});n.push(...u,...p),o.delete(),s.push("#"+i.id)}let a=10;for(;s.length>0&&document.querySelectorAll(s.join(",")).length>0&&a>0;)await je(100),a--;for(let i of e.add?.components||[]){const r=await this.workspace.addComponent(i.name,{outputs:i.outputs.map(o=>o.name),inputs:i.inputs.map(o=>o.name),outputProps:i.outputs,inputProps:i.inputs,data:i.data,top:i.top,left:i.left,width:i.width,title:i.title||"",aiTitle:i.aiTitle||"",description:i.description||"",uid:i.id,template:i.template},!1)}if(await je(300),n.length>0)for(let i of n){const r=document.getElementById(i.sourceId),o=document.getElementById(i.targetId);if(!r||!o)continue;const c=r.querySelectorAll(".output-container .endpoint")?.[i.sourceIndex],l=o.querySelectorAll(".input-container .endpoint")?.[i.targetIndex],u=this.workspace.jsPlumbInstance.connect({source:c.endpoint,target:l.endpoint,detachable:!0,cssClass:"exclude-panzoom"});this.workspace.updateConnectionStyle(u)}for(let i of e.add?.connections||[]){const r=document.getElementById(i.sourceId),o=document.getElementById(i.targetId);if(!r||!o)continue;const c=r.querySelectorAll(".output-container .endpoint")?.[i.sourceIndex],l=o.querySelectorAll(".input-container .endpoint")?.[i.targetIndex];if(!c||!l||!c?.endpoint||!l?.endpoint)continue;const u=this.workspace.jsPlumbInstance.connect({source:c.endpoint,target:l.endpoint,detachable:!0,cssClass:"exclude-panzoom"});this.workspace.updateConnectionStyle(u)}await je(100),this.lastState=this.processState(await this.workspace.export(!1))}catch(n){console.error("Error during redo",n)}return this.unlock(),this.workspace.saveAgent(void 0,void 0,void 0,void 0,!1),e}}initState(){}};r6(Em,"StateManager");let l6=Em;var Am={exports:{}};(function(t,e){(function(n,s){s()})(ht,function(){function n(l,u){return typeof u>"u"?u={autoBom:!1}:typeof u!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),u={autoBom:!u}),u.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(l.type)?new Blob(["\uFEFF",l],{type:l.type}):l}d(n,"b");function s(l,u,p){var g=new XMLHttpRequest;g.open("GET",l),g.responseType="blob",g.onload=function(){c(g.response,u,p)},g.onerror=function(){console.error("could not download file")},g.send()}d(s,"c");function a(l){var u=new XMLHttpRequest;u.open("HEAD",l,!1);try{u.send()}catch{}return 200<=u.status&&299>=u.status}d(a,"d");function i(l){try{l.dispatchEvent(new MouseEvent("click"))}catch{var u=document.createEvent("MouseEvents");u.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),l.dispatchEvent(u)}}d(i,"e");var r=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof ht=="object"&&ht.global===ht?ht:void 0,o=r.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),c=r.saveAs||(typeof window!="object"||window!==r?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(l,u,p){var g=r.URL||r.webkitURL,y=document.createElement("a");u=u||l.name||"download",y.download=u,y.rel="noopener",typeof l=="string"?(y.href=l,y.origin===location.origin?i(y):a(y.href)?s(l,u,p):i(y,y.target="_blank")):(y.href=g.createObjectURL(l),setTimeout(function(){g.revokeObjectURL(y.href)},4e4),setTimeout(function(){i(y)},0))}:"msSaveOrOpenBlob"in navigator?function(l,u,p){if(u=u||l.name||"download",typeof l!="string")navigator.msSaveOrOpenBlob(n(l,p),u);else if(a(l))s(l,u,p);else{var g=document.createElement("a");g.href=l,g.target="_blank",setTimeout(function(){i(g)})}}:function(l,u,p,g){if(g=g||open("","_blank"),g&&(g.document.title=g.document.body.innerText="downloading..."),typeof l=="string")return s(l,u,p);var y=l.type==="application/octet-stream",w=/constructor/i.test(r.HTMLElement)||r.safari,S=/CriOS\/[\d]+/.test(navigator.userAgent);if((S||y&&w||o)&&typeof FileReader<"u"){var m=new FileReader;m.onloadend=function(){var j=m.result;j=S?j:j.replace(/^data:[^;]*;/,"data:attachment/file;"),g?g.location.href=j:location=j,g=null},m.readAsDataURL(l)}else{var D=r.URL||r.webkitURL,A=D.createObjectURL(l);g?g.location=A:location.href=A,g=null,setTimeout(function(){D.revokeObjectURL(A)},4e4)}});r.saveAs=c.saveAs=c,t.exports=c})})(Am);var u6=Am.exports,c6=Object.defineProperty,gu=d((t,e)=>c6(t,"name",{value:e,configurable:!0}),"l$1");function _m(){const t=document.getElementById("agent-template-id-input"),e=document.getElementById("agent-template-name-input"),n=document.getElementById("agent-template-description-input"),s=document.getElementById("agent-template-icon-input"),a=document.getElementById("agent-template-category-input"),i=document.getElementById("agent-template-publish-input"),r=document.getElementById("agent-template-color-input"),o=document.getElementById("agent-template-image-url-input"),c=document.getElementById("agent-template-doc-link-input"),l=document.getElementById("agent-template-video-link-input"),u=document.getElementById("agent-template-value-proposition-input"),p=e?.value||this.agent.name||"Untitled";return{id:t?.value||Ib(p),name:p,description:n?.value||this.agent?.shortDescription||this.agent?.description||"",icon:s?.value||"",category:a?.value||"",publish:i?.checked||!1,color:r?.value||"#000000",imageUrl:o?.value||"",docLink:c?.value||"",videoLink:l?.value||"",valueProposition:u?.value||""}}d(_m,"getTemplateInfo"),gu(_m,"getTemplateInfo");async function km(){if(this.locked||!this.agent.id)return!1;console.log("Template saving...");try{const t=await this.export();if(delete t.debugSessionEnabled,!t?.templateInfo){const n=this.getTemplateInfo();t.templateInfo=n}const e=t?.templateInfo?.id;return await fetch("/api/page/builder/agent-templates",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),await this.saveAgent(this.agent?.name,this.agent?.domain,t),e}catch(t){throw t}}d(km,"saveTemplate"),gu(km,"saveTemplate");async function Pm(){if(this.locked||!this.agent.id)return!1;console.log("Template exporting...");try{const t=await this.export(),e=this.getTemplateInfo(),n={...t,templateInfo:e};try{const i=document.querySelector('textarea[name="introMessage"]')??`Hi, I'm ${this.agent.name||"an AI Agent"}. How can I help you today?`;i&&!n?.introMessage&&(i instanceof HTMLTextAreaElement?n.introMessage=i.value:n.introMessage=i)}catch(i){console.error("Error trying to access introMessage textarea:",i)}delete n.debugSessionEnabled;const s=new Blob([JSON.stringify(n)],{type:"text/plain;charset=utf-8"}),a=n?.templateInfo?.id;return u6.saveAs(s,`${a}.smyth`),a}catch(t){throw console.error("Error exporting template:",t),t}}d(Pm,"exportTemplate"),gu(Pm,"exportTemplate");var d6=Object.defineProperty,bu=d((t,e)=>d6(t,"name",{value:e,configurable:!0}),"A");sm();function vu(t){if(t.search("rgb")==-1)return t;t=t.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(,\s?\d+\.\d+)?\);?$/);function e(n){return("0"+parseInt(n).toString(16)).slice(-2)}return d(e,"C"),bu(e,"hex"),"#"+e(t[1])+e(t[2])+e(t[3])}d(vu,"q"),bu(vu,"rgb2hex");const Lt={conStartColor:"#3C89F9",conEndColor:"#F35063"},p6=class Ai extends Oa{static{d(this,"b")}constructor(e,n){super(),this.container=e,this.server=n,this.clipboard=new R3(this),this.stateManager=new l6(this),this.collapsed=!1,this._locked=!1,this.jsPlumbInstance=Jc.jsPlumb.getInstance(),this._loading=!1,this._saving=!1,this.scale=1,this.serverData={debugUrl:"",docUrl:""},this.userData={},this.teamData={},this.hoveredElement=null,this.mouseCoords={x:0,y:0},this._draggingConnection=null,this.pendingAddComponent=null,this.deployments={},this.domainData={},this.componentTemplates={},this.ACL={},this._suspendConnectionRestyle=!1,this.agent=new Lb(this.server),this.registerAgentEvents(),this.domElement=document.getElementById("workspace"),this.domElement||(this.domElement=document.createElement("div"),this.domElement.id="workspace",e&&e.appendChild(this.domElement)),window.addEventListener("queryClientInvalidate",s=>{s.detail.queryKey.includes("latest_deployment")&&this.getDeploymentInfo().then(a=>{this.emit("deploymentsUpdated",a)})}),this.jsPlumbInstance.setContainer(this.domElement),this.jsPlumbInstance.importDefaults({Connector:["SmythBezier",{curviness:160}],PaintStyle:{strokeWidth:2,stroke:`${Lt.conStartColor}bb`,gradient:{stops:[[0,`${Lt.conStartColor}bb`],[1,`${Lt.conEndColor}bb`]]}},Endpoint:["Dot",{radius:1}],EndpointStyle:{fill:"transparent"},Anchors:["Right","Left"],Overlays:[["Arrow",{width:10,length:10,location:.9,PaintStyle:{fill:"#ffffff55"}}]]}),this.jsPlumbInstance.bind("beforeDrop",s=>(console.log("beforeDrop: ",s),!(this.collapsed||this.locked||this.jsPlumbInstance.getConnections({source:s.sourceId,target:s.targetId}).length>0))),this.jsPlumbInstance.bind("connection",async s=>{Ja.isCardConn(s)&&Ja.setConnPaintStyles(s.connection),this.updateConnectionColors(s.connection),this.updateConnectionStyle(s.connection),s.connection.bind("click",async r=>{if(!this.collapsed){if(this.locked)return!1;await Mn("","Are you sure you want to delete this connection?",{btnNoLabel:"No, Cancel",btnYesLabel:"Yes, I'm sure",btnYesClass:"bg-smyth-red-500 border-smyth-red-500"})&&this.jsPlumbInstance.deleteConnection(r)}}),await this.checkConnectionsConsistency(s.connection)&&this.jsPlumbInstance.deleteConnection(s.connection),Ja.checkConnValidity(s)||this.jsPlumbInstance.deleteConnection(s.connection);//! SHOULDN'T WE ABORT EARLY IF THERE WAS A CONFLICT!!?? I feel like it aborts and works correctly
//! but cannot detect how and where does it abort if a conflict or non-valid conn was detected
const a=s.source.closest(".component")?._control,i=s.target.closest(".component")?._control;a?.emit("connectionAttached",s.source.getAttribute("smt-name"),s.source,s),i?.emit("connectionAttached",s.target.getAttribute("smt-name"),s.target,s),setTimeout(()=>{this.saveAgent()},300)}),this.jsPlumbInstance.bind("connectionDrag",s=>{this._draggingConnection=s,s._originalPaintStyle=s.getPaintStyle(),s.setPaintStyle({stroke:Lt.conStartColor,strokeWidth:4}),s.endpoints.forEach(a=>{a._domElement&&a._domElement.classList.add("active")})}),this.jsPlumbInstance.bind("connectionDragStop",s=>{this._draggingConnection=null,s._originalPaintStyle&&(s.setPaintStyle(s._originalPaintStyle),delete s._originalPaintStyle),s.endpoints.forEach(a=>{a._domElement&&a._domElement.classList.remove("active")}),this.updateConnectionColors(s),this.setComponentsTags()}),this.jsPlumbInstance.bind("beforeDetach",s=>{if(this.collapsed||this.locked)return!1;s._originalPaintStyle&&(s.setPaintStyle(s._originalPaintStyle),delete s._originalPaintStyle),s.endpoints.forEach(a=>{a._domElement&&a._domElement.classList.remove("active")})}),this.jsPlumbInstance.bind("connectionDetached",s=>{const a=s.source.closest(".component")?._control,i=s.target.closest(".component")?._control;a&&a.emit("connectionDetached",s.source.getAttribute("smt-name"),s.source,s),i&&i.emit("connectionDetached",s.target.getAttribute("smt-name"),s.target,s),setTimeout(async()=>{await this.checkConnectionsConsistency(),this.saveAgent()},300)}),this.initEvents(),wm(this),Sm(this),om(this),qd(this),im(),this.initMonitor(),em(this.monitor)}get locked(){return this._locked||this._loading}set locked(e){this._locked=e}get RSidebarComponent(){return Be.curComponentSettings}async getDeploymentInfo(){const e=`${this.server}/api/page/builder/ai-agent/${this.agent.id}/deployments`,n=await fetch(e).then(a=>a.json());this.deployments=n?.deployments;const s=await fetch("/api/page/builder/domains",{method:"GET",headers:{"Content-Type":"application/json"}});return this.domainData=await s.json(),n}updateConnectionStyle(e){if(this._suspendConnectionRestyle)return;const n=e.source,s=e.target;if(!n||!s)return;const a=n.closest(".component"),i=s.closest(".component");if(!a||!i)return;e.removeAllOverlays();const r=n.getBoundingClientRect(),o=s.getBoundingClientRect(),c=a.getBoundingClientRect(),l=i.getBoundingClientRect();if(r.right>o.left){const u=c.left-l.left>100&&c.top-l.bottom>100?80:30;e.setConnector(["SmythFlowchart",{stub:15,gap:4,cornerRadius:u,alwaysRespectStubs:!0}]),e.removeOverlay("Custom"),e?.__smt_overlay?e.addOverlay(["Custom",{create:function(p){const g=document.createElement("div");return g.innerHTML=e?.__smt_overlay,g},location:.3,id:"Custom"}]):e.addOverlay(["Arrow",{width:10,length:10,location:u==30?.8:.9,PaintStyle:{fill:"#ffffff55"}}])}else{const u=o.left-r.right;u<200?e.connector.type!=="SmythBezier"&&e.setConnector(["SmythBezier",{curviness:160}]):e.connector.type!=="SmythFlowchart"&&e.setConnector(["SmythFlowchart",{stub:15,gap:4,cornerRadius:30,alwaysRespectStubs:!0}]),e.removeOverlay("Custom"),e?.__smt_overlay?e.addOverlay(["Custom",{create:function(p){const g=document.createElement("div");return g.innerHTML=e?.__smt_overlay,g},location:.3,id:"Custom"}]):e.addOverlay(["Arrow",{width:10,length:10,location:u>=200?.9:.8,PaintStyle:{fill:"#ffffff55"}}])}}updateConnectionColors(e){if(!e?.endpoints?.[0]?._domElement?.querySelector(".ep"))return;const n=e?.__smt_color||e?.__smt_startColor||vu(e?.endpoints?.[0]?._domElement?.querySelector(".ep")?.style.backgroundColor)||`${Lt.conStartColor}`,s=e?.__smt_color||e?.__smt_endColor||vu(e?.endpoints?.[1]?._domElement?.querySelector(".ep")?.style.backgroundColor)||`${Lt.conEndColor}`,a=e?.__smt_thickness||parseInt(e?.endpoints?.[0]?._domElement?.querySelector(".ep")?.getAttribute("smt-con-thickness")||2),i=e?.endpoints?.[0]?._domElement?.querySelector(".ep")?.getAttribute("smt-con-hide-overlays")==="true",r=e?.__smt_dashstyle||void 0;e.setHoverPaintStyle({stroke:`${Lt.conStartColor}`,strokeWidth:a+1,gradient:{stops:[[0,n],[1,s]]}}),e.setPaintStyle({strokeWidth:a,stroke:n+"cc",...r?{dashstyle:r}:{},gradient:{stops:[[0,n+"cc"],[1,s+"cc"]]}}),i&&e.hideOverlays(),e.removeOverlay("Custom"),e?.__smt_overlay&&e.addOverlay(["Custom",{create:function(o){const c=document.createElement("div");return c.innerHTML=e?.__smt_overlay,c},location:.3,id:"Custom"}]),setTimeout(this.saveAgent.bind(this),300)}static getInstance(e={container:HTMLElement,server:String}){return Ai.instance||(Ai.instance=new Ai(e.container,e.server)),Ai.instance}async loadAgent(e,n){if(await this.agent.load(e,{lockAfterFetch:n?.lockAfterFetch||!1})&&this.import(this.agent.data).then(()=>{this.emit("agentUpdated",this.agent),this.setAgentInfo(this.agent.id,this.agent.name,this.agent.domain,this.agent.data),this.emit("AgentReady",this.agent)}),this.agent.data?.ui?.panzoom){const s=document.getElementById("zoom"),a=s.style.transition;s.style.transition="none";const i=this.agent.data.ui.panzoom;this.domElement.style.opacity="0",await je(300),i?.currentPan&&this.panzoom?.pan(i?.currentPan.x,i?.currentPan.y),i?.currentZoom&&this.panzoom?.zoom(i?.currentZoom),this.scale=i?.currentZoom,this.jsPlumbInstance.setZoom(i?.currentZoom),await je(100),this.domElement.style.opacity="1",s.style.transition=a}this.emit("AgentLoaded",this.agent),this.getDeploymentInfo(),this.populateSharedState()}populateSharedState(){let e=this.agent.domain;const n=`${this.agent.id}.${this.serverData.prod_agent_domain}`;if(!e&&this.deployments?.length>0){const a=this.domainData?.filter(i=>i.aiAgent.id===this.agent.id);a.length>0?e=a[0].name:e=n}const s=this.serverData?.agent_domain?.includes(":")?"http":"https";qt.setState({agentDomains:{dev:`${this.agent.id}.${this.serverData.agent_domain}`,prod:e||null,defaultProd:n,scheme:s}}),console.log("Populated shared state")}async loadUserSubscription(){try{const e=await(await fetch("/api/page/user/me/subscription")).json();this.userData.subscription=e?.teamsSubs}catch(e){console.error("Failed to load user subscription:",e),this.userData.subscription=null}}async saveAgent(e,n,s,a,i=!0){if(await je(400),!this._loading){if(this._saving){i&&await this.export(i);return}this._saving=!0,this.setComponentsTags(),e||(e=this.agent?.name),a||(a=this.agent?.id),s||(s=await this.export(i)),n||(n=this.agent?.domain),i&&this.emit("AgentSaving",this.agent,s),this.updateAgentSaveStatus("","progress");try{const r=await this.agent.save(e,n,s,a);return r&&this.setAgentInfo(r.id,r.name,r.domain,r.data),await this.setComponentsTags(),this._saving=!1,i&&this.emit("AgentSaved",this.agent,s),this.updateAgentSaveStatus("","success"),e&&(document.title=e+" | SmythOS"),r}catch(r){this._saving=!1,console.error("Error",r),typeof r?.error=="string"&&(r.error.includes("403")?Xe("You are not authorized to save or create agent"):Xe(r.error)),this.updateAgentSaveStatus("Error","alert")}}}async createAgent(e,n="",s){const a={description:n,components:[],connections:[]};return this.agent.resetData(),typeof s=="function"&&s(a),this.saveAgent(e,"",a)}setAgentInfo(e,n,s,a){this.agent.setData({id:e,name:n,domain:s,data:a});const i=document.getElementById("agent-name-input"),r=document.getElementById("agent-id-input"),o=document.getElementById("agent-behavior-input");r&&(r.value=e),i&&(i.value=n),o&&(o.value=a.behavior||a.description),Au(n),_u(n),this.emit("agentUpdated",this.agent)}updateAgentSaveStatus(e,n){const s=document.getElementById("agent-top-bar-status"),a=document.getElementById("agent-save-status");s&&(s.classList.remove("st-success","st-alert","st-info","st-progress"),n&&s.classList.add("st-"+n)),!(!a||!a.textContent)&&(a.textContent=e,a.classList.remove("st-success","st-alert","st-info","st-progress"),n&&a.classList.add("st-"+n))}async deleteAgent(e){try{const n=await this.agent.delete(e);return console.log("Agent Delete result",n),n.error||!n?.success?!1:(this.domElement.innerHTML="",!0)}catch(n){return Xe(n.message??"Deleting Failed"),!1}}redraw(){this.jsPlumbInstance.repaintEverything()}toggleJsPlumbInteractions(e){var n=document.querySelectorAll(".jsplumb-draggable");n.forEach(function(s){var a=this.jsPlumbInstance.getEndpoints(s);a&&a.forEach(function(i){i.setDraggable(e)}),this.jsPlumbInstance.setDraggable(s,e)})}areComponentsCollapsed(){return this.collapsed}collapseComponents(){this.domElement.classList.add("collapsed"),this.redraw(),this.collapsed=!0,this.toggleJsPlumbInteractions(!1)}expandComponents(){this.domElement.classList.remove("collapsed"),this.redraw(),this.collapsed=!1,this.toggleJsPlumbInteractions(!0)}async copyComponent(e){const n=document.getElementById(e),s=n._control;if(!n||!s)return null;const a=s.constructor.name,i=JSON.parse(JSON.stringify(s.properties));delete i.uid,delete i.sender,i.top=parseInt(i.top)+100+"px",i.left=parseInt(i.left)+40+"px";const r=await this.addComponent(a,i,!1);return r.style.zIndex="999",r.classList.add("selected"),r}async zoomTo(e){const n=this.panzoom.zoom(e,{animate:!0,duration:150,easing:"ease-out"});this.scale=n.scale,this.jsPlumbInstance.setZoom(n.scale)}initEvents(){this.initServerData();const e=this.jsPlumbInstance;e.ready(()=>{setTimeout(()=>{document.querySelectorAll(".ribbon-menu button").forEach(o=>o.setAttribute("disabled","disabled"))},100);const n=this.container,s=this.domElement,a=document.getElementById("zoom");let i=1;s.addEventListener("click",async o=>{const c=s.getBoundingClientRect(),l=Math.round((o.clientX-c.x)/i),u=Math.round((o.clientY-c.y)/i);if(this.pendingAddComponent){const p=this.pendingAddComponent.name,g=this.pendingAddComponent.properties,y=this.pendingAddComponent.triggerSettings;g.top||(g.top=u-20+"px"),g.left||(g.left=l-85+"px"),g.sender&&g.sender.classList.remove("active");const w=To[p]||To.Component,S=new w(this,{...g},y);await S.ready(),g.data&&(S.data=g.data);const m=S.domElement;this.pendingAddComponent.resolve(m),this.pendingAddComponent=null}}),this.panzoom=Xc(a,{canvas:!1,animate:!0,noBind:!0,excludeClass:"exclude-panzoom",cursor:"default",smoothScroll:!0,duration:300,easing:"ease-out",handleStartEvent(o){}});const r=a.parentElement;n.addEventListener("pointerdown",o=>{this.panzoom.handleDown(o)}),document.addEventListener("pointermove",o=>{o.ctrlKey||o.metaKey||this.panzoom.handleMove(o)}),document.addEventListener("pointerup",this.panzoom.handleUp),r.addEventListener("wheel",o=>{if(!o.ctrlKey&&!o.metaKey){if(this.hoveredElement.tagName=="TEXTAREA"||this.hoveredElement.tagName=="INPUT"||this.hoveredElement.classList.contains("dbg")||this.hoveredElement.closest(".dbg"))return;if(o.shiftKey){const y=this.panzoom.getPan();this.panzoom.pan(y.x-o.deltaY*.7/this.scale,y.y);return}const g=this.panzoom.getPan();this.panzoom.pan(g.x,g.y-o.deltaY*.7/this.scale);return}o.preventDefault();const c=this.panzoom.getScale(),l=Math.abs(o.deltaY)<50?.04:.1;let u=c;if(o.deltaY>0?u=Math.max(c-l*c,this.panzoom.getOptions().minScale):u=Math.min(c+l*c,this.panzoom.getOptions().maxScale),Math.abs(u-c)<.001)return;const p=this.panzoom.zoomToPoint(u,o,{animate:!0,duration:150,easing:"ease-out"});this.scale=p.scale,e.setZoom(p.scale)}),this.handleSelection(),this.preloadComponentsTemplates(),document.addEventListener("wheel",o=>{(o.ctrlKey||o.metaKey)&&o.preventDefault()},{passive:!1})}),document.addEventListener("mouseover",n=>{this.hoveredElement=n.target}),document.addEventListener("mousemove",n=>{const s=this.domElement.getBoundingClientRect(),a=Math.round((n.clientX-s.x)/this.scale),i=Math.round((n.clientY-s.y)/this.scale);this.mouseCoords.x=a,this.mouseCoords.y=i})}handleSelection(){let e=!1,n={x:0,y:0},s=null;document.getElementById("workspace-container").addEventListener("mousedown",a=>{document.querySelectorAll("#workspace-container .component").forEach(i=>i.classList.remove("selected","unselected")),li()}),document.addEventListener("mousedown",a=>{const i=a.target;(a.ctrlKey||a.metaKey)&&!i.classList.contains("component")&&(e=!0,n={x:a.clientX,y:a.clientY},s=document.createElement("div"),s.classList.add("selection-rectangle"),s.style.left=`${a.clientX}px`,s.style.top=`${a.clientY}px`,document.body.appendChild(s),s.style.border="1px dashed black",s.style.background="#00000010",s.style.position="fixed",s.style.pointerEvents="none")}),document.addEventListener("mousemove",a=>{if(e){const i=a.clientX-n.x,r=a.clientY-n.y;s.style.width=`${Math.abs(i)}px`,s.style.height=`${Math.abs(r)}px`,s.style.left=`${i>0?n.x:a.clientX}px`,s.style.top=`${r>0?n.y:a.clientY}px`}}),document.addEventListener("mouseup",()=>{if(e){const a=document.querySelector(".component.active");a&&a?.classList?.remove("active"),e=!1;const i=s.getBoundingClientRect();document.body.removeChild(s),s=null,Array.from(document.querySelectorAll(".component")).forEach(r=>{const o=r.getBoundingClientRect();o.top>=i.top&&o.bottom<=i.bottom&&o.left>=i.left&&o.right<=i.right?(r.classList.add("selected"),r.classList.remove("unselected")):(r.classList.remove("selected"),r.classList.add("unselected"))})}})}async preloadComponentsTemplates(){((await fetch("/api/page/builder/app-config/components").then(e=>e.json()))?.components||[]).forEach(e=>{try{this.componentTemplates[e.id]=JSON.parse(e.data)}catch{}})}async initServerData(){const e=await fetch("/api/status").then(n=>n.json());this.serverData.baseUrl=e.status.url,this.serverData.frontUrl=e.status.frontUrl,this.serverData.debugUrl=e.status.url+"/api",this.serverData.docUrl=Ut,this.serverData.dbgUrl=e.status.dbg_url,this.serverData.agent_domain=e.status.agent_domain,this.serverData.env=e.status.env,this.serverData.status=e.status.server,this.serverData.prod_agent_domain=e.status.prod_agent_domain,this.userData={...e.status.user},this.teamData={...e.status.team},this.emit("ServerDataLoaded")}waitServerData(){return new Promise(e=>{if(this.serverData.baseUrl)e(this.serverData);else{const n=setInterval(()=>{this.serverData.baseUrl&&(clearInterval(n),e(this.serverData))},100)}})}addComponent(e,n={outputs:void 0,inputs:void 0,data:{},top:"",left:"",sender:null},s){return new Promise(async(a,i)=>{if(n?.data?.headers&&(n.data.headers=$a(n.data.headers)),n?.data?.body&&(n.data.body=$a(n.data.body)),n?.data?.metadata&&(n.data.metadata=$a(n.data.metadata)),n?.data){for(const l in n.data)if(l.startsWith("KVJSON")){const u=n.data[l];n.data[l]=$a(u)}}if(n?.data?._templateVars){for(const l in n.data._templateVars)if(l.startsWith("KVJSON")){const u=n.data._templateVars[l];n.data._templateVars[l]=$a(u)}}if(n.uid){const l=document.getElementById(n.uid);if(l)return console.warn("Tried to create the same component twice ==> returning existing component"),a(l)}if(n.sender){if(n.sender.classList.contains("active"))return n.sender.classList.remove("active"),n.sender.parentElement.classList.remove("active"),this.pendingAddComponent=null,a(null);document.querySelectorAll("#left-menu [smt-component]").forEach(l=>{l.classList.remove("active"),l.parentElement.classList.remove("active")}),this.pendingAddComponent={name:e,properties:n,triggerSettings:s,resolve:a,reject:i}}const r=To[e]||To.Component,o=new r(this,{...n},s);await o.ready(),this.emit("componentAdded",o),n.data&&(o.data=n.data);const c=o.domElement;this.pendingAddComponent=null,a(c)})}addConnection(e,n,s,a,i=!0){const r=typeof e=="string"?document.getElementById(e):e,o=typeof n=="string"?document.getElementById(n):n;let c,l;if(typeof s=="string"?(c=r.querySelector(`.output-endpoint[smt-name='${s}']`),c||(c=r.querySelector(`.output-endpoint[smt-expression='${s}']`))):c=[...r.querySelectorAll(".output-endpoint")][s],typeof a=="string"?(l=o.querySelector(`.input-endpoint[smt-name='${a}']`),l||(l=o.querySelector(`.input-endpoint[smt-expression='${a}']`))):l=[...o.querySelectorAll(".input-endpoint")][a],this.jsPlumbInstance.getConnections({source:c,target:l}).length>0){console.warn("Connection already exists, Skip AddConnection  ...");return}const u=this.jsPlumbInstance.connect({source:c.endpoint,target:l.endpoint,detachable:!0,cssClass:"exclude-panzoom"});return this.updateConnectionStyle(u),i&&setTimeout(()=>{this.jsPlumbInstance.repaint(r),this.jsPlumbInstance.repaint(o)},300),u}deleteConnection(e,n,s,a){const i=typeof e=="string"?document.getElementById(e):e,r=typeof n=="string"?document.getElementById(n):n;let o,c;typeof s=="string"?o=i.querySelector(`.output-endpoint[smt-name='${s}']`):o=[...i.querySelectorAll(".output-endpoint")][s],typeof a=="string"?c=r.querySelector(`.input-endpoint[smt-name='${a}']`):c=[...r.querySelectorAll(".input-endpoint")][a];const l=this.jsPlumbInstance.getConnections({source:o,target:c});l.length>0&&this.jsPlumbInstance.deleteConnection(l[0])}extractComponentInputProps(e,n){const s=e._control,a={};for(let i in s.inputSettings){let r=n.getAttribute(`smt-${i}`);r==="true"&&(r=!0),r==="false"&&(r=!1),r&&(a[i]=r)}return a}extractComponentOutputProps(e,n){const s=e._control,a={};for(let i in s.outputSettings){let r=n.getAttribute(`smt-${i}`);r==="true"&&(r=!0),r==="false"&&(r=!1),r&&(a[i]=r)}return a}async export(e=!0){const n=[...this.domElement.querySelectorAll(".component")].map(g=>{const y=g._control;return{id:g.id,name:g.querySelector(".title-bar").getAttribute("smt-name"),outputs:[...g.querySelectorAll(".output-endpoint")].map((w,S)=>({name:w.getAttribute("smt-name"),color:w.getAttribute("smt-color"),...this.extractComponentOutputProps(g,w),index:S,uuid:w.endpoint?.getUuid(),default:y.properties.defaultOutputs.includes(w.getAttribute("smt-name"))})),inputs:[...g.querySelectorAll(".input-endpoint")].map((w,S)=>({name:w.getAttribute("smt-name"),type:w.getAttribute("smt-type"),friendlyInputType:w.getAttribute("smt-friendly-input-type"),coreInputType:w.getAttribute("smt-core-input-type"),color:w.getAttribute("smt-color"),optional:w.getAttribute("smt-optional")==="true",...this.extractComponentInputProps(g,w),index:S,uuid:w.endpoint?.getUuid(),default:y.properties.defaultInputs.includes(w.getAttribute("smt-name"))})),data:y.data,top:g.style.top,left:g.style.left,width:g.style.width,height:g.style.height,displayName:y.drawSettings.displayName,title:y.title,aiTitle:y.aiTitle,description:y.description,template:y.properties.template}}),s=this.jsPlumbInstance.getAllConnections().map(g=>{const y=g.source,w=g.target,S=y.closest(".component"),m=w.closest(".component");return!S||!m?null:{sourceId:y.closest(".component").id,sourceIndex:[...y.parentElement.querySelectorAll(".output-endpoint")].findIndex(D=>D===y),targetId:w.closest(".component").id,targetIndex:[...w.parentElement.querySelectorAll(".input-endpoint")].findIndex(D=>D===w)}}).filter(g=>g),a=this.domElement.classList.contains("debug-enabled");let i=this.agent.data?.auth;const r=this.agent.data.variables;let o,c;if(this.panzoom&&(o=this.panzoom.getPan(),c=this.panzoom.getScale()),i?.provider)try{(await Tb(this.agent.id,i))?.success&&(i={method:i.method})}catch(g){console.error("Error saving agent auth data",g)}let l=document.querySelector(".agent-card"),u={left:"",top:""};l&&(u.left=l.style.left,u.top=l.style.top);const p={version:"1.0.0",id:this.agent.id,name:this.agent.name,teamId:this.teamData.id,parentTeamId:this.teamData.parentId,components:n,connections:s,description:this.agent.description,shortDescription:this.agent.shortDescription,behavior:this.agent.data.behavior,variables:r,debugSessionEnabled:a,auth:i,ui:{panzoom:{currentPan:o,currentZoom:c},agentCard:u},introMessage:this.agent.data.introMessage||""};return document.getElementById("agent-template-id-input")?.value&&(p.templateInfo=this.getTemplateInfo()),e&&this.emit("DataExported",p),p}migrateConfiguration(e){const n=JSON.parse(JSON.stringify(e));if(!n.version)for(const s of n.components)s.outputs=s.connectors,s.inputs=s.receptors,s.outputProps=s.connectorProps,s.inputProps=s.receptorProps,delete s.connectors,delete s.receptors,delete s.connectorProps,delete s.receptorProps;if(n.version==="1.0.0"){for(const s of n.components)if(s?.template?.settings)for(let a in s.template.settings){const i=s.template.settings[a];i.attributes&&i.attributes["data-vault"]=="true"&&(i.attributes["data-vault"]=`${s.name},ALL`)}n.description&&!n.behavior&&(n.behavior=n.description,this.agent.data.behavior=n.behavior)}return n}async import(e){try{e=this.migrateConfiguration(e),this._loading=!0,Ms("Loading Agent Data ..."),this.domElement.innerHTML="",this.jsPlumbInstance.deleteEveryConnection(),this.jsPlumbInstance.deleteEveryEndpoint(),Ms("Importing Components ...");const n={};for(const i of e.components){const r=await this.addComponent(i.name,{outputs:i.outputs.map(o=>o.name),inputs:i.inputs.map(o=>o.name),outputProps:i.outputs,inputProps:i.inputs,data:i.data,top:i.top,left:i.left,width:i.width,title:i.title||"",aiTitle:i.aiTitle||"",description:i.description||"",uid:i.id,template:i.template},!1);n[i.id]=r.id}Ms("Connecting Components ..."),await je(300);const s={},a=Date.now();this._suspendConnectionRestyle=!0,e.connections.forEach(async i=>{const r=`${i.sourceId}.${i.sourceIndex}:${i.targetId}.${i.targetIndex}`;if(s[r])return;const o=this.addConnection(i.sourceId,i.targetId,i.sourceIndex,i.targetIndex,!1);s[r]=o}),this._suspendConnectionRestyle=!1;for(const i of Object.values(s))setImmediate(()=>{this.updateConnectionStyle(i)});if(console.log("time taken",Date.now()-a),this.renderAgentCard(e),await this.setComponentsTags(),Ms("Almost Ready ..."),await je(200),this.redraw(),kr(),!this.getComponentsInViewPort().length){const i=this.domElement.querySelector(".component");this.scrollToComponent(i)}return setTimeout(()=>this.checkConnectionsConsistency(),1e3),this._loading=!1,this.emit("agentUpdated",this.agent),window.refetchSettingsSidebarData&&window.refetchSettingsSidebarData(),!0}catch(n){kr(),this._loading=!1,console.error("Error",n),Xe("Loading failed")}}renderAgentCard(e){let n=!1,s=!1,a={};if(e?.ui?.agentCard)a.left=e.ui.agentCard.left,a.top=e.ui.agentCard.top;else{const i=e?.components?.filter(r=>r.name==="APIEndpoint");if(console.log("skills to compare",i),i.length>0){const r=i.reduce((o,c)=>Number(o.top.split("px")[0]||0)<Number(c.top.split("px")[0]||0)?o:c);a.left=r.left.split("px")[0]-630+"px",a.top=r.top.split("px")[0]-250+"px",n=!0}else a.left="-700px",a.top="-6px",n=!0,s=!0}this.agentCard=new Ja(this,a,e),s&&this.agentCard.addEventListener("AgentCardCreated",()=>{this.scrollToAgentCard()}),n&&this.saveAgent()}getLock(){return this.locked}waitUnlock(e=1e4){return new Promise((n,s)=>{const a=Date.now(),i=setInterval(()=>{this.locked?Date.now()-a>e&&(clearInterval(i),s()):(clearInterval(i),n(!0))},500)})}lock(e){console.log("Locking Workspace"),this.locked=!0,document.querySelector("#builder-container")?.classList.remove("locked"),e?.showViewOnlyMsg&&this.toggleViewOnlyModeMsg(!0),Os(document.querySelector(".agentTab")),Os(document.querySelector(".deployTab")),Os(document.querySelector(".authTab")),Os(document.querySelector(".templateTab")),Os(document.querySelector(".agentBuilderTab"),["stop-btn","close-btn"]),Os(document.querySelector("#deploy-button-topbar")),window.dispatchEvent(new CustomEvent("update-widget-access",{detail:{writeAccess:!1}})),this.container.classList.add("locked"),document.body.classList.add("locked")}unlock(){console.log("Unlocking Workspace"),this.locked=!1,document.querySelector("#builder-container")?.classList.remove("locked"),this.toggleViewOnlyModeMsg(!1),Js(document.querySelector(".agentTab")),Js(document.querySelector(".deployTab")),Js(document.querySelector(".authTab")),Js(document.querySelector(".templateTab")),Js(document.querySelector(".agentBuilderTab")),Js(document.querySelector("#deploy-button-topbar")),window.dispatchEvent(new CustomEvent("update-widget-access",{detail:{writeAccess:!0}})),this.container.classList.remove("locked"),document.body.classList.remove("locked")}toggleViewOnlyModeMsg(e=!1){const n=document.getElementById("view-only-mode");n&&(e?(n.classList.remove("opacity-0"),n.classList.add("opacity-100"),n.classList.remove("hidden")):(n.classList.remove("opacity-100"),n.classList.add("opacity-0"),n.classList.add("hidden")))}registerAgentEvents(){this.agent.addEventListener("lock-as-view-mode",e=>{(e?.startsWith("unlock")||!e)&&this.lock({showViewOnlyMsg:!0})}),this.agent.addEventListener("lock",e=>{console.log("lock",e),(e?.startsWith("unlock")||!e)&&this.lock({showViewOnlyMsg:!1})}),this.agent.addEventListener("unlock",e=>{e?.startsWith("lock")&&this.unlock()})}getComponentsInViewPort(){const e=this.domElement.querySelectorAll(".component"),n=document.querySelector("#workspace-container").getBoundingClientRect(),s=[];for(let a of e){const i=a.getBoundingClientRect();i.top<n.bottom&&i.bottom>n.top&&i.left<n.right&&i.right>n.left&&s.push(a)}return s}scrollToComponent(e){if(!e||!e.classList.contains("component")||e.classList.contains("agent-card"))return;const n=this.panzoom,s=this.scale,a=e.getBoundingClientRect(),i=document.querySelector("#workspace-container").getBoundingClientRect();if(a.top<i.top||a.left<i.left||a.bottom>i.bottom||a.right>i.right){const r=(i.left-a.left+100)/s,o=(i.top-a.top+100)/s,c=n.getPan().x,l=n.getPan().y,u=Math.max(-1e4,Math.min(c+r,1e4)),p=Math.max(-1e4,Math.min(l+o,1e4));n.pan(u,p)}}scrollToAgentCard(){const e=this.panzoom,n=this.scale;if(!this.agentCard)return;const s=this.agentCard.domElement.getBoundingClientRect(),a=document.querySelector("#workspace-container").getBoundingClientRect();if(s.top<a.top||s.left<a.left||s.bottom>a.bottom||s.right>a.right){const i=(a.left-s.left+100)/n,r=(a.top-s.top+100)/n,o=e.getPan().x,c=e.getPan().y,l=Math.max(-1e4,Math.min(o+i,1e4)),u=Math.max(-1e4,Math.min(c+r,1e4));e.pan(l,u)}}getJsplumbConnection(e){const n=document.querySelector(`#${e.sourceId}`),s=document.querySelector(`#${e.targetId}`);if(!n||!s)return null;const a=n.querySelector(`.output-endpoint:nth-child(${e.sourceIndex+1})`),i=s.querySelector(`.input-endpoint:nth-child(${e.targetIndex+1})`);if(!a||!i)return null;const r=a,o=i;return this.jsPlumbInstance.getConnections({source:r,target:o})[0]}async checkConnectionsConsistency(e=null){const n=this.jsPlumbInstance;let s=!1;if(this._loading)return s;const a=this.jsPlumbInstance.getAllConnections();for(let r of a)delete r.___Async_tag,delete r.___Loop_tag;this.setComponentsTags();const i=this.jsPlumbInstance.getAllConnections();for(let r of i){let o=!1;const c=r.source.closest(".component"),l=r.target.closest(".component");if(!c||!l)continue;const u=c._control,p=l._control;if(!(!u||!p)){if(e||(e=r),p.constructor.name=="Async"&&c.___Async_tag=="async"||p.constructor.name=="Async"&&u.constructor.name=="Async"){s=!0,this.scrollToComponent(c);const g=n.getConnections({source:[...c.querySelectorAll(".output-endpoint")]});for(let y of g)y.__smt_overlay='<b style="color:red;position:relative;top:-20px">Conflict !!!</b>',y.__smt_color="#ff0000",y.__smt_thickness=8,this.updateConnectionColors(y),o=!0;await ls("Connection Consistency Check Failed",`Nested Async Component is not allowed ==> ${u.drawSettings.displayName} -> ${p.drawSettings.displayName}`),console.error(`Nested Async Component is not allowed ==> ${u.drawSettings.displayName} -> ${p.drawSettings.displayName}`,c,c.___Async_tag,l,l.___Async_tag,r)}else if(u.constructor.name!=="Async"&&c.___Async_tag!=="async"&&l.___Async_tag==="async"){s=!0,this.scrollToComponent(c);const g=n.getConnections({source:[...c.querySelectorAll(".output-endpoint")]});for(let y of g)y.__smt_overlay='<b style="color:red;position:relative;top:-20px">Conflict !!!</b>',y.__smt_color="#ff0000",y.__smt_thickness=8,this.updateConnectionColors(y),o=!0;await ls("Connection Consistency Check Failed",`Connection from Synchronous to Asynchronous component is not allowed ==> ${u.drawSettings.displayName} -> ${p.drawSettings.displayName}`),console.error(`Connection from Synchronous to Asynchronous component is not allowed ==> ${u.drawSettings.displayName} -> ${p.drawSettings.displayName}`,c,c.___Async_tag,l,l.___Async_tag,r)}if(r.___Loop_tag&&r.___Loop_tag!=l.___Loop_tag){s=!0,this.scrollToComponent(c);const g=n.getConnections({source:[...c.querySelectorAll(".output-endpoint")]});for(let y of g)y.__smt_overlay='<b style="color:red;position:relative;top:-20px">Conflict !!!</b>',y.__smt_color="#ff0000",y.__smt_thickness=8,this.updateConnectionColors(y),o=!0;await ls("Loop Branches Conflict Detected",`Loop Branches cannot be connected to other branches ==> ${u.drawSettings.displayName} -> ${p.drawSettings.displayName}`),console.error(`Loop Branches cannot be connected to other branches ==> ${u.drawSettings.displayName} -> ${p.drawSettings.displayName}`,c,l,r)}!o&&r.__smt_overlay&&(delete r.__smt_overlay,delete r.__smt_color,delete r.__smt_thickness,this.updateConnectionColors(r))}}return s}async setComponentsTags(){this.agent;const e=[...this.domElement.querySelectorAll(".component")];e.map(a=>a._control);const n=e.filter(a=>a._control.constructor.name=="Async"),s=e.filter(a=>a._control.constructor.name=="ForEach");for(let a of e)delete a.___Async_tag,delete a.___Loop_tag,a.classList.remove("async"),a._control.async=!1;for(let a of n){const i=[...new Set(this.jsPlumbInstance.getAllConnections().filter(r=>r.source.closest(".component")==a&&r.source.getAttribute("smt-name")!=="JobID").map(r=>({connection:r,component:r.target.closest(".component")})))].filter(r=>r.component);for(let r of i)this.recursiveSetChildTag(r,"Async","async")}for(let a of s){const i=[...new Set(this.jsPlumbInstance.getAllConnections().filter(o=>o.source.closest(".component")==a).map(o=>({connection:o,component:o.target.closest(".component")})))].filter(o=>o);let r=1;for(let o of i)this.recursiveSetChildTag(o,"Loop",r++,!1)}for(let a of e)a.___Async_tag||(a.classList.add("sync"),a.___Async_tag="sync")}recursiveSetChildTag(e,n,s,a=!0){const i=e.component;if(!i)return;const r=e.connection;i._control,i.classList.add(s);const o=`___${n}_tag`;if(i?.[o]===s&&r?.[o]===s)return;(i[o]&&a||i[o]===void 0)&&(i[o]=s),(r[o]&&a||r[o]===void 0)&&(r[o]=s);const c=[...new Set(this.jsPlumbInstance.getAllConnections().filter(l=>l.source.closest(".component")==i).map(l=>({connection:l,component:l.target.closest(".component")})))];for(let l of c)this.recursiveSetChildTag(l,n,s)}async saveTemplate(){return km.call(this)}async exportTemplate(){return Pm.call(this)}getTemplateInfo(){return _m.call(this)}initMonitor(){console.log("INIT MONITOR"),this.monitor&&this.monitor.close(),this.monitor=new i6(this);try{this.monitor.init()}catch(e){console.error("Failed to initialize monitor:",e)}}refreshComponentSelection(e){document.querySelectorAll("#workspace-container .component").forEach(n=>{if(n.classList.remove("selected","unselected"),!!e){if(n.id!==e.id){n.classList.add("unselected");return}n.classList.add("selected")}})}async updateWeaverData(e){this.userData.weaver=e}};bu(p6,"Workspace");var Dm=(t=>(t.APIEndpoint="/agent-studio/components/base/agent-skill",t.APIOutput="/agent-studio/components/base/api-output",t.Classifier="/agent-studio/components/base/classifier",t.GenAILLM="/agent-studio/components/base/gen-ai-llm",t.ImageGenerator="/agent-studio/components/base/image-generator",t.Note="/agent-studio/components/base/note",t.APICall="/agent-studio/components/advanced/api-call",t.Async="/agent-studio/components/advanced/async",t.Await="/agent-studio/components/advanced/await",t.Code="/agent-studio/components/advanced/code",t.ForEach="/agent-studio/components/advanced/for-each",t.JSONFilter="/agent-studio/components/advanced/json-filter",t.LLMAssistant="/agent-studio/components/advanced/llm-assistant",t.FSleep="/agent-studio/components/advanced/sleep",t.ComputerUse="/agent-studio/components/tools/computer-use",t.MCPClient="/agent-studio/components/tools/mcp-client",t.ServerlessCode="/agent-studio/components/tools/node-js",t.WebScrape="/agent-studio/components/tools/web-scrape",t.WebSearch="/agent-studio/components/tools/web-search",t.FEncDec="/agent-studio/components/crypto/encode-decode",t.FHash="/agent-studio/components/crypto/hash",t.FSign="/agent-studio/components/crypto/sign",t.FTimestamp="/agent-studio/components/crypto/timestamp",t.DataSourceCleaner="/agent-studio/components/rag-data/rag-forget",t.DataSourceIndexer="/agent-studio/components/rag-data/rag-remember",t.DataSourceLookup="/agent-studio/components/rag-data/rag-search",t.LogicAND="/agent-studio/components/logic/logical-and",t.LogicOR="/agent-studio/components/logic/logical-or",t.LogicXOR="/agent-studio/components/logic/logical-xor",t.LogicAtLeast="/agent-studio/components/logic/logical-at-least",t.LogicAtMost="/agent-studio/components/logic/logical-at-most",t.PromptGenerator="/agent-studio/components/legacy/llm-prompts",t.MultimodalLLM="/agent-studio/components/legacy/multimodal-llm",t.VisionLLM="/agent-studio/components/legacy/vision-llm",t.GPTPlugin="/agent-studio/integrations/openapi-integration",t.AgentPlugin="/agent-studio/integrations/smythos-agents-integration",t.HuggingFace="/agent-studio/integrations/hugging-face-integration",t.ZapierAction="/agent-studio/integrations/zapier-integration",t))(Dm||{}),h6=Object.defineProperty,zt=d((t,e)=>h6(t,"name",{value:e,configurable:!0}),"y");async function Im(t){const e=this;t.querySelector(".title");const n=t.querySelector(".dialog-actions");t.querySelector(".title-right-buttons");const s=t.querySelector(".title-left-buttons"),a=n.querySelector("button.del-btn");a.classList.remove("hidden"),a.onclick=e.delete.bind(this,!1);const i=e.properties?.template?.templateInfo?.docPath||"/not-set",r=e.properties?.template?e.workspace.serverData.docUrl+i:e.docUrl,o=s.querySelector(".action-help");o.onclick=()=>{window.open(r,"_blank")},e.properties?.template&&!e.properties?.template?.templateInfo?.docPath&&o.classList.add("hidden"),e.workspace?.locked?(Os(t,["close-btn","action-help"]),t.querySelector(".save-btn").classList.add("hidden"),t.querySelector(".del-btn").classList.add("hidden")):(t.querySelector(".save-btn").classList.remove("hidden"),t.querySelector(".del-btn").classList.remove("hidden"));const c=t.querySelector("form");function l(p){Mm(e)}d(l,"o"),zt(l,"handleChange");const u=Mb(l,500);c.addEventListener("input",function(p){(p.target.tagName==="INPUT"||p.target.tagName==="TEXTAREA")&&u(p)}),c.addEventListener("change",function(p){(p.target.tagName==="SELECT"||p.target.tagName==="INPUT"&&(p.target.type==="checkbox"||p.target.type==="radio"))&&u(p)}),e.emit("settingsOpened",t,this),this.loadingIcon&&(await new Promise(p=>setTimeout(p,500)),this.loadingIcon?.classList?.add("hidden"))}d(Im,"ee$1"),zt(Im,"onComponentLoad");function Lm(t){const e=this;e.properties.template,t.querySelector(".title");const n=t.querySelector(".dialog-actions"),s=t.querySelector(".title-right-buttons"),a=t.querySelector(".title-left-buttons");s.querySelector("button.close-btn").classList.remove("hidden"),s.querySelector("button.save-btn").classList.add("hidden"),n.querySelector("button.del-btn").classList.add("hidden"),a.querySelector(".action-help").classList.add("hidden"),e.data._templateVars;const i=e.properties?.template?.templateInfo,r=t.querySelector("form.Settings");if(r){const o=[...r.querySelectorAll(".form-box")],c=zt((l,u)=>{let p=/{{([A-Z]+):([\w\s]+):\[(.*?)\]}}/gm.exec(l.value);const g=l.closest(".form-box").querySelector(".chk-bind-setting");if(!g)return;const y=g?.previousElementSibling;p?(g.checked=!1,g.disabled=!0,g.classList.add("hidden"),y.innerHTML="Override Not allowed With Custom Variables"):(g.disabled=!1,g.classList.remove("hidden"),y.innerText="Allow Override")},"fieldChangeCheck");for(let l of o){const u=document.createElement("div");l.appendChild(u);const p=l.querySelectorAll("input, textarea");p?.forEach(j=>{j.addEventListener("change",L=>{console.log("Change Event",L),c(L.target)}),j.addEventListener("mouseout",L=>c(L.target)),j.addEventListener("keyup",L=>{(L.ctrlKey||L.metaKey)&&c(L.target)}),setTimeout(()=>c(j),1e3)}),r.addEventListener("mouseout",j=>{p.forEach(L=>{c(L)})});const g=document.createElement("div");g.className="float-right inline-block rounded-full",g.style.pointerEvents="auto";const y=document.createElement("div");y.className="bg-gray-300 rounded-full pr-6 pl-2 py-1 absolute inset-0",y.style.pointerEvents="none";const w=document.createElement("div");w.className="relative flex items-center gap-2",w.style.pointerEvents="none";const S=document.createElement("label");S.innerText="Allow Override",S.className="px-1 cursor-pointer";const m=document.createElement("input");m.type="checkbox",m.className="chk-bind-setting w-4 h-4 text-gray-600 focus:outline-none cursor-pointer relative z-10",m.style.pointerEvents="auto";const D=`chk-${l.getAttribute("data-field-name")}`;m.id=D,S.htmlFor=D,w.appendChild(S),w.appendChild(m),g.appendChild(y),g.appendChild(w),u.appendChild(g);const A=l.getAttribute("data-field-name");m.checked=A&&i?.includedSettings?.includes(A)}}}d(Lm,"te$1"),zt(Lm,"onTemplateCreateLoad");async function yu(t){if(!t){console.log("Invalid form");return}const e=this,n=t.Settings;if(e.emit("settingsSaving",n),n?.prompt&&(e.title===e.displayName||e.aiTitle===e.title)){const s=e.settingsEntries;n?.prompt&&n?.prompt!==s?.prompt?.value&&await e.updateTitle()}if(!await e.save(n)){Xe("Error saving settings");return}if(e.properties.template){const s=e.templateSettings;e.data._templateVars;const a=e.properties?.template?.templateInfo?.includedSettings||[];for(let i of a)e.data[i]=n[i];e.data._templateVars={};for(let i in s)e.data._templateVars[i]=n[i]}else for(let s in e.settings)e.data[s]=n[s];e.emit("settingsSaved",n),document.dispatchEvent(new CustomEvent("componentSettingsSaved",{detail:{componentId:e.uid,settings:n}})),e.emit("settingsClosed"),e.domElement.classList.remove("active"),Be.curComponentSettings=null,await je(100),e.workspace.saveAgent(),e.unsetTemplateEditMode()}d(yu,"K"),zt(yu,"onSave");async function Tm(t){const e=this,n=t.Settings;let s={};for(let a in n)s[a]=n[a]?.value||"";e.emit("settingsDraftUpdated",s)}d(Tm,"le$1"),zt(Tm,"onDraft");const f6={html1:{type:"div",classOverride:"all-initial p-2 px-4",html:`
<h1 class="text-lg font-bold text-emerald-600 mt-6">Component Template Builder Help</h1>

<div class="bg-gray-200 p-4 rounded-md" ><b>Note : </b> This help section explains the usage of custom template variables, this is an MVP implementation, a <b>Visual Editor</b> will replace it later</div>

<p class="mt-4">You can use the following annotations inside text inputs in order to generate additional fields in the new component : </p>
<ul>
<li><b class="w-8"> * Select</b> : {{<span class="font-bold text-indigo-700">SELECT</span>:<span class="font-bold text-emerald-700">Select label</span>:<span class="font-bold text-blue-700">["value1", "value2", "value3"]</span>}}</li>
<li><b class="w-8"> * Range</b> : {{<span class="font-bold text-indigo-700">RANGE</span>:<span class="font-bold text-emerald-700">Range label</span>:<span class="font-bold text-blue-700">{"min":0,"max":10,"step":1,"value":5}</span>}}</li>
<li><b class="w-8"> * Key-Value</b> : {{<span class="font-bold text-indigo-700">KVJSON</span>:<span class="font-bold text-emerald-700">KV label</span>:<span class="font-bold text-blue-700">{"field1":"value1","field2":10,"field3":""}</span>}}</li>
<li><b class="w-8"> * Text Input</b> : {{<span class="font-bold text-indigo-700">INPUT</span>:<span class="font-bold text-emerald-700">Input label</span>:<span class="font-bold text-blue-700">[""]</span>}} </li>
<li><b class="w-8"> * Text Area</b> : {{<span class="font-bold text-indigo-700">TEXTAREA</span>:<span class="font-bold text-emerald-700">Input label</span>:<span class="font-bold text-blue-700">[""]</span>}}</li>
<li><b class="w-8"> * Password</b> : {{<span class="font-bold text-indigo-700">PASSWORD</span>:<span class="font-bold text-emerald-700">Input label</span>:<span class="font-bold text-blue-700">[""]</span>}}</li>
</ul>


<p class="mt-4">

The <span class="font-bold text-indigo-700">first field</span> (in CAPITAL letters) is the field type, it should always be one of the following : SELECT, INPUT, TEXTAREA, PASSWORD.<br/>
you can use variant annotations like : <br />
 - VARINPUT, VARTEXTAREA for an text inputs that accepts variables<br />
 - VAULTPASSWORD for a password field that can be managed using the vault <br />
</p>

<p class="mt-4">
The <span class="font-bold text-emerald-700">second field</span> is the label that will be displayed in the component settings, this is a free text, but keep it short.
</p>

<p class="mt-4">
The <span class="font-bold text-blue-700">last field</span> should be an array of possible values for SELECT input, or an empty element [""].<br/>
<b>It's important to use the empty element [""] even if no value is configured.</b>
</p>

        `}};async function Mm(t){const e=t.getSettingsSidebar();if(!e)return;const n=await Ob(e);if(!n)return;const s=n.Settings;if(!t.properties.template)for(let a in t.settings)s[a]&&s[a].valid&&(t.data[a]=s[a].value);t.checkSettings()}d(Mm,"writeSettings"),zt(Mm,"writeSettings");async function Om(t,e=!1){const n=t.settingsChanged();!e&&n&&(await t.confirmSaveSettings(),await je(100)),await jb(),Be.curComponentSettings=null,t.domElement.classList.remove("active")}d(Om,"closeSettings"),zt(Om,"closeSettings");async function jm(t){Be.curComponentSettings=t,t.workspace.domElement.querySelectorAll(".component.active").forEach(y=>{y.classList.remove("active")}),t.domElement.classList.add("active");const e={};for(let y in t.settings){const w=t.settings[y],S={...w,value:t.data[y]};w?.type==="composite"?e[y]=Ki(S):e[y]=S}let n=null;if(t.properties.template){n={};const y=t.properties?.template?.templateInfo?.includedSettings||[];for(let S of y)n[S]=t.settings[S],n[S].value=t.data[S];const w=t.data._templateVars;for(let S in t.templateSettings){const m=t.templateSettings[S],D={...m,value:w[S]||m.value||""};m?.type==="composite"?n[S]=Ki(D):n[S]=D}}t.settingsEntries=t.properties.template?n:e;const s=t.properties?.template?.templateInfo?.name||t.title||"",a=zt(async()=>(await t.confirmSaveSettings(),!0),"onBeforeCancel"),i=zt(()=>{Be.curComponentSettings=null,t.emit("settingsClosed"),t.domElement.classList.remove("active"),t.unsetTemplateEditMode()},"onCancel"),r=zt(y=>{const w=y.target.value,S=w.match(/<i class="([^"]+)"/),m=S?S[1]:w;y.target.value=m;const D=y.target.closest(".form-box");if(D){let A=D.querySelector(".tpl-icon-preview");A||(A=document.createElement("div"),A.classList.add("tpl-icon-preview","absolute","bottom-0","right-0","w-12","h-12"),D.appendChild(A)),m.startsWith("fa")?A.innerHTML=`<i class="icon tpl-fa-icon ${m}"></i>`:A.innerHTML=`<div class="w-8 h-8">${m}</div>`}},"iconUpdate");Ss=null;async function o(y,w="#000000",S=""){try{const m=await fetch("/api/page/collection/create-collection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:y,color:w,icon:S})});if(!m.ok)throw new Error("Failed to add new collection");const D=await m.json();return D.error?(Xe("Error adding new collection"),null):D}catch{return Xe("Error adding new collection"),null}}d(o,"S"),zt(o,"addNewCollection");const c={name:{type:"input",label:"Name",value:t.properties?.template?.templateInfo?.name||t.title||""},description:{type:"textarea",label:"Description",value:t.properties?.template?.templateInfo?.description||t.description||""},icon:{type:"textarea",label:"Font Awesome Class or SVG",value:t.properties?.template?.templateInfo?.icon||"",events:{change:r,mouseup:r,keyup:y=>{(y.ctrlKey||y.metaKey)&&r(y)}}},color:{type:"color",value:t.properties?.template?.templateInfo?.color||"#000000"},docPath:{type:"input",label:"Documentation Path",value:t.properties?.template?.templateInfo?.docPath||""},ytLink:{type:"input",label:"Youtube Tutorial Link",value:t.properties?.template?.templateInfo?.ytLink||""},newCollectionCheckbox:{type:"checkbox",label:"Do you want to create a new collection?",value:!1,events:{change:y=>{const w=document.querySelector('[data-field-name="newCollectionInput"]'),S=document.querySelector('[data-field-name="newCollectionButton"]');y.target.checked?(w.classList.remove("invisible","hidden"),w.classList.add("block","visible"),S.classList.remove("invisible","hidden"),S.classList.add("inline-block","visible")):(w.classList.remove("block","visible"),w.classList.add("invisible","hidden"),S.classList.remove("inline-block","visible"),S.classList.add("invisible","hidden"))}}},newCollectionInput:{type:"input",label:"New Collection Name",value:"",class:"invisible hidden"},newCollectionButton:{type:"button",label:"Add Collection",class:"invisible hidden",attributes:{},events:{click:async y=>{const w=y.target,S=w.innerHTML,m=document.querySelector('[data-field-name="newCollectionInput"]'),D=m.querySelector("input").value.trim(),A=document.getElementById("color").value.trim(),j=document.getElementById("icon").value.trim();if(D){w.innerHTML='<i class="fas fa-spinner fa-spin"></i>',w.disabled=!0;const L=await o(D,A,j);if(w.innerHTML=S,w.disabled=!1,L){m.querySelector("input").value="";const k=document.getElementById("newCollectionCheckbox");k.checked=!1;const I=document.querySelector('[data-field-name="newCollectionButton"]');m.classList.remove("block","visible"),m.classList.add("invisible","hidden"),I.classList.remove("inline-block","visible"),I.classList.add("invisible","hidden"),Bt("New collection added")}}else Xe("Please enter a collection name")}}},collection:{type:"select",label:"Collection",value:t.properties?.template?.templateInfo?.collection||"",options:Nm.bind(t),events:{change:y=>{const w=Ss.find(j=>j.value===y.target.value),S=document.querySelector('.form-box[data-field-name="icon"] #icon'),m=t.properties?.template?.templateInfo?.icon||"",D=t.properties?.template?.templateInfo?.color||"#000000";(S&&!m||!S?.value)&&(S.value=w.icon);const A=document.querySelector('.form-box[data-field-name="color"] #color');if(!D||D=="#000000"||A.value=="#000000"){A.value=w.color,A.setAttribute("value",w.color);const j=A.closest(".clr-field");j&&(j.style.color=w.color)}}}},version:{type:"input",label:"Version",validate:"custom=isValidSemVer",validateMessage:"Invalid version number. Must be in the format x.x.x",value:t.properties?.template?.templateInfo?.version||"1.0.0"},published:{type:"checkbox",class:"w-32",label:"Published",value:t.properties?.template?.templateInfo?.published||!1}},l=t?.templateSupport&&t.workspace?.userData?.acl?.["/templates"]=="rw"&&t.workspace?.userData?.isSmythStaff?{template:{type:"button",label:t.properties.template?'<i class="fa-solid fa-pen-to-square"></i>':'<i class="fa-solid fa-screwdriver-wrench"></i>',icon:"",hint:t.properties.template?"Edit This Template":"Create Template Component",hintPosition:"right",class:"bg-transparent font-semibold text-base hover:bg-gray-300 hover:text-emerald-600",click:async()=>{let y=!0;t.properties.template&&(y=!1,t.settingsEntries=e);const w={Info:c,Settings:t.settingsEntries,Help:f6},S={template:{type:"button",label:'<i class="fa-regular fa-floppy-disk"></i>',icon:"",hint:"Save Template Component",hintPosition:"right",class:"bg-transparent font-semibold text-base hover:bg-gray-300 hover:text-emerald-600",click:async m=>{console.log("collecting settings data");const D=m.target.closest(".right-sidebar")?.querySelector("form.Settings");let A={};D&&(A=[...D.querySelectorAll(".chk-bind-setting")].filter(v=>v.checked).map(v=>v.closest(".form-box").getAttribute("data-field-name")),console.log(A));const j={};for(let v in w){const T=document.querySelector(`#right-sidebar form.${v}`),P=w[v];if(Nb(T),await je(30),T.querySelector(".invalid"))return;const F=Yi(T,P);j[v]=F}const L=j.Settings;if(t.emit("settingsSaving",L),!await t.save(L)){Xe("Error saving settings");return}if(!t.properties.template||!y)for(let v in t.settings)t.data[v]=L[v];else{const v=t.templateSettings,T=t.data._templateVars,P=t.properties?.template?.templateInfo?.includedSettings||[];for(let F of P)t.data[F]=L[F];for(let F in v)T[F]=L[F]}console.log("template save settings",t.settings);const k=t.exportTemplate();k.templateInfo={...t.properties.template?.templateInfo,...j.Info,includedSettings:A},k.data={...k.data,...t.data},k.templateInfo.icon,t.emit("settingsSaved",L);let I=y?null:k?.templateInfo?.id;try{const v=Ss.find(M=>M.value===k.templateInfo.collection);let T=k.templateInfo.icon||"";T||(k.templateInfo.icon=v?v.icon:T);let P=k.templateInfo.color||"#000000";P==="#000000"&&(k.templateInfo.color=v?v.color:P);const F=await Fm(I,k,k.templateInfo?.published||!1).catch(M=>({error:M}));if(F.error){console.log("error saving template",F.error),Xe(F.error?.error?.message||"Cannot save component","Error Saving template");return}k.templateInfo.id=F.component.id,t.properties.template=k,t.title=k.templateInfo.name,t.description=k.templateInfo.description,t.domElement.querySelector(".internal-name").textContent=`T: ${k.templateInfo.name}`;const U=t.domElement.querySelector(".title-bar");if(U){U.querySelector(".title .text").textContent=k.templateInfo.name,U.querySelector(".description .text").textContent=k.templateInfo.description;const M=Ss.find(R=>R.value===k.templateInfo.collection),V=U.querySelector(".icon");let W=k.templateInfo.icon||"",K=k.templateInfo.color||"#000000";if(W.startsWith("<svg")){V.className="icon w-6 h-6";const R=W.replace(/<path/g,"<path");V.innerHTML=`${R}`;const X=V.querySelectorAll("path");[...X].find(Q=>Q.getAttribute("fill")&&Q.getAttribute("fill")!=="none")||X.forEach(Q=>Q.setAttribute("fill",K))}else V.className=`icon tpl-fa-icon ${W}`,V.innerHTML="",V.style.backgroundColor="",V.style.color=K}if(y){t.data._templateVars=t.data._templateVars||{};let M=null;if(t.properties.template){M={};const V=t.data._templateVars;for(let W in t.templateSettings){const K=t.templateSettings[W],R={...K,value:V[W]};K?.type==="composite"?M[W]=Ki(R):M[W]=R}}t.settingsEntries=M}y=!1,t.workspace.saveAgent(),y?Bt("Component Template Created"):Bt("Component Template Updated")}catch(v){console.log("error saving template",v),Xe("Error saving template")}}}};t.setTemplateEditMode(),Sc({title:`Template Editor : ${s}`,entriesObject:w,features:{templateVars:!0},actions:S,onSave:yu.bind(t),onBeforeCancel:a,onCancel:i,onLoad:Lm.bind(t)})}}}:null,u=$m(t),p=t.constructor.name;let g="";switch(p){case"ServerlessCode":g="Run scalable, cloud-based code. This option supports npm packages and third-party libraries, making it perfect for more complex, enterprise-level workflows.";break;case"Code":g="Execute pure JavaScript in a secure, sandboxed environment\u2014ideal for lightweight tasks.";break;default:g=""}Sc({title:u,entriesObject:{Settings:t.settingsEntries},features:{templateVars:!0},actions:l,onSave:yu.bind(t),onDraft:Tm.bind(t),onBeforeCancel:a,onCancel:i,onLoad:Im.bind(t),helpTooltip:g}),t.emit("settingsOpened",t.getSettingsSidebar())}d(jm,"editSettings"),zt(jm,"editSettings");let Ss;async function Nm(){if(Ss)return Ss;console.log("getComponentsCollections");const t=await fetch("/api/page/builder/app-config/collections").then(e=>e.json());return t.error?(Xe("Error fetching collections"),[]):(console.log("collectionResult",t),Ss=(t?.collections||[]).map(e=>({value:e.id,text:e.name,color:e.color||"#000000",icon:e.icon})),Ss)}d(Nm,"ne$1"),zt(Nm,"getComponentsCollections");async function Fm(t,e,n=!1){let s="/api/page/builder/app-config/components";t&&(s+=`/${t}`);const a=e?.templateInfo?.name||e.name,i=e?.templateInfo?.collection||null,r={name:a,data:JSON.stringify(e),collectionId:i,visible:n};return await fetch(s,{method:t?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then(o=>o.json())}d(Fm,"ae$1"),zt(Fm,"saveComponentTemplate");function $m(t){const e=t.properties?.template?.templateInfo?.name||t.title||"";let n=t.data?.logoUrl||t?.logoUrl,s="";const a=["LogicAND","LogicOR","LogicXOR","LogicAtLeast","LogicAtMost","Await","MultimodalLLM","LLMAssistant"],i=["APIEndpoint","GenAILLM","ImageGenerator","Classifier","Note","APIOutput"];let r="w-6 h-6",o="";if(!n&&t?.drawSettings?.iconCSSClass==="svg-icon HuggingFace"&&(n="https://huggingface.co/front/assets/huggingface_logo-noborder.svg"),typeof n=="string"&&n.trim()!=="")a.some(c=>e.includes(c))&&(r="w-8 h-8"),s=`<img src="${n}" alt="${e} icon" class="inline-block align-middle ${r} object-contain rounded">`;else{let c=t.drawSettings.iconCSSClass||"";o=c;const l="#242424";if(a.some(u=>o.includes(u))&&(r="w-8 h-8"),c.startsWith("fa"))s=`<i class="${c.includes("tpl-fa-icon")?c:`tpl-fa-icon ${c}`} inline-block align-middle" style="color: ${l}; font-size: 1.5rem; vertical-align: middle;"></i>`;else if(c.trim().startsWith("<svg")){let u=c;u=u.replace(/<path[^>]*?\sfill="[^"]*"[^>]*>/g,p=>p.replace(/\sfill="[^"]*"/,"")),u=u.replace(/<svg[^>]*?\sfill="[^"]*"[^>]*>/g,p=>p.replace(/\sfill="[^"]*"/,"")),u.includes('class="')?(u=u.replace("<svg",`<svg fill="${l}"`),u.includes("w-full")||(u=u.replace(/class="([^"]*)"/,'class="$1 w-full"')),u.includes("h-full")||(u=u.replace(/class="([^"]*)"/,'class="$1 h-full"'))):u=u.replace("<svg",`<svg fill="${l}" class="w-full h-full"`),s=`<span class="inline-block align-middle ${r}">${u}</span>`}else if(c){c.includes("svg-icon")||(c=`svg-icon ${c}`);const u=i.some(g=>c.includes(g)),p=`background-color: ${l}${u?" !important":""};`;s=`<span class="${c} ${r} inline-block align-middle" style="${p}"></span>`}}return`
    <div class="flex items-center gap-2">
      ${s}
      <span class="truncate">${e}</span>
    </div>
  `}d($m,"ie$1"),zt($m,"generateSidebarTitleHTML");var m6=Object.defineProperty,yt=d((t,e)=>m6(t,"name",{value:e,configurable:!0}),"k");const xu={},g6=yt(t=>{if(localStorage.getItem("sidebarOpen"),localStorage.getItem("currentSidebarTab"),window._fixWithAIBtnDispatched)return;window._fixWithAIBtnDispatched=!0;const e=new CustomEvent("fixWithAIBtn",{detail:{data:t},bubbles:!0,composed:!0});window.dispatchEvent(e),setTimeout(()=>{window._fixWithAIBtnDispatched=!1},100)},"triggerFixWithAIBtn"),b6={VANILLA:wc,REACT:t=>ap({config:t})};window.__INPUT_TEMPLATE_VARIABLES__={},window.__FIELD_TEMPLATE_VARIABLES__={},window.interact=ds;function Rm(t){const e=yt(s=>/^-?\d+(\.\d+)?$/.test(s.trim()),"isNumber"),n=yt(s=>{const a=parseFloat(s);return!isNaN(a)&&a<=Number.MAX_SAFE_INTEGER&&a>=Number.MIN_SAFE_INTEGER&&a.toString()===s.trim()},"isValidNumber");if(!t)return null;if(e(t)&&!n(t)||!t.trim().startsWith("{")&&!t.trim().startsWith("["))return t;try{return JSON.parse(t)}catch{return JSON.parse(_r(t))}}d(Rm,"Yt"),yt(Rm,"parseEndpointJson");function Vo(t){if(Array.isArray(t)){for(let n=0;n<t.length;n++)t[n]=Vo(t[n]);return t}if(typeof t=="object"&&t!==null){for(let n in t)t[n]=Vo(t[n]);return t}const e=typeof t=="string"?t:JSON.stringify(t);return e.length>100?e.substring(0,100)+"...(long content truncated)":e}d(Vo,"at"),yt(Vo,"recursiveTruncateLongJsonValues");const qm=class xa extends Oa{static{d(this,"J")}constructor(e,n={outputs:[],inputs:[],data:{},top:"",left:"",width:"",height:"",title:"",description:"",sender:null,uid:null,template:null,aiTitle:"",displayName:""},s=!0){if(super(),this.workspace=e,this.properties=n,this.settings={},this.inputEditor=b6.VANILLA,this.inputSettings={defaultVal:{type:"string",default:"",allowDefaultEdit:!0,editConfig:{type:"textarea",label:"Default Value",fieldCls:"min-h-[50px] px-3 py-1 resize-y",attributes:{"data-agent-vars":"true","data-auto-size":"false",style:"height: 34px;"},section:"Advanced_Options",hint:"Value assigned if no specific value provided by user.",hintPosition:"after_label"}}},this.outputSettings={expression:{type:"string",default:"",editConfig:{type:"input",section:"Advanced_Options",help:"JSON path"}}},this.data={},this.drawSettings={displayName:this.constructor.name,cssClass:"",iconCSSClass:"mif-cog",showSettings:!0,addOutputButton:"Outputs",addInputButton:"Inputs",inputMaxConnections:-1,outputMaxConnections:-1,firendlyName:this.constructor.name,category:"Base",componentDescription:"",shortDescription:"",color:"#fff"},this._destroyed=!1,this.docUrl=Ut+(Dm[this.constructor.name]||""),this.settingsEntries={},this.async=!1,this.templateSupport=!1,this.templateEditing=!1,this._ready=!1,this.displayName=this.constructor.name,this._uid=this.properties.uid||"C"+Vn(),this.properties||(this.properties={top:"",left:""}),this.properties.defaultOutputs=["Output"],this.properties.defaultInputs=[],this.properties.outputs||(this.properties.outputs=[]),this.properties.inputs||(this.properties.inputs=[]),this.properties.inputProps||(this.properties.inputProps=[]),this.properties.outputProps||(this.properties.outputProps=[]),this.data=this.properties.data||{},this.properties.template){const a=this.properties.template;this.properties.inputs=[...new Set([...this.properties.inputs,...a.inputs?.map(o=>o.name)||[]])],this.properties.outputs=[...new Set([...this.properties.outputs,...a.outputs?.map(o=>o.name)||[]])];const i=[];for(let o of this.properties.inputs){const c=a.inputs?.find(u=>u.name===o),l=this.properties.inputProps.find(u=>u.name===o);i.push({...c,...l})}this.properties.inputProps=i;const r=[];for(let o of this.properties.outputs){const c=a.outputs?.find(u=>u.name===o),l=this.properties.outputProps.find(u=>u.name===o);r.push({...c,...l})}this.properties.outputProps=r}this.prepare().then(this.init.bind(this)).then(()=>{this.title=this.properties.aiTitle||this.properties.title||this.drawSettings.displayName,this.aiTitle=this.properties.aiTitle||"",this.description=this.properties.description||this.drawSettings.shortDescription||this.drawSettings.componentDescription||"";const a=this.properties.defaultOutputs.reverse();for(let r of a)this.properties.outputs.indexOf(r)===-1&&this.properties.outputs.unshift(r);const i=this.properties.defaultInputs.reverse();for(let r of i)this.properties.inputs.indexOf(r)===-1&&this.properties.inputs.unshift(r);this.redraw(s),this._ready=!0}).then(this.run.bind(this)).finally(()=>{this.syncTemplateVars()}),xu[this.uid]=this}get uid(){return this._uid}get settingsOpen(){return xa.curComponentSettings==this}get templateSettings(){return this.properties?.template?.settings}set templateSettings(e){this.properties?.template&&(this.properties.template.settings=e)}async prepare(){return!0}async run(){return!0}syncTemplateVars(){window.__INPUT_TEMPLATE_VARIABLES__[this._uid]=new Map;const e=yt((i,r="Any")=>{const o={var:`{{${i}}}`,type:r};window.__INPUT_TEMPLATE_VARIABLES__[this._uid].set(i,o)},"addVar"),n=yt(i=>{window.__INPUT_TEMPLATE_VARIABLES__[this._uid].delete(i)},"deleteVar"),s=yt(()=>{const i=window.__INPUT_TEMPLATE_VARIABLES__?.[this._uid]||new Map,r=window.__LAST_FIELD_WITH_TEMPLATE_VARS__,o=window.__FIELD_TEMPLATE_VARIABLES__?.[r]||new Map,c=new Map([...i,...o]);Fb(c,this._uid)},"generateVarBtns");this.properties.inputProps?.forEach(i=>e(i.name,i.type));const a=yt(i=>i.classList.contains("input-endpoint"),"isInput");this.addEventListener("endpointAdded",(i,r)=>{a(r)&&(setTimeout(()=>{const o=r.getAttribute("smt-type");e(i,o)},100),s())}),this.addEventListener("endpointChanged",(i,r,o,c)=>{a(r)&&((i==="name"||i==="type")&&setTimeout(()=>{const l=i==="name"?c:r.getAttribute("smt-name"),u=i==="type"?c:r.getAttribute("smt-type");i==="name"&&n(o),e(l,u)},100),s())}),this.addEventListener("endpointRemoved",(i,r)=>{a(r)&&(n(i),s())})}addFieldVariable(e,n){const s=window.__FIELD_TEMPLATE_VARIABLES__?.[e]||new Map;for(const[a,i]of Object.entries(n))s.set(a,{var:i,type:"field"});window.__FIELD_TEMPLATE_VARIABLES__[e]=s}ready(e){return new Promise((n,s)=>{if(this._ready)return n(!0);const a=setInterval(()=>{this._ready&&(clearInterval(a),e&&e(),n(!0))},15)})}async repaint(e=!1){if(e){let n=[...this.domElement.querySelectorAll(".endpoint")].map(s=>s?.endpoint?.connections).flat(1/0);n=[...new Set(n)],n.forEach(s=>{this.workspace.updateConnectionStyle(s)})}this.workspace.jsPlumbInstance.repaint(this.domElement)}async init(){}async clean(){return!0}isFunctionalComponent(){return["FSign","FEncDec","FSleep","FTimestamp","FHash"].includes(this.constructor.name)}isLogicalComponent(){return["LogicAND","LogicOR","LogicXOR","LogicAtLeast","LogicAtMost"].includes(this.constructor.name)}addDebugButton(){if(!this.domElement)return;const e=this.domElement.querySelector(".title-bar");if(!e)return;e.querySelector(".btn-debug")?.remove();const n=document.createElement("button");n.className="btn-debug button-icon absolute z-10",this.isFunctionalComponent()?(n.style.top="1px",n.style.right="4px"):(n.style.top="9px",n.style.right="7px");const s=document.createElement("div");s.className="debug-icon-container",s.innerHTML=`
          <img src="" class="debug-icon default-icon w-8 h-8" alt="Debug" style="opacity: 1;" />
      `,n.appendChild(s),n.onclick=this.openDebugDialog.bind(this),new Br(n,{text:"Run with Debug",position:this.isLogicalComponent()?"left":"top",showWhen:"hover"}),e.appendChild(n)}async checkSettings(){this.clearComponentMessages();const{data:e}=await bc({scope:void 0}),n=Object.values(e);let s=[];for(let u in this.settings){const p=this.settings[u];p.validate?.includes("required")&&s.push({id:u,name:p.label||u})}const a=s.filter(u=>!this.data[u.id]);a.length>0&&this.addComponentMessage(`Missing Settings ${a.map(u=>u.name).join(", ")}`,"alert pointer",()=>{_t.track("app_component_alert_click",{type:"missing settings"}),this.editSettings()});const i="_manage_keys_message",r=this.hasComponentMessage(`.${i}`),o=yt(async({addMockToggle:u=!1,addManageMessage:p=!1})=>{try{p&&this?.addComponentMessage("Manage keys","info pointer",()=>window.open("/vault","_blank"),i),u&&(await Tf(this),await jo(this))}catch{console.error("Failed to update UI for vault keys")}},"updateUIForVaultKeys");if(this.properties.template){let u=null;if(this.properties.template){u={};const p=this.properties?.template?.templateInfo?.includedSettings||[];for(let y of p)this.settings?.[y]?.type!=="button"&&(u[y]=this.settings[y],u[y].value=this.data[y]);const g=this.data._templateVars;for(let y in this.templateSettings){const w=this.templateSettings[y],S={...w,value:g[y]||w.value||""};w?.type==="composite"?u[y]=Ki(S):u[y]=S}}if(Object.keys(u||{}).filter(p=>{const g=this.data?._templateVars?.[p],y=this.data?.[p],w=yt(S=>S==null||typeof S=="string"&&S.trim()==="","isEmptyValue");return w(g)&&w(y)}).length>0)this.addComponentMessage("Missing Settings","alert pointer",()=>{_t.track("app_component_alert_click",{type:"missing settings"}),this.editSettings()});else{const p=Object.keys(u||[]).filter(w=>$b(this.data?._templateVars?.[w]));let g=!1,y=!1;for(let w of p){const S=this.data?._templateVars?.[w],m=await this.checkVaultKeys(S,n);m?.allKeys?.size>0&&(g=!0),m?.existKeys?.size>0&&!r&&(y=!0)}o({addMockToggle:g,addManageMessage:y})}}let c=!1,l=!1;for(let u in this.settings){let p="";try{p=decodeURIComponent(this.data[u])}catch{p=this.data[u]}const g=await this.checkVaultKeys(p,n);g?.allKeys?.size>0&&(c=!0),g?.existKeys?.size>0&&!r&&(l=!0)}o({addMockToggle:c,addManageMessage:l});for(let u in this.settings){let p="";try{p=decodeURI(this.data[u])}catch{p=this.data[u]}const g=/{{INFO\:([^}]*)}}/g;let y;for(;(y=g.exec(p))!==null;){const w=y[1];this.addComponentMessage(w,"warning pointer",()=>{window.open("/vault","_blank")})}}}async checkVaultKeys(e="",n){const s=/{{KEY\(([^}]*)\)}}/g;let a=[],i;for(;(i=s.exec(e))!==null;)i[1]&&a.push(i[1]);const r=new Set(a),o=new Set,c=new Set;for(let l of a)if(l&&n.find(u=>u.name===l||u.name===l.replace(/\+/g," ")))console.log("Vault Key Found",l),o.add(l);else{if(console.log("Vault Key Missing",l),c.add(l),this.hasComponentMessage(`.${Wo(l)}`))continue;this.addComponentMessage(`Missing Key "${l}"`,"alert pointer",()=>{_t.track("app_component_alert_click",{type:"missing key"}),zm.bind(this,l)()},Wo(l))}return{allKeys:r,existKeys:o,missingKeys:c}}async save(e){return this.checkSettings(),setTimeout(async()=>{this.checkSettings()},1e3),!0}destroy(){this._destroyed=!0,this.domElement.remove()}getSettingsSidebar(){return xa.curComponentSettings!==this?null:document.querySelector("#right-sidebar")}async deleteEndpoint(e){this.workspace.jsPlumbInstance.deleteEndpoint(e.endpoint),e.classList.contains("input-endpoint")&&(this.properties.inputs=this.properties.inputs.filter(n=>n!==e.getAttribute("smt-name")),this.properties.inputProps=this.properties.inputProps.filter(n=>n.name!==e.getAttribute("smt-name"))),e.classList.contains("output-endpoint")&&(this.properties.outputs=this.properties.outputs.filter(n=>n!==e.getAttribute("smt-name")),this.properties.outputProps=this.properties.outputProps.filter(n=>n.name!==e.getAttribute("smt-name"))),e.remove(),document.dispatchEvent(new CustomEvent("componentEndpointChanged",{detail:{componentId:this.uid}})),this.workspace.redraw(),this.workspace.saveAgent()}syncProps(e,n,s){const a=e==="input"?"inputs":"outputs",i=e==="input"?"inputProps":"outputProps",r=this.properties[a].findIndex(l=>l===n),o=this.properties[i],c=o.findIndex(l=>l?.name===n);if(r>=0&&c>=0){this.properties[a][r]=s.name;const l=o.find(u=>u?.name===n);this.properties[i][c]={...l,...s}}}inputNameExists(e){return!!this.inputContainer.querySelector(`.input-endpoint[smt-name="${e}"]`)}outputNameExists(e){return!!this.outputContainer.querySelector(`.output-endpoint[smt-name="${e}"]`)}parseOutputProp(e,n,s){if(!this.outputSettings[n])return;const a=this.properties.outputProps?.find(r=>r.name===e),i=this.outputSettings[n];switch(i?.type){case"string":return a?.[n]||i?.default||s;case"number":return a?.[n]||i?.default||s;case"boolean":return a?.[n]||i?.default||s}}async addOutput(e,n,s={},a={}){if(this.outputNameExists(n)){Xe(`${n} already exists`);return}const i=this.workspace.jsPlumbInstance,r=document.createElement("div");r.className=`smyth endpoint output-endpoint ${this.constructor.name}`,r.setAttribute("smt-name",n);const o=this.properties.outputProps?.find(A=>A.name===n),c=o?.color||`${Lt.conStartColor}`;r.setAttribute("smt-color",c);for(let A in this.outputSettings)r.setAttribute(`smt-${A}`,this.parseOutputProp(n,A,""));for(let A in s)this.inputSettings[A]&&r.setAttribute(`smt-${A}`,s[A]);for(let A in s)this.outputSettings[A]&&r.setAttribute(`smt-${A}`,s[A]);Object.keys(s)?.length>0&&this.properties.outputs.push(n),e.appendChild(r),await je(50);const l=i.addEndpoint(r,{paintStyle:{fill:"#ddddff00"},endpoint:["Rectangle",{height:10,width:40}],anchor:"Right",isSource:!0,maxConnections:this.drawSettings.outputMaxConnections,cssClass:"exclude-panzoom"}),u=document.createElement("span");u.className="name",u.innerHTML=`<span class="label">${n}</span>`,r.appendChild(u);const p=this.properties.defaultOutputs.includes(n),g=!this.templateEditing&&this.properties.template?.outputs?.find(A=>A.name==n),y=document.createElement("button");y.className="btn-edit-endpoint  button text-gray-310 bg-white hover:text-emerald-600 mini",y.innerHTML='<span class="icon mif-pencil"></span>',y.setAttribute("rel",r.id),y.addEventListener("click",async A=>{A.stopPropagation();let j=!0;if(a.onEditBtnClick&&(j=await a.onEditBtnClick(A),j===!1))return;A.stopImmediatePropagation();const L=r.getAttribute("smt-name"),k=!this.templateEditing&&this.properties.template?.outputs?.find(U=>U.name==L),I=r.getAttribute("smt-color")||`${Lt.conStartColor}`,v={name:{label:"Output Name",type:"text",class:"stg-output stg-name",value:L,readonly:p||k,validate:"required custom=isValidOutputName",validateMessage:"Name is required and allow JSON path notation, e.g., Response.text, items[0], data['key'], etc."},additionalOptionsLabel:{type:"div",html:'<small class="field-hint">You can also assign a color label to this input for better organization or categorization.</small>',section:"Advanced_Options",formControlCls:"bg-white"},color:Ci(I)};for(let U in this.outputSettings){const M=this.outputSettings[U];if(M){let V=r.getAttribute(`smt-${U}`);V==="true"&&(V=!0),V==="false"&&(V=!1),v[U]={...M.editConfig,value:V},M.allowDefaultEdit||(v[U].readonly=p||k,v[U].class+=p||k?" hidden":"")}}v?.description&&(v.description.section="Advanced_Options");const T=this.constructor.name===Yt.apiEndpoint?'<span class="text-xl agent-skill-dialog-title">Edit Skill Output</span>':'<span class="text-xl">Edit Output</span>',P=Si(v,["description","expression","additionalOptionsLabel","color"]),F=await this.inputEditor({title:T,fields:P,onDOMReady:U=>{const M=U.querySelector("#name"),V=U.querySelector(".agent-skill-dialog-title"),W=document.querySelector("#add-skill-input-info-icon");V&&W&&(W.classList.remove("hidden"),V.appendChild(W)),je(50).then(()=>Xi(M))},contentClasses:"min-h-[335px]",dialogClasses:"dialog-center rounded-[18px] p-2 pb-3",showCloseButton:!0});if(F){if(F.name!=L){if(this.outputNameExists(F.name)){Xe(`${F.name} already used`);return}r.setAttribute("smt-name",F.name),r.querySelector(".name").innerHTML=F.name,this.emit("endpointChanged","name",r,L,F.name),document.dispatchEvent(new CustomEvent("componentEndpointChanged",{detail:{componentId:this.uid}}))}if(r&&F.color!=I){r.setAttribute("smt-color",F.color),r.querySelector(".ep").style.backgroundColor=F.color||`${Lt.conStartColor}`,r.querySelector(".name").style.borderImage=`linear-gradient(90deg, transparent 20%, ${F.color}) 1`;const U=r.endpoint;if(U&&U.connections)for(let M of U.connections)this.workspace.updateConnectionColors(M);this.emit("endpointChanged","color",r,I,F.color)}for(let U in this.outputSettings){const M=this.outputSettings[U];if(r&&M){const V=r.getAttribute(`smt-${U}`);F[U]!==V&&F[U]!=null&&(r.setAttribute(`smt-${U}`,F[U]),this.emit("endpointChanged",U,r,V,F[U]))}}this.syncProps("output",L,F),this.workspace.saveAgent()}});const w=document.createElement("button");w.className="btn-delete-endpoint button text-smyth-red-500 hover:text-white hover:bg-smyth-red-500 mini outline",w.innerHTML='<span class="icon mif-bin"></span>',w.setAttribute("rel",r.id),w.addEventListener("click",async A=>{const j=r.getAttribute("smt-name"),L=!this.templateEditing&&this.properties.template?.outputs?.find(k=>k.name==j);if(!(p||L))return A.stopPropagation(),A.stopImmediatePropagation(),await Mn("Deleting Output. Are you sure ?","",{btnYesLabel:"Delete",btnNoLabel:"Cancel",btnYesClass:"bg-smyth-red-500 border-smyth-red-500 h-[48px] rounded-lg px-8",btnNoClass:"hidden"})?this.deleteEndpoint(r):!1}),!p&&g&&w.setAttribute("templateEditable","true"),r.appendChild(w),w.classList.add("hidden"),!p&&!g?w.classList.remove("hidden"):r.classList.add("default"),r.appendChild(y);const S=document.createElement("button");S.className="btn-moveup-endpoint button text-gray-310 bg-white hover:text-emerald-600 mini",S.innerHTML='<span class="icon mif-arrow-up"></span>',S.addEventListener("click",async A=>{A.stopPropagation(),r.parentElement.insertBefore(r,r.previousSibling),this.repaint(),this.workspace.saveAgent()}),r.appendChild(S);const m=document.createElement("button");m.className="btn-movedown-endpoint button text-gray-310 bg-white hover:text-emerald-600 mini",m.innerHTML='<span class="icon mif-arrow-down"></span>',m.addEventListener("click",async A=>{A.stopPropagation(),r?.parentElement?.insertBefore(r?.nextSibling,r),this.repaint(),this.workspace.saveAgent()}),r.appendChild(m);const D=document.createElement("span");D.className=`ep ep-Output ep-${n}`,D.innerHTML=" ",D.style.backgroundColor=o?.color||`${Lt.conStartColor}`,r.appendChild(D),r.querySelector(".name").style.borderImage=`linear-gradient(90deg, transparent 20%, ${c}) 1`;for(let A of l.connections)this.workspace.updateConnectionColors(A);return r.endpoint=l,l._domElement=r,!o&&s.name&&(s.default||(s.default=!1),this.properties.outputProps.push(s)),this.emit("endpointAdded",n,r),document.dispatchEvent(new CustomEvent("componentEndpointChanged",{detail:{componentId:this.uid}})),this.workspace.saveAgent(),r}setTemplateEditMode(){this.templateEditing=!0,this.domElement.querySelectorAll('[templateEditable="true"]').forEach(e=>e.classList.remove("hidden"))}unsetTemplateEditMode(){this.templateEditing=!1,this.domElement.querySelectorAll('[templateEditable="true"]').forEach(e=>e.classList.add("hidden"))}parseInputProp(e,n,s){if(!this.inputSettings[n])return;const a=this.properties.inputProps?.find(r=>r.name===e),i=this.inputSettings[n];switch(i?.type){case"string":return a?.[n]||i?.default||s;case"number":return a?.[n]||i?.default||s;case"boolean":return a?.[n]||i?.default||s}}async addInput(e,n,s={}){if(this.inputNameExists(n)){Xe(`${n} already exists`);return}const a=this.workspace.jsPlumbInstance,i=document.createElement("div");i.className=`smyth endpoint input-endpoint ${this.constructor.name}`,i.setAttribute("smt-name",n);const r=this.properties.inputProps?.find(m=>m.name===n);i.setAttribute("smt-optional",r?.optional||"false"),i.setAttribute("smt-color",r?.color||`${Lt.conEndColor}`),i.setAttribute("smt-type",r?.type||"Any"),i.setAttribute("smt-friendly-input-type",r?.friendlyInputType||""),i.setAttribute("smt-core-input-type",r?.coreInputType||""),r?.optional?i.classList.add("optional"):i.classList.remove("optional");for(let m in this.inputSettings)i.setAttribute(`smt-${m}`,this.parseInputProp(n,m,""));for(let m in s)this.inputSettings[m]&&i.setAttribute(`smt-${m}`,s[m]);Object.keys(s)?.length>0&&this.properties.inputs.push(n),e.appendChild(i),await je(50);const o=a.addEndpoint(i,{paintStyle:{fill:"transparent"},endpoint:["Dot",{radius:10}],anchor:["Left",{dx:40}],isTarget:!0,maxConnections:this.drawSettings.inputMaxConnections,cssClass:"exclude-panzoom"});o._listeners.mouseup||(o._listeners.mouseup=[]),o._listeners.mouseup.push(()=>{if(this.workspace._draggingConnection){const m=this.workspace._draggingConnection.source.endpoint;if(m.connections.find(D=>D.endpoints.includes(o)))return;this.workspace.jsPlumbInstance.connect({source:m,target:o,cssClass:"exclude-panzoom"}),this.workspace.jsPlumbInstance.deleteConnection(this.workspace._draggingConnection)}document.querySelectorAll(".endpoint.active").forEach(m=>m.classList.remove("active"))});const c=document.createElement("span");c.className=`ep ep-Input ep-${n}`,c.innerHTML=" ",c.style.backgroundColor=r?.color||`${Lt.conEndColor}`,i.appendChild(c);const l=document.createElement("span");l.className="name",l.innerHTML=n,i.appendChild(l);const u=this.properties.defaultInputs.includes(n),p=!this.templateEditing&&this.properties.template?.inputs?.find(m=>m.name==n),g=document.createElement("button");g.className="btn-edit-endpoint  button text-gray-310 bg-white hover:text-emerald-600 mini",g.innerHTML='<span class="icon mif-pencil"></span>',g.setAttribute("rel",i.id),g.addEventListener("click",async m=>{m.stopPropagation();const D=i.getAttribute("smt-name"),A=this.properties.inputProps?.find(R=>R.name===D),j=!this.templateEditing&&this.properties.template?.inputs?.find(R=>R.name==D),L=i.getAttribute("smt-optional")=="true",k=i.getAttribute("smt-color")||`${Lt.conEndColor}`;let I=i.getAttribute("smt-type")&&i.getAttribute("smt-type")!=="undefined"?i.getAttribute("smt-type"):"",v=i.getAttribute("smt-friendly-input-type")||"",T=i.getAttribute("smt-core-input-type")||"";I&&!v&&(v="Others",T=I);const P=i.getAttribute("smt-isfile")=="true";let F=!1;P&&(F=!0,I="Binary");const U=u||j,M={name:{type:"text",label:"Input Name",class:"stg-input stg-name",value:D,readonly:u||j,validate:"required custom=isValidInputName",validateMessage:"Name is required and can only contain letters, numbers, and underscores."}};if(!U){const R=Cu({compName:this.constructor.name,values:{friendlyInputType:v,coreInputType:A?.type||T,type:A?.type||I}});R?.friendlyInputType&&(M.friendlyInputType=R.friendlyInputType),R?.coreInputType&&(M.coreInputType=R.coreInputType),R?.type&&(M.type=R.type)}M.additionalOptionsLabel={type:"div",html:'<small class="field-hint">Choose whether this input is mandatory or optional. You can also assign a color label to this input for better organization or categorization.</small>',section:"Advanced_Options",formControlCls:"bg-white"},M.optional=Su(L,u||j),M.color=Ci(k);for(let R in this.inputSettings){const X=this.inputSettings[R];if(X){let Q=i.getAttribute(`smt-${R}`);Q==="true"&&(Q=!0),Q==="false"&&(Q=!1),M[R]={...X.editConfig,value:Q},X.allowDefaultEdit||(M[R].readonly=u||j,M[R].class+=u||j?" hidden":"")}}const V=this.constructor.name===Yt.apiEndpoint?'<span class="text-xl agent-skill-dialog-title">Edit Skill Input</span>':'<span class="text-xl">Edit Input</span>';M?.description&&(M.description.section="Advanced_Options");const W=Si(M,["name","type","description","additionalOptionsLabel","optional","color"]),K=await this.inputEditor({title:V,fields:W,onDOMReady:R=>{const X=R.querySelector("#name"),Q=R.querySelector(".agent-skill-dialog-title"),G=document.querySelector("#add-skill-input-info-icon");Q&&G&&(G.classList.remove("hidden"),Q.appendChild(G)),je(50).then(()=>Xi(X))},contentClasses:"min-h-[425px]",dialogClasses:"dialog-center rounded-[18px] p-2 pb-3",showCloseButton:!0});if(K){if(K.name!==D){if(this.inputNameExists(K.name)){Xe(`${K.name} already used`);return}i.setAttribute("smt-name",K.name),i.querySelector(".name").innerHTML=K.name,this.emit("endpointChanged","name",i,D,K.name),document.dispatchEvent(new CustomEvent("componentEndpointChanged",{detail:{componentId:this.uid}}))}if(K.optional!==L&&(i.setAttribute("smt-optional",K.optional),K.optional?i.classList.add("optional"):i.classList.remove("optional"),this.emit("endpointChanged","optional",i,L,K.optional)),i&&K.color!==k){i.setAttribute("smt-color",K.color),i.querySelector(".ep").style.backgroundColor=K.color||`${Lt.conEndColor}`,i.querySelector(".name").style.borderImage=`linear-gradient(90deg, transparent 20%, ${K.color}) 1`;const R=i.endpoint;if(R&&R.connections)for(let X of R.connections)this.workspace.updateConnectionColors(X);this.emit("endpointChanged","color",i,k,K.color)}K.type||(K.type="Any"),(i&&K.type!==I||F)&&(i.setAttribute("smt-type",K.type),this.emit("endpointChanged","type",i,I,K.type)),i?.setAttribute("smt-friendly-input-type",K?.friendlyInputType||""),i?.setAttribute("smt-core-input-type",K?.coreInputType||"");for(let R in this.inputSettings){const X=this.inputSettings[R];if(i&&X){const Q=i.getAttribute(`smt-${R}`);K[R]!==Q&&K[R]!=null&&(i.setAttribute(`smt-${R}`,K[R]),this.emit("endpointChanged",R,i,Q,K[R]))}}this.syncProps("input",D,K),this.workspace.saveAgent()}});const y=document.createElement("button");y.className="btn-delete-endpoint button text-smyth-red-500 hover:text-white hover:bg-smyth-red-500 mini outline",y.innerHTML='<span class="icon mif-bin"></span>',y.setAttribute("rel",i.id),y.addEventListener("click",async m=>{const D=i.getAttribute("smt-name"),A=!this.templateEditing&&this.properties.template?.inputs?.find(j=>j.name==D);if(!(u||A)){if(m.stopPropagation(),m.stopImmediatePropagation(),await Mn("Deleting Input. Are you sure ?","",{btnYesLabel:"Delete",btnNoLabel:"Cancel",btnYesClass:"bg-smyth-red-500 border-smyth-red-500 h-[48px] rounded-lg px-8",btnNoClass:"hidden"})){this.deleteEndpoint(i);const j=i.getAttribute("smt-name");return this.emit("endpointRemoved",j,i),!0}return!1}}),!u&&p&&y.setAttribute("templateEditable","true"),i.appendChild(y),y.classList.add("hidden"),!u&&!p?y.classList.remove("hidden"):i.classList.add("default"),i.appendChild(g);const w=document.createElement("button");w.className="btn-moveup-endpoint button text-gray-310 bg-white hover:text-emerald-600 mini",w.innerHTML='<span class="icon mif-arrow-up"></span>',w.addEventListener("click",async m=>{m.stopPropagation(),i.parentElement.insertBefore(i,i.previousSibling),this.repaint(),this.workspace.saveAgent()}),i.appendChild(w);const S=document.createElement("button");S.className="btn-movedown-endpoint button text-gray-310 bg-white hover:text-emerald-600 mini",S.innerHTML='<span class="icon mif-arrow-down"></span>',S.addEventListener("click",async m=>{m.stopPropagation(),i.parentElement.insertBefore(i.nextSibling,i),this.repaint(),this.workspace.saveAgent()}),i.appendChild(S);for(let m of o.connections)this.workspace.updateConnectionColors(m);return i.endpoint=o,o._domElement=i,!r&&s.name&&(s.default||(s.default=!1),this.properties.inputProps.push(s)),this.emit("endpointAdded",n,i),document.dispatchEvent(new CustomEvent("componentEndpointChanged",{detail:{componentId:this.uid}})),this.workspace.saveAgent(),i}refreshSettingsSidebar(){this.settingsOpen&&this.editSettings()}parseTemplateString(e,n){let s=/{{([A-Z]+):([\w\s]+):\[(.*?)\]}}/gm,a=/{{([A-Z]+):([\w\s]+):(\{.*?\})}}/gm;const i=e.matchAll(s),r=e.matchAll(a),o=[...i,...r];for(const c of o){const l={"data-template-vars":"false"};let u=c[1].toUpperCase();const p=`${u}-${Vn()}`;u.startsWith("VAR")&&(u=u.replace("VAR",""),l["data-template-vars"]="true"),u.startsWith("VAULT")&&(u=u.replace("VAULT",""),l["data-vault"]=`${this.constructor.name},All`);const g=c[2];let y,w;if(c[3].trim().startsWith("{")&&c[3].trim().endsWith("}"))try{w=JSON.parse(c[3])}catch{}if(!w)try{const D=JSON.parse(`[${c[3]||""}]`);D.length>1?(y=D.map(A=>({text:A,value:A})),y.unshift({text:" ",value:""})):y=D}catch{y=[]}let S=y?.[0]||"",m={};switch(u){case"KVJSON":S=JSON.stringify(w,null,2);break;default:m=w}n[p]={id:p,type:u,label:g,value:S,options:y,attributes:l,_templateEntry:!0,...m},e=e.replace(c[0],`{{${p}}}`)}return e}parseCompositeTemplateString(e,n){let s=JSON.parse(e||"{}")||{};const a=Array.isArray(s);s=a?s[0]:s;for(let i in s){let r=s[i];typeof r=="object"&&r!==null?(r=this.parseCompositeTemplateString(JSON.stringify(r),n),r=JSON.parse(r)):typeof r=="string"&&(r=this.parseTemplateString(r,n)),s[i]=r}return JSON.stringify(a?[s]:s)}normalizeTemplateSettings(e){}async editSettings(){return jm(this)}async confirmSaveSettings(){if(this.settingsChanged()&&await Mn("Settings Changed","You have unsaved changes. Are you sure you want to discard your changes?",{btnNoLabel:"Discard Changes",btnYesLabel:"Save Changes"})){const e=document.querySelector("#right-sidebar form"),n=Yi(e,this.settingsEntries);if(!await this.save(n)){Xe("Error saving settings");return}if(this.properties.template){const s=this.data._templateVars,a=this.templateSettings,i=this.properties?.template?.templateInfo?.includedSettings||[];for(let r of i)this.data[r]=n[r];for(let r in a)s[r]=n[r]}else for(let s in this.settings)this.data[s]=n[s];return console.log("new settings",n),this.emit("settingsSaved",n),!0}return!1}settingsChanged(){if(!this.settingsOpen)return!1;const e=this.settingsEntries,n=document.querySelector("#right-sidebar form.Settings");if(!n)return!1;const s=Yi(n,e);if(console.log("settingsChanged()",s,e),this.properties.template){const a=this.data._templateVars;for(let i in e)if(a[i]!==void 0&&a[i]!=s[i])return!0}else for(let a in e)if(this.data[a]!==void 0&&this.data[a]!=s[a])return!0}async closeSettings(e=!1){return Om(this,e)}showOverlay(e){this.overlay.querySelector(".content").innerHTML=e,this.overlay.style.display="block"}hideOverlay(){this.overlay.querySelector(".content").innerHTML="",this.overlay.style.display="none"}hasComponentMessage(e){return this.domElement.querySelector(e)!==null}hasComponentButton(e){return this.domElement.querySelector(e)!==null}clearComponentMessage(e){const n=this.domElement.querySelector(e);n&&n.remove()}clearComponentMessages(){this.domElement.querySelector(".messages-container").innerHTML=""}addComponentMessage(e,n="info",s,a){const i=document.createElement("div");return i.className=`message ${n} ${a}`,i.innerHTML=typeof e=="string"?e:e.text,s&&(i.style.cursor="pointer",i.addEventListener("click",s)),this.domElement.querySelector(".messages-container").appendChild(i),i}addComponentButton(e,n="info",s,a){const i=document.createElement("div");i.className=`message ${n} flex flex-wrap justify-center items-center p-2`,i.id="component-button";const r=document.createElement("button"),o={primary:"flex flex-row w-full items-center content-center text-xs justify-start gap-1 h-sm px-2 py-1 rounded-xl text-white bg-blue-500 pointer active:text-gray-100 active:bg-blue-600 active:ring-0",secondary:"flex flex-row w-full items-center justify-center text-xs gap-1 h-sm px-2 py-2 rounded-md text-[#3C89F9] border-[#3C89F9] bg-transparent pointer border-2 ",toggle:"flex flex-row w-full items-center justify-start text-xs gap-1 h-sm px-1 rounded-md bg-transparent pointer"};if(r.className=o[s?.customStyle]||o.primary,r.innerHTML=e,s)for(let c in s)c=="class"?r.className+=` ${s[c]}`:r.setAttribute(c,s[c]);return a&&(r.onclick=a),i.appendChild(r),s?.position==="top"?this.domElement.querySelector(".messages-container").prepend(i):this.domElement.querySelector(".messages-container").appendChild(i),i}redraw(e=!0){this.workspace.jsPlumbInstance;const n=this.workspace,s=this,a=this.properties.outputs||[],i=this.properties.inputs||[],r=document.createElement("div");r.className=`component exclude-panzoom group ${this.drawSettings.cssClass||""}`,r.id=`${this._uid}`,r.style.left=this.properties.left||"20px",r.style.top=this.properties.top||"20px",this.properties.width&&(r.style.width=this.properties.width),this.properties.height&&(r.style.height=this.properties.height),r.classList.add(this.constructor.name);const o=document.createElement("div");o.className="internal-name";const c=this.properties.template?.templateInfo?.name||this.properties.template?.name||this.drawSettings.displayName||this.constructor.name;this.displayName=c,this.properties.template?.templateInfo?.description||this.properties.template?.shortDescription||this.drawSettings.shortDescription||this.drawSettings.componentDescription,o.innerHTML=this.properties.template?"T:"+c:c,r.appendChild(o);const l=document.createElement("div");l.className="title-bar";const u=this.drawSettings.iconCSSClass||"";if(u.startsWith("<svg")){const G=this.drawSettings.color||"#000",J=u.replace(/<path/g,"<path ");l.innerHTML=`<div class="flex flex-row items-center gap-1 title-bar-top">
          <span class="icon w-6 h-6">${J}</span>
          <span class="title">${this.title}</span>
        </div>
        <span class="description">${this.description}</span>
      `;const E=l.querySelectorAll("path");[...E].find(O=>O.getAttribute("fill")&&O.getAttribute("fill")!=="none")||E.forEach(O=>O.setAttribute("fill",G))}else l.innerHTML=`<div class="flex flex-row items-center gap-1 title-bar-top">
        <span class="icon ${u} h-full"></span>
        <span class="title font-semibold">${this.title}</span>
      </div>
      <span class="description">${this.description}</span>
      `;l.setAttribute("smt-name",this.constructor.name);const p=l.querySelector(".title"),g=l.querySelector(".description");p.style.cursor="default",g.style.cursor="default",r.appendChild(l),setTimeout(()=>{this.addDebugButton()},500);const y=yt((G,J)=>{const E=G.target;if(E instanceof HTMLElement){if(E.hasAttribute("contenteditable")){G.stopPropagation();return}!G.ctrlKey&&!G.metaKey&&(this.workspace.refreshComponentSelection(),Q(G)),J.classList.toggle("selected"),J.classList.remove("unselected"),document.querySelectorAll("#workspace-container .component:not(.selected)").forEach(O=>O.classList.add("unselected")),li()}},"handleComponentElementClick");p.addEventListener("click",G=>y(G,r)),g.addEventListener("click",G=>y(G,r)),setTimeout(()=>{Cc(p,{callback:G=>{G||(G=c||""),p.querySelector(".text").textContent=G,this.title=G,this.aiTitle="",document.dispatchEvent(new CustomEvent("componentTitleChanged",{detail:{componentId:this.uid}})),this.workspace.saveAgent()},editOnClick:!1,showButtons:!0}),Cc(g,{callback:G=>{G||(G=""),g.querySelector(".text").textContent=G,this.description=G,document.dispatchEvent(new CustomEvent("componentDescriptionChanged",{detail:{componentId:this.uid}})),this.workspace.saveAgent()},editOnClick:!1,showButtons:!0})},500),setTimeout(()=>{const G=p.querySelector(".text");G&&G.classList.add("truncate")},550);const w=document.createElement("div");w.className=`debug-bar cursor-pointer px-[10px] mx-auto text-white variant_2 rounded-lg ${this.isFunctionalComponent()?"mt-[10px]":""}`,r.appendChild(w),w.addEventListener("click",G=>{G.stopPropagation(),G.stopImmediatePropagation(),this.workspace.refreshComponentSelection(r)});const S=document.createElement("div");S.className="debug-info hidden",w.appendChild(S);const m=document.createElement("button");m.innerHTML='<span class="mif-search icon"></span> Log',m.className="btn-debug-log button primary mini outline hidden",m.onclick=G=>{G.stopPropagation(),G.stopImmediatePropagation(),this.workspace.refreshComponentSelection(r);const J=this.workspace.domElement.querySelector(`.debug-box[rel="${this._uid}"]`);if(J?.classList?.toggle("hidden"),J.classList.contains("hidden"))J._connection.canvas.classList.add("hidden");else{if(!J._connection&&!J.classList.contains("hidden")){const E=n.jsPlumbInstance.connect({source:J.querySelector("h2"),target:w,detachable:!1,cssClass:"exclude-panzoom z-100",anchors:["Continuous","Left"]});E.setPaintStyle({stroke:"#7d7c96",strokeWidth:1,dashstyle:"4 3"}),E.removeAllOverlays(),E.endpoints[0]._domElement=J,E.endpoints[1]._domElement=w,J._connection=E}J._connection.canvas.classList.remove("hidden")}},w.appendChild(m);const D=document.createElement("button");D.innerHTML=' <i class="fa-solid fa-wand-magic-sparkles"></i> Fix with AI',D.className="btn-fix-with-ai button primary mini outline hidden",D.onclick=async G=>{if(G.stopPropagation(),this.workspace.refreshComponentSelection(r),!document.getElementById("builder-button")){Xe("Agent Weaver is not enabled");return}document.getElementById("agentMessageInput"),document.getElementById("agentSendButton"),this.workspace.domElement.querySelector(`.debug-box[rel="${this._uid}"] .dbg-log`)?.textContent;const J=D.getAttribute("data-error")||"",E=this.domElement.querySelectorAll(".input-container .endpoint");let O="";for(let B of E){const z=B.querySelector("span.name").innerText,Y=B.querySelector("div.dbg-output textarea.dbg");let se=Y?Y?.value:"",le;try{le=Rm(se),le=Vo(le),Array.isArray(le)&&le.length>3&&(le=le.slice(0,3),le.push("...(truncated to 3 items)")),O+=`${z}: ${JSON.stringify(le)}
`,O=O.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}catch{se.length>300&&(se=se.substring(0,300)+"...(long content truncated)"),O+=`${z}: ${se}
`}}O&&(O=`===
Received Inputs:
${O}

`);const C=`Component With ID=${this._uid} has a runtime error:
      ${J.substring(0,500)}

      ${O}
      ####

      
Please fix the issue, or explain it if you can't fix it`;console.log("Weaver Error fix prompt: ",C),g6({weaverPrompt:C,componentId:this._uid})},w.appendChild(D);const A=document.createElement("div");if(A.className="ep-control inputs px-2",A.innerHTML=`<span>${this.drawSettings.addInputButtonLabel||this.drawSettings.addInputButton}</span>`,r.appendChild(A),this.drawSettings.addInputButton){const G=document.createElement("button");G.innerHTML="+",A.innerHTML="",G.className="btn-add-endpoint button mini w-6 h-6 bg-smythos-blue-500 text-white rounded",A.appendChild(G);const J=document.createElement("span");J.innerHTML=this.drawSettings.addInputButtonLabel||this.drawSettings.addInputButton,A.appendChild(J),G.onclick=E=>{E.stopPropagation(),E.stopImmediatePropagation(),this.addInputDialog()}}const j=document.createElement("div");j.className="input-container",r.appendChild(j);const L=document.createElement("div");if(L.className="ep-control outputs px-2",L.innerHTML=`<span>${this.drawSettings.addOutputButtonLabel||this.drawSettings.addOutputButton}</span>`,r.appendChild(L),this.drawSettings.addOutputButton){const G=document.createElement("button");G.innerHTML="+",L.innerHTML="",G.className="btn-add-endpoint button mini w-6 h-6 bg-smythos-blue-500 text-white rounded",L.appendChild(G);const J=document.createElement("span");J.innerHTML=this.drawSettings.addOutputButtonLabel||this.drawSettings.addOutputButton,L.appendChild(J),G.onclick=E=>{E.stopPropagation(),E.stopImmediatePropagation(),this.addOutputDialog()}}const k=document.createElement("div");k.className="output-container",r.appendChild(k);const I=document.createElement("div");I.className="button-container messages-container",I.addEventListener("click",G=>{G.stopPropagation()}),r.appendChild(I);const v=document.createElement("div");v.className="right-side-button-container absolute right-0 flex transition-opacity opacity-0 group-hover:opacity-100";const T=document.createElement("button");T.className="w-6 h-6 rounded del-btn relative group/delete",T.innerHTML='<i class="fas fa-trash text-[#757575] text-xs hover:text-[#aaa]"></i>',T.onclick=G=>{G.stopPropagation(),s.delete(!1)};const P=document.createElement("div");P.className="absolute left-[-20px] z-10 inline-block px-3 py-2 w-max text-sm font-medium text-white bg-gray-950 rounded-lg shadow-sm tooltip dark:bg-gray-700 opacity-0 group-hover/delete:opacity-100 transition-opacity duration-300 bottom-full right-0 mb-2 whitespace-nowrap pointer-events-none",P.innerText="Delete",T.appendChild(P),v.appendChild(T);const F=s.properties?.template?.templateInfo?.docPath||"/not-set",U=s.properties?.template?s.workspace.serverData.docUrl+F:s.docUrl,M=document.createElement("button");M.className="w-6 h-6 rounded action-help relative group/help",M.innerHTML='<span class="font-bold text-lg text-[#757575] hover:text-[#aaa]">?</span>',M.onclick=G=>{G.stopPropagation(),window.open(U,"_blank")},s.properties?.template&&!s.properties?.template?.templateInfo?.docPath&&M.classList.add("hidden");const V=document.createElement("div");V.className="absolute left-[-15px] z-10 inline-block px-3 py-2 w-max text-sm font-medium text-white bg-gray-950 rounded-lg shadow-sm tooltip dark:bg-gray-700 opacity-0 group-hover/help:opacity-100 transition-opacity duration-300 bottom-full right-0 mb-2 whitespace-nowrap pointer-events-none",V.innerText="Help",M.appendChild(V),v.appendChild(M);const W=document.createElement("button");W.className="w-6 h-6 rounded relative group/settings",W.innerHTML='<i class="fas fa-cog text-[#757575] text-xs hover:text-[#aaa]"></i>';const K=document.createElement("div");K.className="absolute left-[-25px] z-10 inline-block px-3 py-2 w-max text-sm font-medium text-white bg-gray-950 rounded-lg shadow-sm tooltip dark:bg-gray-700 opacity-0 group-hover/settings:opacity-100 transition-opacity duration-300 bottom-full right-0 mb-2 whitespace-nowrap pointer-events-none",this.drawSettings?.showSettings!==!1&&v.appendChild(W),K.innerText="Settings",W.appendChild(K),v.appendChild(W),r.appendChild(v);const R=document.createElement("div");R.className="loading-icon",R.innerHTML=`
      <svg
        aria-hidden="true"
        class="inline text-gray-200 animate-spin dark:text-gray-600 fill-primary-100 w-8 h-8"
        viewBox="0 0 100 101"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z"
          fill="currentColor"
        />
        <path
          d="M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z"
          fill="currentFill"
        />
      </svg>
    `,R.classList.add("hidden"),r.appendChild(R);const X=document.createElement("div");X.className="cpt-overlay",X.innerHTML=`<div class="content"></div><span class="dbg-loader"><svg height="48px" width="64px">
    <polyline id="front" points="0.157 23.954, 14 23.954, 21.843 48, 43 0, 50 24, 64 24"></polyline>
  </svg></span>`,r.appendChild(X),X.style.display="none";const Q=yt(async G=>{this.domElement.classList.contains("dragging")||this.domElement.classList.contains("resizing")||p.hasAttribute("contenteditable")&&G.target==p||g.hasAttribute("contenteditable")&&G.target==g||G.target?.classList?.contains("dbg")||!r.querySelector(".debug-info").classList.contains("hidden")||[...r.querySelectorAll(".dbg-element")].filter(J=>J.checkVisibility?.()).length>0||(!this.settingsOpen&&this.loadingIcon&&this.loadingIcon?.classList?.remove("hidden"),xa.curComponentSettings&&xa.curComponentSettings!==this&&await xa.curComponentSettings.confirmSaveSettings(),this.settingsOpen?this.closeSettings():this.editSettings())},"openSettingsSidebar");return r.addEventListener("click",G=>{if(G.target!==W){!G.ctrlKey&&!G.metaKey&&(this.workspace.refreshComponentSelection(),Q(G)),this.domElement.classList.toggle("selected"),this.domElement.classList.remove("unselected");const J=document.querySelectorAll("#workspace-container .component:not(.selected)");for(let E of J)E.classList.add("unselected");li()}}),W.addEventListener("click",G=>{G.stopPropagation(),Q(G),this.workspace.refreshComponentSelection(this.domElement)}),this.inputContainer=j,this.outputContainer=k,this.buttonContainer=I,this.overlay=X,this.loadingIcon=R,a.forEach((G,J)=>{this.addOutput(k,G)}),i.forEach((G,J)=>{this.addInput(j,G)}),ds(r).draggable({allowFrom:".component",ignoreFrom:".dbg-element,.debug-info",listeners:{start(G){if(n?.locked)return!1;s.domElement.classList.add("dragging"),s.domElement.style.cursor="grabbing"},move(G){if(n?.locked)return!1;if(!G.target)return;let J=[G.target];G.target.classList.contains("selected")?J=[...document.querySelectorAll(".component.selected")]:document.querySelectorAll(".component.selected").forEach(E=>E.classList.remove("selected"));for(let E of J){const O=(parseFloat(E.style.left)||0)+G.dx/n.scale,C=(parseFloat(E.style.top)||0)+G.dy/n.scale;E.style.left=O+"px",E.style.top=C+"px",E._control.repaint()}},end(G){if(n?.locked)return!1;s.repaint(!0),s.domElement.style.cursor="",setTimeout(()=>{s.workspace.saveAgent(),s.domElement.classList.remove("dragging")},200)}},modifiers:[],inertia:!0}).styleCursor(!1),$(l.querySelector(".svg-icon")).css("background-color","#000"),$(l.querySelector(".tpl-fa-icon")).css("color",this.drawSettings.color),this.domElement=r,this.workspace.domElement.appendChild(r),r.addEventListener("mousedown",function(G){G.stopPropagation()}),r.addEventListener("click",function(G){G.stopPropagation()}),ds(r).resizable({edges:{left:!1,right:!0,bottom:!1,top:!1},listeners:{start(G){if(n?.locked||[...s.domElement.querySelectorAll(".pinned")].length>0)return!1;s.domElement.classList.add("resizing")},move(G){if(n?.locked||[...s.domElement.querySelectorAll(".pinned")].length>0)return!1;const J=G.target;J.style.width=G.rect.width/n.scale+"px",s.repaint()},end(G){if(n?.locked||[...s.domElement.querySelectorAll(".pinned")].length>0)return!1;s.repaint(),setTimeout(()=>{s.workspace.saveAgent(),s.domElement.classList.remove("resizing")},200)}},modifiers:[ds.modifiers.restrictSize({min:{width:100,height:50}})],inertia:!1}),r._control=this,this.checkSettings(),e&&(setTimeout(()=>{this.workspace.saveAgent()},300),!this.properties.template&&this.drawSettings.showSettings&&this.editSettings()),this.emit("componentCreated",this),r}async delete(e=!0,n=!0){const s=this.workspace.jsPlumbInstance,a=this.domElement;if(e||await Mn("Are you sure you want to delete this component?","This action cannot be undone. Deleting will remove the component permanently.",{btnYesLabel:"Delete",btnNoLabel:"Cancel",btnYesClass:"bg-smyth-red-500 border-smyth-red-500 h-[48px] rounded-lg px-8",btnNoClass:"hidden"})){if(this.settingsOpen&&this.closeSettings(!0),this.showOverlay("Deleting..."),this.emit("beforeDelete",this),!await this.clean()){this.hideOverlay();return}const i=[...a.querySelectorAll(".output-endpoint"),...a.querySelectorAll(".input-endpoint"),...a.querySelectorAll(".agent-card-connection")].map(c=>s.getEndpoints(c)).flat(),r=[];for(let c of i)r.push(c);r.forEach(c=>s.deleteEndpoint(c)),this.destroy();const o=document.querySelector(`.debug-box[rel="${this.uid}"]`);if(o){const c=o._connection;c&&s.deleteConnection(c),o.remove()}document.querySelectorAll(".component").forEach(c=>c.classList.remove("selected","unselected")),delete xu[this.uid],n&&this.workspace.saveAgent(),this.hideOverlay()}}async addInputDialog(){const e={name:{type:"text",label:"Input Name",class:"stg-input stg-name",value:"",required:!0,validate:"required custom=isValidInputName",validateMessage:"Name is required and can only contain letters, numbers, and underscores.",attributes:{placeholder:"E.g. Username"}},...Cu({compName:this.constructor.name,values:{type:"Any"}}),additionalOptionsLabel:{type:"div",html:'<small class="field-hint">Choose whether this input is mandatory or optional. You can also assign a color label to this input for better organization or categorization.</small>',section:"Advanced_Options",formControlCls:"bg-white"},color:Ci(`${Lt.conEndColor}`),optional:Su()};for(let i in this.inputSettings){const r=this.inputSettings[i];r&&(e[i]={...r.editConfig,value:r.editConfig?.defaultVal||""})}const n=this.constructor.name===Yt.apiEndpoint?'<span class="text-xl agent-skill-dialog-title">Add Skill Input</span>':'<span class="text-xl">Add Input</span>';e?.description&&(e.description.section="Advanced_Options");const s=Si(e,["name","type","description","additionalOptionsLabel","optional","color"]),a=await this.inputEditor({title:n,fields:s,onDOMReady:i=>{const r=i.querySelector("#name"),o=i.querySelector(".agent-skill-dialog-title"),c=document.querySelector("#add-skill-input-info-icon");o&&c&&(c.classList.remove("hidden"),o.appendChild(c)),je(50).then(()=>Xi(r))},contentClasses:"min-h-[425px]",dialogClasses:"dialog-center rounded-[18px] p-2 pb-3",showCloseButton:!0});if(a?.name){const i=await this.addInput(this.inputContainer,a.name,a);if(a.optional&&(i.setAttribute("smt-optional",a.optional),a.optional?i.classList.add("optional"):i.classList.remove("optional")),i&&a.color){i.setAttribute("smt-color",a.color),i.querySelector(".ep").style.backgroundColor=a.color||`${Lt.conEndColor}`,i.querySelector(".name").style.borderImage=`linear-gradient(90deg, transparent 20%, ${a.color}) 1`;const r=i.endpoint;if(r&&r.connections)for(let o of r.connections)this.workspace.updateConnectionColors(o)}i?.setAttribute("smt-type",a?.type||""),i?.setAttribute("smt-friendly-input-type",a?.friendlyInputType||""),i?.setAttribute("smt-core-input-type",a?.coreInputType||"");for(let r in this.inputSettings){const o=this.inputSettings[r];if(i&&o){const c=i.getAttribute(`smt-${r}`);a[r]!==c&&a[r]!=null&&i.setAttribute(`smt-${r}`,a[r])}}this.repaint(),this.workspace.saveAgent()}}async addOutputDialog(){const e={name:{type:"text",label:"Output Name",class:"stg-input stg-name",value:"",validate:"required custom=isValidOutputName",validateMessage:"Name is required and allow JSON path notation, e.g., Response.text, items[0], data['key'], etc."},additionalOptionsLabel:{type:"div",html:'<small class="field-hint">You can also assign a color label to this input for better organization or categorization.</small>',section:"Advanced_Options",formControlCls:"bg-white"},color:Ci(`${Lt.conStartColor}`)};for(let i in this.outputSettings){const r=this.outputSettings[i];r&&(e[i]={...r.editConfig,value:r.editConfig?.defaultVal||""})}e?.description&&(e.description.section="Advanced_Options");const n=this.constructor.name===Yt.apiEndpoint?'<span class="text-xl agent-skill-dialog-title">Add Skill Output</span>':'<span class="text-xl">Add Output</span>',s=Si(e,["description","expression","additionalOptionsLabel","color"]),a=await this.inputEditor({title:n,fields:s,onDOMReady:i=>{const r=i.querySelector("#name"),o=i.querySelector(".agent-skill-dialog-title"),c=document.querySelector("#add-skill-input-info-icon");o&&c&&(c.classList.remove("hidden"),o.appendChild(c)),je(50).then(()=>Xi(r))},contentClasses:"min-h-[335px]",dialogClasses:"dialog-center rounded-[18px] p-2 pb-3",showCloseButton:!0});if(a?.name){const i=await this.addOutput(this.outputContainer,a.name,a);if(i&&a.color){i.setAttribute("smt-color",a.color),i.querySelector(".ep").style.backgroundColor=a.color||`${Lt.conStartColor}`,i.querySelector(".name").style.borderImage=`linear-gradient(90deg, transparent 20%, ${a.color}) 1`;const r=i.endpoint;if(r&&r.connections)for(let o of r.connections)this.workspace.updateConnectionColors(o)}for(let r in this.outputSettings){const o=this.outputSettings[r];if(i&&o){const c=i.getAttribute(`smt-${r}`);a[r]!==c&&a[r]!=null&&i.setAttribute(`smt-${r}`,a[r])}}this.repaint()}}async openDebugDialog(e,n="step"){_t.track("app_debug_inject_click",{}),e.stopPropagation(),e.stopImmediatePropagation();const s=this.domElement.querySelector(".btn-debug"),a=[...this.domElement.querySelectorAll(".input-endpoint")].map(r=>({name:r.getAttribute("smt-name"),type:r.getAttribute("smt-isfile")=="true"||Rb.includes(r.getAttribute("smt-type"))?"file":"text"})),i=[...this.domElement.querySelectorAll(".output-endpoint")].map(r=>({name:r.getAttribute("smt-name")}));return new Promise((r,o)=>{this.workspace.debugger.createDebugInjectDialog(this,a,i,async c=>{if(this.workspace.debugger.getDebugSessionID())return null;ys({step:{enable:!1},run:n==="run"?{enable:!0,icon:"mif-pause",tooltipText:"Pause"}:{enable:!1},stop:{enable:n!=="run"},attach:{enable:!1}});const l=this.workspace.agent;try{this.workspace.domElement.classList.add("debugging"),s.classList.add("active"),await this.workspace.debugger.injectComponentDebugInfo(l.id,this._uid,c);const u=await this.workspace.debugger.readDebugStep(l.id);return r({status:"success"}),u}catch(u){return u&&u?.status==413&&Xe("Payload Too Large"),Xe("Something went wrong, please try again later!"),o({status:"error"}),{errorOccurred:!0}}finally{No()}},n)})}exportTemplate(){return null}export(){const e=this,n=this.domElement;return{id:n.id,name:n.querySelector(".title-bar").getAttribute("smt-name"),outputs:[...n.querySelectorAll(".output-endpoint")].map((s,a)=>({name:s.getAttribute("smt-name"),color:s.getAttribute("smt-color"),...workspace.extractComponentOutputProps(n,s),index:a,uuid:s.endpoint?.getUuid(),default:e.properties.defaultOutputs.includes(s.getAttribute("smt-name"))})),inputs:[...n.querySelectorAll(".input-endpoint")].map((s,a)=>({name:s.getAttribute("smt-name"),type:s.getAttribute("smt-type"),friendlyInputType:s.getAttribute("smt-friendly-input-type"),coreInputType:s.getAttribute("smt-core-input-type"),color:s.getAttribute("smt-color"),optional:s.getAttribute("smt-optional")==="true",...workspace.extractComponentInputProps(n,s),index:a,uuid:s.endpoint?.getUuid(),default:e.properties.defaultInputs.includes(s.getAttribute("smt-name"))})),data:typeof e.data=="object"?JSON.parse(JSON.stringify(e.data)):e.data,top:n.style.top,left:n.style.left,width:n.style.width,height:n.style.height,displayName:e.drawSettings.displayName,title:e.title,aiTitle:e.aiTitle,description:e.description,template:typeof e.properties.template=="object"?JSON.parse(JSON.stringify(e.properties.template)):e.properties.template}}async updateTitle(){const e=this.settingsEntries,n=document.querySelector("#right-sidebar form"),s=Yi(n,e),a=qb("Generating Title..."),i=this.domElement.querySelector(".title-bar .title"),r=i.querySelector(".text"),o=i.querySelector(".btn-edit-inline");r.style.display="none",o.style.display="none",i.appendChild(a);try{const c=await this.generateTitle(s?.prompt);c&&(this.aiTitle=c,r.textContent=c)}finally{a.remove(),r.style.display="inline",o.style.display="inline-flex"}}async generateTitle(e){if(!(!e||typeof e!="string"))try{const n=await(await fetch("/api/page/builder/data/generate-component-title",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:e})})).json();if(!n?.success)throw new Error("Error generating title!");return n?.data}catch{return""}}};yt(qm,"Component");let Be=qm;function Si(t,e){const n={...t};let s={};for(let a of e)n[a]&&(s[a]=n[a],delete n[a]);return s={...s,...n},s}d(Si,"nt"),yt(Si,"getOrderedValConfig");function Bm({value:t="",label:e=""}){const n=[{value:"Text",text:"Text",classes:{check:"svg-icon Text border-0 rounded-none w-6 h-6",caption:"text-base"}},{value:"Image",text:"Image",classes:{check:"svg-icon Image border-0 rounded-none w-6 h-6",caption:"text-base"}},{value:"Audio",text:"Audio",classes:{check:"svg-icon Audio border-0 rounded-none w-6 h-6",caption:"text-base"}},{value:"Video",text:"Video",classes:{check:"svg-icon Video border-0 rounded-none w-6 h-6",caption:"text-base"}},{value:"Others",text:"Others",classes:{check:"svg-icon Others border-0 rounded-none w-6 h-6",caption:"text-base"}}];for(let[s,a]of n.entries())a.classes.radio=a.value===t?"active":"",n[s]=a;return je(100).then(()=>{if(t==="Others"){const s=document.querySelector('[data-field-name="coreInputType"]'),a=document.getElementById("type");s?.classList?.remove("hidden");const i=document.getElementById("coreInputType");a&&(a.value=i?.value||"Any")}}),{type:"radio",label:e,class:"stg-input stg-type",formControlCls:"flex justify-between bg-white",fieldCls:"border border-solid border-[#D9D9D9] rounded-lg p-3 h-auto",value:t,options:n,events:{change:s=>{const a=s.target,i=a.value,r=document.querySelector('[data-field-name="coreInputType"]'),o=document.getElementById("type");if(i==="Others"){r?.classList?.remove("hidden");const l=document.getElementById("coreInputType");o&&(o.value=l?.value||"Any")}else r?.classList?.add("hidden"),o&&(o.value=i);a.closest(".form-group").querySelectorAll(".radio")?.forEach(l=>l.classList.remove("active"));const c=a.closest(".radio");c&&c.classList.add("active")}}}}d(Bm,"Gt"),yt(Bm,"getFriendlyInputTypeField");function wu({value:t="",label:e="",classes:n=""}){return{type:"select",class:n,label:e,value:t,options:[{value:"Any",text:"Any"},{value:"String",text:"String"},{value:"Number",text:"Number (can include floating point)"},{value:"Integer",text:"Integer (without a fraction part)"},{value:"Boolean",text:"Boolean"},{value:"Array",text:"Array"},{value:"Object",text:"Object"},{value:"Binary",text:"Binary"},{value:"Date",text:"Date (ISO 8601 Standard)"}],events:{change:s=>{const a=s.target.value,i=document.getElementById("type");i&&(i.value=a)}}}}d(wu,"yt"),yt(wu,"getCoreInputTypeField");function Ci(t=""){return{type:"color",class:"w-44 stg-input stg-color stg-circle-color-picker",value:t,section:"Advanced_Options",fieldsGroup:"additionalOptions"}}d(Ci,"st"),yt(Ci,"getColorField");function Su(t=!1,e=!1){return{type:"radio",label:"",value:t,section:"Advanced_Options",class:"w-2/4 stg-input stg-optional",fieldsGroup:"additionalOptions",readonly:e,options:[{value:!1,text:"Required"},{value:!0,text:"Optional"}]}}d(Su,"bt"),yt(Su,"getOptionalField");function Cu({compName:t,values:e}){return t===Yt.apiEndpoint?{friendlyInputType:Bm({value:e.friendlyInputType,label:"Input type"}),coreInputType:wu({value:e.coreInputType,classes:"w-full h-12 hidden"}),type:{type:"hidden",class:"stg-input stg-type",value:e.type,attributes:{"data-cls-option":"option-input-type"}}}:{coreInputType:wu({value:e.coreInputType,label:"Input type",classes:"w-full"}),type:{type:"hidden",class:"stg-input stg-type",value:e.type,attributes:{"data-cls-option":"option-input-type"}}}}d(Cu,"Et"),yt(Cu,"getTypeFields");function Um({keyName:t,component:e,onSuccess:n,onError:s}){const a={keyName:{label:"Name",type:"text",class:"w-2/5",value:t,readonly:!0},apiKey:{label:"Key",type:"textarea",fieldCls:"max-h-64 min-h-[34px] h-[34px] px-3 py-1",class:"w-3/5",validate:"required maxlength=10000",validateMessage:"API Key is required",value:"",autoSize:!1,attributes:{placeholder:"Please enter your Key"}}},i="_add_missing_key_submit_btn",r="_mock_data_btn",o=yt(async(u,p)=>{const{keyName:g,apiKey:y}=u,w=Ec("white","mr-2"),S=p.querySelector(`.${i}`);S.textContent="Adding Key...",S.prepend(w),S.disabled=!0;try{const m=["All"],D=await fetch(`${Bb.env.UI_SERVER}/api/page/builder/keys`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({keyName:g,key:y,scope:m})}).then(A=>A.json());Ta(p),n({[D?.data?.keyId]:{name:g,scope:m}})}catch{s()}finally{w.remove(),S.disabled=!1,S.textContent="Add Key"}},"saveKey"),c={label:"Skip for now and set mock data",cssClass:`underline hover:no-underline text-gray-500 ${r}`,callback:async(u,p)=>{const g=yt(S=>(S+Math.random()).toString(36).replace(".",""),"getRandomString"),y=`sos-mock-key-${g(Date.now())}-${g(123456789)}`,w=p.querySelector("#apiKey");w.value=y,await o({...u,apiKey:y},p),_t.track("app_mock_screen_impression",{source:"skip_and_set_mock_data"}),await $l(e),oi.turnOn(e),await jo(e)}},l={label:"Continue",cssClass:`disabled:opacity-50 bg-v2-blue hover:bg-v2-blue/80 text-white cursor-pointer ml-auto mt-2 ${i}`,requiresValidation:!0,callback:o};vr({title:"Configure API Key",fields:a,content:`<span class="text-xs text-gray-500 block mb-4">The component <span class="font-bold">${e?.title||""}</span> requires an API key to function. Please retrieve your API key from the provider and securely store it in the SmythOS vault.</span>`,actions:[c,l],onCloseClick:(u,p)=>{Ta(p)},onDOMReady:async u=>{const p=u.querySelector(`.${i}`);p.classList.remove("w-[340px]"),p.classList.add("w-40");const g=u.querySelector(`.${r}`);g?.classList.remove("w-[340px]"),g?.classList.remove("text-white"),g?.classList.remove("hover:opacity-75"),g?.classList.add("auto");const y=u.querySelector(".__actions");y?.classList.remove("justify-center"),y?.classList.add("justify-between")}},"auto","auto","none","672px","672px")}d(Um,"Zt"),yt(Um,"addMissingKey");function Wo(t){return"_comp_message_"+t.replace(/\+/g,"_").replace(/\s+/g,"_").toLowerCase()}d(Wo,"rt"),yt(Wo,"formatKeyAsClassName");function zm(t,e){Um({keyName:t,component:this,onSuccess:n=>{Bt("Key saved successfully"),this?.clearComponentMessage(`.${Wo(t)}`),Ub(n);const s=this.workspace?.agent?.data?.components.map(a=>{const i=a.data,r=[];for(const o in i){let c=i[o];if(!c||(c=typeof c=="object"?JSON.stringify(c):c,typeof c!="string"))continue;const l=/{{KEY\(([^}]*)\)}}/g;let u;for(;(u=l.exec(c))!==null;)if(u[1]){const p=u[1];(p===t||p.replace(/\+/g," ")===t)&&r.push({id:a.id,keyName:p})}}return r}).flat(1/0).filter(a=>a.id);s.length>0&&s.forEach(async({id:a,keyName:i})=>{await xu[a]?.checkSettings()})},onError:()=>{Xe("Error saving key, please try again or contact support.")}})}d(zm,"Xt"),yt(zm,"missingKeyMessageClickHandler");var v6=Object.defineProperty,ct=d((t,e)=>v6(t,"name",{value:e,configurable:!0}),"m");let ot;function Hm(){dl({rootID:"agent-settings-root"})}d(Hm,"Z"),ct(Hm,"setupAgentSettingsScripts");async function Gm(t){ot=t,Zm(),n0(),await Km(),Ym(),Hm()}d(Gm,"setupAgentScripts"),ct(Gm,"setupAgentScripts");function Vm(){return new Promise((t,e)=>{let n=10;const s=setInterval(()=>{ot.serverData.docUrl&&(clearInterval(s),t(!0)),n--<=0&&(clearInterval(s),t(!1))},100)})}d(Vm,"ee"),ct(Vm,"waitWorkspaceServerData");function Wm(){return new Promise(async(t,e)=>{const n=document.querySelector("#studio");n?.classList.add("hidden");const s=new URLSearchParams(window.location.search).get("templateId"),a=document.querySelector("#newAgentModal"),i=document.querySelector("#newAgentModal .agentName"),r=document.querySelector("#newAgentModal .name-error"),o=document.querySelector("#newAgentModal .agentDescription"),c=document.querySelector("#newAgentModal .btnCreate"),l=document.querySelector("#newAgentModal .agentTemplate");s||kr(!1,100),r.classList.add("hidden"),i.value="Untitled Agent",o.value="",l.innerHTML='<option value="NONE">Select Template</option><option value="NONE">Empty Agent</option>';function u(S,m,D){return S.trim().length>=m&&S.trim().length<=D}d(u,"y"),ct(u,"inputLengthCheck");function p(){c.disabled=!u(i.value,3,60)}d(p,"p"),ct(p,"handleSubmitFormButtonState");function g(S=!1){let m=i.value.trim().length,D=m<3||m>60;S||(r.innerText=m<3?"Name should be at least 3 characters long.":m>60?"Name should not be more than 60 characters long.":"",r.classList.toggle("hidden",!D)),p()}d(g,"f"),ct(g,"handleNameChange"),g(!0);let y=await Jm();if(y)for(let S in y){const m=y[S],D=document.createElement("option");D.value=S,D.innerText=m.name,s&&S==s&&D.setAttribute("selected",""),l.appendChild(D)}else y={};l.onchange=()=>{const S=l.options[l.options.selectedIndex].value,m=y[S]?.template;m&&(o.value=m.description,i.value=y[S]?.name||"",g())},l.dispatchEvent(new Event("change")),i.oninvalid=S=>{S.preventDefault(),i.setCustomValidity(""),g()},i.oninput=()=>{i.setCustomValidity(""),g()},i.onkeyup=S=>(g(),S.preventDefault(),S.stopPropagation(),!1);const w=ct(async()=>{a.classList.add("hidden"),Ms("Creating Agent ...");const S=l.options[l.options.selectedIndex].value;let m=y[S]?.template,D=!1;if(!m)try{m=JSON.parse(o.value),(!m?.components||!m?.version)&&(m=null),D=!0}catch{}if(await je(200),await ot.createAgent(i.value,D?"":o.value,A=>{m&&(A.components=m.components,A.connections=m.connections,A.description=m.description,A.version=m.version,A.templateInfo=m.templateInfo,A.variables=m.variables,A.behavior=m.behavior)})){m&&Ms("Loading Template Data ..."),a.classList.add("hidden"),n?.classList.remove("hidden");const A=new URLSearchParams(window.location.search),j=A.get("chat"),L=A.get("attach");A.get("from"),j&&(localStorage.setItem("chatMessage",JSON.stringify({message:j,ttl:Date.now()+1e3*60*3})),setTimeout(()=>{try{JSON.parse(localStorage.getItem("chatMessage")).ttl<Date.now()&&localStorage.removeItem("chatMessage")}catch{}},1e3*60*3.1)),L&&(localStorage.setItem("chatAttachments",JSON.stringify({attachments:[L],ttl:Date.now()+1e3*60*3})),setTimeout(()=>{try{JSON.parse(localStorage.getItem("file")).ttl<Date.now()&&localStorage.removeItem("file")}catch{}},1e3*60*3.1)),t(ot.agent.id)}else Ms('<span class="text-red-700/70">Could not create agent</span>')},"createAgentClick");w(),s&&(await je(100),w())})}d(Wm,"te"),ct(Wm,"createAgent");async function Km(t=null){const e=document.location?.pathname?.split("/");t||(t=e?.length==3?e?.pop():null),t||(t=await Wm()),await Vm(),await ot.loadAgent(t,{lockAfterFetch:!0}).catch(s=>{console.log("Error loading agent",s);const a=s?.status||500,i=s?.status==404?"You don't have access to this agent.":s?.message||s?.error||"Operation failed";console.log(s),s?.status==404&&(s?.errorData?.errKey?.includes("DIFFERENT_TEAM")?Wi("Access Error","You are not authorized to access this agent. Would you like to switch to the correct team?",{"Switch Team":{class:"text-white bg-v2-blue z-50",handler:async()=>{const r=s?.errorData?.errKey?.split("DIFFERENT_TEAM_")[1];r?(await fetch(`/api/app/user-settings/${Kb.USER_TEAM}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({value:r})}),window.location.reload()):window.location.href="/"}},"Go to Home":{class:"border border-gray-700 hover:opacity-75",handler:()=>{window.location.href="/"}}},null,{bringToFront:!0}):s?.errorData?.errKey?.includes("NOT_ALLOWED_TO_ACCESS_AGENT")?Wi("Access Error",i,{"Request Access":{class:"text-white bg-v2-blue z-50",handler:()=>{s0(t,ot?.userData?.email)}},"Go to Home":{class:"border border-gray-700 hover:opacity-75",handler:()=>{window.location.href="/"}}},null,{bringToFront:!0}):document.location.href=`/error/${a}?message=${i}`)}),await ot.loadUserSubscription();const n=document.querySelector("#watermark-agent-name");return n&&(n.innerText=ot.agent.name),ot.agent?.name&&(document.title=ot.agent.name+" | SmythOS"),history.replaceState(null,"","/builder/"+t),t}d(Km,"ne"),ct(Km,"loadAgent");async function Ym(t){const e=document.getElementById("agent-name-input"),n=document.querySelector("#agent-behavior-input"),s=document.querySelector("#agent-save-btn"),a=document.querySelector("#agent-delete-btn"),i=document.querySelector("#agent-domains-input"),r=document.querySelector('label[for="agent-domains-input"] a.domain'),o=document.querySelector('label[for="agent-domains-input"] a.api'),c=ot?.serverData?.agent_domain?`${new URL(ot.serverData.frontUrl).protocol}//${ot.agent.id}.${ot.serverData.agent_domain}`:"",l=document.querySelector('label[for="agent-testdom-input"] a.domain'),u=document.querySelector('label[for="agent-testdom-input"] a.api'),p=document.querySelectorAll(".agent-menu-loading-overlay");if(await ot.waitServerData(),l&&u&&(l.href=`${c}`,u.href=`${c}/swagger`),i){let y=i.options[i.options.selectedIndex]?.value;r&&o&&(y!=="[None]"?(r.href=`https://${y}`,o.href=`https://${y}/swagger`,r.classList.remove("hidden"),o.classList.remove("hidden")):(r.href="#",o.href="#",r.classList.add("hidden"),o.classList.add("hidden"))),i.onchange=()=>{const S=i.options[i.options.selectedIndex].value;S!=="[None]"?(r.href=`https://${S}`,o.href=`https://${S}/swagger`,r.classList.remove("hidden"),o.classList.remove("hidden")):(r.href="#",o.href="#",r.classList.add("hidden"),o.classList.add("hidden"))};const w=await Xm();i.innerHTML="";for(let S of w){const m=document.createElement("option");m.value=S=="[None]"?"":S,m.innerText=S,ot.agent.domain==S&&m.setAttribute("selected",""),i.appendChild(m)}await je(200),p.forEach(S=>S.classList.add("hidden")),a.classList.remove("hidden"),i.dispatchEvent(new Event("change"))}s?.addEventListener("click",async()=>{const y=Ec();s.disabled=!0,s.prepend(y);const w=document.getElementById("agent-id-input"),S=e.value,m=n.value;ot.agent.name=S,ot.agent.behavior=m;const D=await ot.export(),A=ot.agent.id||w.value,j=ot.agent.domain,L=i.options[i.options.selectedIndex].value;let k=j!=L;if(j&&j!=L&&(j===""?console.log("Domain Set",L):L===""?console.log("Domain Unset",j):console.log("Domain Updated ",j,L)),await ot.saveAgent(S,L,D,A)){w.value=ot.agent.id,e.value=ot.agent.name;const I=document.querySelector("#watermark-agent-name");I&&(I.innerText=ot.agent.name),Bt("Agent saved")}else Xe("Save failed");return k&&await fetch("/api/page/builder/updateDomain",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({agentId:ot.agent.id,curDomain:j,domain:L})}).then(I=>{I.ok?(Bt("Domain Updated"),ot.agent.domain=L,g(L)):Xe("Domain Update failed")}).catch(I=>{console.log(I),Xe("Domain Update failed")}),s.disabled=!1,y.remove(),!1});function g(y){const w=document.querySelector("#deploy-agent-domain");w&&(w.value=y,w.dispatchEvent(new Event("input")))}d(g,"p"),ct(g,"updateDeploymentDomainField"),a?.addEventListener("click",async()=>{if(!await Mn("Are you sure you want to delete this agent ?","",{btnNoLabel:"No, Cancel",btnYesLabel:"Yes, I'm sure",btnYesClass:"bg-smyth-red-500 border-smyth-red-500"}))return;const y=ot.agent.id;await ot.deleteAgent(y)?(Bt("Agent deleted"),await je(1e3),document.location.href="/agents"):Xe("Delete failed")})}d(Ym,"oe"),ct(Ym,"handleAgentSettings");async function Xm(){const t=await fetch("/api/page/builder/domains",{method:"GET",headers:{"Content-Type":"application/json"}}).then(n=>n.ok?n.json():{error:"Failed to load domains"}).catch(n=>{console.log(n)});if(t.error)return console.log("data.error",t.error),!1;t.map(n=>n.name);const e=t.filter(n=>n.aiAgent==null||n.aiAgent.id==ot.agent.id).map(n=>n.name);return["[None]",`${ot.agent.id}.${ot.serverData.prod_agent_domain}`,...new Set(e)]}d(Xm,"ae"),ct(Xm,"loadAgentDomainsList");async function Jm(){const t=await fetch("/api/page/builder/agent-templates",{method:"GET",headers:{"Content-Type":"application/json"}}).then(e=>e.ok?e.json():{error:"Failed to load templates"}).catch(e=>{console.log(e)});return t.data?t.data:(console.log("Error reading agents templates"),{})}d(Jm,"se"),ct(Jm,"loadAgentTemplatesList");function Eu(t){let e=0;const n=document.querySelector("#btn-emb-chatbot"),s=document.querySelector("#btn-emb-api"),a=document.querySelector("#btn-emb-postman"),i=document.querySelector("#btn-emb-chatgpt"),r=document.querySelector("#btn-emb-video-tutorial"),o=document.querySelector("#btn-emb-doc"),c=document.querySelector("#btn-emb-agentllm");document.querySelector("#btn-emb-skill-preview");const l=document.querySelector("#btn-emb-alexa"),u=document.querySelector("#btn-emb-mcp");if(n&&(n.onclick=Jo,t.description.length>10||t.hasAPIEndpoints()?(n.classList.remove("opacity-30"),n.disabled=!1,e++):(n.classList.add("opacity-30"),n.disabled=!0)),c&&(c.onclick=()=>{Yb(ot,Ht)},t.hasAPIEndpoints()?(c.classList.remove("opacity-30"),c.disabled=!1,e++):(c.classList.add("opacity-30"),c.disabled=!0)),s&&(s.onclick=Zo,t.hasAPIEndpoints()?(s.classList.remove("opacity-30"),s.disabled=!1,e++):(s.classList.add("opacity-30"),s.disabled=!0)),a&&(a.onclick=Yo,t.hasAPIEndpoints()?(a.classList.remove("opacity-30"),a.disabled=!1,e++):(a.classList.add("opacity-30"),a.disabled=!0)),l&&(l.onclick=Xo,t.hasAPIEndpoints()?(l.classList.remove("opacity-30"),l.disabled=!1,e++):(l.classList.add("opacity-30"),l.disabled=!0)),u&&(console.log("btnMCP","Clicked"),u.onclick=Qo,t.hasAPIEndpoints()?(u.classList.remove("opacity-30"),u.disabled=!1,e++):(u.classList.add("opacity-30"),u.disabled=!0)),i&&(i.onclick=Ko,t.description.length>10||t.hasAPIEndpoints()?(i.classList.remove("opacity-30"),i.disabled=!1,e++):(i.classList.add("opacity-30"),i.disabled=!0)),r){const p=t?.data?.templateInfo?.videoLink;r.onclick=e0.bind(this,p),p?(r.classList.remove("opacity-30"),r.disabled=!1):(r.classList.add("opacity-30"),r.disabled=!0)}if(o){const p=t?.data?.templateInfo?.docLink;o.onclick=()=>window.open(p,"_blank"),p?(o.classList.remove("opacity-30"),o.disabled=!1):(o.classList.add("opacity-30"),o.disabled=!0)}}d(Eu,"U"),ct(Eu,"updateWorkspaceEmbodiments");function Zm(){!ot||!ot.agent||(ot.addEventListener("AgentSaved",Eu),ot.addEventListener("AgentLoaded",Eu))}d(Zm,"ie"),ct(Zm,"handleAgentEvents");async function Ht(t,e={},n,s){window.dispatchEvent(new CustomEvent("sidebarStateChanged",{detail:{rightSidebarOpen:!1,isSidebarOpen:window?.localStorage?.getItem("sidebarOpen")==="true",currentSidebarTab:Hb()||window?.localStorage?.getItem("currentSidebarTab")}})),Be.curComponentSettings&&await Be.curComponentSettings.closeSettings(),ot.domElement.classList.contains("debug-enabled");const a=document.querySelector("#embodiment-sidebar").querySelector(".title");let i;if(t)i=await Gb(n,t,e,s);else{i=await Vb();const r=Wb(n,s);a.innerHTML=r}i.querySelector("button.close-btn")?.classList?.remove("hidden")}d(Ht,"openEmbodimentDialog"),ct(Ht,"openEmbodimentDialog");async function Ko(){const{dev:t,prod:e,scheme:n}=qt.getState().agentDomains;if(!t&&!e){Ht('<div class="p-4">Agent domain is not set. Cannot provide chatGPT configuration</div>',{},"ChatGPT deployment instructions");return}const s=`<div class="emb-instructions p-4">
        <div class="flex items-center gap-2 mb-4">
          <p class="text-gray-700">${mt.chatgpt.description}</p>
        </div>
        <p>In order to create a custom GPT using your agent</p>
        &nbsp;<br />
        <ul class="steps">
            <li><a href="https://chatgpt.com/gpts" target="_blank">Click Here</a> to Create a custom GPT from chatGPT interface.</li>
            <li>Click on "Configure" tab</li>
            <li>Enter your Custom GPT information: We recommend to copy the content of SmythOS Agent behavior inside "Instructions" area in order to have a consistent behavior</li>
            <li>Scroll down and Click on "Create new action" button.<br />
            ${t?`<li>- Click Import URL and enter the following URL if you want to use your test agent: <b>${n}://${t}/api-docs/openapi-llm.json</b></li>`:""}
            ${e?`<li> - Click Import URL and enter the following URL if you want to use your production agent: <b>${n}://${e}/api-docs/openapi-llm.json</b></li>`:""}
            </li>
            <li>Click on "Create" button on the top right</li>
            <li>Your custom GPT is ready, you can keep customizing it or just start using it</li>
        </ul>
        &nbsp;<br />
        <hr />
        &nbsp;<br />
        <p>
        <b>Note :</b> If you use the test url, your Custom GPT will use the current edited agent. When debug mode is enabled, the agent will not respond until you attach the debugger and run the workflow, this allows you to capture incoming requests to your agent in test mode and test them.
        </p>
        </div>
    `;Ht(s,{},mt.chatgpt.title,mt.chatgpt.tooltipTitle)}d(Ko,"openChatGPTEmbodiment"),ct(Ko,"openChatGPTEmbodiment");async function Yo(){const{dev:t,prod:e,scheme:n}=qt.getState().agentDomains;if(!t&&!e){Ht('<div class="p-4">Agent domain is not set. Cannot provide Postman features</div>',{},mt.api.title,mt.api.tooltipTitle);return}const s=t?`${n}://${t}/postman`:"",a=e?`${n}://${e}/postman`:"",i=s?`<div><a href="${s}" target="_blank" class="flex items-center justify-center text-sm font-normal border border-solid text-base px-4 py-2 text-center rounded transition-all duration-200 outline-none focus:outline-none focus:ring-0 focus:ring-offset-0 focus:ring-shadow-none ${xr}">Export Test Endpoints</a></div>`:"",r=a?`<div><a href="${a}" target="_blank" class="flex items-center justify-center text-sm font-normal border border-solid text-base px-4 py-2 text-center rounded transition-all duration-200 outline-none focus:outline-none focus:ring-0 focus:ring-offset-0 focus:ring-shadow-none ${xr}">Export Prod Endpoints</a></div>`:"",o=`<div class="emb-instructions p-4 flex-row">
        <div class="flex items-center gap-2 mb-5">
          <p class="text-gray-700">Test your agent using Postman or import Postman collections to your agent workspace. Includes tools for exporting and debugging API calls.</p>
        </div>
        <h2>Exporting Agent to Postman Collection</h2>
        <div class="flex space-x-3 justify-between mt-5">
        ${i}

        ${r}
        </div>
        &nbsp;<br />
        <p>
        When you use the test agent, you can enable the debug mode to capture incoming requests to your agent, in this case, the request will remain stuck until you attach the debugger and run the workflow from SmythOS builder.<a href="${Ut}/agent-studio/build-agents/debugging" target="_blank"> Learn more</a>
        </p>
        &nbsp;<br />
        <h2>Importing Postman Collection to Agent</h2>
        <p>You can import a postman collection to your agent by dragging the collection .json file to the agent workspace.</p>
        &nbsp;<br />
        <hr />
        </div>
    `;Ht(o,{},mt.postman.title,mt.postman.tooltipTitle)}d(Yo,"openPostmanEmbodiment"),ct(Yo,"openPostmanEmbodiment");async function Xo(){_t.track("alexa_embodiment_click",{position:"top right of builder inside dropdown"});const{dev:t,prod:e,scheme:n}=qt.getState().agentDomains,s=ct(l=>`<div id="alexa-embodiment-wrapper">${l}</div>`,"wrapContent");if(!t&&!e){const l=s('<div class="p-4">Agent domain is not set. Cannot provide Alexa features</div>');Ht(l,{},mt.alexa.title,mt.alexa.tooltipTitle);return}const a=t?`${n}://${t}/alexa`:"",i=e?`${n}://${e}/alexa`:"Agent is not deployed yet",r=`(() => {
    document.getElementById('alexa-access-token').value = '';
    document.getElementById('alexa-vendor-id').value = '';
    document.querySelector('#alexa-publish-modal .publish-btn').innerHTML = 'Publish';
    document.querySelector('#alexa-publish-modal .publish-btn').disabled = false;
    document.getElementById('alexa-publish-modal').classList.add('hidden');
  })()`,o=`<button onclick="(async () => {
    const btn = event.target;
    try {
      // Show loading state
      const spinner = document.createElement('div');
      spinner.className = 'inline-block w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2';
      btn.innerHTML = '';
      btn.appendChild(spinner);
      btn.appendChild(document.createTextNode('Publishing...'));
      btn.disabled = true;

      const accessToken = document.getElementById('alexa-access-token').value;
      const vendorId = document.getElementById('alexa-vendor-id').value;

      const response = await fetch('${a}', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({
          accessToken,
          vendorId
        })
      });

      if (!response.ok) {
        throw new Error('Failed to publish');
      }

      // Show success state
      document.getElementById('alexa-publish-modal').classList.add('hidden');
      successToast('Alexa Skill published successfully');

    } catch (error) {
      console.error(error);
      btn.innerHTML = 'Failed to Publish';
      errorToast('Failed to publish Alexa Skill');
      
      // Reset button after delay
      setTimeout(() => {
        btn.disabled = false;
        btn.innerHTML = 'Publish';
      }, 2000);
    }
  })()"
    class="publish-btn px-4 py-2 text-sm text-white bg-v2-blue rounded-md hover:opacity-75 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2">
    Publish
  </button>`,c=s(`<div class="emb-instructions p-4 flex-row">
        <div class="flex items-center gap-2 mb-4">
          <p class="text-gray-700">Publish your agent as an Alexa Skill. You can publish your skill to the Alexa Skill Store or use it in your own Alexa devices.</p>
        </div>
        <div class="space-x-3 justify-between">
         <div class="space-y-4">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Alexa Dev Endpoint</label>
          <div class="flex items-center gap-2">
            <div class="flex-1 relative">
              <input type="text" 
                id="alexa-dev-url" 
                value="${a}"
                readonly 
                class="w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg bg-gray-50 text-gray-700 text-sm focus:outline-none focus:ring-1 focus:ring-gray-300 overflow-hidden text-ellipsis"
                style="text-overflow: ellipsis; white-space: nowrap;"
              />
              <button onclick="(function(){ 
                  navigator.clipboard.writeText('${a}');
                  successToast('URL copied to clipboard', 'Info');
                })()" 
                class="absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 transition-colors"
                title="Copy URL">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                  <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                </svg>
              </button>
            </div>
          </div>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Alexa Prod Endpoint</label>
          <div class="flex items-center gap-2">
            <div class="flex-1 relative">
              <input type="text" 
                id="alexa-prod-url" 
                value="${i}"
                readonly 
                class="w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg bg-gray-50 text-gray-700 text-sm focus:outline-none focus:ring-1 focus:ring-gray-300 overflow-hidden text-ellipsis"
                style="text-overflow: ellipsis; white-space: nowrap;"
              />
              <button onclick="(function(){ 
                  navigator.clipboard.writeText('${i}');
                  successToast('URL copied to clipboard', 'Info');
                })()" 
                class="absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 transition-colors"
                title="Copy URL">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                  <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                </svg>
              </button>
            </div>
          </div>
        </div>
      </div>
        </div>
        &nbsp;<br />
        <hr />

        <!-- Modal -->
        <div id="alexa-publish-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center">
          <div class="bg-white rounded-lg p-6 w-[500px] max-w-[90%]">
            <div class="flex justify-between items-center mb-6">
              <h3 class="text-xl font-semibold">Publish Alexa Skill</h3>
              <button onclick="${r}" class="text-gray-500 hover:text-gray-700">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
              </button>
            </div>

            <div class="space-y-4">
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Access Token</label>
                <input type="text" id="alexa-access-token" 
                  class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-emerald-500"
                  placeholder="Enter Access Token">
              </div>


              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Vendor ID</label>
                <input type="text" id="alexa-vendor-id" 
                  class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-emerald-500"
                  placeholder="Enter Vendor ID">
              </div>
            </div>

            <div class="mt-6 flex justify-end space-x-3">
              <button onclick="${r}" class="px-4 py-2 text-sm border border-gray-300 rounded-md hover:bg-gray-50">
                Cancel
              </button>
              ${o}
            </div>
          </div>
        </div>
    </div>`);Ht(c,{},mt.alexa.title,mt.alexa.tooltipTitle),qt.subscribe(l=>[l.agentDomains.prod,l.agentDomains.scheme],([l,u])=>{const p=l?`${u}://${l}/alexa`:"Agent is not deployed yet",g=document.querySelector("#alexa-embodiment-wrapper #alexa-prod-url");if(g){g.value=p;const y=g.nextElementSibling;y&&y.setAttribute("onclick",`(function(){ navigator.clipboard.writeText('${p}'); successToast('URL copied to clipboard', 'Info'); })()`)}})}d(Xo,"openAlexaEmbodiment"),ct(Xo,"openAlexaEmbodiment");async function Jo(){const{dev:t,scheme:e}=qt.getState().agentDomains,n=document.querySelector(".modalBox");n&&(n.style.width="600px");let s=document.querySelector("#chatbot-iframe"),a,i={};const r=`${e||"https"}://${t}/chatBot?allowAttachments=true`,o=`chatbot-spinner-${Date.now()}`,c='<span class="mif-refresh text-[#757575] hover:text-[#374151] cursor-pointer flex items-center justify-center w-4 h-4"></span>',l=`<svg class="w-4 h-4 animate-spin cursor-default flex items-center justify-center" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
    <circle cx="12" cy="12" r="10" stroke="#0366d6" stroke-width="4" fill="none"></circle>
    <path fill="none" stroke="white" stroke-width="4" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
  </svg>`;(!s||s.src!=r)&&(a=`
      <div class="p-4 h-full">
        <div class="flex items-center gap-2">
          <p class="text-gray-700">${mt.chat.description}</p>
        </div>
        <div id="${o}" class="flex items-center justify-center" style="height: calc(100% - 3rem);">
        <div role="status">
          <svg class="w-4 h-4 animate-spin" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <circle cx="12" cy="12" r="10" stroke="#0366d6" stroke-width="4" fill="none"></circle>
            <path  fill="none" stroke="white" stroke-width="4" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
          </svg>
          <span class="sr-only">Loading...</span>
        </div>
      </div>
        <iframe src="${r}" id="chatbot-iframe" frameborder="0" style="width:100%;height:calc(100% - 2rem);"></iframe>
      </div>
    `,i={Refresh:{click:async p=>{const g=document.querySelector(".refresh-chat-btn"),y=document.querySelector("#chatbot-iframe");if(y&&g&&!g.classList.contains("loading")){g.classList.add("loading"),g.style.pointerEvents="none",g.style.opacity="0.7",g.innerHTML=l;const w=ct(()=>{g.innerHTML=c,g.classList.remove("loading"),g.style.pointerEvents="auto",g.style.opacity="1",y.removeEventListener("load",w)},"onLoad");y.addEventListener("load",w),y.src+=""}},label:`<span class="refresh-chat-btn loading flex items-center justify-center w-4 h-4" style="pointer-events: none; opacity: 0.7;">${l}</span>`,tooltip:"Refresh chat session",tooltipPlacement:"left"}}),await Ht(a,i,mt.chat.title,mt.chat.tooltipTitle),s=document.querySelector("#chatbot-iframe");const u=document.getElementById(o);s&&s.addEventListener("load",async()=>{u&&u.style.setProperty("display","none","important"),s.style.display="block";const p=document.querySelector(".refresh-chat-btn");p&&(p.innerHTML=c,p.classList.remove("loading"),p.style.pointerEvents="auto",p.style.opacity="1"),await je(200),ot.debugger.stopDebugSession(),Ba.send({function:"attachHeaders",args:[{"X-MONITOR-ID":window.currentMonitorId}]},["chatbot"])})}d(Jo,"openChatbotEmbodiment"),ct(Jo,"openChatbotEmbodiment");async function Zo(){const{dev:t,scheme:e}=qt.getState().agentDomains;console.log("test domain found,",t,"Store:",qt.getState());const n=document.querySelector(".modalBox");n&&(n.style.width="800px");let s=`${e||"https"}://${t}/swagger`;const a=`swagger-spinner-${Date.now()}`,i=`
    <div class="p-4 h-full">
      <div class="flex items-center gap-2 mb-4">
        <p class="text-gray-700">${mt.api.description}</p>
      </div>
      <div id="${a}" class="flex items-center justify-center" style="height: calc(100% - 3rem);">
        <div role="status">
          <svg class="w-4 h-4 animate-spin" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <circle cx="12" cy="12" r="10" stroke="#0366d6" stroke-width="4" fill="none"></circle>
            <path  fill="none" stroke="white" stroke-width="4" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
          </svg>
          <span class="sr-only">Loading...</span>
        </div>
      </div>
      <iframe src="${s}" id="swagger-iframe" frameborder="0" style="width:100%;height:calc(100% - 3rem);display:none;"></iframe>
    </div>
  `;await Ht(i,{},mt.api.title,mt.api.tooltipTitle);const r=document.querySelector("#swagger-iframe"),o=document.getElementById(a);r&&r.addEventListener("load",async()=>{o&&o.style.setProperty("display","none","important"),r.style.display="block",await je(200),Ba.send({function:"attachHeaders",args:[{"X-MONITOR-ID":window.currentMonitorId}]},["swagger"])})}d(Zo,"openAPIEmbodiment"),ct(Zo,"openAPIEmbodiment");async function Qo(){_t.track("mcp_embodiment_click",{position:"top right of builder inside dropdown"});const{dev:t,prod:e,scheme:n}=qt.getState().agentDomains,s=ct(o=>`<div id="mcp-embodiment-wrapper">${o}</div>`,"wrapContent");if(!t){const o=s('<div class="p-4">Agent domain is not set. Cannot provide MCP features</div>');Ht(o,{},mt.mcp.title,mt.mcp.tooltipTitle);return}const a=`${n}://${t}/emb/mcp/sse`;let i="Agent is not deployed yet";e&&(i=`${n}://${e}/emb/mcp/sse`);const r=s(`
    <div class="emb-instructions p-4 flex-row">
      <div class="flex items-center gap-2 mb-4">
        <p class="text-gray-700">Turn your agents into an MCP server, ready to integrate and ship with one click.</p>
      </div>
      <div class="space-y-4">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">MCP Dev URL</label>
          <div class="flex items-center gap-2">
            <div class="flex-1 relative">
              <input type="text" 
                id="mcp-dev-url" 
                value="${a}"
                readonly 
                class="w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg bg-gray-50 text-gray-700 text-sm focus:outline-none focus:ring-1 focus:ring-gray-300 overflow-hidden text-ellipsis"
                style="text-overflow: ellipsis; white-space: nowrap;"
              />
              <button onclick="(function(){ 
                  navigator.clipboard.writeText('${a}');
                  successToast('URL copied to clipboard', 'Info');
                })()" 
                class="absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 transition-colors"
                title="Copy URL">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                  <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                </svg>
              </button>
            </div>
          </div>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">MCP Prod URL</label>
          <div class="flex items-center gap-2">
            <div class="flex-1 relative">
              <input type="text" 
                id="mcp-prod-url" 
                value="${i}"
                readonly 
                class="w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg bg-gray-50 text-gray-700 text-sm focus:outline-none focus:ring-1 focus:ring-gray-300 overflow-hidden text-ellipsis"
                style="text-overflow: ellipsis; white-space: nowrap;"
              />
              <button onclick="(function(){ 
                  navigator.clipboard.writeText('${i}');
                  successToast('URL copied to clipboard', 'Info');
                })()" 
                class="absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 transition-colors"
                title="Copy URL">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                  <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                </svg>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  `);Ht(r,{},mt.mcp.title,mt.mcp.tooltipTitle),qt.subscribe(o=>[o.agentDomains.prod,o.agentDomains.scheme],([o,c])=>{const l=`${c}://${o}/emb/mcp/sse`,u=document.querySelector("#mcp-embodiment-wrapper #mcp-prod-url");if(u){u.value=l;const p=u.nextElementSibling;p&&p.setAttribute("onclick",`(function(){ navigator.clipboard.writeText('${l}'); successToast('URL copied to clipboard', 'Info'); })()`)}})}d(Qo,"openMCPEmbodiment"),ct(Qo,"openMCPEmbodiment");async function Qm(){const t=document.querySelector(".modalBox");t&&(t.style.width="800px");const e="skill-preview-sidebar-root",n=`
    <div class="p-4 h-full">
      <div id="${e}"></div>
    </div>`;await Ht(n,{},mt.agent_skill.title,mt.agent_skill.tooltipTitle),cl({rootID:e})}d(Qm,"re"),ct(Qm,"openFormPreviewEmbodiment");function e0(t){const e=new URL(t).searchParams.get("v"),n=`
        <iframe width="100%" height="320" src="${e?`https://www.youtube.com/embed/${e}`:t}" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        `;Wi("",n,{Close:{class:"border border-gray-700 hover:opacity-75",handler:()=>{}},"Open in new tab":{class:"text-white bg-v2-blue",handler:()=>{window.open(t,"_blank")}}})}d(e0,"le"),ct(e0,"openVideoTutorialDialog");function Au(t){t&&document.querySelectorAll(".builder-topbar-agent-name")?.forEach(e=>{e.textContent=t})}d(Au,"updateBuilderTopbarAgentName"),ct(Au,"updateBuilderTopbarAgentName");function _u(t="A"){document.querySelectorAll(".agent-avatar-placeholder-topbar")?.forEach(e=>{e.textContent=t?.charAt(0)?.toLocaleUpperCase()||"A"})}d(_u,"updateBuilderTopbarAgentAvatar"),ct(_u,"updateBuilderTopbarAgentAvatar");async function t0(){const t=new URLSearchParams({page:"1",limit:"30",sortField:"createdAt",order:"desc",search:""});try{const e=await fetch(`/api/page/agents/agents?${t.toString()}`),{agents:n}=await e.json();return n.filter(s=>s?.id!==ot?.agent?.id&&!s?.id.startsWith("model-"))}catch(e){return console.error("Error fetching recent agents:",e),[]}}d(t0,"ce"),ct(t0,"fetchRecentAgents");function n0(){const t=document.querySelector(".new-agent-btn");let e=!1;t?.addEventListener("mouseenter",async()=>{if(e)return;const n=document.getElementById("recent-agents-dropdown");if(!n)return;const s=await t0();if(s.length===0){n.innerHTML=`
        <div class="text-sm text-gray-500 text-center py-2">
          No recent agents found
        </div>
      `;return}const a=ct(r=>r.aiAgentSettings?.find(o=>o.key==="avatar")?.value,"getAgentAvatar"),i=s.map(r=>`
      <a href="/builder/${r.id}" target="_blank" class="block p-2 hover:bg-gray-200 rounded-lg transition-colors bg-gray-50 border border-solid border-gray-200">
        <div class="flex items-center gap-2">
          ${a(r)?`<img src="${a(r)}" alt="${r.name}" class="w-8 h-8 rounded-full">`:`<div class="w-8 h-8 rounded-full bg-emerald-100 flex items-center justify-center text-emerald-600 font-medium">
                ${r.name?.charAt(0)?.toUpperCase()}
              </div>`}
          <div class="min-w-0 flex-1">
            <div class="text-gray-900 truncate max-w-[200px]" title="${r.name}">${r.name}</div>
            <div class="text-xs text-gray-500 truncate max-w-[200px]" ${(()=>{const o=r.contributors?.[0]?.user?.name,c=r.contributors?.[0]?.user?.email,l=o||c||"Unknown",u=l.includes("@")?l.split("@")[0]:l;return`title="${l}">by ${u}`})()}</div>
          </div>
        </div>
      </a>
    `).join("");n.innerHTML=i,e=!0})}d(n0,"de"),ct(n0,"initializeRecentAgentsDropdown");async function s0(t,e){try{if(!(await fetch("/api/agent/request-access",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({agentId:t,email:e})})).ok)throw new Error("Failed to request access. Please try again later.");window.location.href="/"}catch(n){throw new Error(n.message||"An error occurred requesting access")}}d(s0,"me"),ct(s0,"requestAgentAccess"),zb({openEmbodimentDialog:Ht,openChatGPTEmbodiment:Ko,openPostmanEmbodiment:Yo,openChatbotEmbodiment:Jo,openAPIEmbodiment:Zo,openFormPreviewEmbodiment:Qm,openAlexaEmbodiment:Xo,openMCPEmbodiment:Qo});export{Zo as openAPIEmbodiment,Xo as openAlexaEmbodiment,Ko as openChatGPTEmbodiment,Jo as openChatbotEmbodiment,Ht as openEmbodimentDialog,Qo as openMCPEmbodiment,Yo as openPostmanEmbodiment,Gm as setupAgentScripts,_u as updateBuilderTopbarAgentAvatar,Au as updateBuilderTopbarAgentName};
//# sourceMappingURL=agent-settings-e9c2eec3.dev.js.map
