<div class="relative">
  <button
    type="button"
    class="flex text-sm rounded-full"
    id="user-menu-button"
    aria-expanded="false"
    data-dropdown-toggle="<%= dropdownId %>"
    data-dropdown-placement="bottom"
  >
    <span class="sr-only">Open user menu</span>
    <% if (user?.picture) { %>
    <img
      class="w-8 h-8 rounded-full"
      src="<%= user.picture %>"
      alt="user photo"
      onerror="this.onerror=null;this.src='/img/user_default.svg';"
    />
    <% } else { %>
    <div
      class="bg-uipink rounded-full w-8 h-8 flex items-center justify-center text-white font-medium text-xl"
    >
      <%= (user?.name || user?.email || 'A').charAt(0).toLocaleUpperCase() %>
    </div>
    <% } %>
  </button>

  <div
    class="hidden absolute right-0 z-50 mt-2 w-48 text-base text-left list-none bg-white divide-y divide-gray-100 rounded-lg shadow"
    id="<%= dropdownId %>"
  >
    <div class="px-4 pt-3 pb-1">
      <span class="block text-sm text-gray-900"><%= user?.name %></span>
      <span class="block text-sm text-gray-500 truncate"><%= user?.email %></span>
    </div>
    <ul class="block pb-2">
      <% profilePages?.forEach(page => { %>
      <li class="block w-full hover:bg-gray-100">
        <a href="<%= page.url %>" class="block px-4 py-2 text-sm text-gray-700"><%= page.name %></a>
      </li>
      <% }) %>
      <li class="block w-full hover:bg-gray-100">
        <a href="/logto/sign-out" class="block px-4 py-2 text-sm text-gray-700">Sign out</a>
      </li>
    </ul>
  </div>
</div>
